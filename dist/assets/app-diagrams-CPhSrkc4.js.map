{"version":3,"file":"app-diagrams-CPhSrkc4.js","sources":["../../src/components/SpanDiagram.jsx"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  formatFeetInchesTickMarks,\n  formatFeetInchesVerbose,\n} from \"../utils/calculations\";\nimport useAppStore from \"../utils/store\";\n\nexport default function SpanDiagram({\n  attachFt,\n  midspanFt,\n  spanFt,\n  groundTargetFt,\n}) {\n  const { useTickMarkFormat } = useAppStore();\n  const fmt = useTickMarkFormat\n    ? formatFeetInchesTickMarks\n    : formatFeetInchesVerbose;\n  const fmtOrDash = (v) => (v == null ? \"—\" : fmt(v));\n  const width = 600;\n  const height = 260;\n  const margin = { top: 10, right: 20, bottom: 30, left: 40 };\n  const innerW = width - margin.left - margin.right;\n  const innerH = height - margin.top - margin.bottom;\n\n  const maxH = Math.max(\n    attachFt || 0,\n    (midspanFt || 0) + 5,\n    groundTargetFt || 0,\n    10,\n  );\n  const minH = 0;\n  const yScale = (v) => innerH - ((v - minH) / (maxH - minH)) * innerH;\n  const xScale = (v) => (v / Math.max(1, spanFt || 1)) * innerW;\n\n  const points = [];\n  const steps = 32;\n  for (let i = 0; i <= steps; i++) {\n    const t = i / steps;\n    const x = t * (spanFt || 0);\n    // simple parabola through (0, attach), (L/2, mid), (L, attach)\n    const L = spanFt || 0;\n    const y0 = attachFt || 0;\n    const ym = midspanFt || y0;\n    // Quadratic interpolation\n    const a = (4 * (ym - y0)) / (L * L || 1);\n    const y = y0 + a * (x * (x - L));\n    points.push({ x: xScale(x), y: yScale(y) });\n  }\n\n  const pathD = points\n    .map((p, i) => `${i === 0 ? \"M\" : \"L\"} ${p.x.toFixed(1)} ${p.y.toFixed(1)}`)\n    .join(\" \");\n\n  return (\n    <svg width={width} height={height} className=\"border rounded bg-white\">\n      <g transform={`translate(${margin.left},${margin.top})`}>\n        {/* ground line */}\n        <line\n          x1={0}\n          x2={innerW}\n          y1={yScale(0)}\n          y2={yScale(0)}\n          stroke=\"#999\"\n          strokeDasharray=\"4 4\"\n        />\n        {/* ground clearance target */}\n        <line\n          x1={0}\n          x2={innerW}\n          y1={yScale(groundTargetFt || 0)}\n          y2={yScale(groundTargetFt || 0)}\n          stroke=\"#16a34a\"\n          strokeDasharray=\"6 4\"\n        />\n        {/* cable sag curve */}\n        <path d={pathD} fill=\"none\" stroke=\"#2563eb\" strokeWidth={2} />\n        {/* endpoints */}\n        <circle\n          cx={xScale(0)}\n          cy={yScale(attachFt || 0)}\n          r={3}\n          fill=\"#2563eb\"\n        />\n        <circle\n          cx={xScale(spanFt || 0)}\n          cy={yScale(attachFt || 0)}\n          r={3}\n          fill=\"#2563eb\"\n        />\n        {/* labels */}\n        <text x={0} y={yScale(attachFt || 0) - 6} fontSize={10} fill=\"#1f2937\">\n          Attach {fmtOrDash(attachFt)}\n        </text>\n        <text\n          x={innerW / 2}\n          y={yScale(midspanFt || 0) - 6}\n          fontSize={10}\n          textAnchor=\"middle\"\n          fill=\"#1f2937\"\n        >\n          Mid {fmtOrDash(midspanFt)}\n        </text>\n        <text\n          x={innerW - 2}\n          y={yScale(groundTargetFt || 0) - 4}\n          fontSize={10}\n          textAnchor=\"end\"\n          fill=\"#16a34a\"\n        >\n          Ground target {fmtOrDash(groundTargetFt)}\n        </text>\n        {/* axis ticks minimal */}\n        <text x={0} y={innerH + 16} fontSize={10} fill=\"#6b7280\">\n          0 ft\n        </text>\n        <text x={innerW - 24} y={innerH + 16} fontSize={10} fill=\"#6b7280\">\n          {spanFt != null ? spanFt : \"—\"} ft\n        </text>\n      </g>\n    </svg>\n  );\n}\n\nSpanDiagram.propTypes = {\n  attachFt: PropTypes.number,\n  midspanFt: PropTypes.number,\n  spanFt: PropTypes.number,\n  groundTargetFt: PropTypes.number,\n};\n\nSpanDiagram.defaultProps = {\n  attachFt: undefined,\n  midspanFt: undefined,\n  spanFt: undefined,\n  groundTargetFt: undefined,\n};\n"],"names":["SpanDiagram","attachFt","midspanFt","spanFt","groundTargetFt","useTickMarkFormat","useAppStore","fmt","formatFeetInchesTickMarks","formatFeetInchesVerbose","fmtOrDash","v","width","height","margin","innerW","innerH","maxH","minH","yScale","xScale","points","steps","i","x","L","y0","a","y","pathD","p","jsx","jsxs","PropTypes"],"mappings":"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"}