{"version":3,"file":"index-XDGGid58.js","sources":["../../src/App.jsx","../../src/routes/ContentPage.jsx","../../src/main.jsx"],"sourcesContent":["import React from \"react\";\nimport LazyProposedLineCalculator from \"./components/LazyProposedLineCalculator\";\nimport JobSetup from \"./components/JobSetup\";\n\nexport default function App() {\n  return (\n    <div\n      style={{\n        background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\n        minHeight: \"100vh\",\n        color: \"white\",\n        padding: \"20px\",\n      }}\n    >\n      <h1 style={{ fontSize: \"32px\", marginBottom: \"20px\" }}>\n        üèóÔ∏è OSP Engineering & Permit Management\n      </h1>\n      <div\n        style={{\n          background: \"rgba(255,255,255,0.1)\",\n          padding: \"15px\",\n          borderRadius: \"8px\",\n          marginBottom: \"20px\",\n        }}\n      >\n        <p>System Status: ‚úÖ Application Loading Successfully</p>\n        <p>React Version: {React.version}</p>\n      </div>\n      <div className=\"safe-pt safe-pb\">\n        <div className=\"mx-auto max-w-6xl px-3 md:px-6 py-3 md:py-4 break-anywhere\">\n          <JobSetup />\n          <div className=\"h-3\" />\n          <LazyProposedLineCalculator />\n        </div>\n      </div>\n    </div>\n  );\n}\n","// @ts-nocheck\n\nimport React from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { setPageMeta } from \"../utils/meta\";\n\nfunction HeroSection({ section }) {\n  const bg = section.backgroundImage\n    ? `url(${section.backgroundImage})`\n    : \"linear-gradient(135deg,#0ea5e9,#6366f1)\";\n  return (\n    <section style={{ background: bg, color: \"white\", padding: \"48px 16px\" }}>\n      <div className=\"max-w-5xl mx-auto\">\n        <h1 style={{ fontSize: 36, fontWeight: 800 }}>\n          {section.title || \"Welcome\"}\n        </h1>\n        {section.subtitle && (\n          <p style={{ marginTop: 8, opacity: 0.9 }}>{section.subtitle}</p>\n        )}\n        {section.ctaUrl && (\n          <Link\n            to={section.ctaUrl}\n            style={{\n              display: \"inline-block\",\n              marginTop: 16,\n              background: \"#22c55e\",\n              color: \"#0b1220\",\n              padding: \"10px 14px\",\n              borderRadius: 8,\n              fontWeight: 600,\n            }}\n          >\n            {section.ctaLabel || \"Get Started\"}\n          </Link>\n        )}\n      </div>\n    </section>\n  );\n}\n\nfunction RichTextSection({ section }) {\n  return (\n    <section className=\"max-w-5xl mx-auto px-4 py-8\">\n      <div style={{ whiteSpace: \"pre-wrap\" }}>{section.content}</div>\n    </section>\n  );\n}\n\nfunction FeatureSection({ section }) {\n  const items = section.features || [];\n  return (\n    <section className=\"max-w-5xl mx-auto px-4 py-8\">\n      <h2 style={{ fontSize: 24, fontWeight: 700, marginBottom: 16 }}>\n        {section.heading || \"Features\"}\n      </h2>\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        {items.map((f, i) => (\n          <div\n            key={i}\n            className=\"rounded-lg border border-slate-200 p-4 bg-white\"\n          >\n            <div style={{ fontWeight: 700 }}>{f.title}</div>\n            <div style={{ opacity: 0.9, marginTop: 6 }}>{f.text}</div>\n          </div>\n        ))}\n      </div>\n    </section>\n  );\n}\n\nfunction CtaSection({ section }) {\n  return (\n    <section className=\"max-w-4xl mx-auto px-4 py-10 text-center\">\n      <div style={{ fontSize: 20 }}>{section.text}</div>\n      {section.buttonUrl && (\n        <Link\n          to={section.buttonUrl}\n          style={{\n            display: \"inline-block\",\n            marginTop: 16,\n            background: \"#0ea5e9\",\n            color: \"#042f2e\",\n            padding: \"10px 14px\",\n            borderRadius: 8,\n            fontWeight: 700,\n          }}\n        >\n          {section.buttonLabel || \"Continue\"}\n        </Link>\n      )}\n    </section>\n  );\n}\n\nconst sectionRenderer = {\n  HeroSection,\n  RichTextSection,\n  FeatureSection,\n  CtaSection,\n};\n\n// Eagerly import all content pages so routes work in production builds\nconst pages = import.meta.glob(\"../../content/pages/*.json\", {\n  eager: true,\n  import: \"default\",\n});\n\nfunction getPageBySlug(slug) {\n  const key = Object.keys(pages).find((k) => k.endsWith(`/${slug}.json`));\n  return key ? pages[key] : null;\n}\n\nexport default function ContentPage({ slug: propSlug }) {\n  const params = useParams();\n  const slug = propSlug || params.slug || \"home\";\n  const page = getPageBySlug(slug);\n\n  if (!page) {\n    return (\n      <section\n        className=\"max-w-4xl mx-auto px-4 py-10\"\n        aria-labelledby=\"nf-title\"\n      >\n        <h1 id=\"nf-title\" style={{ fontSize: 28, fontWeight: 800 }}>\n          Page not found\n        </h1>\n        <p className=\"mt-2\">\n          We couldn‚Äôt find the requested page. Try the{\" \"}\n          <Link to=\"/\">home page</Link> or launch the{\" \"}\n          <Link to=\"/app\">PolePlan Pro</Link>.\n        </p>\n      </section>\n    );\n  }\n\n  const sections = page.sections || [];\n  setPageMeta({\n    title: page.title || \"Pole Plan Pro\",\n    description: page.seoDescription,\n  });\n  return (\n    <>\n      {sections.map((s, i) => {\n        const Type = sectionRenderer[s.type] || RichTextSection;\n        return <Type key={i} section={s} />;\n      })}\n      <section className=\"max-w-5xl mx-auto px-4 py-10\">\n        <Link\n          to=\"/app\"\n          style={{\n            display: \"inline-block\",\n            background: \"#22c55e\",\n            color: \"#0b1220\",\n            padding: \"10px 14px\",\n            borderRadius: 8,\n            fontWeight: 700,\n          }}\n        >\n          Launch PolePlan Pro\n        </Link>\n      </section>\n    </>\n  );\n}\n","/// <reference types=\"vite/client\" />\nimport { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport \"./index.css\";\nimport App from \"./App.jsx\";\n// @ts-ignore - allow jsx resolution in JS project\nimport ErrorBoundary from \"./components/ErrorBoundary.jsx\";\nimport { createBrowserRouter, RouterProvider } from \"react-router-dom\";\nimport ContentPage from \"./routes/ContentPage.jsx\";\nimport SiteChrome from \"./components/SiteChrome.jsx\";\n\nconst container = document.getElementById(\"root\");\nif (!container) throw new Error(\"Root element not found\");\n\nconst router = createBrowserRouter([\n  { path: \"/\", element: <App /> },\n  { path: \"/home\", element: <ContentPage slug=\"home\" /> },\n  { path: \"/:slug\", element: <ContentPage /> },\n]);\n\ncreateRoot(container).render(\n  <StrictMode>\n    <ErrorBoundary>\n      <SiteChrome>\n        <RouterProvider router={router} />\n      </SiteChrome>\n    </ErrorBoundary>\n  </StrictMode>,\n);\n\n// Register service worker and show a user-facing update toast when a new version is available\nconst swEnabled = import.meta.env?.VITE_ENABLE_SW === \"true\";\nif (\n  import.meta.env &&\n  import.meta.env.PROD &&\n  swEnabled &&\n  \"serviceWorker\" in navigator\n) {\n  const showUpdateToast = (reg) => {\n    // Create toast container\n    const container = document.createElement(\"div\");\n    container.setAttribute(\"role\", \"alert\");\n    container.style.cssText = [\n      \"position:fixed\",\n      \"right:16px\",\n      \"bottom:16px\",\n      \"z-index:9999\",\n      \"background:#0f172a\",\n      \"color:#fff\",\n      \"padding:12px 16px\",\n      \"border-radius:8px\",\n      \"box-shadow:0 4px 12px rgba(0,0,0,0.25)\",\n      \"font:14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif\",\n    ].join(\";\");\n    container.innerHTML = `\n      <div style=\"display:flex;align-items:center;gap:12px;max-width:360px\">\n        <span style=\"flex:1\">An update is available. Reload to get the latest version.</span>\n        <button id=\"ph-update-now\" style=\"background:#22c55e;color:#0b1220;border:0;border-radius:6px;padding:6px 10px;cursor:pointer\">Update now</button>\n        <button id=\"ph-update-dismiss\" style=\"background:transparent;color:#93c5fd;border:1px solid #334155;border-radius:6px;padding:6px 10px;cursor:pointer\">Dismiss</button>\n      </div>`;\n    document.body.appendChild(container);\n\n    const cleanup = () => {\n      try {\n        container.remove();\n      } catch (e) {\n        if (import.meta?.env?.DEV) console.warn(\"Cleanup toast failed\", e);\n      }\n    };\n    const updateBtn = container.querySelector(\"#ph-update-now\");\n    const dismissBtn = container.querySelector(\"#ph-update-dismiss\");\n\n    const triggerUpdate = () => {\n      if (!reg.waiting) {\n        cleanup();\n        return;\n      }\n      // Disable buttons to prevent double clicks\n      updateBtn.setAttribute(\"disabled\", \"true\");\n      dismissBtn.setAttribute(\"disabled\", \"true\");\n      try {\n        reg.waiting.postMessage(\"SKIP_WAITING\");\n      } catch (e) {\n        if (import.meta?.env?.DEV)\n          console.warn(\"Failed to postMessage to SW\", e);\n      }\n      const onControllerChange = () => {\n        window.location.reload();\n      };\n      navigator.serviceWorker.addEventListener(\n        \"controllerchange\",\n        onControllerChange,\n        { once: true },\n      );\n      // Safety fallback: reload after short delay if controllerchange didn‚Äôt fire\n      setTimeout(() => {\n        window.location.reload();\n      }, 3000);\n    };\n\n    updateBtn?.addEventListener(\"click\", triggerUpdate);\n    dismissBtn?.addEventListener(\"click\", cleanup);\n  };\n\n  window.addEventListener(\"load\", () => {\n    // Ensure we register at root scope to control the entire app\n    navigator.serviceWorker\n      .register(\"/sw.js\", { scope: \"/\" })\n      .then((reg) => {\n        if (reg.waiting) {\n          showUpdateToast(reg);\n        }\n        reg.addEventListener(\"updatefound\", () => {\n          const sw = reg.installing;\n          if (!sw) return;\n          sw.addEventListener(\"statechange\", () => {\n            if (sw.state === \"installed\" && reg.waiting) {\n              showUpdateToast(reg);\n            }\n          });\n        });\n      })\n      .catch((e) => {\n        if (import.meta?.env?.DEV)\n          console.warn(\"Service worker registration failed\", e);\n      });\n  });\n}\n"],"names":["App","jsxs","jsx","React","JobSetup","LazyProposedLineCalculator","HeroSection","section","bg","Link","RichTextSection","FeatureSection","items","f","i","CtaSection","sectionRenderer","pages","__vite_glob_0_0","getPageBySlug","slug","key","k","ContentPage","propSlug","params","useParams","page","sections","setPageMeta","Fragment","s","Type","container","router","createBrowserRouter","createRoot","StrictMode","ErrorBoundary","SiteChrome","RouterProvider","swEnabled","__vite_import_meta_env__","showUpdateToast","reg","cleanup","updateBtn","dismissBtn","triggerUpdate","onControllerChange","sw","e"],"mappings":"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"}