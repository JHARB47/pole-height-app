{"version":3,"file":"pdf-api-BXmHbbLX.js","sources":["../../node_modules/pdf-lib/es/api/objects.js","../../node_modules/pdf-lib/es/api/rotations.js","../../node_modules/pdf-lib/es/api/operators.js","../../node_modules/pdf-lib/es/api/colors.js","../../node_modules/pdf-lib/es/api/svgPath.js","../../node_modules/pdf-lib/es/api/operations.js","../../node_modules/pdf-lib/es/api/errors.js","../../node_modules/pdf-lib/es/api/text/alignment.js","../../node_modules/pdf-lib/es/api/text/layout.js","../../node_modules/pdf-lib/es/api/form/appearances.js","../../node_modules/pdf-lib/es/api/PDFEmbeddedPage.js","../../node_modules/pdf-lib/es/api/PDFFont.js","../../node_modules/pdf-lib/es/api/PDFImage.js","../../node_modules/pdf-lib/es/api/image/alignment.js","../../node_modules/pdf-lib/es/api/form/PDFField.js","../../node_modules/pdf-lib/es/api/form/PDFCheckBox.js","../../node_modules/pdf-lib/es/api/form/PDFDropdown.js","../../node_modules/pdf-lib/es/api/form/PDFOptionList.js","../../node_modules/pdf-lib/es/api/form/PDFRadioGroup.js","../../node_modules/pdf-lib/es/api/form/PDFSignature.js","../../node_modules/pdf-lib/es/api/form/PDFTextField.js","../../node_modules/pdf-lib/es/api/StandardFonts.js","../../node_modules/pdf-lib/es/api/form/PDFForm.js","../../node_modules/pdf-lib/es/api/sizes.js","../../node_modules/pdf-lib/es/api/PDFDocumentOptions.js","../../node_modules/pdf-lib/es/api/PDFEmbeddedFile.js","../../node_modules/pdf-lib/es/api/PDFJavaScript.js","../../node_modules/pdf-lib/es/api/PDFDocument.js","../../node_modules/pdf-lib/es/api/PDFPageOptions.js","../../node_modules/pdf-lib/es/api/PDFPage.js","../../node_modules/pdf-lib/es/api/form/PDFButton.js"],"sourcesContent":["import { PDFName, PDFNumber } from \"../core\";\nexport var asPDFName = function (name) {\n    return name instanceof PDFName ? name : PDFName.of(name);\n};\nexport var asPDFNumber = function (num) {\n    return num instanceof PDFNumber ? num : PDFNumber.of(num);\n};\nexport var asNumber = function (num) {\n    return num instanceof PDFNumber ? num.asNumber() : num;\n};\n//# sourceMappingURL=objects.js.map","import { assertIs, error } from \"../utils\";\nexport var RotationTypes;\n(function (RotationTypes) {\n    RotationTypes[\"Degrees\"] = \"degrees\";\n    RotationTypes[\"Radians\"] = \"radians\";\n})(RotationTypes || (RotationTypes = {}));\nexport var radians = function (radianAngle) {\n    assertIs(radianAngle, 'radianAngle', ['number']);\n    return { type: RotationTypes.Radians, angle: radianAngle };\n};\nexport var degrees = function (degreeAngle) {\n    assertIs(degreeAngle, 'degreeAngle', ['number']);\n    return { type: RotationTypes.Degrees, angle: degreeAngle };\n};\nvar Radians = RotationTypes.Radians, Degrees = RotationTypes.Degrees;\nexport var degreesToRadians = function (degree) { return (degree * Math.PI) / 180; };\nexport var radiansToDegrees = function (radian) { return (radian * 180) / Math.PI; };\n// prettier-ignore\nexport var toRadians = function (rotation) {\n    return rotation.type === Radians ? rotation.angle\n        : rotation.type === Degrees ? degreesToRadians(rotation.angle)\n            : error(\"Invalid rotation: \" + JSON.stringify(rotation));\n};\n// prettier-ignore\nexport var toDegrees = function (rotation) {\n    return rotation.type === Radians ? radiansToDegrees(rotation.angle)\n        : rotation.type === Degrees ? rotation.angle\n            : error(\"Invalid rotation: \" + JSON.stringify(rotation));\n};\nexport var reduceRotation = function (degreeAngle) {\n    if (degreeAngle === void 0) { degreeAngle = 0; }\n    var quadrants = (degreeAngle / 90) % 4;\n    if (quadrants === 0)\n        return 0;\n    if (quadrants === 1)\n        return 90;\n    if (quadrants === 2)\n        return 180;\n    if (quadrants === 3)\n        return 270;\n    return 0; // `degreeAngle` is not a multiple of 90\n};\nexport var adjustDimsForRotation = function (dims, degreeAngle) {\n    if (degreeAngle === void 0) { degreeAngle = 0; }\n    var rotation = reduceRotation(degreeAngle);\n    return rotation === 90 || rotation === 270\n        ? { width: dims.height, height: dims.width }\n        : { width: dims.width, height: dims.height };\n};\nexport var rotateRectangle = function (rectangle, borderWidth, degreeAngle) {\n    if (borderWidth === void 0) { borderWidth = 0; }\n    if (degreeAngle === void 0) { degreeAngle = 0; }\n    var x = rectangle.x, y = rectangle.y, w = rectangle.width, h = rectangle.height;\n    var r = reduceRotation(degreeAngle);\n    var b = borderWidth / 2;\n    // prettier-ignore\n    if (r === 0)\n        return { x: x - b, y: y - b, width: w, height: h };\n    else if (r === 90)\n        return { x: x - h + b, y: y - b, width: h, height: w };\n    else if (r === 180)\n        return { x: x - w + b, y: y - h + b, width: w, height: h };\n    else if (r === 270)\n        return { x: x - b, y: y - w + b, width: h, height: w };\n    else\n        return { x: x - b, y: y - b, width: w, height: h };\n};\n//# sourceMappingURL=rotations.js.map","import { asNumber, asPDFName, asPDFNumber } from \"./objects\";\nimport { degreesToRadians } from \"./rotations\";\nimport { PDFOperator, PDFOperatorNames as Ops, } from \"../core\";\n/* ==================== Clipping Path Operators ==================== */\nexport var clip = function () { return PDFOperator.of(Ops.ClipNonZero); };\nexport var clipEvenOdd = function () { return PDFOperator.of(Ops.ClipEvenOdd); };\n/* ==================== Graphics State Operators ==================== */\nvar cos = Math.cos, sin = Math.sin, tan = Math.tan;\nexport var concatTransformationMatrix = function (a, b, c, d, e, f) {\n    return PDFOperator.of(Ops.ConcatTransformationMatrix, [\n        asPDFNumber(a),\n        asPDFNumber(b),\n        asPDFNumber(c),\n        asPDFNumber(d),\n        asPDFNumber(e),\n        asPDFNumber(f),\n    ]);\n};\nexport var translate = function (xPos, yPos) {\n    return concatTransformationMatrix(1, 0, 0, 1, xPos, yPos);\n};\nexport var scale = function (xPos, yPos) {\n    return concatTransformationMatrix(xPos, 0, 0, yPos, 0, 0);\n};\nexport var rotateRadians = function (angle) {\n    return concatTransformationMatrix(cos(asNumber(angle)), sin(asNumber(angle)), -sin(asNumber(angle)), cos(asNumber(angle)), 0, 0);\n};\nexport var rotateDegrees = function (angle) {\n    return rotateRadians(degreesToRadians(asNumber(angle)));\n};\nexport var skewRadians = function (xSkewAngle, ySkewAngle) {\n    return concatTransformationMatrix(1, tan(asNumber(xSkewAngle)), tan(asNumber(ySkewAngle)), 1, 0, 0);\n};\nexport var skewDegrees = function (xSkewAngle, ySkewAngle) {\n    return skewRadians(degreesToRadians(asNumber(xSkewAngle)), degreesToRadians(asNumber(ySkewAngle)));\n};\nexport var setDashPattern = function (dashArray, dashPhase) {\n    return PDFOperator.of(Ops.SetLineDashPattern, [\n        \"[\" + dashArray.map(asPDFNumber).join(' ') + \"]\",\n        asPDFNumber(dashPhase),\n    ]);\n};\nexport var restoreDashPattern = function () { return setDashPattern([], 0); };\nexport var LineCapStyle;\n(function (LineCapStyle) {\n    LineCapStyle[LineCapStyle[\"Butt\"] = 0] = \"Butt\";\n    LineCapStyle[LineCapStyle[\"Round\"] = 1] = \"Round\";\n    LineCapStyle[LineCapStyle[\"Projecting\"] = 2] = \"Projecting\";\n})(LineCapStyle || (LineCapStyle = {}));\nexport var setLineCap = function (style) {\n    return PDFOperator.of(Ops.SetLineCapStyle, [asPDFNumber(style)]);\n};\nexport var LineJoinStyle;\n(function (LineJoinStyle) {\n    LineJoinStyle[LineJoinStyle[\"Miter\"] = 0] = \"Miter\";\n    LineJoinStyle[LineJoinStyle[\"Round\"] = 1] = \"Round\";\n    LineJoinStyle[LineJoinStyle[\"Bevel\"] = 2] = \"Bevel\";\n})(LineJoinStyle || (LineJoinStyle = {}));\nexport var setLineJoin = function (style) {\n    return PDFOperator.of(Ops.SetLineJoinStyle, [asPDFNumber(style)]);\n};\nexport var setGraphicsState = function (state) {\n    return PDFOperator.of(Ops.SetGraphicsStateParams, [asPDFName(state)]);\n};\nexport var pushGraphicsState = function () { return PDFOperator.of(Ops.PushGraphicsState); };\nexport var popGraphicsState = function () { return PDFOperator.of(Ops.PopGraphicsState); };\nexport var setLineWidth = function (width) {\n    return PDFOperator.of(Ops.SetLineWidth, [asPDFNumber(width)]);\n};\n/* ==================== Path Construction Operators ==================== */\nexport var appendBezierCurve = function (x1, y1, x2, y2, x3, y3) {\n    return PDFOperator.of(Ops.AppendBezierCurve, [\n        asPDFNumber(x1),\n        asPDFNumber(y1),\n        asPDFNumber(x2),\n        asPDFNumber(y2),\n        asPDFNumber(x3),\n        asPDFNumber(y3),\n    ]);\n};\nexport var appendQuadraticCurve = function (x1, y1, x2, y2) {\n    return PDFOperator.of(Ops.CurveToReplicateInitialPoint, [\n        asPDFNumber(x1),\n        asPDFNumber(y1),\n        asPDFNumber(x2),\n        asPDFNumber(y2),\n    ]);\n};\nexport var closePath = function () { return PDFOperator.of(Ops.ClosePath); };\nexport var moveTo = function (xPos, yPos) {\n    return PDFOperator.of(Ops.MoveTo, [asPDFNumber(xPos), asPDFNumber(yPos)]);\n};\nexport var lineTo = function (xPos, yPos) {\n    return PDFOperator.of(Ops.LineTo, [asPDFNumber(xPos), asPDFNumber(yPos)]);\n};\n/**\n * @param xPos x coordinate for the lower left corner of the rectangle\n * @param yPos y coordinate for the lower left corner of the rectangle\n * @param width width of the rectangle\n * @param height height of the rectangle\n */\nexport var rectangle = function (xPos, yPos, width, height) {\n    return PDFOperator.of(Ops.AppendRectangle, [\n        asPDFNumber(xPos),\n        asPDFNumber(yPos),\n        asPDFNumber(width),\n        asPDFNumber(height),\n    ]);\n};\n/**\n * @param xPos x coordinate for the lower left corner of the square\n * @param yPos y coordinate for the lower left corner of the square\n * @param size width and height of the square\n */\nexport var square = function (xPos, yPos, size) {\n    return rectangle(xPos, yPos, size, size);\n};\n/* ==================== Path Painting Operators ==================== */\nexport var stroke = function () { return PDFOperator.of(Ops.StrokePath); };\nexport var fill = function () { return PDFOperator.of(Ops.FillNonZero); };\nexport var fillAndStroke = function () { return PDFOperator.of(Ops.FillNonZeroAndStroke); };\nexport var endPath = function () { return PDFOperator.of(Ops.EndPath); };\n/* ==================== Text Positioning Operators ==================== */\nexport var nextLine = function () { return PDFOperator.of(Ops.NextLine); };\nexport var moveText = function (x, y) {\n    return PDFOperator.of(Ops.MoveText, [asPDFNumber(x), asPDFNumber(y)]);\n};\n/* ==================== Text Showing Operators ==================== */\nexport var showText = function (text) {\n    return PDFOperator.of(Ops.ShowText, [text]);\n};\n/* ==================== Text State Operators ==================== */\nexport var beginText = function () { return PDFOperator.of(Ops.BeginText); };\nexport var endText = function () { return PDFOperator.of(Ops.EndText); };\nexport var setFontAndSize = function (name, size) { return PDFOperator.of(Ops.SetFontAndSize, [asPDFName(name), asPDFNumber(size)]); };\nexport var setCharacterSpacing = function (spacing) {\n    return PDFOperator.of(Ops.SetCharacterSpacing, [asPDFNumber(spacing)]);\n};\nexport var setWordSpacing = function (spacing) {\n    return PDFOperator.of(Ops.SetWordSpacing, [asPDFNumber(spacing)]);\n};\n/** @param squeeze horizontal character spacing */\nexport var setCharacterSqueeze = function (squeeze) {\n    return PDFOperator.of(Ops.SetTextHorizontalScaling, [asPDFNumber(squeeze)]);\n};\nexport var setLineHeight = function (lineHeight) {\n    return PDFOperator.of(Ops.SetTextLineHeight, [asPDFNumber(lineHeight)]);\n};\nexport var setTextRise = function (rise) {\n    return PDFOperator.of(Ops.SetTextRise, [asPDFNumber(rise)]);\n};\nexport var TextRenderingMode;\n(function (TextRenderingMode) {\n    TextRenderingMode[TextRenderingMode[\"Fill\"] = 0] = \"Fill\";\n    TextRenderingMode[TextRenderingMode[\"Outline\"] = 1] = \"Outline\";\n    TextRenderingMode[TextRenderingMode[\"FillAndOutline\"] = 2] = \"FillAndOutline\";\n    TextRenderingMode[TextRenderingMode[\"Invisible\"] = 3] = \"Invisible\";\n    TextRenderingMode[TextRenderingMode[\"FillAndClip\"] = 4] = \"FillAndClip\";\n    TextRenderingMode[TextRenderingMode[\"OutlineAndClip\"] = 5] = \"OutlineAndClip\";\n    TextRenderingMode[TextRenderingMode[\"FillAndOutlineAndClip\"] = 6] = \"FillAndOutlineAndClip\";\n    TextRenderingMode[TextRenderingMode[\"Clip\"] = 7] = \"Clip\";\n})(TextRenderingMode || (TextRenderingMode = {}));\nexport var setTextRenderingMode = function (mode) {\n    return PDFOperator.of(Ops.SetTextRenderingMode, [asPDFNumber(mode)]);\n};\nexport var setTextMatrix = function (a, b, c, d, e, f) {\n    return PDFOperator.of(Ops.SetTextMatrix, [\n        asPDFNumber(a),\n        asPDFNumber(b),\n        asPDFNumber(c),\n        asPDFNumber(d),\n        asPDFNumber(e),\n        asPDFNumber(f),\n    ]);\n};\nexport var rotateAndSkewTextRadiansAndTranslate = function (rotationAngle, xSkewAngle, ySkewAngle, x, y) {\n    return setTextMatrix(cos(asNumber(rotationAngle)), sin(asNumber(rotationAngle)) + tan(asNumber(xSkewAngle)), -sin(asNumber(rotationAngle)) + tan(asNumber(ySkewAngle)), cos(asNumber(rotationAngle)), x, y);\n};\nexport var rotateAndSkewTextDegreesAndTranslate = function (rotationAngle, xSkewAngle, ySkewAngle, x, y) {\n    return rotateAndSkewTextRadiansAndTranslate(degreesToRadians(asNumber(rotationAngle)), degreesToRadians(asNumber(xSkewAngle)), degreesToRadians(asNumber(ySkewAngle)), x, y);\n};\n/* ==================== XObject Operator ==================== */\nexport var drawObject = function (name) {\n    return PDFOperator.of(Ops.DrawObject, [asPDFName(name)]);\n};\n/* ==================== Color Operators ==================== */\nexport var setFillingGrayscaleColor = function (gray) {\n    return PDFOperator.of(Ops.NonStrokingColorGray, [asPDFNumber(gray)]);\n};\nexport var setStrokingGrayscaleColor = function (gray) {\n    return PDFOperator.of(Ops.StrokingColorGray, [asPDFNumber(gray)]);\n};\nexport var setFillingRgbColor = function (red, green, blue) {\n    return PDFOperator.of(Ops.NonStrokingColorRgb, [\n        asPDFNumber(red),\n        asPDFNumber(green),\n        asPDFNumber(blue),\n    ]);\n};\nexport var setStrokingRgbColor = function (red, green, blue) {\n    return PDFOperator.of(Ops.StrokingColorRgb, [\n        asPDFNumber(red),\n        asPDFNumber(green),\n        asPDFNumber(blue),\n    ]);\n};\nexport var setFillingCmykColor = function (cyan, magenta, yellow, key) {\n    return PDFOperator.of(Ops.NonStrokingColorCmyk, [\n        asPDFNumber(cyan),\n        asPDFNumber(magenta),\n        asPDFNumber(yellow),\n        asPDFNumber(key),\n    ]);\n};\nexport var setStrokingCmykColor = function (cyan, magenta, yellow, key) {\n    return PDFOperator.of(Ops.StrokingColorCmyk, [\n        asPDFNumber(cyan),\n        asPDFNumber(magenta),\n        asPDFNumber(yellow),\n        asPDFNumber(key),\n    ]);\n};\n/* ==================== Marked Content Operators ==================== */\nexport var beginMarkedContent = function (tag) {\n    return PDFOperator.of(Ops.BeginMarkedContent, [asPDFName(tag)]);\n};\nexport var endMarkedContent = function () { return PDFOperator.of(Ops.EndMarkedContent); };\n//# sourceMappingURL=operators.js.map","import { setFillingCmykColor, setFillingGrayscaleColor, setFillingRgbColor, setStrokingCmykColor, setStrokingGrayscaleColor, setStrokingRgbColor, } from \"./operators\";\nimport { assertRange, error } from \"../utils\";\nexport var ColorTypes;\n(function (ColorTypes) {\n    ColorTypes[\"Grayscale\"] = \"Grayscale\";\n    ColorTypes[\"RGB\"] = \"RGB\";\n    ColorTypes[\"CMYK\"] = \"CMYK\";\n})(ColorTypes || (ColorTypes = {}));\nexport var grayscale = function (gray) {\n    assertRange(gray, 'gray', 0.0, 1.0);\n    return { type: ColorTypes.Grayscale, gray: gray };\n};\nexport var rgb = function (red, green, blue) {\n    assertRange(red, 'red', 0, 1);\n    assertRange(green, 'green', 0, 1);\n    assertRange(blue, 'blue', 0, 1);\n    return { type: ColorTypes.RGB, red: red, green: green, blue: blue };\n};\nexport var cmyk = function (cyan, magenta, yellow, key) {\n    assertRange(cyan, 'cyan', 0, 1);\n    assertRange(magenta, 'magenta', 0, 1);\n    assertRange(yellow, 'yellow', 0, 1);\n    assertRange(key, 'key', 0, 1);\n    return { type: ColorTypes.CMYK, cyan: cyan, magenta: magenta, yellow: yellow, key: key };\n};\nvar Grayscale = ColorTypes.Grayscale, RGB = ColorTypes.RGB, CMYK = ColorTypes.CMYK;\n// prettier-ignore\nexport var setFillingColor = function (color) {\n    return color.type === Grayscale ? setFillingGrayscaleColor(color.gray)\n        : color.type === RGB ? setFillingRgbColor(color.red, color.green, color.blue)\n            : color.type === CMYK ? setFillingCmykColor(color.cyan, color.magenta, color.yellow, color.key)\n                : error(\"Invalid color: \" + JSON.stringify(color));\n};\n// prettier-ignore\nexport var setStrokingColor = function (color) {\n    return color.type === Grayscale ? setStrokingGrayscaleColor(color.gray)\n        : color.type === RGB ? setStrokingRgbColor(color.red, color.green, color.blue)\n            : color.type === CMYK ? setStrokingCmykColor(color.cyan, color.magenta, color.yellow, color.key)\n                : error(\"Invalid color: \" + JSON.stringify(color));\n};\n// prettier-ignore\nexport var componentsToColor = function (comps, scale) {\n    if (scale === void 0) { scale = 1; }\n    return ((comps === null || comps === void 0 ? void 0 : comps.length) === 1 ? grayscale(comps[0] * scale)\n        : (comps === null || comps === void 0 ? void 0 : comps.length) === 3 ? rgb(comps[0] * scale, comps[1] * scale, comps[2] * scale)\n            : (comps === null || comps === void 0 ? void 0 : comps.length) === 4 ? cmyk(comps[0] * scale, comps[1] * scale, comps[2] * scale, comps[3] * scale)\n                : undefined);\n};\n// prettier-ignore\nexport var colorToComponents = function (color) {\n    return color.type === Grayscale ? [color.gray]\n        : color.type === RGB ? [color.red, color.green, color.blue]\n            : color.type === CMYK ? [color.cyan, color.magenta, color.yellow, color.key]\n                : error(\"Invalid color: \" + JSON.stringify(color));\n};\n//# sourceMappingURL=colors.js.map","// Originated from pdfkit Copyright (c) 2014 Devon Govett\n// https://github.com/foliojs/pdfkit/blob/1e62e6ffe24b378eb890df507a47610f4c4a7b24/lib/path.js\n// MIT LICENSE\n// Updated for pdf-lib & TypeScript by Jeremy Messenger\nimport { appendBezierCurve, appendQuadraticCurve, closePath, lineTo, moveTo, } from \"./operators\";\nvar cx = 0;\nvar cy = 0;\nvar px = 0;\nvar py = 0;\nvar sx = 0;\nvar sy = 0;\nvar parameters = new Map([\n    ['A', 7],\n    ['a', 7],\n    ['C', 6],\n    ['c', 6],\n    ['H', 1],\n    ['h', 1],\n    ['L', 2],\n    ['l', 2],\n    ['M', 2],\n    ['m', 2],\n    ['Q', 4],\n    ['q', 4],\n    ['S', 4],\n    ['s', 4],\n    ['T', 2],\n    ['t', 2],\n    ['V', 1],\n    ['v', 1],\n    ['Z', 0],\n    ['z', 0],\n]);\nvar parse = function (path) {\n    var cmd;\n    var ret = [];\n    var args = [];\n    var curArg = '';\n    var foundDecimal = false;\n    var params = 0;\n    for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var c = path_1[_i];\n        if (parameters.has(c)) {\n            params = parameters.get(c);\n            if (cmd) {\n                // save existing command\n                if (curArg.length > 0) {\n                    args[args.length] = +curArg;\n                }\n                ret[ret.length] = { cmd: cmd, args: args };\n                args = [];\n                curArg = '';\n                foundDecimal = false;\n            }\n            cmd = c;\n        }\n        else if ([' ', ','].includes(c) ||\n            (c === '-' && curArg.length > 0 && curArg[curArg.length - 1] !== 'e') ||\n            (c === '.' && foundDecimal)) {\n            if (curArg.length === 0) {\n                continue;\n            }\n            if (args.length === params) {\n                // handle reused commands\n                ret[ret.length] = { cmd: cmd, args: args };\n                args = [+curArg];\n                // handle assumed commands\n                if (cmd === 'M') {\n                    cmd = 'L';\n                }\n                if (cmd === 'm') {\n                    cmd = 'l';\n                }\n            }\n            else {\n                args[args.length] = +curArg;\n            }\n            foundDecimal = c === '.';\n            // fix for negative numbers or repeated decimals with no delimeter between commands\n            curArg = ['-', '.'].includes(c) ? c : '';\n        }\n        else {\n            curArg += c;\n            if (c === '.') {\n                foundDecimal = true;\n            }\n        }\n    }\n    // add the last command\n    if (curArg.length > 0) {\n        if (args.length === params) {\n            // handle reused commands\n            ret[ret.length] = { cmd: cmd, args: args };\n            args = [+curArg];\n            // handle assumed commands\n            if (cmd === 'M') {\n                cmd = 'L';\n            }\n            if (cmd === 'm') {\n                cmd = 'l';\n            }\n        }\n        else {\n            args[args.length] = +curArg;\n        }\n    }\n    ret[ret.length] = { cmd: cmd, args: args };\n    return ret;\n};\nvar apply = function (commands) {\n    // current point, control point, and subpath starting point\n    cx = cy = px = py = sx = sy = 0;\n    // run the commands\n    var cmds = [];\n    for (var i = 0; i < commands.length; i++) {\n        var c = commands[i];\n        if (c.cmd && typeof runners[c.cmd] === 'function') {\n            var cmd = runners[c.cmd](c.args);\n            if (Array.isArray(cmd)) {\n                cmds = cmds.concat(cmd);\n            }\n            else {\n                cmds.push(cmd);\n            }\n        }\n    }\n    return cmds;\n};\nvar runners = {\n    M: function (a) {\n        cx = a[0];\n        cy = a[1];\n        px = py = null;\n        sx = cx;\n        sy = cy;\n        return moveTo(cx, cy);\n    },\n    m: function (a) {\n        cx += a[0];\n        cy += a[1];\n        px = py = null;\n        sx = cx;\n        sy = cy;\n        return moveTo(cx, cy);\n    },\n    C: function (a) {\n        cx = a[4];\n        cy = a[5];\n        px = a[2];\n        py = a[3];\n        return appendBezierCurve(a[0], a[1], a[2], a[3], a[4], a[5]);\n    },\n    c: function (a) {\n        var cmd = appendBezierCurve(a[0] + cx, a[1] + cy, a[2] + cx, a[3] + cy, a[4] + cx, a[5] + cy);\n        px = cx + a[2];\n        py = cy + a[3];\n        cx += a[4];\n        cy += a[5];\n        return cmd;\n    },\n    S: function (a) {\n        if (px === null || py === null) {\n            px = cx;\n            py = cy;\n        }\n        var cmd = appendBezierCurve(cx - (px - cx), cy - (py - cy), a[0], a[1], a[2], a[3]);\n        px = a[0];\n        py = a[1];\n        cx = a[2];\n        cy = a[3];\n        return cmd;\n    },\n    s: function (a) {\n        if (px === null || py === null) {\n            px = cx;\n            py = cy;\n        }\n        var cmd = appendBezierCurve(cx - (px - cx), cy - (py - cy), cx + a[0], cy + a[1], cx + a[2], cy + a[3]);\n        px = cx + a[0];\n        py = cy + a[1];\n        cx += a[2];\n        cy += a[3];\n        return cmd;\n    },\n    Q: function (a) {\n        px = a[0];\n        py = a[1];\n        cx = a[2];\n        cy = a[3];\n        return appendQuadraticCurve(a[0], a[1], cx, cy);\n    },\n    q: function (a) {\n        var cmd = appendQuadraticCurve(a[0] + cx, a[1] + cy, a[2] + cx, a[3] + cy);\n        px = cx + a[0];\n        py = cy + a[1];\n        cx += a[2];\n        cy += a[3];\n        return cmd;\n    },\n    T: function (a) {\n        if (px === null || py === null) {\n            px = cx;\n            py = cy;\n        }\n        else {\n            px = cx - (px - cx);\n            py = cy - (py - cy);\n        }\n        var cmd = appendQuadraticCurve(px, py, a[0], a[1]);\n        px = cx - (px - cx);\n        py = cy - (py - cy);\n        cx = a[0];\n        cy = a[1];\n        return cmd;\n    },\n    t: function (a) {\n        if (px === null || py === null) {\n            px = cx;\n            py = cy;\n        }\n        else {\n            px = cx - (px - cx);\n            py = cy - (py - cy);\n        }\n        var cmd = appendQuadraticCurve(px, py, cx + a[0], cy + a[1]);\n        cx += a[0];\n        cy += a[1];\n        return cmd;\n    },\n    A: function (a) {\n        var cmds = solveArc(cx, cy, a);\n        cx = a[5];\n        cy = a[6];\n        return cmds;\n    },\n    a: function (a) {\n        a[5] += cx;\n        a[6] += cy;\n        var cmds = solveArc(cx, cy, a);\n        cx = a[5];\n        cy = a[6];\n        return cmds;\n    },\n    L: function (a) {\n        cx = a[0];\n        cy = a[1];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    l: function (a) {\n        cx += a[0];\n        cy += a[1];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    H: function (a) {\n        cx = a[0];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    h: function (a) {\n        cx += a[0];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    V: function (a) {\n        cy = a[0];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    v: function (a) {\n        cy += a[0];\n        px = py = null;\n        return lineTo(cx, cy);\n    },\n    Z: function () {\n        var cmd = closePath();\n        cx = sx;\n        cy = sy;\n        return cmd;\n    },\n    z: function () {\n        var cmd = closePath();\n        cx = sx;\n        cy = sy;\n        return cmd;\n    },\n};\nvar solveArc = function (x, y, coords) {\n    var rx = coords[0], ry = coords[1], rot = coords[2], large = coords[3], sweep = coords[4], ex = coords[5], ey = coords[6];\n    var segs = arcToSegments(ex, ey, rx, ry, large, sweep, rot, x, y);\n    var cmds = [];\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        var bez = segmentToBezier.apply(void 0, seg);\n        cmds.push(appendBezierCurve.apply(void 0, bez));\n    }\n    return cmds;\n};\n// from Inkscape svgtopdf, thanks!\nvar arcToSegments = function (x, y, rx, ry, large, sweep, rotateX, ox, oy) {\n    var th = rotateX * (Math.PI / 180);\n    var sinTh = Math.sin(th);\n    var cosTh = Math.cos(th);\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n    px = cosTh * (ox - x) * 0.5 + sinTh * (oy - y) * 0.5;\n    py = cosTh * (oy - y) * 0.5 - sinTh * (ox - x) * 0.5;\n    var pl = (px * px) / (rx * rx) + (py * py) / (ry * ry);\n    if (pl > 1) {\n        pl = Math.sqrt(pl);\n        rx *= pl;\n        ry *= pl;\n    }\n    var a00 = cosTh / rx;\n    var a01 = sinTh / rx;\n    var a10 = -sinTh / ry;\n    var a11 = cosTh / ry;\n    var x0 = a00 * ox + a01 * oy;\n    var y0 = a10 * ox + a11 * oy;\n    var x1 = a00 * x + a01 * y;\n    var y1 = a10 * x + a11 * y;\n    var d = (x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0);\n    var sfactorSq = 1 / d - 0.25;\n    if (sfactorSq < 0) {\n        sfactorSq = 0;\n    }\n    var sfactor = Math.sqrt(sfactorSq);\n    if (sweep === large) {\n        sfactor = -sfactor;\n    }\n    var xc = 0.5 * (x0 + x1) - sfactor * (y1 - y0);\n    var yc = 0.5 * (y0 + y1) + sfactor * (x1 - x0);\n    var th0 = Math.atan2(y0 - yc, x0 - xc);\n    var th1 = Math.atan2(y1 - yc, x1 - xc);\n    var thArc = th1 - th0;\n    if (thArc < 0 && sweep === 1) {\n        thArc += 2 * Math.PI;\n    }\n    else if (thArc > 0 && sweep === 0) {\n        thArc -= 2 * Math.PI;\n    }\n    var segments = Math.ceil(Math.abs(thArc / (Math.PI * 0.5 + 0.001)));\n    var result = [];\n    for (var i = 0; i < segments; i++) {\n        var th2 = th0 + (i * thArc) / segments;\n        var th3 = th0 + ((i + 1) * thArc) / segments;\n        result[i] = [xc, yc, th2, th3, rx, ry, sinTh, cosTh];\n    }\n    return result;\n};\nvar segmentToBezier = function (cx1, cy1, th0, th1, rx, ry, sinTh, cosTh) {\n    var a00 = cosTh * rx;\n    var a01 = -sinTh * ry;\n    var a10 = sinTh * rx;\n    var a11 = cosTh * ry;\n    var thHalf = 0.5 * (th1 - th0);\n    var t = ((8 / 3) * Math.sin(thHalf * 0.5) * Math.sin(thHalf * 0.5)) /\n        Math.sin(thHalf);\n    var x1 = cx1 + Math.cos(th0) - t * Math.sin(th0);\n    var y1 = cy1 + Math.sin(th0) + t * Math.cos(th0);\n    var x3 = cx1 + Math.cos(th1);\n    var y3 = cy1 + Math.sin(th1);\n    var x2 = x3 + t * Math.sin(th1);\n    var y2 = y3 - t * Math.cos(th1);\n    var result = [\n        a00 * x1 + a01 * y1,\n        a10 * x1 + a11 * y1,\n        a00 * x2 + a01 * y2,\n        a10 * x2 + a11 * y2,\n        a00 * x3 + a01 * y3,\n        a10 * x3 + a11 * y3,\n    ];\n    return result;\n};\nexport var svgPathToOperators = function (path) { return apply(parse(path)); };\n//# sourceMappingURL=svgPath.js.map","import { __spreadArrays } from \"tslib\";\nimport { setFillingColor, setStrokingColor } from \"./colors\";\nimport { beginText, closePath, drawObject, endText, fill, fillAndStroke, lineTo, moveTo, nextLine, popGraphicsState, pushGraphicsState, rotateAndSkewTextRadiansAndTranslate, rotateRadians, scale, setFontAndSize, setLineHeight, setLineWidth, showText, skewRadians, stroke, translate, setLineCap, rotateDegrees, setGraphicsState, setDashPattern, beginMarkedContent, endMarkedContent, clip, endPath, appendBezierCurve, } from \"./operators\";\nimport { degrees, toRadians } from \"./rotations\";\nimport { svgPathToOperators } from \"./svgPath\";\nimport { asNumber } from \"./objects\";\nexport var drawText = function (line, options) {\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        beginText(),\n        setFillingColor(options.color),\n        setFontAndSize(options.font, options.size),\n        rotateAndSkewTextRadiansAndTranslate(toRadians(options.rotate), toRadians(options.xSkew), toRadians(options.ySkew), options.x, options.y),\n        showText(line),\n        endText(),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nexport var drawLinesOfText = function (lines, options) {\n    var operators = [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        beginText(),\n        setFillingColor(options.color),\n        setFontAndSize(options.font, options.size),\n        setLineHeight(options.lineHeight),\n        rotateAndSkewTextRadiansAndTranslate(toRadians(options.rotate), toRadians(options.xSkew), toRadians(options.ySkew), options.x, options.y),\n    ].filter(Boolean);\n    for (var idx = 0, len = lines.length; idx < len; idx++) {\n        operators.push(showText(lines[idx]), nextLine());\n    }\n    operators.push(endText(), popGraphicsState());\n    return operators;\n};\nexport var drawImage = function (name, options) {\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        translate(options.x, options.y),\n        rotateRadians(toRadians(options.rotate)),\n        scale(options.width, options.height),\n        skewRadians(toRadians(options.xSkew), toRadians(options.ySkew)),\n        drawObject(name),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nexport var drawPage = function (name, options) {\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        translate(options.x, options.y),\n        rotateRadians(toRadians(options.rotate)),\n        scale(options.xScale, options.yScale),\n        skewRadians(toRadians(options.xSkew), toRadians(options.ySkew)),\n        drawObject(name),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nexport var drawLine = function (options) {\n    var _a, _b;\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        options.color && setStrokingColor(options.color),\n        setLineWidth(options.thickness),\n        setDashPattern((_a = options.dashArray) !== null && _a !== void 0 ? _a : [], (_b = options.dashPhase) !== null && _b !== void 0 ? _b : 0),\n        moveTo(options.start.x, options.start.y),\n        options.lineCap && setLineCap(options.lineCap),\n        moveTo(options.start.x, options.start.y),\n        lineTo(options.end.x, options.end.y),\n        stroke(),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nexport var drawRectangle = function (options) {\n    var _a, _b;\n    return [\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        options.color && setFillingColor(options.color),\n        options.borderColor && setStrokingColor(options.borderColor),\n        setLineWidth(options.borderWidth),\n        options.borderLineCap && setLineCap(options.borderLineCap),\n        setDashPattern((_a = options.borderDashArray) !== null && _a !== void 0 ? _a : [], (_b = options.borderDashPhase) !== null && _b !== void 0 ? _b : 0),\n        translate(options.x, options.y),\n        rotateRadians(toRadians(options.rotate)),\n        skewRadians(toRadians(options.xSkew), toRadians(options.ySkew)),\n        moveTo(0, 0),\n        lineTo(0, options.height),\n        lineTo(options.width, options.height),\n        lineTo(options.width, 0),\n        closePath(),\n        // prettier-ignore\n        options.color && options.borderWidth ? fillAndStroke()\n            : options.color ? fill()\n                : options.borderColor ? stroke()\n                    : closePath(),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\nvar KAPPA = 4.0 * ((Math.sqrt(2) - 1.0) / 3.0);\n/** @deprecated */\nexport var drawEllipsePath = function (config) {\n    var x = asNumber(config.x);\n    var y = asNumber(config.y);\n    var xScale = asNumber(config.xScale);\n    var yScale = asNumber(config.yScale);\n    x -= xScale;\n    y -= yScale;\n    var ox = xScale * KAPPA;\n    var oy = yScale * KAPPA;\n    var xe = x + xScale * 2;\n    var ye = y + yScale * 2;\n    var xm = x + xScale;\n    var ym = y + yScale;\n    return [\n        pushGraphicsState(),\n        moveTo(x, ym),\n        appendBezierCurve(x, ym - oy, xm - ox, y, xm, y),\n        appendBezierCurve(xm + ox, y, xe, ym - oy, xe, ym),\n        appendBezierCurve(xe, ym + oy, xm + ox, ye, xm, ye),\n        appendBezierCurve(xm - ox, ye, x, ym + oy, x, ym),\n        popGraphicsState(),\n    ];\n};\nvar drawEllipseCurves = function (config) {\n    var centerX = asNumber(config.x);\n    var centerY = asNumber(config.y);\n    var xScale = asNumber(config.xScale);\n    var yScale = asNumber(config.yScale);\n    var x = -xScale;\n    var y = -yScale;\n    var ox = xScale * KAPPA;\n    var oy = yScale * KAPPA;\n    var xe = x + xScale * 2;\n    var ye = y + yScale * 2;\n    var xm = x + xScale;\n    var ym = y + yScale;\n    return [\n        translate(centerX, centerY),\n        rotateRadians(toRadians(config.rotate)),\n        moveTo(x, ym),\n        appendBezierCurve(x, ym - oy, xm - ox, y, xm, y),\n        appendBezierCurve(xm + ox, y, xe, ym - oy, xe, ym),\n        appendBezierCurve(xe, ym + oy, xm + ox, ye, xm, ye),\n        appendBezierCurve(xm - ox, ye, x, ym + oy, x, ym),\n    ];\n};\nexport var drawEllipse = function (options) {\n    var _a, _b, _c;\n    return __spreadArrays([\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        options.color && setFillingColor(options.color),\n        options.borderColor && setStrokingColor(options.borderColor),\n        setLineWidth(options.borderWidth),\n        options.borderLineCap && setLineCap(options.borderLineCap),\n        setDashPattern((_a = options.borderDashArray) !== null && _a !== void 0 ? _a : [], (_b = options.borderDashPhase) !== null && _b !== void 0 ? _b : 0)\n    ], (options.rotate === undefined\n        ? drawEllipsePath({\n            x: options.x,\n            y: options.y,\n            xScale: options.xScale,\n            yScale: options.yScale,\n        })\n        : drawEllipseCurves({\n            x: options.x,\n            y: options.y,\n            xScale: options.xScale,\n            yScale: options.yScale,\n            rotate: (_c = options.rotate) !== null && _c !== void 0 ? _c : degrees(0),\n        })), [\n        // prettier-ignore\n        options.color && options.borderWidth ? fillAndStroke()\n            : options.color ? fill()\n                : options.borderColor ? stroke()\n                    : closePath(),\n        popGraphicsState(),\n    ]).filter(Boolean);\n};\nexport var drawSvgPath = function (path, options) {\n    var _a, _b, _c;\n    return __spreadArrays([\n        pushGraphicsState(),\n        options.graphicsState && setGraphicsState(options.graphicsState),\n        translate(options.x, options.y),\n        rotateRadians(toRadians((_a = options.rotate) !== null && _a !== void 0 ? _a : degrees(0))),\n        // SVG path Y axis is opposite pdf-lib's\n        options.scale ? scale(options.scale, -options.scale) : scale(1, -1),\n        options.color && setFillingColor(options.color),\n        options.borderColor && setStrokingColor(options.borderColor),\n        options.borderWidth && setLineWidth(options.borderWidth),\n        options.borderLineCap && setLineCap(options.borderLineCap),\n        setDashPattern((_b = options.borderDashArray) !== null && _b !== void 0 ? _b : [], (_c = options.borderDashPhase) !== null && _c !== void 0 ? _c : 0)\n    ], svgPathToOperators(path), [\n        // prettier-ignore\n        options.color && options.borderWidth ? fillAndStroke()\n            : options.color ? fill()\n                : options.borderColor ? stroke()\n                    : closePath(),\n        popGraphicsState(),\n    ]).filter(Boolean);\n};\nexport var drawCheckMark = function (options) {\n    var size = asNumber(options.size);\n    /*********************** Define Check Mark Points ***************************/\n    // A check mark is defined by three points in some coordinate space. Here, we\n    // define these points in a unit coordinate system, where the range of the x\n    // and y axis are both [-1, 1].\n    //\n    // Note that we do not hard code `p1y` in case we wish to change the\n    // size/shape of the check mark in the future. We want the check mark to\n    // always form a right angle. This means that the dot product between (p1-p2)\n    // and (p3-p2) should be zero:\n    //\n    //   (p1x-p2x) * (p3x-p2x) + (p1y-p2y) * (p3y-p2y) = 0\n    //\n    // We can now rejigger this equation to solve for `p1y`:\n    //\n    //   (p1y-p2y) * (p3y-p2y) = -((p1x-p2x) * (p3x-p2x))\n    //   (p1y-p2y) = -((p1x-p2x) * (p3x-p2x)) / (p3y-p2y)\n    //   p1y = -((p1x-p2x) * (p3x-p2x)) / (p3y-p2y) + p2y\n    //\n    // Thanks to my friend Joel Walker (https://github.com/JWalker1995) for\n    // devising the above equation and unit coordinate system approach!\n    // (x, y) coords of the check mark's bottommost point\n    var p2x = -1 + 0.75;\n    var p2y = -1 + 0.51;\n    // (x, y) coords of the check mark's topmost point\n    var p3y = 1 - 0.525;\n    var p3x = 1 - 0.31;\n    // (x, y) coords of the check mark's center (vertically) point\n    var p1x = -1 + 0.325;\n    var p1y = -((p1x - p2x) * (p3x - p2x)) / (p3y - p2y) + p2y;\n    /****************************************************************************/\n    return [\n        pushGraphicsState(),\n        options.color && setStrokingColor(options.color),\n        setLineWidth(options.thickness),\n        translate(options.x, options.y),\n        moveTo(p1x * size, p1y * size),\n        lineTo(p2x * size, p2y * size),\n        lineTo(p3x * size, p3y * size),\n        stroke(),\n        popGraphicsState(),\n    ].filter(Boolean);\n};\n// prettier-ignore\nexport var rotateInPlace = function (options) {\n    return options.rotation === 0 ? [\n        translate(0, 0),\n        rotateDegrees(0)\n    ]\n        : options.rotation === 90 ? [\n            translate(options.width, 0),\n            rotateDegrees(90)\n        ]\n            : options.rotation === 180 ? [\n                translate(options.width, options.height),\n                rotateDegrees(180)\n            ]\n                : options.rotation === 270 ? [\n                    translate(0, options.height),\n                    rotateDegrees(270)\n                ]\n                    : [];\n}; // Invalid rotation - noop\nexport var drawCheckBox = function (options) {\n    var outline = drawRectangle({\n        x: options.x,\n        y: options.y,\n        width: options.width,\n        height: options.height,\n        borderWidth: options.borderWidth,\n        color: options.color,\n        borderColor: options.borderColor,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    if (!options.filled)\n        return outline;\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var checkMarkSize = Math.min(width, height) / 2;\n    var checkMark = drawCheckMark({\n        x: width / 2,\n        y: height / 2,\n        size: checkMarkSize,\n        thickness: options.thickness,\n        color: options.markColor,\n    });\n    return __spreadArrays([pushGraphicsState()], outline, checkMark, [popGraphicsState()]);\n};\nexport var drawRadioButton = function (options) {\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var outlineScale = Math.min(width, height) / 2;\n    var outline = drawEllipse({\n        x: options.x,\n        y: options.y,\n        xScale: outlineScale,\n        yScale: outlineScale,\n        color: options.color,\n        borderColor: options.borderColor,\n        borderWidth: options.borderWidth,\n    });\n    if (!options.filled)\n        return outline;\n    var dot = drawEllipse({\n        x: options.x,\n        y: options.y,\n        xScale: outlineScale * 0.45,\n        yScale: outlineScale * 0.45,\n        color: options.dotColor,\n        borderColor: undefined,\n        borderWidth: 0,\n    });\n    return __spreadArrays([pushGraphicsState()], outline, dot, [popGraphicsState()]);\n};\nexport var drawButton = function (options) {\n    var x = asNumber(options.x);\n    var y = asNumber(options.y);\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var background = drawRectangle({\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        borderWidth: options.borderWidth,\n        color: options.color,\n        borderColor: options.borderColor,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var lines = drawTextLines(options.textLines, {\n        color: options.textColor,\n        font: options.font,\n        size: options.fontSize,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    return __spreadArrays([pushGraphicsState()], background, lines, [popGraphicsState()]);\n};\nexport var drawTextLines = function (lines, options) {\n    var operators = [\n        beginText(),\n        setFillingColor(options.color),\n        setFontAndSize(options.font, options.size),\n    ];\n    for (var idx = 0, len = lines.length; idx < len; idx++) {\n        var _a = lines[idx], encoded = _a.encoded, x = _a.x, y = _a.y;\n        operators.push(rotateAndSkewTextRadiansAndTranslate(toRadians(options.rotate), toRadians(options.xSkew), toRadians(options.ySkew), x, y), showText(encoded));\n    }\n    operators.push(endText());\n    return operators;\n};\nexport var drawTextField = function (options) {\n    var x = asNumber(options.x);\n    var y = asNumber(options.y);\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var borderWidth = asNumber(options.borderWidth);\n    var padding = asNumber(options.padding);\n    var clipX = x + borderWidth / 2 + padding;\n    var clipY = y + borderWidth / 2 + padding;\n    var clipWidth = width - (borderWidth / 2 + padding) * 2;\n    var clipHeight = height - (borderWidth / 2 + padding) * 2;\n    var clippingArea = [\n        moveTo(clipX, clipY),\n        lineTo(clipX, clipY + clipHeight),\n        lineTo(clipX + clipWidth, clipY + clipHeight),\n        lineTo(clipX + clipWidth, clipY),\n        closePath(),\n        clip(),\n        endPath(),\n    ];\n    var background = drawRectangle({\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        borderWidth: options.borderWidth,\n        color: options.color,\n        borderColor: options.borderColor,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var lines = drawTextLines(options.textLines, {\n        color: options.textColor,\n        font: options.font,\n        size: options.fontSize,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var markedContent = __spreadArrays([\n        beginMarkedContent('Tx'),\n        pushGraphicsState()\n    ], lines, [\n        popGraphicsState(),\n        endMarkedContent(),\n    ]);\n    return __spreadArrays([\n        pushGraphicsState()\n    ], background, clippingArea, markedContent, [\n        popGraphicsState(),\n    ]);\n};\nexport var drawOptionList = function (options) {\n    var x = asNumber(options.x);\n    var y = asNumber(options.y);\n    var width = asNumber(options.width);\n    var height = asNumber(options.height);\n    var lineHeight = asNumber(options.lineHeight);\n    var borderWidth = asNumber(options.borderWidth);\n    var padding = asNumber(options.padding);\n    var clipX = x + borderWidth / 2 + padding;\n    var clipY = y + borderWidth / 2 + padding;\n    var clipWidth = width - (borderWidth / 2 + padding) * 2;\n    var clipHeight = height - (borderWidth / 2 + padding) * 2;\n    var clippingArea = [\n        moveTo(clipX, clipY),\n        lineTo(clipX, clipY + clipHeight),\n        lineTo(clipX + clipWidth, clipY + clipHeight),\n        lineTo(clipX + clipWidth, clipY),\n        closePath(),\n        clip(),\n        endPath(),\n    ];\n    var background = drawRectangle({\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        borderWidth: options.borderWidth,\n        color: options.color,\n        borderColor: options.borderColor,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var highlights = [];\n    for (var idx = 0, len = options.selectedLines.length; idx < len; idx++) {\n        var line = options.textLines[options.selectedLines[idx]];\n        highlights.push.apply(highlights, drawRectangle({\n            x: line.x - padding,\n            y: line.y - (lineHeight - line.height) / 2,\n            width: width - borderWidth,\n            height: line.height + (lineHeight - line.height) / 2,\n            borderWidth: 0,\n            color: options.selectedColor,\n            borderColor: undefined,\n            rotate: degrees(0),\n            xSkew: degrees(0),\n            ySkew: degrees(0),\n        }));\n    }\n    var lines = drawTextLines(options.textLines, {\n        color: options.textColor,\n        font: options.font,\n        size: options.fontSize,\n        rotate: degrees(0),\n        xSkew: degrees(0),\n        ySkew: degrees(0),\n    });\n    var markedContent = __spreadArrays([\n        beginMarkedContent('Tx'),\n        pushGraphicsState()\n    ], lines, [\n        popGraphicsState(),\n        endMarkedContent(),\n    ]);\n    return __spreadArrays([\n        pushGraphicsState()\n    ], background, highlights, clippingArea, markedContent, [\n        popGraphicsState(),\n    ]);\n};\n//# sourceMappingURL=operations.js.map","// tslint:disable: max-classes-per-file\nimport { __extends } from \"tslib\";\n// TODO: Include link to documentation with example\nvar EncryptedPDFError = /** @class */ (function (_super) {\n    __extends(EncryptedPDFError, _super);\n    function EncryptedPDFError() {\n        var _this = this;\n        var msg = 'Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.';\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return EncryptedPDFError;\n}(Error));\nexport { EncryptedPDFError };\n// TODO: Include link to documentation with example\nvar FontkitNotRegisteredError = /** @class */ (function (_super) {\n    __extends(FontkitNotRegisteredError, _super);\n    function FontkitNotRegisteredError() {\n        var _this = this;\n        var msg = 'Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.';\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return FontkitNotRegisteredError;\n}(Error));\nexport { FontkitNotRegisteredError };\n// TODO: Include link to documentation with example\nvar ForeignPageError = /** @class */ (function (_super) {\n    __extends(ForeignPageError, _super);\n    function ForeignPageError() {\n        var _this = this;\n        var msg = 'A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.';\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return ForeignPageError;\n}(Error));\nexport { ForeignPageError };\n// TODO: Include link to documentation with example\nvar RemovePageFromEmptyDocumentError = /** @class */ (function (_super) {\n    __extends(RemovePageFromEmptyDocumentError, _super);\n    function RemovePageFromEmptyDocumentError() {\n        var _this = this;\n        var msg = 'PDFDocument has no pages so `PDFDocument.removePage` cannot be called';\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return RemovePageFromEmptyDocumentError;\n}(Error));\nexport { RemovePageFromEmptyDocumentError };\nvar NoSuchFieldError = /** @class */ (function (_super) {\n    __extends(NoSuchFieldError, _super);\n    function NoSuchFieldError(name) {\n        var _this = this;\n        var msg = \"PDFDocument has no form field with the name \\\"\" + name + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return NoSuchFieldError;\n}(Error));\nexport { NoSuchFieldError };\nvar UnexpectedFieldTypeError = /** @class */ (function (_super) {\n    __extends(UnexpectedFieldTypeError, _super);\n    function UnexpectedFieldTypeError(name, expected, actual) {\n        var _a, _b;\n        var _this = this;\n        var expectedType = expected === null || expected === void 0 ? void 0 : expected.name;\n        var actualType = (_b = (_a = actual === null || actual === void 0 ? void 0 : actual.constructor) === null || _a === void 0 ? void 0 : _a.name) !== null && _b !== void 0 ? _b : actual;\n        var msg = \"Expected field \\\"\" + name + \"\\\" to be of type \" + expectedType + \", \" +\n            (\"but it is actually of type \" + actualType);\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return UnexpectedFieldTypeError;\n}(Error));\nexport { UnexpectedFieldTypeError };\nvar MissingOnValueCheckError = /** @class */ (function (_super) {\n    __extends(MissingOnValueCheckError, _super);\n    function MissingOnValueCheckError(onValue) {\n        var _this = this;\n        var msg = \"Failed to select check box due to missing onValue: \\\"\" + onValue + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingOnValueCheckError;\n}(Error));\nexport { MissingOnValueCheckError };\nvar FieldAlreadyExistsError = /** @class */ (function (_super) {\n    __extends(FieldAlreadyExistsError, _super);\n    function FieldAlreadyExistsError(name) {\n        var _this = this;\n        var msg = \"A field already exists with the specified name: \\\"\" + name + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return FieldAlreadyExistsError;\n}(Error));\nexport { FieldAlreadyExistsError };\nvar InvalidFieldNamePartError = /** @class */ (function (_super) {\n    __extends(InvalidFieldNamePartError, _super);\n    function InvalidFieldNamePartError(namePart) {\n        var _this = this;\n        var msg = \"Field name contains invalid component: \\\"\" + namePart + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidFieldNamePartError;\n}(Error));\nexport { InvalidFieldNamePartError };\nvar FieldExistsAsNonTerminalError = /** @class */ (function (_super) {\n    __extends(FieldExistsAsNonTerminalError, _super);\n    function FieldExistsAsNonTerminalError(name) {\n        var _this = this;\n        var msg = \"A non-terminal field already exists with the specified name: \\\"\" + name + \"\\\"\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return FieldExistsAsNonTerminalError;\n}(Error));\nexport { FieldExistsAsNonTerminalError };\nvar RichTextFieldReadError = /** @class */ (function (_super) {\n    __extends(RichTextFieldReadError, _super);\n    function RichTextFieldReadError(fieldName) {\n        var _this = this;\n        var msg = \"Reading rich text fields is not supported: Attempted to read rich text field: \" + fieldName;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return RichTextFieldReadError;\n}(Error));\nexport { RichTextFieldReadError };\nvar CombedTextLayoutError = /** @class */ (function (_super) {\n    __extends(CombedTextLayoutError, _super);\n    function CombedTextLayoutError(lineLength, cellCount) {\n        var _this = this;\n        var msg = \"Failed to layout combed text as lineLength=\" + lineLength + \" is greater than cellCount=\" + cellCount;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return CombedTextLayoutError;\n}(Error));\nexport { CombedTextLayoutError };\nvar ExceededMaxLengthError = /** @class */ (function (_super) {\n    __extends(ExceededMaxLengthError, _super);\n    function ExceededMaxLengthError(textLength, maxLength, name) {\n        var _this = this;\n        var msg = \"Attempted to set text with length=\" + textLength + \" for TextField with maxLength=\" + maxLength + \" and name=\" + name;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return ExceededMaxLengthError;\n}(Error));\nexport { ExceededMaxLengthError };\nvar InvalidMaxLengthError = /** @class */ (function (_super) {\n    __extends(InvalidMaxLengthError, _super);\n    function InvalidMaxLengthError(textLength, maxLength, name) {\n        var _this = this;\n        var msg = \"Attempted to set maxLength=\" + maxLength + \", which is less than \" + textLength + \", the length of this field's current value (name=\" + name + \")\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidMaxLengthError;\n}(Error));\nexport { InvalidMaxLengthError };\n//# sourceMappingURL=errors.js.map","export var TextAlignment;\n(function (TextAlignment) {\n    TextAlignment[TextAlignment[\"Left\"] = 0] = \"Left\";\n    TextAlignment[TextAlignment[\"Center\"] = 1] = \"Center\";\n    TextAlignment[TextAlignment[\"Right\"] = 2] = \"Right\";\n})(TextAlignment || (TextAlignment = {}));\n//# sourceMappingURL=alignment.js.map","import { CombedTextLayoutError } from \"../errors\";\nimport { TextAlignment } from \"./alignment\";\nimport { cleanText, lineSplit, mergeLines, charAtIndex, charSplit, } from \"../../utils\";\nvar MIN_FONT_SIZE = 4;\nvar MAX_FONT_SIZE = 500;\nvar computeFontSize = function (lines, font, bounds, multiline) {\n    if (multiline === void 0) { multiline = false; }\n    var fontSize = MIN_FONT_SIZE;\n    while (fontSize < MAX_FONT_SIZE) {\n        var linesUsed = 0;\n        for (var lineIdx = 0, lineLen = lines.length; lineIdx < lineLen; lineIdx++) {\n            linesUsed += 1;\n            var line = lines[lineIdx];\n            var words = line.split(' ');\n            // Layout the words using the current `fontSize`, line wrapping\n            // whenever we reach the end of the current line.\n            var spaceInLineRemaining = bounds.width;\n            for (var idx = 0, len = words.length; idx < len; idx++) {\n                var isLastWord = idx === len - 1;\n                var word = isLastWord ? words[idx] : words[idx] + ' ';\n                var widthOfWord = font.widthOfTextAtSize(word, fontSize);\n                spaceInLineRemaining -= widthOfWord;\n                if (spaceInLineRemaining <= 0) {\n                    linesUsed += 1;\n                    spaceInLineRemaining = bounds.width - widthOfWord;\n                }\n            }\n        }\n        // Return if we exceeded the allowed width\n        if (!multiline && linesUsed > lines.length)\n            return fontSize - 1;\n        var height = font.heightAtSize(fontSize);\n        var lineHeight = height + height * 0.2;\n        var totalHeight = lineHeight * linesUsed;\n        // Return if we exceeded the allowed height\n        if (totalHeight > Math.abs(bounds.height))\n            return fontSize - 1;\n        fontSize += 1;\n    }\n    return fontSize;\n};\nvar computeCombedFontSize = function (line, font, bounds, cellCount) {\n    var cellWidth = bounds.width / cellCount;\n    var cellHeight = bounds.height;\n    var fontSize = MIN_FONT_SIZE;\n    var chars = charSplit(line);\n    while (fontSize < MAX_FONT_SIZE) {\n        for (var idx = 0, len = chars.length; idx < len; idx++) {\n            var c = chars[idx];\n            var tooLong = font.widthOfTextAtSize(c, fontSize) > cellWidth * 0.75;\n            if (tooLong)\n                return fontSize - 1;\n        }\n        var height = font.heightAtSize(fontSize, { descender: false });\n        if (height > cellHeight)\n            return fontSize - 1;\n        fontSize += 1;\n    }\n    return fontSize;\n};\nvar lastIndexOfWhitespace = function (line) {\n    for (var idx = line.length; idx > 0; idx--) {\n        if (/\\s/.test(line[idx]))\n            return idx;\n    }\n    return undefined;\n};\nvar splitOutLines = function (input, maxWidth, font, fontSize) {\n    var _a;\n    var lastWhitespaceIdx = input.length;\n    while (lastWhitespaceIdx > 0) {\n        var line = input.substring(0, lastWhitespaceIdx);\n        var encoded = font.encodeText(line);\n        var width = font.widthOfTextAtSize(line, fontSize);\n        if (width < maxWidth) {\n            var remainder = input.substring(lastWhitespaceIdx) || undefined;\n            return { line: line, encoded: encoded, width: width, remainder: remainder };\n        }\n        lastWhitespaceIdx = (_a = lastIndexOfWhitespace(line)) !== null && _a !== void 0 ? _a : 0;\n    }\n    // We were unable to split the input enough to get a chunk that would fit\n    // within the specified `maxWidth` so we'll just return everything\n    return {\n        line: input,\n        encoded: font.encodeText(input),\n        width: font.widthOfTextAtSize(input, fontSize),\n        remainder: undefined,\n    };\n};\nexport var layoutMultilineText = function (text, _a) {\n    var alignment = _a.alignment, fontSize = _a.fontSize, font = _a.font, bounds = _a.bounds;\n    var lines = lineSplit(cleanText(text));\n    if (fontSize === undefined || fontSize === 0) {\n        fontSize = computeFontSize(lines, font, bounds, true);\n    }\n    var height = font.heightAtSize(fontSize);\n    var lineHeight = height + height * 0.2;\n    var textLines = [];\n    var minX = bounds.x;\n    var minY = bounds.y;\n    var maxX = bounds.x + bounds.width;\n    var maxY = bounds.y + bounds.height;\n    var y = bounds.y + bounds.height;\n    for (var idx = 0, len = lines.length; idx < len; idx++) {\n        var prevRemainder = lines[idx];\n        while (prevRemainder !== undefined) {\n            var _b = splitOutLines(prevRemainder, bounds.width, font, fontSize), line = _b.line, encoded = _b.encoded, width = _b.width, remainder = _b.remainder;\n            // prettier-ignore\n            var x = (alignment === TextAlignment.Left ? bounds.x\n                : alignment === TextAlignment.Center ? bounds.x + (bounds.width / 2) - (width / 2)\n                    : alignment === TextAlignment.Right ? bounds.x + bounds.width - width\n                        : bounds.x);\n            y -= lineHeight;\n            if (x < minX)\n                minX = x;\n            if (y < minY)\n                minY = y;\n            if (x + width > maxX)\n                maxX = x + width;\n            if (y + height > maxY)\n                maxY = y + height;\n            textLines.push({ text: line, encoded: encoded, width: width, height: height, x: x, y: y });\n            // Only trim lines that we had to split ourselves. So we won't trim lines\n            // that the user provided themselves with whitespace.\n            prevRemainder = remainder === null || remainder === void 0 ? void 0 : remainder.trim();\n        }\n    }\n    return {\n        fontSize: fontSize,\n        lineHeight: lineHeight,\n        lines: textLines,\n        bounds: {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        },\n    };\n};\nexport var layoutCombedText = function (text, _a) {\n    var fontSize = _a.fontSize, font = _a.font, bounds = _a.bounds, cellCount = _a.cellCount;\n    var line = mergeLines(cleanText(text));\n    if (line.length > cellCount) {\n        throw new CombedTextLayoutError(line.length, cellCount);\n    }\n    if (fontSize === undefined || fontSize === 0) {\n        fontSize = computeCombedFontSize(line, font, bounds, cellCount);\n    }\n    var cellWidth = bounds.width / cellCount;\n    var height = font.heightAtSize(fontSize, { descender: false });\n    var y = bounds.y + (bounds.height / 2 - height / 2);\n    var cells = [];\n    var minX = bounds.x;\n    var minY = bounds.y;\n    var maxX = bounds.x + bounds.width;\n    var maxY = bounds.y + bounds.height;\n    var cellOffset = 0;\n    var charOffset = 0;\n    while (cellOffset < cellCount) {\n        var _b = charAtIndex(line, charOffset), char = _b[0], charLength = _b[1];\n        var encoded = font.encodeText(char);\n        var width = font.widthOfTextAtSize(char, fontSize);\n        var cellCenter = bounds.x + (cellWidth * cellOffset + cellWidth / 2);\n        var x = cellCenter - width / 2;\n        if (x < minX)\n            minX = x;\n        if (y < minY)\n            minY = y;\n        if (x + width > maxX)\n            maxX = x + width;\n        if (y + height > maxY)\n            maxY = y + height;\n        cells.push({ text: line, encoded: encoded, width: width, height: height, x: x, y: y });\n        cellOffset += 1;\n        charOffset += charLength;\n    }\n    return {\n        fontSize: fontSize,\n        cells: cells,\n        bounds: {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        },\n    };\n};\nexport var layoutSinglelineText = function (text, _a) {\n    var alignment = _a.alignment, fontSize = _a.fontSize, font = _a.font, bounds = _a.bounds;\n    var line = mergeLines(cleanText(text));\n    if (fontSize === undefined || fontSize === 0) {\n        fontSize = computeFontSize([line], font, bounds);\n    }\n    var encoded = font.encodeText(line);\n    var width = font.widthOfTextAtSize(line, fontSize);\n    var height = font.heightAtSize(fontSize, { descender: false });\n    // prettier-ignore\n    var x = (alignment === TextAlignment.Left ? bounds.x\n        : alignment === TextAlignment.Center ? bounds.x + (bounds.width / 2) - (width / 2)\n            : alignment === TextAlignment.Right ? bounds.x + bounds.width - width\n                : bounds.x);\n    var y = bounds.y + (bounds.height / 2 - height / 2);\n    return {\n        fontSize: fontSize,\n        line: { text: line, encoded: encoded, width: width, height: height, x: x, y: y },\n        bounds: { x: x, y: y, width: width, height: height },\n    };\n};\n//# sourceMappingURL=layout.js.map","import { __assign, __spreadArrays } from \"tslib\";\nimport { drawCheckBox, rotateInPlace, drawRadioButton, drawButton, drawTextField, drawOptionList, } from \"../operations\";\nimport { rgb, componentsToColor, setFillingColor, grayscale, cmyk, } from \"../colors\";\nimport { reduceRotation, adjustDimsForRotation } from \"../rotations\";\nimport { layoutMultilineText, layoutCombedText, layoutSinglelineText, } from \"../text/layout\";\nimport { TextAlignment } from \"../text/alignment\";\nimport { setFontAndSize } from \"../operators\";\nimport { findLastMatch } from \"../../utils\";\n/********************* Appearance Provider Functions **************************/\nexport var normalizeAppearance = function (appearance) {\n    if ('normal' in appearance)\n        return appearance;\n    return { normal: appearance };\n};\n// Examples:\n//   `/Helv 12 Tf` -> ['/Helv 12 Tf', 'Helv', '12']\n//   `/HeBo 8.00 Tf` -> ['/HeBo 8 Tf', 'HeBo', '8.00']\nvar tfRegex = /\\/([^\\0\\t\\n\\f\\r\\ ]+)[\\0\\t\\n\\f\\r\\ ]+(\\d*\\.\\d+|\\d+)[\\0\\t\\n\\f\\r\\ ]+Tf/;\nvar getDefaultFontSize = function (field) {\n    var _a, _b;\n    var da = (_a = field.getDefaultAppearance()) !== null && _a !== void 0 ? _a : '';\n    var daMatch = (_b = findLastMatch(da, tfRegex).match) !== null && _b !== void 0 ? _b : [];\n    var defaultFontSize = Number(daMatch[2]);\n    return isFinite(defaultFontSize) ? defaultFontSize : undefined;\n};\n// Examples:\n//   `0.3 g` -> ['0.3', 'g']\n//   `0.3 1 .3 rg` -> ['0.3', '1', '.3', 'rg']\n//   `0.3 1 .3 0 k` -> ['0.3', '1', '.3', '0', 'k']\nvar colorRegex = /(\\d*\\.\\d+|\\d+)[\\0\\t\\n\\f\\r\\ ]*(\\d*\\.\\d+|\\d+)?[\\0\\t\\n\\f\\r\\ ]*(\\d*\\.\\d+|\\d+)?[\\0\\t\\n\\f\\r\\ ]*(\\d*\\.\\d+|\\d+)?[\\0\\t\\n\\f\\r\\ ]+(g|rg|k)/;\nvar getDefaultColor = function (field) {\n    var _a;\n    var da = (_a = field.getDefaultAppearance()) !== null && _a !== void 0 ? _a : '';\n    var daMatch = findLastMatch(da, colorRegex).match;\n    var _b = daMatch !== null && daMatch !== void 0 ? daMatch : [], c1 = _b[1], c2 = _b[2], c3 = _b[3], c4 = _b[4], colorSpace = _b[5];\n    if (colorSpace === 'g' && c1) {\n        return grayscale(Number(c1));\n    }\n    if (colorSpace === 'rg' && c1 && c2 && c3) {\n        return rgb(Number(c1), Number(c2), Number(c3));\n    }\n    if (colorSpace === 'k' && c1 && c2 && c3 && c4) {\n        return cmyk(Number(c1), Number(c2), Number(c3), Number(c4));\n    }\n    return undefined;\n};\nvar updateDefaultAppearance = function (field, color, font, fontSize) {\n    var _a;\n    if (fontSize === void 0) { fontSize = 0; }\n    var da = [\n        setFillingColor(color).toString(),\n        setFontAndSize((_a = font === null || font === void 0 ? void 0 : font.name) !== null && _a !== void 0 ? _a : 'dummy__noop', fontSize).toString(),\n    ].join('\\n');\n    field.setDefaultAppearance(da);\n};\nexport var defaultCheckBoxAppearanceProvider = function (checkBox, widget) {\n    var _a, _b, _c;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(checkBox.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var borderWidth = (_a = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _a !== void 0 ? _a : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _d = adjustDimsForRotation(rectangle, rotation), width = _d.width, height = _d.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = (_b = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor())) !== null && _b !== void 0 ? _b : black;\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var downBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor(), 0.8);\n    // Update color\n    var textColor = (_c = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _c !== void 0 ? _c : black;\n    if (widgetColor) {\n        updateDefaultAppearance(widget, textColor);\n    }\n    else {\n        updateDefaultAppearance(checkBox.acroField, textColor);\n    }\n    var options = {\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        thickness: 1.5,\n        borderWidth: borderWidth,\n        borderColor: borderColor,\n        markColor: textColor,\n    };\n    return {\n        normal: {\n            on: __spreadArrays(rotate, drawCheckBox(__assign(__assign({}, options), { color: normalBackgroundColor, filled: true }))),\n            off: __spreadArrays(rotate, drawCheckBox(__assign(__assign({}, options), { color: normalBackgroundColor, filled: false }))),\n        },\n        down: {\n            on: __spreadArrays(rotate, drawCheckBox(__assign(__assign({}, options), { color: downBackgroundColor, filled: true }))),\n            off: __spreadArrays(rotate, drawCheckBox(__assign(__assign({}, options), { color: downBackgroundColor, filled: false }))),\n        },\n    };\n};\nexport var defaultRadioGroupAppearanceProvider = function (radioGroup, widget) {\n    var _a, _b, _c;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(radioGroup.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var borderWidth = (_a = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _a !== void 0 ? _a : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _d = adjustDimsForRotation(rectangle, rotation), width = _d.width, height = _d.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = (_b = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor())) !== null && _b !== void 0 ? _b : black;\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var downBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor(), 0.8);\n    // Update color\n    var textColor = (_c = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _c !== void 0 ? _c : black;\n    if (widgetColor) {\n        updateDefaultAppearance(widget, textColor);\n    }\n    else {\n        updateDefaultAppearance(radioGroup.acroField, textColor);\n    }\n    var options = {\n        x: width / 2,\n        y: height / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth,\n        borderColor: borderColor,\n        dotColor: textColor,\n    };\n    return {\n        normal: {\n            on: __spreadArrays(rotate, drawRadioButton(__assign(__assign({}, options), { color: normalBackgroundColor, filled: true }))),\n            off: __spreadArrays(rotate, drawRadioButton(__assign(__assign({}, options), { color: normalBackgroundColor, filled: false }))),\n        },\n        down: {\n            on: __spreadArrays(rotate, drawRadioButton(__assign(__assign({}, options), { color: downBackgroundColor, filled: true }))),\n            off: __spreadArrays(rotate, drawRadioButton(__assign(__assign({}, options), { color: downBackgroundColor, filled: false }))),\n        },\n    };\n};\nexport var defaultButtonAppearanceProvider = function (button, widget, font) {\n    var _a, _b, _c, _d, _e;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(button.acroField);\n    var widgetFontSize = getDefaultFontSize(widget);\n    var fieldFontSize = getDefaultFontSize(button.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var captions = ap === null || ap === void 0 ? void 0 : ap.getCaptions();\n    var normalText = (_a = captions === null || captions === void 0 ? void 0 : captions.normal) !== null && _a !== void 0 ? _a : '';\n    var downText = (_c = (_b = captions === null || captions === void 0 ? void 0 : captions.down) !== null && _b !== void 0 ? _b : normalText) !== null && _c !== void 0 ? _c : '';\n    var borderWidth = (_d = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _d !== void 0 ? _d : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _f = adjustDimsForRotation(rectangle, rotation), width = _f.width, height = _f.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor());\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var downBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor(), 0.8);\n    var bounds = {\n        x: borderWidth,\n        y: borderWidth,\n        width: width - borderWidth * 2,\n        height: height - borderWidth * 2,\n    };\n    var normalLayout = layoutSinglelineText(normalText, {\n        alignment: TextAlignment.Center,\n        fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n        font: font,\n        bounds: bounds,\n    });\n    var downLayout = layoutSinglelineText(downText, {\n        alignment: TextAlignment.Center,\n        fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n        font: font,\n        bounds: bounds,\n    });\n    // Update font size and color\n    var fontSize = Math.min(normalLayout.fontSize, downLayout.fontSize);\n    var textColor = (_e = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _e !== void 0 ? _e : black;\n    if (widgetColor || widgetFontSize !== undefined) {\n        updateDefaultAppearance(widget, textColor, font, fontSize);\n    }\n    else {\n        updateDefaultAppearance(button.acroField, textColor, font, fontSize);\n    }\n    var options = {\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth,\n        borderColor: borderColor,\n        textColor: textColor,\n        font: font.name,\n        fontSize: fontSize,\n    };\n    return {\n        normal: __spreadArrays(rotate, drawButton(__assign(__assign({}, options), { color: normalBackgroundColor, textLines: [normalLayout.line] }))),\n        down: __spreadArrays(rotate, drawButton(__assign(__assign({}, options), { color: downBackgroundColor, textLines: [downLayout.line] }))),\n    };\n};\nexport var defaultTextFieldAppearanceProvider = function (textField, widget, font) {\n    var _a, _b, _c, _d;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(textField.acroField);\n    var widgetFontSize = getDefaultFontSize(widget);\n    var fieldFontSize = getDefaultFontSize(textField.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var text = (_a = textField.getText()) !== null && _a !== void 0 ? _a : '';\n    var borderWidth = (_b = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _b !== void 0 ? _b : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _e = adjustDimsForRotation(rectangle, rotation), width = _e.width, height = _e.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor());\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var textLines;\n    var fontSize;\n    var padding = textField.isCombed() ? 0 : 1;\n    var bounds = {\n        x: borderWidth + padding,\n        y: borderWidth + padding,\n        width: width - (borderWidth + padding) * 2,\n        height: height - (borderWidth + padding) * 2,\n    };\n    if (textField.isMultiline()) {\n        var layout = layoutMultilineText(text, {\n            alignment: textField.getAlignment(),\n            fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n            font: font,\n            bounds: bounds,\n        });\n        textLines = layout.lines;\n        fontSize = layout.fontSize;\n    }\n    else if (textField.isCombed()) {\n        var layout = layoutCombedText(text, {\n            fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n            font: font,\n            bounds: bounds,\n            cellCount: (_c = textField.getMaxLength()) !== null && _c !== void 0 ? _c : 0,\n        });\n        textLines = layout.cells;\n        fontSize = layout.fontSize;\n    }\n    else {\n        var layout = layoutSinglelineText(text, {\n            alignment: textField.getAlignment(),\n            fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n            font: font,\n            bounds: bounds,\n        });\n        textLines = [layout.line];\n        fontSize = layout.fontSize;\n    }\n    // Update font size and color\n    var textColor = (_d = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _d !== void 0 ? _d : black;\n    if (widgetColor || widgetFontSize !== undefined) {\n        updateDefaultAppearance(widget, textColor, font, fontSize);\n    }\n    else {\n        updateDefaultAppearance(textField.acroField, textColor, font, fontSize);\n    }\n    var options = {\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth !== null && borderWidth !== void 0 ? borderWidth : 0,\n        borderColor: borderColor,\n        textColor: textColor,\n        font: font.name,\n        fontSize: fontSize,\n        color: normalBackgroundColor,\n        textLines: textLines,\n        padding: padding,\n    };\n    return __spreadArrays(rotate, drawTextField(options));\n};\nexport var defaultDropdownAppearanceProvider = function (dropdown, widget, font) {\n    var _a, _b, _c;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(dropdown.acroField);\n    var widgetFontSize = getDefaultFontSize(widget);\n    var fieldFontSize = getDefaultFontSize(dropdown.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var text = (_a = dropdown.getSelected()[0]) !== null && _a !== void 0 ? _a : '';\n    var borderWidth = (_b = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _b !== void 0 ? _b : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _d = adjustDimsForRotation(rectangle, rotation), width = _d.width, height = _d.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor());\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var padding = 1;\n    var bounds = {\n        x: borderWidth + padding,\n        y: borderWidth + padding,\n        width: width - (borderWidth + padding) * 2,\n        height: height - (borderWidth + padding) * 2,\n    };\n    var _e = layoutSinglelineText(text, {\n        alignment: TextAlignment.Left,\n        fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n        font: font,\n        bounds: bounds,\n    }), line = _e.line, fontSize = _e.fontSize;\n    // Update font size and color\n    var textColor = (_c = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _c !== void 0 ? _c : black;\n    if (widgetColor || widgetFontSize !== undefined) {\n        updateDefaultAppearance(widget, textColor, font, fontSize);\n    }\n    else {\n        updateDefaultAppearance(dropdown.acroField, textColor, font, fontSize);\n    }\n    var options = {\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth !== null && borderWidth !== void 0 ? borderWidth : 0,\n        borderColor: borderColor,\n        textColor: textColor,\n        font: font.name,\n        fontSize: fontSize,\n        color: normalBackgroundColor,\n        textLines: [line],\n        padding: padding,\n    };\n    return __spreadArrays(rotate, drawTextField(options));\n};\nexport var defaultOptionListAppearanceProvider = function (optionList, widget, font) {\n    var _a, _b;\n    // The `/DA` entry can be at the widget or field level - so we handle both\n    var widgetColor = getDefaultColor(widget);\n    var fieldColor = getDefaultColor(optionList.acroField);\n    var widgetFontSize = getDefaultFontSize(widget);\n    var fieldFontSize = getDefaultFontSize(optionList.acroField);\n    var rectangle = widget.getRectangle();\n    var ap = widget.getAppearanceCharacteristics();\n    var bs = widget.getBorderStyle();\n    var borderWidth = (_a = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _a !== void 0 ? _a : 0;\n    var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n    var _c = adjustDimsForRotation(rectangle, rotation), width = _c.width, height = _c.height;\n    var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n    var black = rgb(0, 0, 0);\n    var borderColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBorderColor());\n    var normalBackgroundColor = componentsToColor(ap === null || ap === void 0 ? void 0 : ap.getBackgroundColor());\n    var options = optionList.getOptions();\n    var selected = optionList.getSelected();\n    if (optionList.isSorted())\n        options.sort();\n    var text = '';\n    for (var idx = 0, len = options.length; idx < len; idx++) {\n        text += options[idx];\n        if (idx < len - 1)\n            text += '\\n';\n    }\n    var padding = 1;\n    var bounds = {\n        x: borderWidth + padding,\n        y: borderWidth + padding,\n        width: width - (borderWidth + padding) * 2,\n        height: height - (borderWidth + padding) * 2,\n    };\n    var _d = layoutMultilineText(text, {\n        alignment: TextAlignment.Left,\n        fontSize: widgetFontSize !== null && widgetFontSize !== void 0 ? widgetFontSize : fieldFontSize,\n        font: font,\n        bounds: bounds,\n    }), lines = _d.lines, fontSize = _d.fontSize, lineHeight = _d.lineHeight;\n    var selectedLines = [];\n    for (var idx = 0, len = lines.length; idx < len; idx++) {\n        var line = lines[idx];\n        if (selected.includes(line.text))\n            selectedLines.push(idx);\n    }\n    var blue = rgb(153 / 255, 193 / 255, 218 / 255);\n    // Update font size and color\n    var textColor = (_b = widgetColor !== null && widgetColor !== void 0 ? widgetColor : fieldColor) !== null && _b !== void 0 ? _b : black;\n    if (widgetColor || widgetFontSize !== undefined) {\n        updateDefaultAppearance(widget, textColor, font, fontSize);\n    }\n    else {\n        updateDefaultAppearance(optionList.acroField, textColor, font, fontSize);\n    }\n    return __spreadArrays(rotate, drawOptionList({\n        x: 0 + borderWidth / 2,\n        y: 0 + borderWidth / 2,\n        width: width - borderWidth,\n        height: height - borderWidth,\n        borderWidth: borderWidth !== null && borderWidth !== void 0 ? borderWidth : 0,\n        borderColor: borderColor,\n        textColor: textColor,\n        font: font.name,\n        fontSize: fontSize,\n        color: normalBackgroundColor,\n        textLines: lines,\n        lineHeight: lineHeight,\n        selectedColor: blue,\n        selectedLines: selectedLines,\n        padding: padding,\n    }));\n};\n//# sourceMappingURL=appearances.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFDocument from \"./PDFDocument\";\nimport { PDFPageEmbedder, PDFRef } from \"../core\";\nimport { assertIs } from \"../utils\";\n/**\n * Represents a PDF page that has been embedded in a [[PDFDocument]].\n */\nvar PDFEmbeddedPage = /** @class */ (function () {\n    function PDFEmbeddedPage(ref, doc, embedder) {\n        this.alreadyEmbedded = false;\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        assertIs(embedder, 'embedder', [[PDFPageEmbedder, 'PDFPageEmbedder']]);\n        this.ref = ref;\n        this.doc = doc;\n        this.width = embedder.width;\n        this.height = embedder.height;\n        this.embedder = embedder;\n    }\n    /**\n     * Compute the width and height of this page after being scaled by the\n     * given `factor`. For example:\n     * ```js\n     * embeddedPage.width  // => 500\n     * embeddedPage.height // => 250\n     *\n     * const scaled = embeddedPage.scale(0.5)\n     * scaled.width  // => 250\n     * scaled.height // => 125\n     * ```\n     * This operation is often useful before drawing a page with\n     * [[PDFPage.drawPage]] to compute the `width` and `height` options.\n     * @param factor The factor by which this page should be scaled.\n     * @returns The width and height of the page after being scaled.\n     */\n    PDFEmbeddedPage.prototype.scale = function (factor) {\n        assertIs(factor, 'factor', ['number']);\n        return { width: this.width * factor, height: this.height * factor };\n    };\n    /**\n     * Get the width and height of this page. For example:\n     * ```js\n     * const { width, height } = embeddedPage.size()\n     * ```\n     * @returns The width and height of the page.\n     */\n    PDFEmbeddedPage.prototype.size = function () {\n        return this.scale(1);\n    };\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all embeddable pages get embedded.\n     *\n     * Embed this embeddable page in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFEmbeddedPage.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.alreadyEmbedded) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.embedder.embedIntoContext(this.doc.context, this.ref)];\n                    case 1:\n                        _a.sent();\n                        this.alreadyEmbedded = true;\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.embedPdf]] and\n     * > [[PDFDocument.embedPage]] methods, which will create instances of\n     * > [[PDFEmbeddedPage]] for you.\n     *\n     * Create an instance of [[PDFEmbeddedPage]] from an existing ref and embedder\n     *\n     * @param ref The unique reference for this embedded page.\n     * @param doc The document to which the embedded page will belong.\n     * @param embedder The embedder that will be used to embed the page.\n     */\n    PDFEmbeddedPage.of = function (ref, doc, embedder) {\n        return new PDFEmbeddedPage(ref, doc, embedder);\n    };\n    return PDFEmbeddedPage;\n}());\nexport default PDFEmbeddedPage;\n//# sourceMappingURL=PDFEmbeddedPage.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFDocument from \"./PDFDocument\";\nimport { CustomFontEmbedder, PDFRef, StandardFontEmbedder, } from \"../core\";\nimport { assertIs, assertOrUndefined } from \"../utils\";\n/**\n * Represents a font that has been embedded in a [[PDFDocument]].\n */\nvar PDFFont = /** @class */ (function () {\n    function PDFFont(ref, doc, embedder) {\n        this.modified = true;\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        assertIs(embedder, 'embedder', [\n            [CustomFontEmbedder, 'CustomFontEmbedder'],\n            [StandardFontEmbedder, 'StandardFontEmbedder'],\n        ]);\n        this.ref = ref;\n        this.doc = doc;\n        this.name = embedder.fontName;\n        this.embedder = embedder;\n    }\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFPage.drawText]] method will automatically encode the text it is\n     * > given.\n     *\n     * Encodes a string of text in this font.\n     *\n     * @param text The text to be encoded.\n     * @returns The encoded text as a hex string.\n     */\n    PDFFont.prototype.encodeText = function (text) {\n        assertIs(text, 'text', ['string']);\n        this.modified = true;\n        return this.embedder.encodeText(text);\n    };\n    /**\n     * Measure the width of a string of text drawn in this font at a given size.\n     * For example:\n     * ```js\n     * const width = font.widthOfTextAtSize('Foo Bar Qux Baz', 36)\n     * ```\n     * @param text The string of text to be measured.\n     * @param size The font size to be used for this measurement.\n     * @returns The width of the string of text when drawn in this font at the\n     *          given size.\n     */\n    PDFFont.prototype.widthOfTextAtSize = function (text, size) {\n        assertIs(text, 'text', ['string']);\n        assertIs(size, 'size', ['number']);\n        return this.embedder.widthOfTextAtSize(text, size);\n    };\n    /**\n     * Measure the height of this font at a given size. For example:\n     * ```js\n     * const height = font.heightAtSize(24)\n     * ```\n     *\n     * The `options.descender` value controls whether or not the font's\n     * descender is included in the height calculation.\n     *\n     * @param size The font size to be used for this measurement.\n     * @param options The options to be used when computing this measurement.\n     * @returns The height of this font at the given size.\n     */\n    PDFFont.prototype.heightAtSize = function (size, options) {\n        var _a;\n        assertIs(size, 'size', ['number']);\n        assertOrUndefined(options === null || options === void 0 ? void 0 : options.descender, 'options.descender', ['boolean']);\n        return this.embedder.heightOfFontAtSize(size, {\n            descender: (_a = options === null || options === void 0 ? void 0 : options.descender) !== null && _a !== void 0 ? _a : true,\n        });\n    };\n    /**\n     * Compute the font size at which this font is a given height. For example:\n     * ```js\n     * const fontSize = font.sizeAtHeight(12)\n     * ```\n     * @param height The height to be used for this calculation.\n     * @returns The font size at which this font is the given height.\n     */\n    PDFFont.prototype.sizeAtHeight = function (height) {\n        assertIs(height, 'height', ['number']);\n        return this.embedder.sizeOfFontAtHeight(height);\n    };\n    /**\n     * Get the set of unicode code points that can be represented by this font.\n     * @returns The set of unicode code points supported by this font.\n     */\n    PDFFont.prototype.getCharacterSet = function () {\n        if (this.embedder instanceof StandardFontEmbedder) {\n            return this.embedder.encoding.supportedCodePoints;\n        }\n        else {\n            return this.embedder.font.characterSet;\n        }\n    };\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all fonts get embedded.\n     *\n     * Embed this font in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFFont.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.modified) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.embedder.embedIntoContext(this.doc.context, this.ref)];\n                    case 1:\n                        _a.sent();\n                        this.modified = false;\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.embedFont]] and\n     * > [[PDFDocument.embedStandardFont]] methods, which will create instances\n     * > of [[PDFFont]] for you.\n     *\n     * Create an instance of [[PDFFont]] from an existing ref and embedder\n     *\n     * @param ref The unique reference for this font.\n     * @param doc The document to which the font will belong.\n     * @param embedder The embedder that will be used to embed the font.\n     */\n    PDFFont.of = function (ref, doc, embedder) {\n        return new PDFFont(ref, doc, embedder);\n    };\n    return PDFFont;\n}());\nexport default PDFFont;\n//# sourceMappingURL=PDFFont.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFDocument from \"./PDFDocument\";\nimport { JpegEmbedder, PDFRef, PngEmbedder } from \"../core\";\nimport { assertIs } from \"../utils\";\n/**\n * Represents an image that has been embedded in a [[PDFDocument]].\n */\nvar PDFImage = /** @class */ (function () {\n    function PDFImage(ref, doc, embedder) {\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        assertIs(embedder, 'embedder', [\n            [JpegEmbedder, 'JpegEmbedder'],\n            [PngEmbedder, 'PngEmbedder'],\n        ]);\n        this.ref = ref;\n        this.doc = doc;\n        this.width = embedder.width;\n        this.height = embedder.height;\n        this.embedder = embedder;\n    }\n    /**\n     * Compute the width and height of this image after being scaled by the\n     * given `factor`. For example:\n     * ```js\n     * image.width  // => 500\n     * image.height // => 250\n     *\n     * const scaled = image.scale(0.5)\n     * scaled.width  // => 250\n     * scaled.height // => 125\n     * ```\n     * This operation is often useful before drawing an image with\n     * [[PDFPage.drawImage]] to compute the `width` and `height` options.\n     * @param factor The factor by which this image should be scaled.\n     * @returns The width and height of the image after being scaled.\n     */\n    PDFImage.prototype.scale = function (factor) {\n        assertIs(factor, 'factor', ['number']);\n        return { width: this.width * factor, height: this.height * factor };\n    };\n    /**\n     * Get the width and height of this image after scaling it as large as\n     * possible while maintaining its aspect ratio and not exceeding the\n     * specified `width` and `height`. For example:\n     * ```\n     * image.width  // => 500\n     * image.height // => 250\n     *\n     * const scaled = image.scaleToFit(750, 1000)\n     * scaled.width  // => 750\n     * scaled.height // => 375\n     * ```\n     * The `width` and `height` parameters can also be thought of as the width\n     * and height of a box that the scaled image must fit within.\n     * @param width The bounding box's width.\n     * @param height The bounding box's height.\n     * @returns The width and height of the image after being scaled.\n     */\n    PDFImage.prototype.scaleToFit = function (width, height) {\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var imgWidthScale = width / this.width;\n        var imgHeightScale = height / this.height;\n        var scale = Math.min(imgWidthScale, imgHeightScale);\n        return this.scale(scale);\n    };\n    /**\n     * Get the width and height of this image. For example:\n     * ```js\n     * const { width, height } = image.size()\n     * ```\n     * @returns The width and height of the image.\n     */\n    PDFImage.prototype.size = function () {\n        return this.scale(1);\n    };\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all images get embedded.\n     *\n     * Embed this image in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFImage.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, doc, ref;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.embedder)\n                            return [2 /*return*/];\n                        // The image should only be embedded once. If there's a pending embed\n                        // operation then wait on it. Otherwise we need to start the embed.\n                        if (!this.embedTask) {\n                            _a = this, doc = _a.doc, ref = _a.ref;\n                            this.embedTask = this.embedder.embedIntoContext(doc.context, ref);\n                        }\n                        return [4 /*yield*/, this.embedTask];\n                    case 1:\n                        _b.sent();\n                        // We clear `this.embedder` so that the indirectly referenced image data\n                        // can be garbage collected, thus avoiding a memory leak.\n                        // See https://github.com/Hopding/pdf-lib/pull/1032/files.\n                        this.embedder = undefined;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.embedPng]] and [[PDFDocument.embedJpg]]\n     * > methods, which will create instances of [[PDFImage]] for you.\n     *\n     * Create an instance of [[PDFImage]] from an existing ref and embedder\n     *\n     * @param ref The unique reference for this image.\n     * @param doc The document to which the image will belong.\n     * @param embedder The embedder that will be used to embed the image.\n     */\n    PDFImage.of = function (ref, doc, embedder) {\n        return new PDFImage(ref, doc, embedder);\n    };\n    return PDFImage;\n}());\nexport default PDFImage;\n//# sourceMappingURL=PDFImage.js.map","export var ImageAlignment;\n(function (ImageAlignment) {\n    ImageAlignment[ImageAlignment[\"Left\"] = 0] = \"Left\";\n    ImageAlignment[ImageAlignment[\"Center\"] = 1] = \"Center\";\n    ImageAlignment[ImageAlignment[\"Right\"] = 2] = \"Right\";\n})(ImageAlignment || (ImageAlignment = {}));\n//# sourceMappingURL=alignment.js.map","import { __assign, __spreadArrays } from \"tslib\";\nimport PDFDocument from \"../PDFDocument\";\nimport { colorToComponents, setFillingColor } from \"../colors\";\nimport { toDegrees, rotateRectangle, reduceRotation, adjustDimsForRotation, degrees, } from \"../rotations\";\nimport { PDFRef, PDFWidgetAnnotation, PDFName, MethodNotImplementedError, AcroFieldFlags, PDFAcroTerminal, AnnotationFlags, } from \"../../core\";\nimport { assertIs, assertMultiple, assertOrUndefined } from \"../../utils\";\nimport { ImageAlignment } from '../image';\nimport { drawImage, rotateInPlace } from '../operations';\nexport var assertFieldAppearanceOptions = function (options) {\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.x, 'options.x', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.y, 'options.y', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.width, 'options.width', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.height, 'options.height', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.textColor, 'options.textColor', [\n        [Object, 'Color'],\n    ]);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.backgroundColor, 'options.backgroundColor', [\n        [Object, 'Color'],\n    ]);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.borderColor, 'options.borderColor', [\n        [Object, 'Color'],\n    ]);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.borderWidth, 'options.borderWidth', ['number']);\n    assertOrUndefined(options === null || options === void 0 ? void 0 : options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n};\n/**\n * Represents a field of a [[PDFForm]].\n *\n * This class is effectively abstract. All fields in a [[PDFForm]] will\n * actually be an instance of a subclass of this class.\n *\n * Note that each field in a PDF is represented by a single field object.\n * However, a given field object may be rendered at multiple locations within\n * the document (across one or more pages). The rendering of a field is\n * controlled by its widgets. Each widget causes its field to be displayed at a\n * particular location in the document.\n *\n * Most of the time each field in a PDF has only a single widget, and thus is\n * only rendered once. However, if a field is rendered multiple times, it will\n * have multiple widgets - one for each location it is rendered.\n *\n * This abstraction of field objects and widgets is defined in the PDF\n * specification and dictates how PDF files store fields and where they are\n * to be rendered.\n */\nvar PDFField = /** @class */ (function () {\n    function PDFField(acroField, ref, doc) {\n        assertIs(acroField, 'acroField', [[PDFAcroTerminal, 'PDFAcroTerminal']]);\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        this.acroField = acroField;\n        this.ref = ref;\n        this.doc = doc;\n    }\n    /**\n     * Get the fully qualified name of this field. For example:\n     * ```js\n     * const fields = form.getFields()\n     * fields.forEach(field => {\n     *   const name = field.getName()\n     *   console.log('Field name:', name)\n     * })\n     * ```\n     * Note that PDF fields are structured as a tree. Each field is the\n     * descendent of a series of ancestor nodes all the way up to the form node,\n     * which is always the root of the tree. Each node in the tree (except for\n     * the form node) has a partial name. Partial names can be composed of any\n     * unicode characters except a period (`.`). The fully qualified name of a\n     * field is composed of the partial names of all its ancestors joined\n     * with periods. This means that splitting the fully qualified name on\n     * periods and taking the last element of the resulting array will give you\n     * the partial name of a specific field.\n     * @returns The fully qualified name of this field.\n     */\n    PDFField.prototype.getName = function () {\n        var _a;\n        return (_a = this.acroField.getFullyQualifiedName()) !== null && _a !== void 0 ? _a : '';\n    };\n    /**\n     * Returns `true` if this field is read only. This means that PDF readers\n     * will not allow users to interact with the field or change its value. See\n     * [[PDFField.enableReadOnly]] and [[PDFField.disableReadOnly]].\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * if (field.isReadOnly()) console.log('Read only is enabled')\n     * ```\n     * @returns Whether or not this is a read only field.\n     */\n    PDFField.prototype.isReadOnly = function () {\n        return this.acroField.hasFlag(AcroFieldFlags.ReadOnly);\n    };\n    /**\n     * Prevent PDF readers from allowing users to interact with this field or\n     * change its value. The field will not respond to mouse or keyboard input.\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.enableReadOnly()\n     * ```\n     * Useful for fields whose values are computed, imported from a database, or\n     * prefilled by software before being displayed to the user.\n     */\n    PDFField.prototype.enableReadOnly = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.ReadOnly, true);\n    };\n    /**\n     * Allow users to interact with this field and change its value in PDF\n     * readers via mouse and keyboard input. For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.disableReadOnly()\n     * ```\n     */\n    PDFField.prototype.disableReadOnly = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.ReadOnly, false);\n    };\n    /**\n     * Returns `true` if this field must have a value when the form is submitted.\n     * See [[PDFField.enableRequired]] and [[PDFField.disableRequired]].\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * if (field.isRequired()) console.log('Field is required')\n     * ```\n     * @returns Whether or not this field is required.\n     */\n    PDFField.prototype.isRequired = function () {\n        return this.acroField.hasFlag(AcroFieldFlags.Required);\n    };\n    /**\n     * Require this field to have a value when the form is submitted.\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.enableRequired()\n     * ```\n     */\n    PDFField.prototype.enableRequired = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.Required, true);\n    };\n    /**\n     * Do not require this field to have a value when the form is submitted.\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.disableRequired()\n     * ```\n     */\n    PDFField.prototype.disableRequired = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.Required, false);\n    };\n    /**\n     * Returns `true` if this field's value should be exported when the form is\n     * submitted. See [[PDFField.enableExporting]] and\n     * [[PDFField.disableExporting]].\n     * For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * if (field.isExported()) console.log('Exporting is enabled')\n     * ```\n     * @returns Whether or not this field's value should be exported.\n     */\n    PDFField.prototype.isExported = function () {\n        return !this.acroField.hasFlag(AcroFieldFlags.NoExport);\n    };\n    /**\n     * Indicate that this field's value should be exported when the form is\n     * submitted in a PDF reader. For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.enableExporting()\n     * ```\n     */\n    PDFField.prototype.enableExporting = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.NoExport, false);\n    };\n    /**\n     * Indicate that this field's value should **not** be exported when the form\n     * is submitted in a PDF reader. For example:\n     * ```js\n     * const field = form.getField('some.field')\n     * field.disableExporting()\n     * ```\n     */\n    PDFField.prototype.disableExporting = function () {\n        this.acroField.setFlagTo(AcroFieldFlags.NoExport, true);\n    };\n    /** @ignore */\n    PDFField.prototype.needsAppearancesUpdate = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'needsAppearancesUpdate');\n    };\n    /** @ignore */\n    PDFField.prototype.defaultUpdateAppearances = function (_font) {\n        throw new MethodNotImplementedError(this.constructor.name, 'defaultUpdateAppearances');\n    };\n    PDFField.prototype.markAsDirty = function () {\n        this.doc.getForm().markFieldAsDirty(this.ref);\n    };\n    PDFField.prototype.markAsClean = function () {\n        this.doc.getForm().markFieldAsClean(this.ref);\n    };\n    PDFField.prototype.isDirty = function () {\n        return this.doc.getForm().fieldIsDirty(this.ref);\n    };\n    PDFField.prototype.createWidget = function (options) {\n        var _a;\n        var textColor = options.textColor;\n        var backgroundColor = options.backgroundColor;\n        var borderColor = options.borderColor;\n        var borderWidth = options.borderWidth;\n        var degreesAngle = toDegrees(options.rotate);\n        var caption = options.caption;\n        var x = options.x;\n        var y = options.y;\n        var width = options.width + borderWidth;\n        var height = options.height + borderWidth;\n        var hidden = Boolean(options.hidden);\n        var pageRef = options.page;\n        assertMultiple(degreesAngle, 'degreesAngle', 90);\n        // Create a widget for this field\n        var widget = PDFWidgetAnnotation.create(this.doc.context, this.ref);\n        // Set widget properties\n        var rect = rotateRectangle({ x: x, y: y, width: width, height: height }, borderWidth, degreesAngle);\n        widget.setRectangle(rect);\n        if (pageRef)\n            widget.setP(pageRef);\n        var ac = widget.getOrCreateAppearanceCharacteristics();\n        if (backgroundColor) {\n            ac.setBackgroundColor(colorToComponents(backgroundColor));\n        }\n        ac.setRotation(degreesAngle);\n        if (caption)\n            ac.setCaptions({ normal: caption });\n        if (borderColor)\n            ac.setBorderColor(colorToComponents(borderColor));\n        var bs = widget.getOrCreateBorderStyle();\n        if (borderWidth !== undefined)\n            bs.setWidth(borderWidth);\n        widget.setFlagTo(AnnotationFlags.Print, true);\n        widget.setFlagTo(AnnotationFlags.Hidden, hidden);\n        widget.setFlagTo(AnnotationFlags.Invisible, false);\n        // Set acrofield properties\n        if (textColor) {\n            var da = (_a = this.acroField.getDefaultAppearance()) !== null && _a !== void 0 ? _a : '';\n            var newDa = da + '\\n' + setFillingColor(textColor).toString();\n            this.acroField.setDefaultAppearance(newDa);\n        }\n        return widget;\n    };\n    PDFField.prototype.updateWidgetAppearanceWithFont = function (widget, font, _a) {\n        var normal = _a.normal, rollover = _a.rollover, down = _a.down;\n        this.updateWidgetAppearances(widget, {\n            normal: this.createAppearanceStream(widget, normal, font),\n            rollover: rollover && this.createAppearanceStream(widget, rollover, font),\n            down: down && this.createAppearanceStream(widget, down, font),\n        });\n    };\n    PDFField.prototype.updateOnOffWidgetAppearance = function (widget, onValue, _a) {\n        var normal = _a.normal, rollover = _a.rollover, down = _a.down;\n        this.updateWidgetAppearances(widget, {\n            normal: this.createAppearanceDict(widget, normal, onValue),\n            rollover: rollover && this.createAppearanceDict(widget, rollover, onValue),\n            down: down && this.createAppearanceDict(widget, down, onValue),\n        });\n    };\n    PDFField.prototype.updateWidgetAppearances = function (widget, _a) {\n        var normal = _a.normal, rollover = _a.rollover, down = _a.down;\n        widget.setNormalAppearance(normal);\n        if (rollover) {\n            widget.setRolloverAppearance(rollover);\n        }\n        else {\n            widget.removeRolloverAppearance();\n        }\n        if (down) {\n            widget.setDownAppearance(down);\n        }\n        else {\n            widget.removeDownAppearance();\n        }\n    };\n    // // TODO: Do we need to do this...?\n    // private foo(font: PDFFont, dict: PDFDict) {\n    //   if (!dict.lookup(PDFName.of('DR'))) {\n    //     dict.set(PDFName.of('DR'), dict.context.obj({}));\n    //   }\n    //   const DR = dict.lookup(PDFName.of('DR'), PDFDict);\n    //   if (!DR.lookup(PDFName.of('Font'))) {\n    //     DR.set(PDFName.of('Font'), dict.context.obj({}));\n    //   }\n    //   const Font = DR.lookup(PDFName.of('Font'), PDFDict);\n    //   Font.set(PDFName.of(font.name), font.ref);\n    // }\n    PDFField.prototype.createAppearanceStream = function (widget, appearance, font) {\n        var _a;\n        var context = this.acroField.dict.context;\n        var _b = widget.getRectangle(), width = _b.width, height = _b.height;\n        // TODO: Do we need to do this...?\n        // if (font) {\n        //   this.foo(font, widget.dict);\n        //   this.foo(font, this.doc.getForm().acroForm.dict);\n        // }\n        // END TODO\n        var Resources = font && { Font: (_a = {}, _a[font.name] = font.ref, _a) };\n        var stream = context.formXObject(appearance, {\n            Resources: Resources,\n            BBox: context.obj([0, 0, width, height]),\n            Matrix: context.obj([1, 0, 0, 1, 0, 0]),\n        });\n        var streamRef = context.register(stream);\n        return streamRef;\n    };\n    /**\n     * Create a FormXObject of the supplied image and add it to context.\n     * The FormXObject size is calculated based on the widget (including\n     * the alignment).\n     * @param widget The widget that should display the image.\n     * @param alignment The alignment of the image.\n     * @param image The image that should be displayed.\n     * @returns The ref for the FormXObject that was added to the context.\n     */\n    PDFField.prototype.createImageAppearanceStream = function (widget, image, alignment) {\n        // NOTE: This implementation doesn't handle image borders.\n        // NOTE: Acrobat seems to resize the image (maybe even skewing its aspect\n        //       ratio) to fit perfectly within the widget's rectangle. This method\n        //       does not currently do that. Should there be an option for that?\n        var _a;\n        var _b;\n        var context = this.acroField.dict.context;\n        var rectangle = widget.getRectangle();\n        var ap = widget.getAppearanceCharacteristics();\n        var bs = widget.getBorderStyle();\n        var borderWidth = (_b = bs === null || bs === void 0 ? void 0 : bs.getWidth()) !== null && _b !== void 0 ? _b : 0;\n        var rotation = reduceRotation(ap === null || ap === void 0 ? void 0 : ap.getRotation());\n        var rotate = rotateInPlace(__assign(__assign({}, rectangle), { rotation: rotation }));\n        var adj = adjustDimsForRotation(rectangle, rotation);\n        var imageDims = image.scaleToFit(adj.width - borderWidth * 2, adj.height - borderWidth * 2);\n        // Support borders on images and maybe other properties\n        var options = {\n            x: borderWidth,\n            y: borderWidth,\n            width: imageDims.width,\n            height: imageDims.height,\n            //\n            rotate: degrees(0),\n            xSkew: degrees(0),\n            ySkew: degrees(0),\n        };\n        if (alignment === ImageAlignment.Center) {\n            options.x += (adj.width - borderWidth * 2) / 2 - imageDims.width / 2;\n            options.y += (adj.height - borderWidth * 2) / 2 - imageDims.height / 2;\n        }\n        else if (alignment === ImageAlignment.Right) {\n            options.x = adj.width - borderWidth - imageDims.width;\n            options.y = adj.height - borderWidth - imageDims.height;\n        }\n        var imageName = this.doc.context.addRandomSuffix('Image', 10);\n        var appearance = __spreadArrays(rotate, drawImage(imageName, options));\n        ////////////\n        var Resources = { XObject: (_a = {}, _a[imageName] = image.ref, _a) };\n        var stream = context.formXObject(appearance, {\n            Resources: Resources,\n            BBox: context.obj([0, 0, rectangle.width, rectangle.height]),\n            Matrix: context.obj([1, 0, 0, 1, 0, 0]),\n        });\n        return context.register(stream);\n    };\n    PDFField.prototype.createAppearanceDict = function (widget, appearance, onValue) {\n        var context = this.acroField.dict.context;\n        var onStreamRef = this.createAppearanceStream(widget, appearance.on);\n        var offStreamRef = this.createAppearanceStream(widget, appearance.off);\n        var appearanceDict = context.obj({});\n        appearanceDict.set(onValue, onStreamRef);\n        appearanceDict.set(PDFName.of('Off'), offStreamRef);\n        return appearanceDict;\n    };\n    return PDFField;\n}());\nexport default PDFField;\n//# sourceMappingURL=PDFField.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport { normalizeAppearance, defaultCheckBoxAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { PDFName, PDFDict, PDFAcroCheckBox, } from \"../../core\";\nimport { assertIs, assertOrUndefined } from \"../../utils\";\n/**\n * Represents a check box field of a [[PDFForm]].\n *\n * [[PDFCheckBox]] fields are interactive boxes that users can click with their\n * mouse. This type of [[PDFField]] has two states: `on` and `off`. The purpose\n * of a check box is to enable users to select from one or more options, where\n * each option is represented by a single check box. Check boxes are typically\n * square in shape and display a check mark when they are in the `on` state.\n */\nvar PDFCheckBox = /** @class */ (function (_super) {\n    __extends(PDFCheckBox, _super);\n    function PDFCheckBox(acroCheckBox, ref, doc) {\n        var _this = _super.call(this, acroCheckBox, ref, doc) || this;\n        assertIs(acroCheckBox, 'acroCheckBox', [\n            [PDFAcroCheckBox, 'PDFAcroCheckBox'],\n        ]);\n        _this.acroField = acroCheckBox;\n        return _this;\n    }\n    /**\n     * Mark this check box. This operation is analogous to a human user clicking\n     * a check box to fill it in a PDF reader. This method will update the\n     * underlying state of the check box field to indicate it has been selected.\n     * PDF libraries and readers will be able to extract this value from the\n     * saved document and determine that it was selected.\n     *\n     * For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * checkBox.check()\n     * ```\n     *\n     * This method will mark this check box as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated appearance\n     * streams will display a check mark inside the widgets of this check box\n     * field.\n     */\n    PDFCheckBox.prototype.check = function () {\n        var _a;\n        var onValue = (_a = this.acroField.getOnValue()) !== null && _a !== void 0 ? _a : PDFName.of('Yes');\n        this.markAsDirty();\n        this.acroField.setValue(onValue);\n    };\n    /**\n     * Clears this check box. This operation is analogous to a human user clicking\n     * a check box to unmark it in a PDF reader. This method will update the\n     * underlying state of the check box field to indicate it has been deselected.\n     * PDF libraries and readers will be able to extract this value from the\n     * saved document and determine that it was not selected.\n     *\n     * For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * checkBox.uncheck()\n     * ```\n     *\n     * This method will mark this check box as dirty. See [[PDFCheckBox.check]]\n     * for more details about what this means.\n     */\n    PDFCheckBox.prototype.uncheck = function () {\n        this.markAsDirty();\n        this.acroField.setValue(PDFName.of('Off'));\n    };\n    /**\n     * Returns `true` if this check box is selected (either by a human user via\n     * a PDF reader, or else programmatically via software). For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * if (checkBox.isChecked()) console.log('check box is selected')\n     * ```\n     * @returns Whether or not this check box is selected.\n     */\n    PDFCheckBox.prototype.isChecked = function () {\n        var onValue = this.acroField.getOnValue();\n        return !!onValue && onValue === this.acroField.getValue();\n    };\n    /**\n     * Show this check box on the specified page. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const checkBox = form.createCheckBox('some.checkBox.field')\n     *\n     * checkBox.addToPage(page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 25,\n     *   height: 25,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     * })\n     * ```\n     * This will create a new widget for this check box field.\n     * @param page The page to which this check box widget should be added.\n     * @param options The options to be used when adding this check box widget.\n     */\n    PDFCheckBox.prototype.addToPage = function (page, options) {\n        var _a, _b, _c, _d, _e, _f;\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        if (!options)\n            options = {};\n        if (!('textColor' in options))\n            options.textColor = rgb(0, 0, 0);\n        if (!('backgroundColor' in options))\n            options.backgroundColor = rgb(1, 1, 1);\n        if (!('borderColor' in options))\n            options.borderColor = rgb(0, 0, 0);\n        if (!('borderWidth' in options))\n            options.borderWidth = 1;\n        // Create a widget for this check box\n        var widget = this.createWidget({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 50,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 50,\n            textColor: options.textColor,\n            backgroundColor: options.backgroundColor,\n            borderColor: options.borderColor,\n            borderWidth: (_e = options.borderWidth) !== null && _e !== void 0 ? _e : 0,\n            rotate: (_f = options.rotate) !== null && _f !== void 0 ? _f : degrees(0),\n            hidden: options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        widget.setAppearanceState(PDFName.of('Off'));\n        this.updateWidgetAppearance(widget, PDFName.of('Yes'));\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if any of this check box's widgets do not have an\n     * appearance stream for its current state. For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * if (checkBox.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this check box needs an appearance update.\n     */\n    PDFCheckBox.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var state = widget.getAppearanceState();\n            var normal = (_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal;\n            if (!(normal instanceof PDFDict))\n                return true;\n            if (state && !normal.has(state))\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this check box's widgets using\n     * the default appearance provider for check boxes. For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * checkBox.defaultUpdateAppearances()\n     * ```\n     */\n    PDFCheckBox.prototype.defaultUpdateAppearances = function () {\n        this.updateAppearances();\n    };\n    /**\n     * Update the appearance streams for each of this check box's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for check boxs will be used. For example:\n     * ```js\n     * const checkBox = form.getCheckBox('some.checkBox.field')\n     * checkBox.updateAppearances((field, widget) => {\n     *   ...\n     *   return {\n     *     normal: { on: drawCheckBox(...), off: drawCheckBox(...) },\n     *     down: { on: drawCheckBox(...), off: drawCheckBox(...) },\n     *   }\n     * })\n     * ```\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFCheckBox.prototype.updateAppearances = function (provider) {\n        var _a;\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var onValue = (_a = widget.getOnValue()) !== null && _a !== void 0 ? _a : PDFName.of('Yes');\n            if (!onValue)\n                continue;\n            this.updateWidgetAppearance(widget, onValue, provider);\n        }\n        this.markAsClean();\n    };\n    PDFCheckBox.prototype.updateWidgetAppearance = function (widget, onValue, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultCheckBoxAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget));\n        this.updateOnOffWidgetAppearance(widget, onValue, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getCheckBox]] method, which will create an\n     * > instance of [[PDFCheckBox]] for you.\n     *\n     * Create an instance of [[PDFCheckBox]] from an existing acroCheckBox and ref\n     *\n     * @param acroCheckBox The underlying `PDFAcroCheckBox` for this check box.\n     * @param ref The unique reference for this check box.\n     * @param doc The document to which this check box will belong.\n     */\n    PDFCheckBox.of = function (acroCheckBox, ref, doc) {\n        return new PDFCheckBox(acroCheckBox, ref, doc);\n    };\n    return PDFCheckBox;\n}(PDFField));\nexport default PDFCheckBox;\n//# sourceMappingURL=PDFCheckBox.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFFont from \"../PDFFont\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { normalizeAppearance, defaultDropdownAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { PDFHexString, PDFStream, PDFAcroComboBox, AcroChoiceFlags, } from \"../../core\";\nimport { assertIs, assertOrUndefined, assertPositive } from \"../../utils\";\n/**\n * Represents a dropdown field of a [[PDFForm]].\n *\n * [[PDFDropdown]] fields are interactive text boxes that display a single\n * element (the currently selected value). The purpose of a dropdown is to\n * enable users to select a single option from a set of possible options. Users\n * can click on a dropdown to view the full list of options it provides.\n * Clicking on an option in the list will cause it to be selected and displayed\n * in the dropdown's text box. Some dropdowns allow users to enter text\n * directly into the box from their keyboard, rather than only being allowed to\n * choose an option from the list (see [[PDFDropdown.isEditable]]).\n */\nvar PDFDropdown = /** @class */ (function (_super) {\n    __extends(PDFDropdown, _super);\n    function PDFDropdown(acroComboBox, ref, doc) {\n        var _this = _super.call(this, acroComboBox, ref, doc) || this;\n        assertIs(acroComboBox, 'acroComboBox', [\n            [PDFAcroComboBox, 'PDFAcroComboBox'],\n        ]);\n        _this.acroField = acroComboBox;\n        return _this;\n    }\n    /**\n     * Get the list of available options for this dropdown. These options will be\n     * displayed to users who click on this dropdown in a PDF reader.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * const options = dropdown.getOptions()\n     * console.log('Dropdown options:', options)\n     * ```\n     * @returns The options for this dropdown.\n     */\n    PDFDropdown.prototype.getOptions = function () {\n        var rawOptions = this.acroField.getOptions();\n        var options = new Array(rawOptions.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            var _a = rawOptions[idx], display = _a.display, value = _a.value;\n            options[idx] = (display !== null && display !== void 0 ? display : value).decodeText();\n        }\n        return options;\n    };\n    /**\n     * Get the selected options for this dropdown. These are the values that were\n     * selected by a human user via a PDF reader, or programatically via\n     * software.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * const selections = dropdown.getSelected()\n     * console.log('Dropdown selections:', selections)\n     * ```\n     * > **NOTE:** Note that PDF readers only display one selected option when\n     * > rendering dropdowns. However, the PDF specification does allow for\n     * > multiple values to be selected in a dropdown. As such, the `pdf-lib`\n     * > API supports this. However, in most cases the array returned by this\n     * > method will contain only a single element (or no elements).\n     * @returns The selected options in this dropdown.\n     */\n    PDFDropdown.prototype.getSelected = function () {\n        var values = this.acroField.getValues();\n        var selected = new Array(values.length);\n        for (var idx = 0, len = values.length; idx < len; idx++) {\n            selected[idx] = values[idx].decodeText();\n        }\n        return selected;\n    };\n    /**\n     * Set the list of options that are available for this dropdown. These are\n     * the values that will be available for users to select when they view this\n     * dropdown in a PDF reader. Note that preexisting options for this dropdown\n     * will be removed. Only the values passed as `options` will be available to\n     * select.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('planets.dropdown')\n     * dropdown.setOptions(['Earth', 'Mars', 'Pluto', 'Venus'])\n     * ```\n     * @param options The options that should be available in this dropdown.\n     */\n    PDFDropdown.prototype.setOptions = function (options) {\n        assertIs(options, 'options', [Array]);\n        var optionObjects = new Array(options.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            optionObjects[idx] = { value: PDFHexString.fromText(options[idx]) };\n        }\n        this.acroField.setOptions(optionObjects);\n    };\n    /**\n     * Add to the list of options that are available for this dropdown. Users\n     * will be able to select these values in a PDF reader. In addition to the\n     * values passed as `options`, any preexisting options for this dropdown will\n     * still be available for users to select.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('rockets.dropdown')\n     * dropdown.addOptions(['Saturn IV', 'Falcon Heavy'])\n     * ```\n     * @param options New options that should be available in this dropdown.\n     */\n    PDFDropdown.prototype.addOptions = function (options) {\n        assertIs(options, 'options', ['string', Array]);\n        var optionsArr = Array.isArray(options) ? options : [options];\n        var existingOptions = this.acroField.getOptions();\n        var newOptions = new Array(optionsArr.length);\n        for (var idx = 0, len = optionsArr.length; idx < len; idx++) {\n            newOptions[idx] = { value: PDFHexString.fromText(optionsArr[idx]) };\n        }\n        this.acroField.setOptions(existingOptions.concat(newOptions));\n    };\n    /**\n     * Select one or more values for this dropdown. This operation is analogous\n     * to a human user opening the dropdown in a PDF reader and clicking on a\n     * value to select it. This method will update the underlying state of the\n     * dropdown to indicate which values have been selected. PDF libraries and\n     * readers will be able to extract these values from the saved document and\n     * determine which values were selected.\n     *\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('best.superhero.dropdown')\n     * dropdown.select('One Punch Man')\n     * ```\n     *\n     * This method will mark this dropdown as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated streams will\n     * display the selected option inside the widgets of this dropdown.\n     *\n     * **IMPORTANT:** The default font used to update appearance streams is\n     * [[StandardFonts.Helvetica]]. Note that this is a WinAnsi font. This means\n     * that encoding errors will be thrown if the selected option for this field\n     * contains characters outside the WinAnsi character set (the latin alphabet).\n     *\n     * Embedding a custom font and passing it to\n     * [[PDFForm.updateFieldAppearances]] or [[PDFDropdown.updateAppearances]]\n     * allows you to generate appearance streams with characters outside the\n     * latin alphabet (assuming the custom font supports them).\n     *\n     * Selecting an option that does not exist in this dropdown's option list\n     * (see [[PDFDropdown.getOptions]]) will enable editing on this dropdown\n     * (see [[PDFDropdown.enableEditing]]).\n     *\n     * > **NOTE:** PDF readers only display one selected option when rendering\n     * > dropdowns. However, the PDF specification does allow for multiple values\n     * > to be selected in a dropdown. As such, the `pdf-lib` API supports this.\n     * > However, it is not recommended to select more than one value with this\n     * > method, as only one will be visible. [[PDFOptionList]] fields are better\n     * > suited for displaying multiple selected values.\n     *\n     * @param options The options to be selected.\n     * @param merge Whether or not existing selections should be preserved.\n     */\n    PDFDropdown.prototype.select = function (options, merge) {\n        if (merge === void 0) { merge = false; }\n        assertIs(options, 'options', ['string', Array]);\n        assertIs(merge, 'merge', ['boolean']);\n        var optionsArr = Array.isArray(options) ? options : [options];\n        var validOptions = this.getOptions();\n        var hasCustomOption = optionsArr.find(function (option) { return !validOptions.includes(option); });\n        if (hasCustomOption)\n            this.enableEditing();\n        this.markAsDirty();\n        if (optionsArr.length > 1 || (optionsArr.length === 1 && merge)) {\n            this.enableMultiselect();\n        }\n        var values = new Array(optionsArr.length);\n        for (var idx = 0, len = optionsArr.length; idx < len; idx++) {\n            values[idx] = PDFHexString.fromText(optionsArr[idx]);\n        }\n        if (merge) {\n            var existingValues = this.acroField.getValues();\n            this.acroField.setValues(existingValues.concat(values));\n        }\n        else {\n            this.acroField.setValues(values);\n        }\n    };\n    /**\n     * Clear all selected values for this dropdown. This operation is equivalent\n     * to selecting an empty list. This method will update the underlying state\n     * of the dropdown to indicate that no values have been selected.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.clear()\n     * ```\n     * This method will mark this text field as dirty. See [[PDFDropdown.select]]\n     * for more details about what this means.\n     */\n    PDFDropdown.prototype.clear = function () {\n        this.markAsDirty();\n        this.acroField.setValues([]);\n    };\n    /**\n     * Set the font size for this field. Larger font sizes will result in larger\n     * text being displayed when PDF readers render this dropdown. Font sizes may\n     * be integer or floating point numbers. Supplying a negative font size will\n     * cause this method to throw an error.\n     *\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.setFontSize(4)\n     * dropdown.setFontSize(15.7)\n     * ```\n     *\n     * > This method depends upon the existence of a default appearance\n     * > (`/DA`) string. If this field does not have a default appearance string,\n     * > or that string does not contain a font size (via the `Tf` operator),\n     * > then this method will throw an error.\n     *\n     * @param fontSize The font size to be used when rendering text in this field.\n     */\n    PDFDropdown.prototype.setFontSize = function (fontSize) {\n        assertPositive(fontSize, 'fontSize');\n        this.acroField.setFontSize(fontSize);\n        this.markAsDirty();\n    };\n    /**\n     * Returns `true` if users are allowed to edit the selected value of this\n     * dropdown directly and are not constrained by the list of available\n     * options. See [[PDFDropdown.enableEditing]] and\n     * [[PDFDropdown.disableEditing]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isEditable()) console.log('Editing is enabled')\n     * ```\n     * @returns Whether or not this dropdown is editable.\n     */\n    PDFDropdown.prototype.isEditable = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.Edit);\n    };\n    /**\n     * Allow users to edit the selected value of this dropdown in PDF readers\n     * with their keyboard. This means that the selected value of this dropdown\n     * will not be constrained by the list of available options. However, if this\n     * dropdown has any available options, users will still be allowed to select\n     * from that list.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableEditing()\n     * ```\n     */\n    PDFDropdown.prototype.enableEditing = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Edit, true);\n    };\n    /**\n     * Do not allow users to edit the selected value of this dropdown in PDF\n     * readers with their keyboard. This will constrain the selected value of\n     * this dropdown to the list of available options. Users will only be able\n     * to select an option from that list.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableEditing()\n     * ```\n     */\n    PDFDropdown.prototype.disableEditing = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Edit, false);\n    };\n    /**\n     * Returns `true` if the option list of this dropdown is always displayed\n     * in alphabetical order, irrespective of the order in which the options\n     * were added to the dropdown. See [[PDFDropdown.enableSorting]] and\n     * [[PDFDropdown.disableSorting]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isSorted()) console.log('Sorting is enabled')\n     * ```\n     * @returns Whether or not this dropdown's options are sorted.\n     */\n    PDFDropdown.prototype.isSorted = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.Sort);\n    };\n    /**\n     * Always display the option list of this dropdown in alphabetical order,\n     * irrespective of the order in which the options were added to this dropdown.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableSorting()\n     * ```\n     */\n    PDFDropdown.prototype.enableSorting = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Sort, true);\n    };\n    /**\n     * Do not always display the option list of this dropdown in alphabetical\n     * order. Instead, display the options in whichever order they were added\n     * to the list. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableSorting()\n     * ```\n     */\n    PDFDropdown.prototype.disableSorting = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Sort, false);\n    };\n    /**\n     * Returns `true` if multiple options can be selected from this dropdown's\n     * option list. See [[PDFDropdown.enableMultiselect]] and\n     * [[PDFDropdown.disableMultiselect]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isMultiselect()) console.log('Multiselect is enabled')\n     * ```\n     * @returns Whether or not multiple options can be selected.\n     */\n    PDFDropdown.prototype.isMultiselect = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect);\n    };\n    /**\n     * Allow users to select more than one option from this dropdown's option\n     * list. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableMultiselect()\n     * ```\n     */\n    PDFDropdown.prototype.enableMultiselect = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect, true);\n    };\n    /**\n     * Do not allow users to select more than one option from this dropdown's\n     * option list. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableMultiselect()\n     * ```\n     */\n    PDFDropdown.prototype.disableMultiselect = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect, false);\n    };\n    /**\n     * Returns `true` if the selected option should be spell checked by PDF\n     * readers. Spell checking will only be performed if this dropdown allows\n     * editing (see [[PDFDropdown.isEditable]]). See\n     * [[PDFDropdown.enableSpellChecking]] and\n     * [[PDFDropdown.disableSpellChecking]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isSpellChecked()) console.log('Spell checking is enabled')\n     * ```\n     * @returns Whether or not this dropdown can be spell checked.\n     */\n    PDFDropdown.prototype.isSpellChecked = function () {\n        return !this.acroField.hasFlag(AcroChoiceFlags.DoNotSpellCheck);\n    };\n    /**\n     * Allow PDF readers to spell check the selected option of this dropdown.\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableSpellChecking()\n     * ```\n     */\n    PDFDropdown.prototype.enableSpellChecking = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck, false);\n    };\n    /**\n     * Do not allow PDF readers to spell check the selected option of this\n     * dropdown. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableSpellChecking()\n     * ```\n     */\n    PDFDropdown.prototype.disableSpellChecking = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck, true);\n    };\n    /**\n     * Returns `true` if the option selected by a user is stored, or \"committed\",\n     * when the user clicks the option. The alternative is that the user's\n     * selection is stored when the user leaves this dropdown field (by clicking\n     * outside of it - on another field, for example). See\n     * [[PDFDropdown.enableSelectOnClick]] and\n     * [[PDFDropdown.disableSelectOnClick]]. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.isSelectOnClick()) console.log('Select on click is enabled')\n     * ```\n     * @returns Whether or not options are selected immediately after they are\n     *          clicked.\n     */\n    PDFDropdown.prototype.isSelectOnClick = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange);\n    };\n    /**\n     * Store the option selected by a user immediately after the user clicks the\n     * option. Do not wait for the user to leave this dropdown field (by clicking\n     * outside of it - on another field, for example). For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.enableSelectOnClick()\n     * ```\n     */\n    PDFDropdown.prototype.enableSelectOnClick = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange, true);\n    };\n    /**\n     * Wait to store the option selected by a user until they leave this dropdown\n     * field (by clicking outside of it - on another field, for example).\n     * For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.disableSelectOnClick()\n     * ```\n     */\n    PDFDropdown.prototype.disableSelectOnClick = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange, false);\n    };\n    /**\n     * Show this dropdown on the specified page. For example:\n     * ```js\n     * const ubuntuFont = await pdfDoc.embedFont(ubuntuFontBytes)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const dropdown = form.createDropdown('best.gundam')\n     * dropdown.setOptions(['Exia', 'Dynames'])\n     * dropdown.select('Exia')\n     *\n     * dropdown.addToPage(page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 200,\n     *   height: 100,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     *   font: ubuntuFont,\n     * })\n     * ```\n     * This will create a new widget for this dropdown field.\n     * @param page The page to which this dropdown widget should be added.\n     * @param options The options to be used when adding this dropdown widget.\n     */\n    PDFDropdown.prototype.addToPage = function (page, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        if (!options)\n            options = {};\n        if (!('textColor' in options))\n            options.textColor = rgb(0, 0, 0);\n        if (!('backgroundColor' in options))\n            options.backgroundColor = rgb(1, 1, 1);\n        if (!('borderColor' in options))\n            options.borderColor = rgb(0, 0, 0);\n        if (!('borderWidth' in options))\n            options.borderWidth = 1;\n        // Create a widget for this dropdown\n        var widget = this.createWidget({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 200,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 50,\n            textColor: options.textColor,\n            backgroundColor: options.backgroundColor,\n            borderColor: options.borderColor,\n            borderWidth: (_e = options.borderWidth) !== null && _e !== void 0 ? _e : 0,\n            rotate: (_f = options.rotate) !== null && _f !== void 0 ? _f : degrees(0),\n            hidden: options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        var font = (_g = options.font) !== null && _g !== void 0 ? _g : this.doc.getForm().getDefaultFont();\n        this.updateWidgetAppearance(widget, font);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if this dropdown has been marked as dirty, or if any of\n     * this dropdown's widgets do not have an appearance stream. For example:\n     * ```js\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * if (dropdown.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this dropdown needs an appearance update.\n     */\n    PDFDropdown.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        if (this.isDirty())\n            return true;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var hasAppearances = ((_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal) instanceof PDFStream;\n            if (!hasAppearances)\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this dropdown's widgets using\n     * the default appearance provider for dropdowns. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.defaultUpdateAppearances(helvetica)\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     */\n    PDFDropdown.prototype.defaultUpdateAppearances = function (font) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.updateAppearances(font);\n    };\n    /**\n     * Update the appearance streams for each of this dropdown's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for dropdowns will be used. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const dropdown = form.getDropdown('some.dropdown.field')\n     * dropdown.updateAppearances(helvetica, (field, widget, font) => {\n     *   ...\n     *   return drawTextField(...)\n     * })\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFDropdown.prototype.updateAppearances = function (font, provider) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            this.updateWidgetAppearance(widget, font, provider);\n        }\n        this.markAsClean();\n    };\n    // getOption(index: number): string {}\n    // getSelectedIndices(): number[] {}\n    // removeOptions(option: string | string[]) {}\n    // removeIndices(option: number[]) {}\n    // deselect(options: string | string[]) {}\n    // deselectIndices(optionIndices: number[]) {}\n    PDFDropdown.prototype.updateWidgetAppearance = function (widget, font, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultDropdownAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget, font));\n        this.updateWidgetAppearanceWithFont(widget, font, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getDropdown]] method, which will create an\n     * > instance of [[PDFDropdown]] for you.\n     *\n     * Create an instance of [[PDFDropdown]] from an existing acroComboBox and ref\n     *\n     * @param acroComboBox The underlying `PDFAcroComboBox` for this dropdown.\n     * @param ref The unique reference for this dropdown.\n     * @param doc The document to which this dropdown will belong.\n     */\n    PDFDropdown.of = function (acroComboBox, ref, doc) {\n        return new PDFDropdown(acroComboBox, ref, doc);\n    };\n    return PDFDropdown;\n}(PDFField));\nexport default PDFDropdown;\n//# sourceMappingURL=PDFDropdown.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFFont from \"../PDFFont\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { normalizeAppearance, defaultOptionListAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { PDFHexString, PDFStream, PDFAcroListBox, AcroChoiceFlags, } from \"../../core\";\nimport { assertIs, assertIsSubset, assertOrUndefined, assertPositive, } from \"../../utils\";\n/**\n * Represents an option list field of a [[PDFForm]].\n *\n * [[PDFOptionList]] fields are interactive lists of options. The purpose of an\n * option list is to enable users to select one or more options from a set of\n * possible options. Users are able to see the full set of options without\n * first having to click on the field (though scrolling may be necessary).\n * Clicking an option in the list will cause it to be selected and displayed\n * with a highlighted background. Some option lists allow users to select\n * more than one option (see [[PDFOptionList.isMultiselect]]).\n */\nvar PDFOptionList = /** @class */ (function (_super) {\n    __extends(PDFOptionList, _super);\n    function PDFOptionList(acroListBox, ref, doc) {\n        var _this = _super.call(this, acroListBox, ref, doc) || this;\n        assertIs(acroListBox, 'acroListBox', [[PDFAcroListBox, 'PDFAcroListBox']]);\n        _this.acroField = acroListBox;\n        return _this;\n    }\n    /**\n     * Get the list of available options for this option list. These options will\n     * be displayed to users who view this option list in a PDF reader.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * const options = optionList.getOptions()\n     * console.log('Option List options:', options)\n     * ```\n     * @returns The options for this option list.\n     */\n    PDFOptionList.prototype.getOptions = function () {\n        var rawOptions = this.acroField.getOptions();\n        var options = new Array(rawOptions.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            var _a = rawOptions[idx], display = _a.display, value = _a.value;\n            options[idx] = (display !== null && display !== void 0 ? display : value).decodeText();\n        }\n        return options;\n    };\n    /**\n     * Get the selected options for this option list. These are the values that\n     * were selected by a human user via a PDF reader, or programatically via\n     * software.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * const selections = optionList.getSelected()\n     * console.log('Option List selections:', selections)\n     * ```\n     * @returns The selected options for this option list.\n     */\n    PDFOptionList.prototype.getSelected = function () {\n        var values = this.acroField.getValues();\n        var selected = new Array(values.length);\n        for (var idx = 0, len = values.length; idx < len; idx++) {\n            selected[idx] = values[idx].decodeText();\n        }\n        return selected;\n    };\n    /**\n     * Set the list of options that are available for this option list. These are\n     * the values that will be available for users to select when they view this\n     * option list in a PDF reader. Note that preexisting options for this\n     * option list will be removed. Only the values passed as `options` will be\n     * available to select.\n     *\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('planets.optionList')\n     * optionList.setOptions(['Earth', 'Mars', 'Pluto', 'Venus'])\n     * ```\n     *\n     * This method will mark this option list as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated streams will\n     * display the options this field contains inside the widgets of this text\n     * field (with selected options highlighted).\n     *\n     * **IMPORTANT:** The default font used to update appearance streams is\n     * [[StandardFonts.Helvetica]]. Note that this is a WinAnsi font. This means\n     * that encoding errors will be thrown if this field contains any options\n     * with characters outside the WinAnsi character set (the latin alphabet).\n     *\n     * Embedding a custom font and passing it to\n     * [[PDFForm.updateFieldAppearances]] or [[PDFOptionList.updateAppearances]]\n     * allows you to generate appearance streams with characters outside the\n     * latin alphabet (assuming the custom font supports them).\n     *\n     * @param options The options that should be available in this option list.\n     */\n    PDFOptionList.prototype.setOptions = function (options) {\n        assertIs(options, 'options', [Array]);\n        this.markAsDirty();\n        var optionObjects = new Array(options.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            optionObjects[idx] = { value: PDFHexString.fromText(options[idx]) };\n        }\n        this.acroField.setOptions(optionObjects);\n    };\n    /**\n     * Add to the list of options that are available for this option list. Users\n     * will be able to select these values in a PDF reader. In addition to the\n     * values passed as `options`, any preexisting options for this option list\n     * will still be available for users to select.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('rockets.optionList')\n     * optionList.addOptions(['Saturn IV', 'Falcon Heavy'])\n     * ```\n     * This method will mark this option list as dirty. See\n     * [[PDFOptionList.setOptions]] for more details about what this means.\n     * @param options New options that should be available in this option list.\n     */\n    PDFOptionList.prototype.addOptions = function (options) {\n        assertIs(options, 'options', ['string', Array]);\n        this.markAsDirty();\n        var optionsArr = Array.isArray(options) ? options : [options];\n        var existingOptions = this.acroField.getOptions();\n        var newOptions = new Array(optionsArr.length);\n        for (var idx = 0, len = optionsArr.length; idx < len; idx++) {\n            newOptions[idx] = { value: PDFHexString.fromText(optionsArr[idx]) };\n        }\n        this.acroField.setOptions(existingOptions.concat(newOptions));\n    };\n    /**\n     * Select one or more values for this option list. This operation is analogous\n     * to a human user opening the option list in a PDF reader and clicking on one\n     * or more values to select them. This method will update the underlying state\n     * of the option list to indicate which values have been selected. PDF\n     * libraries and readers will be able to extract these values from the saved\n     * document and determine which values were selected.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('best.superheroes.optionList')\n     * optionList.select(['One Punch Man', 'Iron Man'])\n     * ```\n     * This method will mark this option list as dirty. See\n     * [[PDFOptionList.setOptions]] for more details about what this means.\n     * @param options The options to be selected.\n     * @param merge Whether or not existing selections should be preserved.\n     */\n    PDFOptionList.prototype.select = function (options, merge) {\n        if (merge === void 0) { merge = false; }\n        assertIs(options, 'options', ['string', Array]);\n        assertIs(merge, 'merge', ['boolean']);\n        var optionsArr = Array.isArray(options) ? options : [options];\n        var validOptions = this.getOptions();\n        assertIsSubset(optionsArr, 'option', validOptions);\n        this.markAsDirty();\n        if (optionsArr.length > 1 || (optionsArr.length === 1 && merge)) {\n            this.enableMultiselect();\n        }\n        var values = new Array(optionsArr.length);\n        for (var idx = 0, len = optionsArr.length; idx < len; idx++) {\n            values[idx] = PDFHexString.fromText(optionsArr[idx]);\n        }\n        if (merge) {\n            var existingValues = this.acroField.getValues();\n            this.acroField.setValues(existingValues.concat(values));\n        }\n        else {\n            this.acroField.setValues(values);\n        }\n    };\n    /**\n     * Clear all selected values for this option list. This operation is\n     * equivalent to selecting an empty list. This method will update the\n     * underlying state of the option list to indicate that no values have been\n     * selected.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.clear()\n     * ```\n     * This method will mark this option list as dirty. See\n     * [[PDFOptionList.setOptions]] for more details about what this means.\n     */\n    PDFOptionList.prototype.clear = function () {\n        this.markAsDirty();\n        this.acroField.setValues([]);\n    };\n    /**\n     * Set the font size for the text in this field. There needs to be a\n     * default appearance string (DA) set with a font value specified\n     * for this to work. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.setFontSize(4);\n     * ```\n     * @param fontSize The font size to set the font to.\n     */\n    /**\n     * Set the font size for this field. Larger font sizes will result in larger\n     * text being displayed when PDF readers render this option list. Font sizes\n     * may be integer or floating point numbers. Supplying a negative font size\n     * will cause this method to throw an error.\n     *\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.setFontSize(4)\n     * optionList.setFontSize(15.7)\n     * ```\n     *\n     * > This method depends upon the existence of a default appearance\n     * > (`/DA`) string. If this field does not have a default appearance string,\n     * > or that string does not contain a font size (via the `Tf` operator),\n     * > then this method will throw an error.\n     *\n     * @param fontSize The font size to be used when rendering text in this field.\n     */\n    PDFOptionList.prototype.setFontSize = function (fontSize) {\n        assertPositive(fontSize, 'fontSize');\n        this.acroField.setFontSize(fontSize);\n        this.markAsDirty();\n    };\n    /**\n     * Returns `true` if the options of this option list are always displayed\n     * in alphabetical order, irrespective of the order in which the options\n     * were added to the option list. See [[PDFOptionList.enableSorting]] and\n     * [[PDFOptionList.disableSorting]]. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * if (optionList.isSorted()) console.log('Sorting is enabled')\n     * ```\n     * @returns Whether or not this option list is sorted.\n     */\n    PDFOptionList.prototype.isSorted = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.Sort);\n    };\n    /**\n     * Always display the options of this option list in alphabetical order,\n     * irrespective of the order in which the options were added to this option\n     * list.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.enableSorting()\n     * ```\n     */\n    PDFOptionList.prototype.enableSorting = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Sort, true);\n    };\n    /**\n     * Do not always display the options of this option list in alphabetical\n     * order. Instead, display the options in whichever order they were added\n     * to this option list. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.disableSorting()\n     * ```\n     */\n    PDFOptionList.prototype.disableSorting = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.Sort, false);\n    };\n    /**\n     * Returns `true` if multiple options can be selected from this option list.\n     * See [[PDFOptionList.enableMultiselect]] and\n     * [[PDFOptionList.disableMultiselect]]. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * if (optionList.isMultiselect()) console.log('Multiselect is enabled')\n     * ```\n     * @returns Whether or not multiple options can be selected.\n     */\n    PDFOptionList.prototype.isMultiselect = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect);\n    };\n    /**\n     * Allow users to select more than one option from this option list.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.enableMultiselect()\n     * ```\n     */\n    PDFOptionList.prototype.enableMultiselect = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect, true);\n    };\n    /**\n     * Do not allow users to select more than one option from this option list.\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.disableMultiselect()\n     * ```\n     */\n    PDFOptionList.prototype.disableMultiselect = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect, false);\n    };\n    /**\n     * Returns `true` if the option selected by a user is stored, or \"committed\",\n     * when the user clicks the option. The alternative is that the user's\n     * selection is stored when the user leaves this option list field (by\n     * clicking outside of it - on another field, for example). See\n     * [[PDFOptionList.enableSelectOnClick]] and\n     * [[PDFOptionList.disableSelectOnClick]]. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * if (optionList.isSelectOnClick()) console.log('Select on click is enabled')\n     * ```\n     * @returns Whether or not options are selected immediately after they are\n     *          clicked.\n     */\n    PDFOptionList.prototype.isSelectOnClick = function () {\n        return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange);\n    };\n    /**\n     * Store the option selected by a user immediately after the user clicks the\n     * option. Do not wait for the user to leave this option list field (by\n     * clicking outside of it - on another field, for example). For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.enableSelectOnClick()\n     * ```\n     */\n    PDFOptionList.prototype.enableSelectOnClick = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange, true);\n    };\n    /**\n     * Wait to store the option selected by a user until they leave this option\n     * list field (by clicking outside of it - on another field, for example).\n     * For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.disableSelectOnClick()\n     * ```\n     */\n    PDFOptionList.prototype.disableSelectOnClick = function () {\n        this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange, false);\n    };\n    /**\n     * Show this option list on the specified page. For example:\n     * ```js\n     * const ubuntuFont = await pdfDoc.embedFont(ubuntuFontBytes)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const optionList = form.createOptionList('best.gundams')\n     * optionList.setOptions(['Exia', 'Dynames', 'Kyrios', 'Virtue'])\n     * optionList.select(['Exia', 'Virtue'])\n     *\n     * optionList.addToPage(page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 200,\n     *   height: 100,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     *   font: ubuntuFont,\n     * })\n     * ```\n     * This will create a new widget for this option list field.\n     * @param page The page to which this option list widget should be added.\n     * @param options The options to be used when adding this option list widget.\n     */\n    PDFOptionList.prototype.addToPage = function (page, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        if (!options)\n            options = {};\n        if (!('textColor' in options))\n            options.textColor = rgb(0, 0, 0);\n        if (!('backgroundColor' in options))\n            options.backgroundColor = rgb(1, 1, 1);\n        if (!('borderColor' in options))\n            options.borderColor = rgb(0, 0, 0);\n        if (!('borderWidth' in options))\n            options.borderWidth = 1;\n        // Create a widget for this option list\n        var widget = this.createWidget({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 200,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 100,\n            textColor: options.textColor,\n            backgroundColor: options.backgroundColor,\n            borderColor: options.borderColor,\n            borderWidth: (_e = options.borderWidth) !== null && _e !== void 0 ? _e : 0,\n            rotate: (_f = options.rotate) !== null && _f !== void 0 ? _f : degrees(0),\n            hidden: options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        var font = (_g = options.font) !== null && _g !== void 0 ? _g : this.doc.getForm().getDefaultFont();\n        this.updateWidgetAppearance(widget, font);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if this option list has been marked as dirty, or if any of\n     * this option list's widgets do not have an appearance stream. For example:\n     * ```js\n     * const optionList = form.getOptionList('some.optionList.field')\n     * if (optionList.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this option list needs an appearance update.\n     */\n    PDFOptionList.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        if (this.isDirty())\n            return true;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var hasAppearances = ((_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal) instanceof PDFStream;\n            if (!hasAppearances)\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this option list's widgets using\n     * the default appearance provider for option lists. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.defaultUpdateAppearances(helvetica)\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     */\n    PDFOptionList.prototype.defaultUpdateAppearances = function (font) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.updateAppearances(font);\n    };\n    /**\n     * Update the appearance streams for each of this option list's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for option lists will be used. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const optionList = form.getOptionList('some.optionList.field')\n     * optionList.updateAppearances(helvetica, (field, widget, font) => {\n     *   ...\n     *   return drawOptionList(...)\n     * })\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFOptionList.prototype.updateAppearances = function (font, provider) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            this.updateWidgetAppearance(widget, font, provider);\n        }\n        this.markAsClean();\n    };\n    // getOption(index: number): string {}\n    // getSelectedIndices(): number[] {}\n    // removeOptions(option: string | string[]) {}\n    // removeIndices(option: number[]) {}\n    // deselect(options: string | string[]) {}\n    // deselectIndices(optionIndices: number[]) {}\n    PDFOptionList.prototype.updateWidgetAppearance = function (widget, font, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultOptionListAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget, font));\n        this.updateWidgetAppearanceWithFont(widget, font, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getOptionList]] method, which will create\n     * > an instance of [[PDFOptionList]] for you.\n     *\n     * Create an instance of [[PDFOptionList]] from an existing acroListBox and\n     * ref\n     *\n     * @param acroComboBox The underlying `PDFAcroListBox` for this option list.\n     * @param ref The unique reference for this option list.\n     * @param doc The document to which this option list will belong.\n     */\n    PDFOptionList.of = function (acroListBox, ref, doc) {\n        return new PDFOptionList(acroListBox, ref, doc);\n    };\n    return PDFOptionList;\n}(PDFField));\nexport default PDFOptionList;\n//# sourceMappingURL=PDFOptionList.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { normalizeAppearance, defaultRadioGroupAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { PDFName, PDFHexString, PDFDict, PDFAcroRadioButton, AcroButtonFlags, } from \"../../core\";\nimport { assertIs, assertOrUndefined, assertIsOneOf } from \"../../utils\";\n/**\n * Represents a radio group field of a [[PDFForm]].\n *\n * [[PDFRadioGroup]] fields are collections of radio buttons. The purpose of a\n * radio group is to enable users to select one option from a set of mutually\n * exclusive choices. Each choice in a radio group is represented by a radio\n * button. Radio buttons each have two states: `on` and `off`. At most one\n * radio button in a group may be in the `on` state at any time. Users can\n * click on a radio button to select it (and thereby automatically deselect any\n * other radio button that might have already been selected). Some radio\n * groups allow users to toggle a selected radio button `off` by clicking on\n * it (see [[PDFRadioGroup.isOffToggleable]]).\n *\n * Note that some radio groups allow multiple radio buttons to be in the `on`\n * state at the same type **if** they represent the same underlying value (see\n * [[PDFRadioGroup.isMutuallyExclusive]]).\n */\nvar PDFRadioGroup = /** @class */ (function (_super) {\n    __extends(PDFRadioGroup, _super);\n    function PDFRadioGroup(acroRadioButton, ref, doc) {\n        var _this = _super.call(this, acroRadioButton, ref, doc) || this;\n        assertIs(acroRadioButton, 'acroRadioButton', [\n            [PDFAcroRadioButton, 'PDFAcroRadioButton'],\n        ]);\n        _this.acroField = acroRadioButton;\n        return _this;\n    }\n    /**\n     * Get the list of available options for this radio group. Each option is\n     * represented by a radio button. These radio buttons are displayed at\n     * various locations in the document, potentially on different pages (though\n     * typically they are stacked horizontally or vertically on the same page).\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * const options = radioGroup.getOptions()\n     * console.log('Radio Group options:', options)\n     * ```\n     * @returns The options for this radio group.\n     */\n    PDFRadioGroup.prototype.getOptions = function () {\n        var exportValues = this.acroField.getExportValues();\n        if (exportValues) {\n            var exportOptions = new Array(exportValues.length);\n            for (var idx = 0, len = exportValues.length; idx < len; idx++) {\n                exportOptions[idx] = exportValues[idx].decodeText();\n            }\n            return exportOptions;\n        }\n        var onValues = this.acroField.getOnValues();\n        var onOptions = new Array(onValues.length);\n        for (var idx = 0, len = onOptions.length; idx < len; idx++) {\n            onOptions[idx] = onValues[idx].decodeText();\n        }\n        return onOptions;\n    };\n    /**\n     * Get the selected option for this radio group. The selected option is\n     * represented by the radio button in this group that is turned on. At most\n     * one radio button in a group can be selected. If no buttons in this group\n     * are selected, `undefined` is returned.\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * const selected = radioGroup.getSelected()\n     * console.log('Selected radio button:', selected)\n     * ```\n     * @returns The selected option for this radio group.\n     */\n    PDFRadioGroup.prototype.getSelected = function () {\n        var value = this.acroField.getValue();\n        if (value === PDFName.of('Off'))\n            return undefined;\n        var exportValues = this.acroField.getExportValues();\n        if (exportValues) {\n            var onValues = this.acroField.getOnValues();\n            for (var idx = 0, len = onValues.length; idx < len; idx++) {\n                if (onValues[idx] === value)\n                    return exportValues[idx].decodeText();\n            }\n        }\n        return value.decodeText();\n    };\n    // // TODO: Figure out why this seems to crash Acrobat. Maybe it's because we\n    // //       aren't removing the widget reference from the page's Annots?\n    // removeOption(option: string) {\n    //   assertIs(option, 'option', ['string']);\n    //   // TODO: Assert is valid `option`!\n    //   const onValues = this.acroField.getOnValues();\n    //   const exportValues = this.acroField.getExportValues();\n    //   if (exportValues) {\n    //     for (let idx = 0, len = exportValues.length; idx < len; idx++) {\n    //       if (exportValues[idx].decodeText() === option) {\n    //         this.acroField.removeWidget(idx);\n    //         this.acroField.removeExportValue(idx);\n    //       }\n    //     }\n    //   } else {\n    //     for (let idx = 0, len = onValues.length; idx < len; idx++) {\n    //       const value = onValues[idx];\n    //       if (value.decodeText() === option) {\n    //         this.acroField.removeWidget(idx);\n    //         this.acroField.removeExportValue(idx);\n    //       }\n    //     }\n    //   }\n    // }\n    /**\n     * Select an option for this radio group. This operation is analogous to a\n     * human user clicking one of the radio buttons in this group via a PDF\n     * reader to toggle it on. This method will update the underlying state of\n     * the radio group to indicate which option has been selected. PDF libraries\n     * and readers will be able to extract this value from the saved document and\n     * determine which option was selected.\n     *\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('best.superhero.radioGroup')\n     * radioGroup.select('One Punch Man')\n     * ```\n     *\n     * This method will mark this radio group as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated appearance\n     * streams will display a dot inside the widget of this check box field\n     * that represents the selected option.\n     *\n     * @param option The option to be selected.\n     */\n    PDFRadioGroup.prototype.select = function (option) {\n        assertIs(option, 'option', ['string']);\n        var validOptions = this.getOptions();\n        assertIsOneOf(option, 'option', validOptions);\n        this.markAsDirty();\n        var onValues = this.acroField.getOnValues();\n        var exportValues = this.acroField.getExportValues();\n        if (exportValues) {\n            for (var idx = 0, len = exportValues.length; idx < len; idx++) {\n                if (exportValues[idx].decodeText() === option) {\n                    this.acroField.setValue(onValues[idx]);\n                }\n            }\n        }\n        else {\n            for (var idx = 0, len = onValues.length; idx < len; idx++) {\n                var value = onValues[idx];\n                if (value.decodeText() === option)\n                    this.acroField.setValue(value);\n            }\n        }\n    };\n    /**\n     * Clear any selected option for this dropdown. This will result in all\n     * radio buttons in this group being toggled off. This method will update\n     * the underlying state of the dropdown to indicate that no radio buttons\n     * have been selected.\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.clear()\n     * ```\n     * This method will mark this radio group as dirty. See\n     * [[PDFRadioGroup.select]] for more details about what this means.\n     */\n    PDFRadioGroup.prototype.clear = function () {\n        this.markAsDirty();\n        this.acroField.setValue(PDFName.of('Off'));\n    };\n    /**\n     * Returns `true` if users can click on radio buttons in this group to toggle\n     * them off. The alternative is that once a user clicks on a radio button\n     * to select it, the only way to deselect it is by selecting on another radio\n     * button in the group. See [[PDFRadioGroup.enableOffToggling]] and\n     * [[PDFRadioGroup.disableOffToggling]]. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * if (radioGroup.isOffToggleable()) console.log('Off toggling is enabled')\n     * ```\n     */\n    PDFRadioGroup.prototype.isOffToggleable = function () {\n        return !this.acroField.hasFlag(AcroButtonFlags.NoToggleToOff);\n    };\n    /**\n     * Allow users to click on selected radio buttons in this group to toggle\n     * them off. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.enableOffToggling()\n     * ```\n     * > **NOTE:** This feature is documented in the PDF specification\n     * > (Table 226). However, most PDF readers do not respect this option and\n     * > prevent users from toggling radio buttons off even when it is enabled.\n     * > At the time of this writing (9/6/2020) Mac's Preview software did\n     * > respect the option. Adobe Acrobat, Foxit Reader, and Google Chrome did\n     * > not.\n     */\n    PDFRadioGroup.prototype.enableOffToggling = function () {\n        this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff, false);\n    };\n    /**\n     * Prevent users from clicking on selected radio buttons in this group to\n     * toggle them off. Clicking on a selected radio button will have no effect.\n     * The only way to deselect a selected radio button is to click on a\n     * different radio button in the group. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.disableOffToggling()\n     * ```\n     */\n    PDFRadioGroup.prototype.disableOffToggling = function () {\n        this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff, true);\n    };\n    /**\n     * Returns `true` if the radio buttons in this group are mutually exclusive.\n     * This means that when the user selects a radio button, only that specific\n     * button will be turned on. Even if other radio buttons in the group\n     * represent the same value, they will not be enabled. The alternative to\n     * this is that clicking a radio button will select that button along with\n     * any other radio buttons in the group that share the same value. See\n     * [[PDFRadioGroup.enableMutualExclusion]] and\n     * [[PDFRadioGroup.disableMutualExclusion]].\n     * For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * if (radioGroup.isMutuallyExclusive()) console.log('Mutual exclusion is enabled')\n     * ```\n     */\n    PDFRadioGroup.prototype.isMutuallyExclusive = function () {\n        return !this.acroField.hasFlag(AcroButtonFlags.RadiosInUnison);\n    };\n    /**\n     * When the user clicks a radio button in this group it will be selected. In\n     * addition, any other radio buttons in this group that share the same\n     * underlying value will also be selected. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.enableMutualExclusion()\n     * ```\n     * Note that this option must be enabled prior to adding options to the\n     * radio group. It does not currently apply retroactively to existing\n     * radio buttons in the group.\n     */\n    PDFRadioGroup.prototype.enableMutualExclusion = function () {\n        this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison, false);\n    };\n    /**\n     * When the user clicks a radio button in this group only it will be selected.\n     * No other radio buttons in the group will be selected, even if they share\n     * the same underlying value. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.disableMutualExclusion()\n     * ```\n     * Note that this option must be disabled prior to adding options to the\n     * radio group. It does not currently apply retroactively to existing\n     * radio buttons in the group.\n     */\n    PDFRadioGroup.prototype.disableMutualExclusion = function () {\n        this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison, true);\n    };\n    /**\n     * Add a new radio button to this group on the specified page. For example:\n     * ```js\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const radioGroup = form.createRadioGroup('best.gundam')\n     *\n     * const options = {\n     *   x: 50,\n     *   width: 25,\n     *   height: 25,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     * }\n     *\n     * radioGroup.addOptionToPage('Exia', page, { ...options, y: 50 })\n     * radioGroup.addOptionToPage('Dynames', page, { ...options, y: 110 })\n     * ```\n     * This will create a new radio button widget for this radio group field.\n     * @param option The option that the radio button widget represents.\n     * @param page The page to which the radio button widget should be added.\n     * @param options The options to be used when adding the radio button widget.\n     */\n    PDFRadioGroup.prototype.addOptionToPage = function (option, page, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        assertIs(option, 'option', ['string']);\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        // Create a widget for this radio button\n        var widget = this.createWidget({\n            x: (_a = options === null || options === void 0 ? void 0 : options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options === null || options === void 0 ? void 0 : options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options === null || options === void 0 ? void 0 : options.width) !== null && _c !== void 0 ? _c : 50,\n            height: (_d = options === null || options === void 0 ? void 0 : options.height) !== null && _d !== void 0 ? _d : 50,\n            textColor: (_e = options === null || options === void 0 ? void 0 : options.textColor) !== null && _e !== void 0 ? _e : rgb(0, 0, 0),\n            backgroundColor: (_f = options === null || options === void 0 ? void 0 : options.backgroundColor) !== null && _f !== void 0 ? _f : rgb(1, 1, 1),\n            borderColor: (_g = options === null || options === void 0 ? void 0 : options.borderColor) !== null && _g !== void 0 ? _g : rgb(0, 0, 0),\n            borderWidth: (_h = options === null || options === void 0 ? void 0 : options.borderWidth) !== null && _h !== void 0 ? _h : 1,\n            rotate: (_j = options === null || options === void 0 ? void 0 : options.rotate) !== null && _j !== void 0 ? _j : degrees(0),\n            hidden: options === null || options === void 0 ? void 0 : options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        var apStateValue = this.acroField.addWidgetWithOpt(widgetRef, PDFHexString.fromText(option), !this.isMutuallyExclusive());\n        // Set appearance streams for widget\n        widget.setAppearanceState(PDFName.of('Off'));\n        this.updateWidgetAppearance(widget, apStateValue);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if any of this group's radio button widgets do not have an\n     * appearance stream for their current state. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * if (radioGroup.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this radio group needs an appearance update.\n     */\n    PDFRadioGroup.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var state = widget.getAppearanceState();\n            var normal = (_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal;\n            if (!(normal instanceof PDFDict))\n                return true;\n            if (state && !normal.has(state))\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this group's radio button widgets\n     * using the default appearance provider for radio groups. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.defaultUpdateAppearances()\n     * ```\n     */\n    PDFRadioGroup.prototype.defaultUpdateAppearances = function () {\n        this.updateAppearances();\n    };\n    // rg.updateAppearances((field: any, widget: any) => {\n    //   assert(field === rg);\n    //   assert(widget instanceof PDFWidgetAnnotation);\n    //   return { on: [...rectangle, ...circle], off: [...rectangle, ...circle] };\n    // });\n    /**\n     * Update the appearance streams for each of this group's radio button widgets\n     * using the given appearance provider. If no `provider` is passed, the\n     * default appearance provider for radio groups will be used. For example:\n     * ```js\n     * const radioGroup = form.getRadioGroup('some.radioGroup.field')\n     * radioGroup.updateAppearances((field, widget) => {\n     *   ...\n     *   return {\n     *     normal: { on: drawRadioButton(...), off: drawRadioButton(...) },\n     *     down: { on: drawRadioButton(...), off: drawRadioButton(...) },\n     *   }\n     * })\n     * ```\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFRadioGroup.prototype.updateAppearances = function (provider) {\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var onValue = widget.getOnValue();\n            if (!onValue)\n                continue;\n            this.updateWidgetAppearance(widget, onValue, provider);\n        }\n    };\n    PDFRadioGroup.prototype.updateWidgetAppearance = function (widget, onValue, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultRadioGroupAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget));\n        this.updateOnOffWidgetAppearance(widget, onValue, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getOptionList]] method, which will create an\n     * > instance of [[PDFOptionList]] for you.\n     *\n     * Create an instance of [[PDFOptionList]] from an existing acroRadioButton\n     * and ref\n     *\n     * @param acroRadioButton The underlying `PDFAcroRadioButton` for this\n     *                        radio group.\n     * @param ref The unique reference for this radio group.\n     * @param doc The document to which this radio group will belong.\n     */\n    PDFRadioGroup.of = function (acroRadioButton, ref, doc) { return new PDFRadioGroup(acroRadioButton, ref, doc); };\n    return PDFRadioGroup;\n}(PDFField));\nexport default PDFRadioGroup;\n//# sourceMappingURL=PDFRadioGroup.js.map","import { __extends } from \"tslib\";\nimport PDFField from \"./PDFField\";\nimport { PDFAcroSignature } from \"../../core\";\nimport { assertIs } from \"../../utils\";\n/**\n * Represents a signature field of a [[PDFForm]].\n *\n * [[PDFSignature]] fields are digital signatures. `pdf-lib` does not\n * currently provide any specialized APIs for creating digital signatures or\n * reading the contents of existing digital signatures.\n */\nvar PDFSignature = /** @class */ (function (_super) {\n    __extends(PDFSignature, _super);\n    function PDFSignature(acroSignature, ref, doc) {\n        var _this = _super.call(this, acroSignature, ref, doc) || this;\n        assertIs(acroSignature, 'acroSignature', [\n            [PDFAcroSignature, 'PDFAcroSignature'],\n        ]);\n        _this.acroField = acroSignature;\n        return _this;\n    }\n    PDFSignature.prototype.needsAppearancesUpdate = function () {\n        return false;\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getSignature]] method, which will create an\n     * > instance of [[PDFSignature]] for you.\n     *\n     * Create an instance of [[PDFSignature]] from an existing acroSignature and\n     * ref\n     *\n     * @param acroSignature The underlying `PDFAcroSignature` for this signature.\n     * @param ref The unique reference for this signature.\n     * @param doc The document to which this signature will belong.\n     */\n    PDFSignature.of = function (acroSignature, ref, doc) { return new PDFSignature(acroSignature, ref, doc); };\n    return PDFSignature;\n}(PDFField));\nexport default PDFSignature;\n//# sourceMappingURL=PDFSignature.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFFont from \"../PDFFont\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { normalizeAppearance, defaultTextFieldAppearanceProvider, } from \"./appearances\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { RichTextFieldReadError, ExceededMaxLengthError, InvalidMaxLengthError, } from \"../errors\";\nimport { ImageAlignment } from \"../image/alignment\";\nimport { TextAlignment } from \"../text/alignment\";\nimport { PDFHexString, PDFStream, PDFAcroText, AcroTextFlags, } from \"../../core\";\nimport { assertIs, assertIsOneOf, assertOrUndefined, assertPositive, assertRangeOrUndefined, } from \"../../utils\";\n/**\n * Represents a text field of a [[PDFForm]].\n *\n * [[PDFTextField]] fields are boxes that display text entered by the user. The\n * purpose of a text field is to enable users to enter text or view text values\n * in the document prefilled by software. Users can click on a text field and\n * input text via their keyboard. Some text fields allow multiple lines of text\n * to be entered (see [[PDFTextField.isMultiline]]).\n */\nvar PDFTextField = /** @class */ (function (_super) {\n    __extends(PDFTextField, _super);\n    function PDFTextField(acroText, ref, doc) {\n        var _this = _super.call(this, acroText, ref, doc) || this;\n        assertIs(acroText, 'acroText', [[PDFAcroText, 'PDFAcroText']]);\n        _this.acroField = acroText;\n        return _this;\n    }\n    /**\n     * Get the text that this field contains. This text is visible to users who\n     * view this field in a PDF reader.\n     *\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * const text = textField.getText()\n     * console.log('Text field contents:', text)\n     * ```\n     *\n     * Note that if this text field contains no underlying value, `undefined`\n     * will be returned. Text fields may also contain an underlying value that\n     * is simply an empty string (`''`). This detail is largely irrelevant for\n     * most applications. In general, you'll want to treat both cases the same\n     * way and simply consider the text field to be empty. In either case, the\n     * text field will appear empty to users when viewed in a PDF reader.\n     *\n     * An error will be thrown if this is a rich text field. `pdf-lib` does not\n     * support reading rich text fields. Nor do most PDF readers and writers.\n     * Rich text fields are based on XFA (XML Forms Architecture). Relatively few\n     * PDFs use rich text fields or XFA. Unlike PDF itself, XFA is not an ISO\n     * standard. XFA has been deprecated in PDF 2.0:\n     * * https://en.wikipedia.org/wiki/XFA\n     * * http://blog.pdfshareforms.com/pdf-2-0-release-bid-farewell-xfa-forms/\n     *\n     * @returns The text contained in this text field.\n     */\n    PDFTextField.prototype.getText = function () {\n        var value = this.acroField.getValue();\n        if (!value && this.isRichFormatted()) {\n            throw new RichTextFieldReadError(this.getName());\n        }\n        return value === null || value === void 0 ? void 0 : value.decodeText();\n    };\n    /**\n     * Set the text for this field. This operation is analogous to a human user\n     * clicking on the text field in a PDF reader and typing in text via their\n     * keyboard. This method will update the underlying state of the text field\n     * to indicate what text has been set. PDF libraries and readers will be able\n     * to extract these values from the saved document and determine what text\n     * was set.\n     *\n     * For example:\n     * ```js\n     * const textField = form.getTextField('best.superhero.text.field')\n     * textField.setText('One Punch Man')\n     * ```\n     *\n     * This method will mark this text field as dirty, causing its appearance\n     * streams to be updated when either [[PDFDocument.save]] or\n     * [[PDFForm.updateFieldAppearances]] is called. The updated streams will\n     * display the text this field contains inside the widgets of this text\n     * field.\n     *\n     * **IMPORTANT:** The default font used to update appearance streams is\n     * [[StandardFonts.Helvetica]]. Note that this is a WinAnsi font. This means\n     * that encoding errors will be thrown if this field contains text outside\n     * the WinAnsi character set (the latin alphabet).\n     *\n     * Embedding a custom font and passing it to\n     * [[PDFForm.updateFieldAppearances]] or [[PDFTextField.updateAppearances]]\n     * allows you to generate appearance streams with characters outside the\n     * latin alphabet (assuming the custom font supports them).\n     *\n     * If this is a rich text field, it will be converted to a standard text\n     * field in order to set the text. `pdf-lib` does not support writing rich\n     * text strings. Nor do most PDF readers and writers. See\n     * [[PDFTextField.getText]] for more information about rich text fields and\n     * their deprecation in PDF 2.0.\n     *\n     * @param text The text this field should contain.\n     */\n    PDFTextField.prototype.setText = function (text) {\n        assertOrUndefined(text, 'text', ['string']);\n        var maxLength = this.getMaxLength();\n        if (maxLength !== undefined && text && text.length > maxLength) {\n            throw new ExceededMaxLengthError(text.length, maxLength, this.getName());\n        }\n        this.markAsDirty();\n        this.disableRichFormatting();\n        if (text) {\n            this.acroField.setValue(PDFHexString.fromText(text));\n        }\n        else {\n            this.acroField.removeValue();\n        }\n    };\n    /**\n     * Get the alignment for this text field. This value represents the\n     * justification of the text when it is displayed to the user in PDF readers.\n     * There are three possible alignments: left, center, and right. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * const alignment = textField.getAlignment()\n     * if (alignment === TextAlignment.Left) console.log('Text is left justified')\n     * if (alignment === TextAlignment.Center) console.log('Text is centered')\n     * if (alignment === TextAlignment.Right) console.log('Text is right justified')\n     * ```\n     * @returns The alignment of this text field.\n     */\n    PDFTextField.prototype.getAlignment = function () {\n        var quadding = this.acroField.getQuadding();\n        // prettier-ignore\n        return (quadding === 0 ? TextAlignment.Left\n            : quadding === 1 ? TextAlignment.Center\n                : quadding === 2 ? TextAlignment.Right\n                    : TextAlignment.Left);\n    };\n    /**\n     * Set the alignment for this text field. This will determine the\n     * justification of the text when it is displayed to the user in PDF readers.\n     * There are three possible alignments: left, center, and right. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     *\n     * // Text will be left justified when displayed\n     * textField.setAlignment(TextAlignment.Left)\n     *\n     * // Text will be centered when displayed\n     * textField.setAlignment(TextAlignment.Center)\n     *\n     * // Text will be right justified when displayed\n     * textField.setAlignment(TextAlignment.Right)\n     * ```\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     * @param alignment The alignment for this text field.\n     */\n    PDFTextField.prototype.setAlignment = function (alignment) {\n        assertIsOneOf(alignment, 'alignment', TextAlignment);\n        this.markAsDirty();\n        this.acroField.setQuadding(alignment);\n    };\n    /**\n     * Get the maximum length of this field. This value represents the maximum\n     * number of characters that can be typed into this field by the user. If\n     * this field does not have a maximum length, `undefined` is returned.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * const maxLength = textField.getMaxLength()\n     * if (maxLength === undefined) console.log('No max length')\n     * else console.log(`Max length is ${maxLength}`)\n     * ```\n     * @returns The maximum number of characters allowed in this field, or\n     *          `undefined` if no limit exists.\n     */\n    PDFTextField.prototype.getMaxLength = function () {\n        return this.acroField.getMaxLength();\n    };\n    /**\n     * Set the maximum length of this field. This limits the number of characters\n     * that can be typed into this field by the user. This also limits the length\n     * of the string that can be passed to [[PDFTextField.setText]]. This limit\n     * can be removed by passing `undefined` as `maxLength`. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     *\n     * // Allow between 0 and 5 characters to be entered\n     * textField.setMaxLength(5)\n     *\n     * // Allow any number of characters to be entered\n     * textField.setMaxLength(undefined)\n     * ```\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     * @param maxLength The maximum number of characters allowed in this field, or\n     *                  `undefined` to remove the limit.\n     */\n    PDFTextField.prototype.setMaxLength = function (maxLength) {\n        assertRangeOrUndefined(maxLength, 'maxLength', 0, Number.MAX_SAFE_INTEGER);\n        this.markAsDirty();\n        if (maxLength === undefined) {\n            this.acroField.removeMaxLength();\n        }\n        else {\n            var text = this.getText();\n            if (text && text.length > maxLength) {\n                throw new InvalidMaxLengthError(text.length, maxLength, this.getName());\n            }\n            this.acroField.setMaxLength(maxLength);\n        }\n    };\n    /**\n     * Remove the maximum length for this text field. This allows any number of\n     * characters to be typed into this field by the user. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.removeMaxLength()\n     * ```\n     * Calling this method is equivalent to passing `undefined` to\n     * [[PDFTextField.setMaxLength]].\n     */\n    PDFTextField.prototype.removeMaxLength = function () {\n        this.markAsDirty();\n        this.acroField.removeMaxLength();\n    };\n    /**\n     * Display an image inside the bounds of this text field's widgets. For example:\n     * ```js\n     * const pngImage = await pdfDoc.embedPng(...)\n     * const textField = form.getTextField('some.text.field')\n     * textField.setImage(pngImage)\n     * ```\n     * This will update the appearances streams for each of this text field's widgets.\n     * @param image The image that should be displayed.\n     */\n    PDFTextField.prototype.setImage = function (image) {\n        var fieldAlignment = this.getAlignment();\n        // prettier-ignore\n        var alignment = fieldAlignment === TextAlignment.Center ? ImageAlignment.Center\n            : fieldAlignment === TextAlignment.Right ? ImageAlignment.Right\n                : ImageAlignment.Left;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var streamRef = this.createImageAppearanceStream(widget, image, alignment);\n            this.updateWidgetAppearances(widget, { normal: streamRef });\n        }\n        this.markAsClean();\n    };\n    /**\n     * Set the font size for this field. Larger font sizes will result in larger\n     * text being displayed when PDF readers render this text field. Font sizes\n     * may be integer or floating point numbers. Supplying a negative font size\n     * will cause this method to throw an error.\n     *\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.setFontSize(4)\n     * textField.setFontSize(15.7)\n     * ```\n     *\n     * > This method depends upon the existence of a default appearance\n     * > (`/DA`) string. If this field does not have a default appearance string,\n     * > or that string does not contain a font size (via the `Tf` operator),\n     * > then this method will throw an error.\n     *\n     * @param fontSize The font size to be used when rendering text in this field.\n     */\n    PDFTextField.prototype.setFontSize = function (fontSize) {\n        assertPositive(fontSize, 'fontSize');\n        this.acroField.setFontSize(fontSize);\n        this.markAsDirty();\n    };\n    /**\n     * Returns `true` if each line of text is shown on a new line when this\n     * field is displayed in a PDF reader. The alternative is that all lines of\n     * text are merged onto a single line when displayed. See\n     * [[PDFTextField.enableMultiline]] and [[PDFTextField.disableMultiline]].\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isMultiline()) console.log('Multiline is enabled')\n     * ```\n     * @returns Whether or not this is a multiline text field.\n     */\n    PDFTextField.prototype.isMultiline = function () {\n        return this.acroField.hasFlag(AcroTextFlags.Multiline);\n    };\n    /**\n     * Display each line of text on a new line when this field is displayed in a\n     * PDF reader. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableMultiline()\n     * ```\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     */\n    PDFTextField.prototype.enableMultiline = function () {\n        this.markAsDirty();\n        this.acroField.setFlagTo(AcroTextFlags.Multiline, true);\n    };\n    /**\n     * Display each line of text on the same line when this field is displayed\n     * in a PDF reader. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableMultiline()\n     * ```\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     */\n    PDFTextField.prototype.disableMultiline = function () {\n        this.markAsDirty();\n        this.acroField.setFlagTo(AcroTextFlags.Multiline, false);\n    };\n    /**\n     * Returns `true` if this is a password text field. This means that the field\n     * is intended for storing a secure password. See\n     * [[PDFTextField.enablePassword]] and [[PDFTextField.disablePassword]].\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isPassword()) console.log('Password is enabled')\n     * ```\n     * @returns Whether or not this is a password text field.\n     */\n    PDFTextField.prototype.isPassword = function () {\n        return this.acroField.hasFlag(AcroTextFlags.Password);\n    };\n    /**\n     * Indicate that this text field is intended for storing a secure password.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enablePassword()\n     * ```\n     * Values entered into password text fields should not be displayed on the\n     * screen by PDF readers. Most PDF readers will display the value as\n     * asterisks or bullets. PDF readers should never store values entered by the\n     * user into password text fields. Similarly, applications should not\n     * write data to a password text field.\n     *\n     * **Please note that this method does not cause entered values to be\n     * encrypted or secured in any way! It simply sets a flag that PDF software\n     * and readers can access to determine the _purpose_ of this field.**\n     */\n    PDFTextField.prototype.enablePassword = function () {\n        this.acroField.setFlagTo(AcroTextFlags.Password, true);\n    };\n    /**\n     * Indicate that this text field is **not** intended for storing a secure\n     * password. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disablePassword()\n     * ```\n     */\n    PDFTextField.prototype.disablePassword = function () {\n        this.acroField.setFlagTo(AcroTextFlags.Password, false);\n    };\n    /**\n     * Returns `true` if the contents of this text field represent a file path.\n     * See [[PDFTextField.enableFileSelection]] and\n     * [[PDFTextField.disableFileSelection]]. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isFileSelector()) console.log('Is a file selector')\n     * ```\n     * @returns Whether or not this field should contain file paths.\n     */\n    PDFTextField.prototype.isFileSelector = function () {\n        return this.acroField.hasFlag(AcroTextFlags.FileSelect);\n    };\n    /**\n     * Indicate that this text field is intended to store a file path. The\n     * contents of the file stored at that path should be submitted as the value\n     * of the field. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableFileSelection()\n     * ```\n     */\n    PDFTextField.prototype.enableFileSelection = function () {\n        this.acroField.setFlagTo(AcroTextFlags.FileSelect, true);\n    };\n    /**\n     * Indicate that this text field is **not** intended to store a file path.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableFileSelection()\n     * ```\n     */\n    PDFTextField.prototype.disableFileSelection = function () {\n        this.acroField.setFlagTo(AcroTextFlags.FileSelect, false);\n    };\n    /**\n     * Returns `true` if the text entered in this field should be spell checked\n     * by PDF readers. See [[PDFTextField.enableSpellChecking]] and\n     * [[PDFTextField.disableSpellChecking]]. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isSpellChecked()) console.log('Spell checking is enabled')\n     * ```\n     * @returns Whether or not this field should be spell checked.\n     */\n    PDFTextField.prototype.isSpellChecked = function () {\n        return !this.acroField.hasFlag(AcroTextFlags.DoNotSpellCheck);\n    };\n    /**\n     * Allow PDF readers to spell check the text entered in this field.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableSpellChecking()\n     * ```\n     */\n    PDFTextField.prototype.enableSpellChecking = function () {\n        this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck, false);\n    };\n    /**\n     * Do not allow PDF readers to spell check the text entered in this field.\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableSpellChecking()\n     * ```\n     */\n    PDFTextField.prototype.disableSpellChecking = function () {\n        this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck, true);\n    };\n    /**\n     * Returns `true` if PDF readers should allow the user to scroll the text\n     * field when its contents do not fit within the field's view bounds. See\n     * [[PDFTextField.enableScrolling]] and [[PDFTextField.disableScrolling]].\n     * For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isScrollable()) console.log('Scrolling is enabled')\n     * ```\n     * @returns Whether or not the field is scrollable in PDF readers.\n     */\n    PDFTextField.prototype.isScrollable = function () {\n        return !this.acroField.hasFlag(AcroTextFlags.DoNotScroll);\n    };\n    /**\n     * Allow PDF readers to present a scroll bar to the user when the contents\n     * of this text field do not fit within its view bounds. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableScrolling()\n     * ```\n     * A horizontal scroll bar should be shown for singleline fields. A vertical\n     * scroll bar should be shown for multiline fields.\n     */\n    PDFTextField.prototype.enableScrolling = function () {\n        this.acroField.setFlagTo(AcroTextFlags.DoNotScroll, false);\n    };\n    /**\n     * Do not allow PDF readers to present a scroll bar to the user when the\n     * contents of this text field do not fit within its view bounds. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableScrolling()\n     * ```\n     */\n    PDFTextField.prototype.disableScrolling = function () {\n        this.acroField.setFlagTo(AcroTextFlags.DoNotScroll, true);\n    };\n    /**\n     * Returns `true` if this is a combed text field. This means that the field\n     * is split into `n` equal size cells with one character in each (where `n`\n     * is equal to the max length of the text field). The result is that all\n     * characters in this field are displayed an equal distance apart from one\n     * another. See [[PDFTextField.enableCombing]] and\n     * [[PDFTextField.disableCombing]]. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isCombed()) console.log('Combing is enabled')\n     * ```\n     * Note that in order for a text field to be combed, the following must be\n     * true (in addition to enabling combing):\n     * * It must not be a multiline field (see [[PDFTextField.isMultiline]])\n     * * It must not be a password field (see [[PDFTextField.isPassword]])\n     * * It must not be a file selector field (see [[PDFTextField.isFileSelector]])\n     * * It must have a max length defined (see [[PDFTextField.setMaxLength]])\n     * @returns Whether or not this field is combed.\n     */\n    PDFTextField.prototype.isCombed = function () {\n        return (this.acroField.hasFlag(AcroTextFlags.Comb) &&\n            !this.isMultiline() &&\n            !this.isPassword() &&\n            !this.isFileSelector() &&\n            this.getMaxLength() !== undefined);\n    };\n    /**\n     * Split this field into `n` equal size cells with one character in each\n     * (where `n` is equal to the max length of the text field). This will cause\n     * all characters in the field to be displayed an equal distance apart from\n     * one another. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableCombing()\n     * ```\n     *\n     * In addition to calling this method, text fields must have a max length\n     * defined in order to be combed (see [[PDFTextField.setMaxLength]]).\n     *\n     * This method will also call the following three methods internally:\n     * * [[PDFTextField.disableMultiline]]\n     * * [[PDFTextField.disablePassword]]\n     * * [[PDFTextField.disableFileSelection]]\n     *\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     */\n    PDFTextField.prototype.enableCombing = function () {\n        if (this.getMaxLength() === undefined) {\n            var msg = \"PDFTextFields must have a max length in order to be combed\";\n            console.warn(msg);\n        }\n        this.markAsDirty();\n        this.disableMultiline();\n        this.disablePassword();\n        this.disableFileSelection();\n        this.acroField.setFlagTo(AcroTextFlags.Comb, true);\n    };\n    /**\n     * Turn off combing for this text field. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableCombing()\n     * ```\n     * See [[PDFTextField.isCombed]] and [[PDFTextField.enableCombing]] for more\n     * information about what combing is.\n     *\n     * This method will mark this text field as dirty. See\n     * [[PDFTextField.setText]] for more details about what this means.\n     */\n    PDFTextField.prototype.disableCombing = function () {\n        this.markAsDirty();\n        this.acroField.setFlagTo(AcroTextFlags.Comb, false);\n    };\n    /**\n     * Returns `true` if this text field contains rich text. See\n     * [[PDFTextField.enableRichFormatting]] and\n     * [[PDFTextField.disableRichFormatting]]. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.isRichFormatted()) console.log('Rich formatting enabled')\n     * ```\n     * @returns Whether or not this field contains rich text.\n     */\n    PDFTextField.prototype.isRichFormatted = function () {\n        return this.acroField.hasFlag(AcroTextFlags.RichText);\n    };\n    /**\n     * Indicate that this field contains XFA data - or rich text. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.enableRichFormatting()\n     * ```\n     * Note that `pdf-lib` does not support reading or writing rich text fields.\n     * Nor do most PDF readers and writers. Rich text fields are based on XFA\n     * (XML Forms Architecture). Relatively few PDFs use rich text fields or XFA.\n     * Unlike PDF itself, XFA is not an ISO standard. XFA has been deprecated in\n     * PDF 2.0:\n     * * https://en.wikipedia.org/wiki/XFA\n     * * http://blog.pdfshareforms.com/pdf-2-0-release-bid-farewell-xfa-forms/\n     */\n    PDFTextField.prototype.enableRichFormatting = function () {\n        this.acroField.setFlagTo(AcroTextFlags.RichText, true);\n    };\n    /**\n     * Indicate that this is a standard text field that does not XFA data (rich\n     * text). For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * textField.disableRichFormatting()\n     * ```\n     */\n    PDFTextField.prototype.disableRichFormatting = function () {\n        this.acroField.setFlagTo(AcroTextFlags.RichText, false);\n    };\n    /**\n     * Show this text field on the specified page. For example:\n     * ```js\n     * const ubuntuFont = await pdfDoc.embedFont(ubuntuFontBytes)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const textField = form.createTextField('best.gundam')\n     * textField.setText('Exia')\n     *\n     * textField.addToPage(page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 200,\n     *   height: 100,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     *   font: ubuntuFont,\n     * })\n     * ```\n     * This will create a new widget for this text field.\n     * @param page The page to which this text field widget should be added.\n     * @param options The options to be used when adding this text field widget.\n     */\n    PDFTextField.prototype.addToPage = function (page, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        if (!options)\n            options = {};\n        if (!('textColor' in options))\n            options.textColor = rgb(0, 0, 0);\n        if (!('backgroundColor' in options))\n            options.backgroundColor = rgb(1, 1, 1);\n        if (!('borderColor' in options))\n            options.borderColor = rgb(0, 0, 0);\n        if (!('borderWidth' in options))\n            options.borderWidth = 1;\n        // Create a widget for this text field\n        var widget = this.createWidget({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : 0,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : 0,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 200,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 50,\n            textColor: options.textColor,\n            backgroundColor: options.backgroundColor,\n            borderColor: options.borderColor,\n            borderWidth: (_e = options.borderWidth) !== null && _e !== void 0 ? _e : 0,\n            rotate: (_f = options.rotate) !== null && _f !== void 0 ? _f : degrees(0),\n            hidden: options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        var font = (_g = options.font) !== null && _g !== void 0 ? _g : this.doc.getForm().getDefaultFont();\n        this.updateWidgetAppearance(widget, font);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if this text field has been marked as dirty, or if any of\n     * this text field's widgets do not have an appearance stream. For example:\n     * ```js\n     * const textField = form.getTextField('some.text.field')\n     * if (textField.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this text field needs an appearance update.\n     */\n    PDFTextField.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        if (this.isDirty())\n            return true;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var hasAppearances = ((_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal) instanceof PDFStream;\n            if (!hasAppearances)\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this text field's widgets using\n     * the default appearance provider for text fields. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const textField = form.getTextField('some.text.field')\n     * textField.defaultUpdateAppearances(helvetica)\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     */\n    PDFTextField.prototype.defaultUpdateAppearances = function (font) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.updateAppearances(font);\n    };\n    /**\n     * Update the appearance streams for each of this text field's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for text fields will be used. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const textField = form.getTextField('some.text.field')\n     * textField.updateAppearances(helvetica, (field, widget, font) => {\n     *   ...\n     *   return drawTextField(...)\n     * })\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFTextField.prototype.updateAppearances = function (font, provider) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            this.updateWidgetAppearance(widget, font, provider);\n        }\n        this.markAsClean();\n    };\n    PDFTextField.prototype.updateWidgetAppearance = function (widget, font, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultTextFieldAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget, font));\n        this.updateWidgetAppearanceWithFont(widget, font, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getTextField]] method, which will create an\n     * > instance of [[PDFTextField]] for you.\n     *\n     * Create an instance of [[PDFTextField]] from an existing acroText and ref\n     *\n     * @param acroText The underlying `PDFAcroText` for this text field.\n     * @param ref The unique reference for this text field.\n     * @param doc The document to which this text field will belong.\n     */\n    PDFTextField.of = function (acroText, ref, doc) {\n        return new PDFTextField(acroText, ref, doc);\n    };\n    return PDFTextField;\n}(PDFField));\nexport default PDFTextField;\n//# sourceMappingURL=PDFTextField.js.map","export var StandardFonts;\n(function (StandardFonts) {\n    StandardFonts[\"Courier\"] = \"Courier\";\n    StandardFonts[\"CourierBold\"] = \"Courier-Bold\";\n    StandardFonts[\"CourierOblique\"] = \"Courier-Oblique\";\n    StandardFonts[\"CourierBoldOblique\"] = \"Courier-BoldOblique\";\n    StandardFonts[\"Helvetica\"] = \"Helvetica\";\n    StandardFonts[\"HelveticaBold\"] = \"Helvetica-Bold\";\n    StandardFonts[\"HelveticaOblique\"] = \"Helvetica-Oblique\";\n    StandardFonts[\"HelveticaBoldOblique\"] = \"Helvetica-BoldOblique\";\n    StandardFonts[\"TimesRoman\"] = \"Times-Roman\";\n    StandardFonts[\"TimesRomanBold\"] = \"Times-Bold\";\n    StandardFonts[\"TimesRomanItalic\"] = \"Times-Italic\";\n    StandardFonts[\"TimesRomanBoldItalic\"] = \"Times-BoldItalic\";\n    StandardFonts[\"Symbol\"] = \"Symbol\";\n    StandardFonts[\"ZapfDingbats\"] = \"ZapfDingbats\";\n})(StandardFonts || (StandardFonts = {}));\n//# sourceMappingURL=StandardFonts.js.map","import { __assign, __spreadArrays } from \"tslib\";\nimport PDFDocument from \"../PDFDocument\";\nimport PDFButton from \"./PDFButton\";\nimport PDFCheckBox from \"./PDFCheckBox\";\nimport PDFDropdown from \"./PDFDropdown\";\nimport PDFOptionList from \"./PDFOptionList\";\nimport PDFRadioGroup from \"./PDFRadioGroup\";\nimport PDFSignature from \"./PDFSignature\";\nimport PDFTextField from \"./PDFTextField\";\nimport { NoSuchFieldError, UnexpectedFieldTypeError, FieldAlreadyExistsError, InvalidFieldNamePartError, } from \"../errors\";\nimport PDFFont from \"../PDFFont\";\nimport { StandardFonts } from \"../StandardFonts\";\nimport { rotateInPlace } from \"../operations\";\nimport { drawObject, popGraphicsState, pushGraphicsState, translate, } from \"../operators\";\nimport { PDFAcroForm, PDFAcroCheckBox, PDFAcroComboBox, PDFAcroListBox, PDFAcroRadioButton, PDFAcroSignature, PDFAcroText, PDFAcroPushButton, PDFAcroNonTerminal, PDFDict, PDFRef, createPDFAcroFields, PDFName, } from \"../../core\";\nimport { assertIs, Cache, assertOrUndefined } from \"../../utils\";\n/**\n * Represents the interactive form of a [[PDFDocument]].\n *\n * Interactive forms (sometimes called _AcroForms_) are collections of fields\n * designed to gather information from a user. A PDF document may contains any\n * number of fields that appear on various pages, all of which make up a single,\n * global interactive form spanning the entire document. This means that\n * instances of [[PDFDocument]] shall contain at most one [[PDFForm]].\n *\n * The fields of an interactive form are represented by [[PDFField]] instances.\n */\nvar PDFForm = /** @class */ (function () {\n    function PDFForm(acroForm, doc) {\n        var _this = this;\n        this.embedDefaultFont = function () {\n            return _this.doc.embedStandardFont(StandardFonts.Helvetica);\n        };\n        assertIs(acroForm, 'acroForm', [[PDFAcroForm, 'PDFAcroForm']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        this.acroForm = acroForm;\n        this.doc = doc;\n        this.dirtyFields = new Set();\n        this.defaultFontCache = Cache.populatedBy(this.embedDefaultFont);\n    }\n    /**\n     * Returns `true` if this [[PDFForm]] has XFA data. Most PDFs with form\n     * fields do not use XFA as it is not widely supported by PDF readers.\n     *\n     * > `pdf-lib` does not support creation, modification, or reading of XFA\n     * > fields.\n     *\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * if (form.hasXFA()) console.log('PDF has XFA data')\n     * ```\n     * @returns Whether or not this form has XFA data.\n     */\n    PDFForm.prototype.hasXFA = function () {\n        return this.acroForm.dict.has(PDFName.of('XFA'));\n    };\n    /**\n     * Disconnect the XFA data from this [[PDFForm]] (if any exists). This will\n     * force readers to fallback to standard fields if the [[PDFDocument]]\n     * contains any. For example:\n     *\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * form.deleteXFA()\n     * ```\n     */\n    PDFForm.prototype.deleteXFA = function () {\n        this.acroForm.dict.delete(PDFName.of('XFA'));\n    };\n    /**\n     * Get all fields contained in this [[PDFForm]]. For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const fields = form.getFields()\n     * fields.forEach(field => {\n     *   const type = field.constructor.name\n     *   const name = field.getName()\n     *   console.log(`${type}: ${name}`)\n     * })\n     * ```\n     * @returns An array of all fields in this form.\n     */\n    PDFForm.prototype.getFields = function () {\n        var allFields = this.acroForm.getAllFields();\n        var fields = [];\n        for (var idx = 0, len = allFields.length; idx < len; idx++) {\n            var _a = allFields[idx], acroField = _a[0], ref = _a[1];\n            var field = convertToPDFField(acroField, ref, this.doc);\n            if (field)\n                fields.push(field);\n        }\n        return fields;\n    };\n    /**\n     * Get the field in this [[PDFForm]] with the given name. For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getFieldMaybe('Page1.Foo.Bar[0]')\n     * if (field) console.log('Field exists!')\n     * ```\n     * @param name A fully qualified field name.\n     * @returns The field with the specified name, if one exists.\n     */\n    PDFForm.prototype.getFieldMaybe = function (name) {\n        assertIs(name, 'name', ['string']);\n        var fields = this.getFields();\n        for (var idx = 0, len = fields.length; idx < len; idx++) {\n            var field = fields[idx];\n            if (field.getName() === name)\n                return field;\n        }\n        return undefined;\n    };\n    /**\n     * Get the field in this [[PDFForm]] with the given name. For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getField('Page1.Foo.Bar[0]')\n     * ```\n     * If no field exists with the provided name, an error will be thrown.\n     * @param name A fully qualified field name.\n     * @returns The field with the specified name.\n     */\n    PDFForm.prototype.getField = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getFieldMaybe(name);\n        if (field)\n            return field;\n        throw new NoSuchFieldError(name);\n    };\n    /**\n     * Get the button field in this [[PDFForm]] with the given name. For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const button = form.getButton('Page1.Foo.Button[0]')\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a button.\n     * @param name A fully qualified button name.\n     * @returns The button with the specified name.\n     */\n    PDFForm.prototype.getButton = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFButton)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFButton, field);\n    };\n    /**\n     * Get the check box field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const checkBox = form.getCheckBox('Page1.Foo.CheckBox[0]')\n     * checkBox.check()\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a check box.\n     * @param name A fully qualified check box name.\n     * @returns The check box with the specified name.\n     */\n    PDFForm.prototype.getCheckBox = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFCheckBox)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFCheckBox, field);\n    };\n    /**\n     * Get the dropdown field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const dropdown = form.getDropdown('Page1.Foo.Dropdown[0]')\n     * const options = dropdown.getOptions()\n     * dropdown.select(options[0])\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a dropdown.\n     * @param name A fully qualified dropdown name.\n     * @returns The dropdown with the specified name.\n     */\n    PDFForm.prototype.getDropdown = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFDropdown)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFDropdown, field);\n    };\n    /**\n     * Get the option list field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const optionList = form.getOptionList('Page1.Foo.OptionList[0]')\n     * const options = optionList.getOptions()\n     * optionList.select(options[0])\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not an option list.\n     * @param name A fully qualified option list name.\n     * @returns The option list with the specified name.\n     */\n    PDFForm.prototype.getOptionList = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFOptionList)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFOptionList, field);\n    };\n    /**\n     * Get the radio group field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const radioGroup = form.getRadioGroup('Page1.Foo.RadioGroup[0]')\n     * const options = radioGroup.getOptions()\n     * radioGroup.select(options[0])\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a radio group.\n     * @param name A fully qualified radio group name.\n     * @returns The radio group with the specified name.\n     */\n    PDFForm.prototype.getRadioGroup = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFRadioGroup)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFRadioGroup, field);\n    };\n    /**\n     * Get the signature field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const signature = form.getSignature('Page1.Foo.Signature[0]')\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a signature.\n     * @param name A fully qualified signature name.\n     * @returns The signature with the specified name.\n     */\n    PDFForm.prototype.getSignature = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFSignature)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFSignature, field);\n    };\n    /**\n     * Get the text field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const textField = form.getTextField('Page1.Foo.TextField[0]')\n     * textField.setText('Are you designed to act or to be acted upon?')\n     * ```\n     * An error will be thrown if no field exists with the provided name, or if\n     * the field exists but is not a text field.\n     * @param name A fully qualified text field name.\n     * @returns The text field with the specified name.\n     */\n    PDFForm.prototype.getTextField = function (name) {\n        assertIs(name, 'name', ['string']);\n        var field = this.getField(name);\n        if (field instanceof PDFTextField)\n            return field;\n        throw new UnexpectedFieldTypeError(name, PDFTextField, field);\n    };\n    /**\n     * Create a new button field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const button = form.createButton('cool.new.button')\n     *\n     * button.addToPage('Do Stuff', font, page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new button.\n     * @returns The new button field.\n     */\n    PDFForm.prototype.createButton = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var button = PDFAcroPushButton.create(this.doc.context);\n        button.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [button, button.ref], nameParts.terminal);\n        return PDFButton.of(button, button.ref, this.doc);\n    };\n    /**\n     * Create a new check box field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const checkBox = form.createCheckBox('cool.new.checkBox')\n     *\n     * checkBox.addToPage(page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new check box.\n     * @returns The new check box field.\n     */\n    PDFForm.prototype.createCheckBox = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var checkBox = PDFAcroCheckBox.create(this.doc.context);\n        checkBox.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [checkBox, checkBox.ref], nameParts.terminal);\n        return PDFCheckBox.of(checkBox, checkBox.ref, this.doc);\n    };\n    /**\n     * Create a new dropdown field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const dropdown = form.createDropdown('cool.new.dropdown')\n     *\n     * dropdown.addToPage(font, page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new dropdown.\n     * @returns The new dropdown field.\n     */\n    PDFForm.prototype.createDropdown = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var comboBox = PDFAcroComboBox.create(this.doc.context);\n        comboBox.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [comboBox, comboBox.ref], nameParts.terminal);\n        return PDFDropdown.of(comboBox, comboBox.ref, this.doc);\n    };\n    /**\n     * Create a new option list field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const optionList = form.createOptionList('cool.new.optionList')\n     *\n     * optionList.addToPage(font, page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new option list.\n     * @returns The new option list field.\n     */\n    PDFForm.prototype.createOptionList = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var listBox = PDFAcroListBox.create(this.doc.context);\n        listBox.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [listBox, listBox.ref], nameParts.terminal);\n        return PDFOptionList.of(listBox, listBox.ref, this.doc);\n    };\n    /**\n     * Create a new radio group field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const radioGroup = form.createRadioGroup('cool.new.radioGroup')\n     *\n     * radioGroup.addOptionToPage('is-dog', page, { y: 0 })\n     * radioGroup.addOptionToPage('is-cat', page, { y: 75 })\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new radio group.\n     * @returns The new radio group field.\n     */\n    PDFForm.prototype.createRadioGroup = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var radioButton = PDFAcroRadioButton.create(this.doc.context);\n        radioButton.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [radioButton, radioButton.ref], nameParts.terminal);\n        return PDFRadioGroup.of(radioButton, radioButton.ref, this.doc);\n    };\n    /**\n     * Create a new text field in this [[PDFForm]] with the given name.\n     * For example:\n     * ```js\n     * const font = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const textField = form.createTextField('cool.new.textField')\n     *\n     * textField.addToPage(font, page)\n     * ```\n     * An error will be thrown if a field already exists with the provided name.\n     * @param name The fully qualified name for the new radio group.\n     * @returns The new radio group field.\n     */\n    PDFForm.prototype.createTextField = function (name) {\n        assertIs(name, 'name', ['string']);\n        var nameParts = splitFieldName(name);\n        var parent = this.findOrCreateNonTerminals(nameParts.nonTerminal);\n        var text = PDFAcroText.create(this.doc.context);\n        text.setPartialName(nameParts.terminal);\n        addFieldToParent(parent, [text, text.ref], nameParts.terminal);\n        return PDFTextField.of(text, text.ref, this.doc);\n    };\n    /**\n     * Flatten all fields in this [[PDFForm]].\n     *\n     * Flattening a form field will take the current appearance for each of that\n     * field's widgets and make them part of their page's content stream. All form\n     * fields and annotations associated are then removed. Note that once a form\n     * has been flattened its fields can no longer be accessed or edited.\n     *\n     * This operation is often used after filling form fields to ensure a\n     * consistent appearance across different PDF readers and/or printers.\n     * Another common use case is to copy a template document with form fields\n     * into another document. In this scenario you would load the template\n     * document, fill its fields, flatten it, and then copy its pages into the\n     * recipient document - the filled fields will be copied over.\n     *\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm();\n     * form.flatten();\n     * ```\n     */\n    PDFForm.prototype.flatten = function (options) {\n        if (options === void 0) { options = { updateFieldAppearances: true }; }\n        if (options.updateFieldAppearances) {\n            this.updateFieldAppearances();\n        }\n        var fields = this.getFields();\n        for (var i = 0, lenFields = fields.length; i < lenFields; i++) {\n            var field = fields[i];\n            var widgets = field.acroField.getWidgets();\n            for (var j = 0, lenWidgets = widgets.length; j < lenWidgets; j++) {\n                var widget = widgets[j];\n                var page = this.findWidgetPage(widget);\n                var widgetRef = this.findWidgetAppearanceRef(field, widget);\n                var xObjectKey = page.node.newXObject('FlatWidget', widgetRef);\n                var rectangle = widget.getRectangle();\n                var operators = __spreadArrays([\n                    pushGraphicsState(),\n                    translate(rectangle.x, rectangle.y)\n                ], rotateInPlace(__assign(__assign({}, rectangle), { rotation: 0 })), [\n                    drawObject(xObjectKey),\n                    popGraphicsState(),\n                ]).filter(Boolean);\n                page.pushOperators.apply(page, operators);\n            }\n            this.removeField(field);\n        }\n    };\n    /**\n     * Remove a field from this [[PDFForm]].\n     *\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm();\n     * const ageField = form.getFields().find(x => x.getName() === 'Age');\n     * form.removeField(ageField);\n     * ```\n     */\n    PDFForm.prototype.removeField = function (field) {\n        var widgets = field.acroField.getWidgets();\n        var pages = new Set();\n        for (var i = 0, len = widgets.length; i < len; i++) {\n            var widget = widgets[i];\n            var widgetRef = this.findWidgetAppearanceRef(field, widget);\n            var page = this.findWidgetPage(widget);\n            pages.add(page);\n            page.node.removeAnnot(widgetRef);\n        }\n        pages.forEach(function (page) { return page.node.removeAnnot(field.ref); });\n        this.acroForm.removeField(field.acroField);\n        var fieldKids = field.acroField.normalizedEntries().Kids;\n        var kidsCount = fieldKids.size();\n        for (var childIndex = 0; childIndex < kidsCount; childIndex++) {\n            var child = fieldKids.get(childIndex);\n            if (child instanceof PDFRef) {\n                this.doc.context.delete(child);\n            }\n        }\n        this.doc.context.delete(field.ref);\n    };\n    /**\n     * Update the appearance streams for all widgets of all fields in this\n     * [[PDFForm]]. Appearance streams will only be created for a widget if it\n     * does not have any existing appearance streams, or the field's value has\n     * changed (e.g. by calling [[PDFTextField.setText]] or\n     * [[PDFDropdown.select]]).\n     *\n     * For example:\n     * ```js\n     * const courier = await pdfDoc.embedFont(StandardFonts.Courier)\n     * const form = pdfDoc.getForm()\n     * form.updateFieldAppearances(courier)\n     * ```\n     *\n     * **IMPORTANT:** The default value for the `font` parameter is\n     * [[StandardFonts.Helvetica]]. Note that this is a WinAnsi font. This means\n     * that encoding errors will be thrown if any fields contain text with\n     * characters outside the WinAnsi character set (the latin alphabet).\n     *\n     * Embedding a custom font and passing that as the `font`\n     * parameter allows you to generate appearance streams with non WinAnsi\n     * characters (assuming your custom font supports them).\n     *\n     * > **NOTE:** The [[PDFDocument.save]] method will call this method to\n     * > update appearances automatically if a form was accessed via the\n     * > [[PDFDocument.getForm]] method prior to saving.\n     *\n     * @param font Optionally, the font to use when creating new appearances.\n     */\n    PDFForm.prototype.updateFieldAppearances = function (font) {\n        assertOrUndefined(font, 'font', [[PDFFont, 'PDFFont']]);\n        font = font !== null && font !== void 0 ? font : this.getDefaultFont();\n        var fields = this.getFields();\n        for (var idx = 0, len = fields.length; idx < len; idx++) {\n            var field = fields[idx];\n            if (field.needsAppearancesUpdate()) {\n                field.defaultUpdateAppearances(font);\n            }\n        }\n    };\n    /**\n     * Mark a field as dirty. This will cause its appearance streams to be\n     * updated by [[PDFForm.updateFieldAppearances]].\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getField('foo.bar')\n     * form.markFieldAsDirty(field.ref)\n     * ```\n     * @param fieldRef The reference to the field that should be marked.\n     */\n    PDFForm.prototype.markFieldAsDirty = function (fieldRef) {\n        assertOrUndefined(fieldRef, 'fieldRef', [[PDFRef, 'PDFRef']]);\n        this.dirtyFields.add(fieldRef);\n    };\n    /**\n     * Mark a field as dirty. This will cause its appearance streams to not be\n     * updated by [[PDFForm.updateFieldAppearances]].\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getField('foo.bar')\n     * form.markFieldAsClean(field.ref)\n     * ```\n     * @param fieldRef The reference to the field that should be marked.\n     */\n    PDFForm.prototype.markFieldAsClean = function (fieldRef) {\n        assertOrUndefined(fieldRef, 'fieldRef', [[PDFRef, 'PDFRef']]);\n        this.dirtyFields.delete(fieldRef);\n    };\n    /**\n     * Returns `true` is the specified field has been marked as dirty.\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const field = form.getField('foo.bar')\n     * if (form.fieldIsDirty(field.ref)) console.log('Field is dirty')\n     * ```\n     * @param fieldRef The reference to the field that should be checked.\n     * @returns Whether or not the specified field is dirty.\n     */\n    PDFForm.prototype.fieldIsDirty = function (fieldRef) {\n        assertOrUndefined(fieldRef, 'fieldRef', [[PDFRef, 'PDFRef']]);\n        return this.dirtyFields.has(fieldRef);\n    };\n    PDFForm.prototype.getDefaultFont = function () {\n        return this.defaultFontCache.access();\n    };\n    PDFForm.prototype.findWidgetPage = function (widget) {\n        var pageRef = widget.P();\n        var page = this.doc.getPages().find(function (x) { return x.ref === pageRef; });\n        if (page === undefined) {\n            var widgetRef = this.doc.context.getObjectRef(widget.dict);\n            if (widgetRef === undefined) {\n                throw new Error('Could not find PDFRef for PDFObject');\n            }\n            page = this.doc.findPageForAnnotationRef(widgetRef);\n            if (page === undefined) {\n                throw new Error(\"Could not find page for PDFRef \" + widgetRef);\n            }\n        }\n        return page;\n    };\n    PDFForm.prototype.findWidgetAppearanceRef = function (field, widget) {\n        var _a;\n        var refOrDict = widget.getNormalAppearance();\n        if (refOrDict instanceof PDFDict &&\n            (field instanceof PDFCheckBox || field instanceof PDFRadioGroup)) {\n            var value = field.acroField.getValue();\n            var ref = (_a = refOrDict.get(value)) !== null && _a !== void 0 ? _a : refOrDict.get(PDFName.of('Off'));\n            if (ref instanceof PDFRef) {\n                refOrDict = ref;\n            }\n        }\n        if (!(refOrDict instanceof PDFRef)) {\n            var name_1 = field.getName();\n            throw new Error(\"Failed to extract appearance ref for: \" + name_1);\n        }\n        return refOrDict;\n    };\n    PDFForm.prototype.findOrCreateNonTerminals = function (partialNames) {\n        var nonTerminal = [\n            this.acroForm,\n        ];\n        for (var idx = 0, len = partialNames.length; idx < len; idx++) {\n            var namePart = partialNames[idx];\n            if (!namePart)\n                throw new InvalidFieldNamePartError(namePart);\n            var parent_1 = nonTerminal[0], parentRef = nonTerminal[1];\n            var res = this.findNonTerminal(namePart, parent_1);\n            if (res) {\n                nonTerminal = res;\n            }\n            else {\n                var node = PDFAcroNonTerminal.create(this.doc.context);\n                node.setPartialName(namePart);\n                node.setParent(parentRef);\n                var nodeRef = this.doc.context.register(node.dict);\n                parent_1.addField(nodeRef);\n                nonTerminal = [node, nodeRef];\n            }\n        }\n        return nonTerminal;\n    };\n    PDFForm.prototype.findNonTerminal = function (partialName, parent) {\n        var fields = parent instanceof PDFAcroForm\n            ? this.acroForm.getFields()\n            : createPDFAcroFields(parent.Kids());\n        for (var idx = 0, len = fields.length; idx < len; idx++) {\n            var _a = fields[idx], field = _a[0], ref = _a[1];\n            if (field.getPartialName() === partialName) {\n                if (field instanceof PDFAcroNonTerminal)\n                    return [field, ref];\n                throw new FieldAlreadyExistsError(partialName);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.getForm]] method, which will create an\n     * > instance of [[PDFForm]] for you.\n     *\n     * Create an instance of [[PDFForm]] from an existing acroForm and embedder\n     *\n     * @param acroForm The underlying `PDFAcroForm` for this form.\n     * @param doc The document to which the form will belong.\n     */\n    PDFForm.of = function (acroForm, doc) {\n        return new PDFForm(acroForm, doc);\n    };\n    return PDFForm;\n}());\nexport default PDFForm;\nvar convertToPDFField = function (field, ref, doc) {\n    if (field instanceof PDFAcroPushButton)\n        return PDFButton.of(field, ref, doc);\n    if (field instanceof PDFAcroCheckBox)\n        return PDFCheckBox.of(field, ref, doc);\n    if (field instanceof PDFAcroComboBox)\n        return PDFDropdown.of(field, ref, doc);\n    if (field instanceof PDFAcroListBox)\n        return PDFOptionList.of(field, ref, doc);\n    if (field instanceof PDFAcroText)\n        return PDFTextField.of(field, ref, doc);\n    if (field instanceof PDFAcroRadioButton) {\n        return PDFRadioGroup.of(field, ref, doc);\n    }\n    if (field instanceof PDFAcroSignature) {\n        return PDFSignature.of(field, ref, doc);\n    }\n    return undefined;\n};\nvar splitFieldName = function (fullyQualifiedName) {\n    if (fullyQualifiedName.length === 0) {\n        throw new Error('PDF field names must not be empty strings');\n    }\n    var parts = fullyQualifiedName.split('.');\n    for (var idx = 0, len = parts.length; idx < len; idx++) {\n        if (parts[idx] === '') {\n            throw new Error(\"Periods in PDF field names must be separated by at least one character: \\\"\" + fullyQualifiedName + \"\\\"\");\n        }\n    }\n    if (parts.length === 1)\n        return { nonTerminal: [], terminal: parts[0] };\n    return {\n        nonTerminal: parts.slice(0, parts.length - 1),\n        terminal: parts[parts.length - 1],\n    };\n};\nvar addFieldToParent = function (_a, _b, partialName) {\n    var parent = _a[0], parentRef = _a[1];\n    var field = _b[0], fieldRef = _b[1];\n    var entries = parent.normalizedEntries();\n    var fields = createPDFAcroFields('Kids' in entries ? entries.Kids : entries.Fields);\n    for (var idx = 0, len = fields.length; idx < len; idx++) {\n        if (fields[idx][0].getPartialName() === partialName) {\n            throw new FieldAlreadyExistsError(partialName);\n        }\n    }\n    parent.addField(fieldRef);\n    field.setParent(parentRef);\n};\n//# sourceMappingURL=PDFForm.js.map","export var PageSizes = {\n    '4A0': [4767.87, 6740.79],\n    '2A0': [3370.39, 4767.87],\n    A0: [2383.94, 3370.39],\n    A1: [1683.78, 2383.94],\n    A2: [1190.55, 1683.78],\n    A3: [841.89, 1190.55],\n    A4: [595.28, 841.89],\n    A5: [419.53, 595.28],\n    A6: [297.64, 419.53],\n    A7: [209.76, 297.64],\n    A8: [147.4, 209.76],\n    A9: [104.88, 147.4],\n    A10: [73.7, 104.88],\n    B0: [2834.65, 4008.19],\n    B1: [2004.09, 2834.65],\n    B2: [1417.32, 2004.09],\n    B3: [1000.63, 1417.32],\n    B4: [708.66, 1000.63],\n    B5: [498.9, 708.66],\n    B6: [354.33, 498.9],\n    B7: [249.45, 354.33],\n    B8: [175.75, 249.45],\n    B9: [124.72, 175.75],\n    B10: [87.87, 124.72],\n    C0: [2599.37, 3676.54],\n    C1: [1836.85, 2599.37],\n    C2: [1298.27, 1836.85],\n    C3: [918.43, 1298.27],\n    C4: [649.13, 918.43],\n    C5: [459.21, 649.13],\n    C6: [323.15, 459.21],\n    C7: [229.61, 323.15],\n    C8: [161.57, 229.61],\n    C9: [113.39, 161.57],\n    C10: [79.37, 113.39],\n    RA0: [2437.8, 3458.27],\n    RA1: [1729.13, 2437.8],\n    RA2: [1218.9, 1729.13],\n    RA3: [864.57, 1218.9],\n    RA4: [609.45, 864.57],\n    SRA0: [2551.18, 3628.35],\n    SRA1: [1814.17, 2551.18],\n    SRA2: [1275.59, 1814.17],\n    SRA3: [907.09, 1275.59],\n    SRA4: [637.8, 907.09],\n    Executive: [521.86, 756.0],\n    Folio: [612.0, 936.0],\n    Legal: [612.0, 1008.0],\n    Letter: [612.0, 792.0],\n    Tabloid: [792.0, 1224.0],\n};\n//# sourceMappingURL=sizes.js.map","export var ParseSpeeds;\n(function (ParseSpeeds) {\n    ParseSpeeds[ParseSpeeds[\"Fastest\"] = Infinity] = \"Fastest\";\n    ParseSpeeds[ParseSpeeds[\"Fast\"] = 1500] = \"Fast\";\n    ParseSpeeds[ParseSpeeds[\"Medium\"] = 500] = \"Medium\";\n    ParseSpeeds[ParseSpeeds[\"Slow\"] = 100] = \"Slow\";\n})(ParseSpeeds || (ParseSpeeds = {}));\n//# sourceMappingURL=PDFDocumentOptions.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { PDFName, PDFArray, PDFDict, PDFHexString } from \"../core\";\n/**\n * Represents a file that has been embedded in a [[PDFDocument]].\n */\nvar PDFEmbeddedFile = /** @class */ (function () {\n    function PDFEmbeddedFile(ref, doc, embedder) {\n        this.alreadyEmbedded = false;\n        this.ref = ref;\n        this.doc = doc;\n        this.embedder = embedder;\n    }\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all embeddable files get embedded.\n     *\n     * Embed this embeddable file in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFEmbeddedFile.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var ref, Names, EmbeddedFiles, EFNames, AF;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.alreadyEmbedded) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.embedder.embedIntoContext(this.doc.context, this.ref)];\n                    case 1:\n                        ref = _a.sent();\n                        if (!this.doc.catalog.has(PDFName.of('Names'))) {\n                            this.doc.catalog.set(PDFName.of('Names'), this.doc.context.obj({}));\n                        }\n                        Names = this.doc.catalog.lookup(PDFName.of('Names'), PDFDict);\n                        if (!Names.has(PDFName.of('EmbeddedFiles'))) {\n                            Names.set(PDFName.of('EmbeddedFiles'), this.doc.context.obj({}));\n                        }\n                        EmbeddedFiles = Names.lookup(PDFName.of('EmbeddedFiles'), PDFDict);\n                        if (!EmbeddedFiles.has(PDFName.of('Names'))) {\n                            EmbeddedFiles.set(PDFName.of('Names'), this.doc.context.obj([]));\n                        }\n                        EFNames = EmbeddedFiles.lookup(PDFName.of('Names'), PDFArray);\n                        EFNames.push(PDFHexString.fromText(this.embedder.fileName));\n                        EFNames.push(ref);\n                        /**\n                         * The AF-Tag is needed to achieve PDF-A3 compliance for embedded files\n                         *\n                         * The following document outlines the uses cases of the associated files (AF) tag.\n                         * See:\n                         * https://www.pdfa.org/wp-content/uploads/2018/10/PDF20_AN002-AF.pdf\n                         */\n                        if (!this.doc.catalog.has(PDFName.of('AF'))) {\n                            this.doc.catalog.set(PDFName.of('AF'), this.doc.context.obj([]));\n                        }\n                        AF = this.doc.catalog.lookup(PDFName.of('AF'), PDFArray);\n                        AF.push(ref);\n                        this.alreadyEmbedded = true;\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.attach]] method, which will create\n     * instances of [[PDFEmbeddedFile]] for you.\n     *\n     * Create an instance of [[PDFEmbeddedFile]] from an existing ref and embedder\n     *\n     * @param ref The unique reference for this file.\n     * @param doc The document to which the file will belong.\n     * @param embedder The embedder that will be used to embed the file.\n     */\n    PDFEmbeddedFile.of = function (ref, doc, embedder) {\n        return new PDFEmbeddedFile(ref, doc, embedder);\n    };\n    return PDFEmbeddedFile;\n}());\nexport default PDFEmbeddedFile;\n//# sourceMappingURL=PDFEmbeddedFile.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { PDFName, PDFArray, PDFDict, PDFHexString } from \"../core\";\n/**\n * Represents JavaScript that has been embedded in a [[PDFDocument]].\n */\nvar PDFJavaScript = /** @class */ (function () {\n    function PDFJavaScript(ref, doc, embedder) {\n        this.alreadyEmbedded = false;\n        this.ref = ref;\n        this.doc = doc;\n        this.embedder = embedder;\n    }\n    /**\n     * > **NOTE:** You probably don't need to call this method directly. The\n     * > [[PDFDocument.save]] and [[PDFDocument.saveAsBase64]] methods will\n     * > automatically ensure all JavaScripts get embedded.\n     *\n     * Embed this JavaScript in its document.\n     *\n     * @returns Resolves when the embedding is complete.\n     */\n    PDFJavaScript.prototype.embed = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, catalog, context, ref, Names, Javascript, JSNames;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!!this.alreadyEmbedded) return [3 /*break*/, 2];\n                        _a = this.doc, catalog = _a.catalog, context = _a.context;\n                        return [4 /*yield*/, this.embedder.embedIntoContext(this.doc.context, this.ref)];\n                    case 1:\n                        ref = _b.sent();\n                        if (!catalog.has(PDFName.of('Names'))) {\n                            catalog.set(PDFName.of('Names'), context.obj({}));\n                        }\n                        Names = catalog.lookup(PDFName.of('Names'), PDFDict);\n                        if (!Names.has(PDFName.of('JavaScript'))) {\n                            Names.set(PDFName.of('JavaScript'), context.obj({}));\n                        }\n                        Javascript = Names.lookup(PDFName.of('JavaScript'), PDFDict);\n                        if (!Javascript.has(PDFName.of('Names'))) {\n                            Javascript.set(PDFName.of('Names'), context.obj([]));\n                        }\n                        JSNames = Javascript.lookup(PDFName.of('Names'), PDFArray);\n                        JSNames.push(PDFHexString.fromText(this.embedder.scriptName));\n                        JSNames.push(ref);\n                        this.alreadyEmbedded = true;\n                        _b.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.addJavaScript]] method, which will\n     * create instances of [[PDFJavaScript]] for you.\n     *\n     * Create an instance of [[PDFJavaScript]] from an existing ref and script\n     *\n     * @param ref The unique reference for this script.\n     * @param doc The document to which the script will belong.\n     * @param embedder The embedder that will be used to embed the script.\n     */\n    PDFJavaScript.of = function (ref, doc, embedder) {\n        return new PDFJavaScript(ref, doc, embedder);\n    };\n    return PDFJavaScript;\n}());\nexport default PDFJavaScript;\n//# sourceMappingURL=PDFJavaScript.js.map","import { __awaiter, __generator, __rest } from \"tslib\";\nimport { EncryptedPDFError, FontkitNotRegisteredError, ForeignPageError, RemovePageFromEmptyDocumentError, } from \"./errors\";\nimport PDFEmbeddedPage from \"./PDFEmbeddedPage\";\nimport PDFFont from \"./PDFFont\";\nimport PDFImage from \"./PDFImage\";\nimport PDFPage from \"./PDFPage\";\nimport PDFForm from \"./form/PDFForm\";\nimport { PageSizes } from \"./sizes\";\nimport { CustomFontEmbedder, CustomFontSubsetEmbedder, JpegEmbedder, PageEmbeddingMismatchedContextError, PDFCatalog, PDFContext, PDFDict, PDFHexString, PDFName, PDFObjectCopier, PDFPageEmbedder, PDFPageLeaf, PDFPageTree, PDFParser, PDFStreamWriter, PDFString, PDFWriter, PngEmbedder, StandardFontEmbedder, UnexpectedObjectTypeError, } from \"../core\";\nimport { ParseSpeeds, } from \"./PDFDocumentOptions\";\nimport { assertIs, assertIsOneOfOrUndefined, assertOrUndefined, assertRange, Cache, canBeConvertedToUint8Array, encodeToBase64, isStandardFont, pluckIndices, range, toUint8Array, } from \"../utils\";\nimport FileEmbedder, { AFRelationship } from \"../core/embedders/FileEmbedder\";\nimport PDFEmbeddedFile from \"./PDFEmbeddedFile\";\nimport PDFJavaScript from \"./PDFJavaScript\";\nimport JavaScriptEmbedder from \"../core/embedders/JavaScriptEmbedder\";\n/**\n * Represents a PDF document.\n */\nvar PDFDocument = /** @class */ (function () {\n    function PDFDocument(context, ignoreEncryption, updateMetadata) {\n        var _this = this;\n        /** The default word breaks used in PDFPage.drawText */\n        this.defaultWordBreaks = [' '];\n        this.computePages = function () {\n            var pages = [];\n            _this.catalog.Pages().traverse(function (node, ref) {\n                if (node instanceof PDFPageLeaf) {\n                    var page = _this.pageMap.get(node);\n                    if (!page) {\n                        page = PDFPage.of(node, ref, _this);\n                        _this.pageMap.set(node, page);\n                    }\n                    pages.push(page);\n                }\n            });\n            return pages;\n        };\n        this.getOrCreateForm = function () {\n            var acroForm = _this.catalog.getOrCreateAcroForm();\n            return PDFForm.of(acroForm, _this);\n        };\n        assertIs(context, 'context', [[PDFContext, 'PDFContext']]);\n        assertIs(ignoreEncryption, 'ignoreEncryption', ['boolean']);\n        this.context = context;\n        this.catalog = context.lookup(context.trailerInfo.Root);\n        this.isEncrypted = !!context.lookup(context.trailerInfo.Encrypt);\n        this.pageCache = Cache.populatedBy(this.computePages);\n        this.pageMap = new Map();\n        this.formCache = Cache.populatedBy(this.getOrCreateForm);\n        this.fonts = [];\n        this.images = [];\n        this.embeddedPages = [];\n        this.embeddedFiles = [];\n        this.javaScripts = [];\n        if (!ignoreEncryption && this.isEncrypted)\n            throw new EncryptedPDFError();\n        if (updateMetadata)\n            this.updateInfoDict();\n    }\n    /**\n     * Load an existing [[PDFDocument]]. The input data can be provided in\n     * multiple formats:\n     *\n     * | Type          | Contents                                               |\n     * | ------------- | ------------------------------------------------------ |\n     * | `string`      | A base64 encoded string (or data URI) containing a PDF |\n     * | `Uint8Array`  | The raw bytes of a PDF                                 |\n     * | `ArrayBuffer` | The raw bytes of a PDF                                 |\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument } from 'pdf-lib'\n     *\n     * // pdf=string\n     * const base64 =\n     *  'JVBERi0xLjcKJYGBgYEKCjUgMCBvYmoKPDwKL0ZpbHRlciAvRmxhdGVEZWNvZGUKL0xlbm' +\n     *  'd0aCAxMDQKPj4Kc3RyZWFtCniccwrhMlAAwaJ0Ln2P1Jyy1JLM5ERdc0MjCwUjE4WQNC4Q' +\n     *  '6cNlCFZkqGCqYGSqEJLLZWNuYGZiZmbkYuZsZmlmZGRgZmluDCQNzc3NTM2NzdzMXMxMjQ' +\n     *  'ztFEKyuEK0uFxDuAAOERdVCmVuZHN0cmVhbQplbmRvYmoKCjYgMCBvYmoKPDwKL0ZpbHRl' +\n     *  'ciAvRmxhdGVEZWNvZGUKL1R5cGUgL09ialN0bQovTiA0Ci9GaXJzdCAyMAovTGVuZ3RoID' +\n     *  'IxNQo+PgpzdHJlYW0KeJxVj9GqwjAMhu/zFHkBzTo3nCCCiiKIHPEICuJF3cKoSCu2E8/b' +\n     *  '20wPIr1p8v9/8kVhgilmGfawX2CGaVrgcAi0/bsy0lrX7IGWpvJ4iJYEN3gEmrrGBlQwGs' +\n     *  'HHO9VBX1wNrxAqMX87RBD5xpJuddqwd82tjAHxzV1U5LPgy52DKXWnr1Lheg+j/c/pzGVr' +\n     *  'iqV0VlwZPXGPCJjElw/ybkwUmeoWgxesDXGhHJC/D/iikp1Av80ptKU0FdBEe25pPihAM1' +\n     *  'u6ytgaaWfs2Hrz35CJT1+EWmAKZW5kc3RyZWFtCmVuZG9iagoKNyAwIG9iago8PAovU2l6' +\n     *  'ZSA4Ci9Sb290IDIgMCBSCi9GaWx0ZXIgL0ZsYXRlRGVjb2RlCi9UeXBlIC9YUmVmCi9MZW' +\n     *  '5ndGggMzgKL1cgWyAxIDIgMiBdCi9JbmRleCBbIDAgOCBdCj4+CnN0cmVhbQp4nBXEwREA' +\n     *  'EBAEsCwz3vrvRmOOyyOoGhZdutHN2MT55fIAVocD+AplbmRzdHJlYW0KZW5kb2JqCgpzdG' +\n     *  'FydHhyZWYKNTEwCiUlRU9G'\n     *\n     * const dataUri = 'data:application/pdf;base64,' + base64\n     *\n     * const pdfDoc1 = await PDFDocument.load(base64)\n     * const pdfDoc2 = await PDFDocument.load(dataUri)\n     *\n     * // pdf=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('with_update_sections.pdf')\n     * const pdfDoc3 = await PDFDocument.load(uint8Array)\n     *\n     * // pdf=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/with_update_sections.pdf'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * const pdfDoc4 = await PDFDocument.load(arrayBuffer)\n     *\n     * ```\n     *\n     * @param pdf The input data containing a PDF document.\n     * @param options The options to be used when loading the document.\n     * @returns Resolves with a document loaded from the input.\n     */\n    PDFDocument.load = function (pdf, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, ignoreEncryption, _b, parseSpeed, _c, throwOnInvalidObject, _d, updateMetadata, _e, capNumbers, bytes, context;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        _a = options.ignoreEncryption, ignoreEncryption = _a === void 0 ? false : _a, _b = options.parseSpeed, parseSpeed = _b === void 0 ? ParseSpeeds.Slow : _b, _c = options.throwOnInvalidObject, throwOnInvalidObject = _c === void 0 ? false : _c, _d = options.updateMetadata, updateMetadata = _d === void 0 ? true : _d, _e = options.capNumbers, capNumbers = _e === void 0 ? false : _e;\n                        assertIs(pdf, 'pdf', ['string', Uint8Array, ArrayBuffer]);\n                        assertIs(ignoreEncryption, 'ignoreEncryption', ['boolean']);\n                        assertIs(parseSpeed, 'parseSpeed', ['number']);\n                        assertIs(throwOnInvalidObject, 'throwOnInvalidObject', ['boolean']);\n                        bytes = toUint8Array(pdf);\n                        return [4 /*yield*/, PDFParser.forBytesWithOptions(bytes, parseSpeed, throwOnInvalidObject, capNumbers).parseDocument()];\n                    case 1:\n                        context = _f.sent();\n                        return [2 /*return*/, new PDFDocument(context, ignoreEncryption, updateMetadata)];\n                }\n            });\n        });\n    };\n    /**\n     * Create a new [[PDFDocument]].\n     * @returns Resolves with the newly created document.\n     */\n    PDFDocument.create = function (options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, updateMetadata, context, pageTree, pageTreeRef, catalog;\n            return __generator(this, function (_b) {\n                _a = options.updateMetadata, updateMetadata = _a === void 0 ? true : _a;\n                context = PDFContext.create();\n                pageTree = PDFPageTree.withContext(context);\n                pageTreeRef = context.register(pageTree);\n                catalog = PDFCatalog.withContextAndPages(context, pageTreeRef);\n                context.trailerInfo.Root = context.register(catalog);\n                return [2 /*return*/, new PDFDocument(context, false, updateMetadata)];\n            });\n        });\n    };\n    /**\n     * Register a fontkit instance. This must be done before custom fonts can\n     * be embedded. See [here](https://github.com/Hopding/pdf-lib/tree/master#fontkit-installation)\n     * for instructions on how to install and register a fontkit instance.\n     *\n     * > You do **not** need to call this method to embed standard fonts.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument } from 'pdf-lib'\n     * import fontkit from '@pdf-lib/fontkit'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * pdfDoc.registerFontkit(fontkit)\n     * ```\n     *\n     * @param fontkit The fontkit instance to be registered.\n     */\n    PDFDocument.prototype.registerFontkit = function (fontkit) {\n        this.fontkit = fontkit;\n    };\n    /**\n     * Get the [[PDFForm]] containing all interactive fields for this document.\n     * For example:\n     * ```js\n     * const form = pdfDoc.getForm()\n     * const fields = form.getFields()\n     * fields.forEach(field => {\n     *   const type = field.constructor.name\n     *   const name = field.getName()\n     *   console.log(`${type}: ${name}`)\n     * })\n     * ```\n     * @returns The form for this document.\n     */\n    PDFDocument.prototype.getForm = function () {\n        var form = this.formCache.access();\n        if (form.hasXFA()) {\n            console.warn('Removing XFA form data as pdf-lib does not support reading or writing XFA');\n            form.deleteXFA();\n        }\n        return form;\n    };\n    /**\n     * Get this document's title metadata. The title appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const title = pdfDoc.getTitle()\n     * ```\n     * @returns A string containing the title of this document, if it has one.\n     */\n    PDFDocument.prototype.getTitle = function () {\n        var title = this.getInfoDict().lookup(PDFName.Title);\n        if (!title)\n            return undefined;\n        assertIsLiteralOrHexString(title);\n        return title.decodeText();\n    };\n    /**\n     * Get this document's author metadata. The author appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const author = pdfDoc.getAuthor()\n     * ```\n     * @returns A string containing the author of this document, if it has one.\n     */\n    PDFDocument.prototype.getAuthor = function () {\n        var author = this.getInfoDict().lookup(PDFName.Author);\n        if (!author)\n            return undefined;\n        assertIsLiteralOrHexString(author);\n        return author.decodeText();\n    };\n    /**\n     * Get this document's subject metadata. The subject appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const subject = pdfDoc.getSubject()\n     * ```\n     * @returns A string containing the subject of this document, if it has one.\n     */\n    PDFDocument.prototype.getSubject = function () {\n        var subject = this.getInfoDict().lookup(PDFName.Subject);\n        if (!subject)\n            return undefined;\n        assertIsLiteralOrHexString(subject);\n        return subject.decodeText();\n    };\n    /**\n     * Get this document's keywords metadata. The keywords appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const keywords = pdfDoc.getKeywords()\n     * ```\n     * @returns A string containing the keywords of this document, if it has any.\n     */\n    PDFDocument.prototype.getKeywords = function () {\n        var keywords = this.getInfoDict().lookup(PDFName.Keywords);\n        if (!keywords)\n            return undefined;\n        assertIsLiteralOrHexString(keywords);\n        return keywords.decodeText();\n    };\n    /**\n     * Get this document's creator metadata. The creator appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const creator = pdfDoc.getCreator()\n     * ```\n     * @returns A string containing the creator of this document, if it has one.\n     */\n    PDFDocument.prototype.getCreator = function () {\n        var creator = this.getInfoDict().lookup(PDFName.Creator);\n        if (!creator)\n            return undefined;\n        assertIsLiteralOrHexString(creator);\n        return creator.decodeText();\n    };\n    /**\n     * Get this document's producer metadata. The producer appears in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const producer = pdfDoc.getProducer()\n     * ```\n     * @returns A string containing the producer of this document, if it has one.\n     */\n    PDFDocument.prototype.getProducer = function () {\n        var producer = this.getInfoDict().lookup(PDFName.Producer);\n        if (!producer)\n            return undefined;\n        assertIsLiteralOrHexString(producer);\n        return producer.decodeText();\n    };\n    /**\n     * Get this document's creation date metadata. The creation date appears in\n     * the \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * const creationDate = pdfDoc.getCreationDate()\n     * ```\n     * @returns A Date containing the creation date of this document,\n     *          if it has one.\n     */\n    PDFDocument.prototype.getCreationDate = function () {\n        var creationDate = this.getInfoDict().lookup(PDFName.CreationDate);\n        if (!creationDate)\n            return undefined;\n        assertIsLiteralOrHexString(creationDate);\n        return creationDate.decodeDate();\n    };\n    /**\n     * Get this document's modification date metadata. The modification date\n     * appears in the \"Document Properties\" section of most PDF readers.\n     * For example:\n     * ```js\n     * const modification = pdfDoc.getModificationDate()\n     * ```\n     * @returns A Date containing the modification date of this document,\n     *          if it has one.\n     */\n    PDFDocument.prototype.getModificationDate = function () {\n        var modificationDate = this.getInfoDict().lookup(PDFName.ModDate);\n        if (!modificationDate)\n            return undefined;\n        assertIsLiteralOrHexString(modificationDate);\n        return modificationDate.decodeDate();\n    };\n    /**\n     * Set this document's title metadata. The title will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setTitle(' The Life of an Egg ')\n     * ```\n     *\n     * To display the title in the window's title bar, set the\n     * `showInWindowTitleBar` option to `true` (works for _most_ PDF readers).\n     * For example:\n     * ```js\n     * pdfDoc.setTitle(' The Life of an Egg ', { showInWindowTitleBar: true })\n     * ```\n     *\n     * @param title The title of this document.\n     * @param options The options to be used when setting the title.\n     */\n    PDFDocument.prototype.setTitle = function (title, options) {\n        assertIs(title, 'title', ['string']);\n        var key = PDFName.of('Title');\n        this.getInfoDict().set(key, PDFHexString.fromText(title));\n        // Indicate that readers should display the title rather than the filename\n        if (options === null || options === void 0 ? void 0 : options.showInWindowTitleBar) {\n            var prefs = this.catalog.getOrCreateViewerPreferences();\n            prefs.setDisplayDocTitle(true);\n        }\n    };\n    /**\n     * Set this document's author metadata. The author will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setAuthor('Humpty Dumpty')\n     * ```\n     * @param author The author of this document.\n     */\n    PDFDocument.prototype.setAuthor = function (author) {\n        assertIs(author, 'author', ['string']);\n        var key = PDFName.of('Author');\n        this.getInfoDict().set(key, PDFHexString.fromText(author));\n    };\n    /**\n     * Set this document's subject metadata. The subject will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setSubject(' An Epic Tale of Woe ')\n     * ```\n     * @param subject The subject of this document.\n     */\n    PDFDocument.prototype.setSubject = function (subject) {\n        assertIs(subject, 'author', ['string']);\n        var key = PDFName.of('Subject');\n        this.getInfoDict().set(key, PDFHexString.fromText(subject));\n    };\n    /**\n     * Set this document's keyword metadata. These keywords will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setKeywords(['eggs', 'wall', 'fall', 'king', 'horses', 'men'])\n     * ```\n     * @param keywords An array of keywords associated with this document.\n     */\n    PDFDocument.prototype.setKeywords = function (keywords) {\n        assertIs(keywords, 'keywords', [Array]);\n        var key = PDFName.of('Keywords');\n        this.getInfoDict().set(key, PDFHexString.fromText(keywords.join(' ')));\n    };\n    /**\n     * Set this document's creator metadata. The creator will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setCreator('PDF App 9000 ')\n     * ```\n     * @param creator The creator of this document.\n     */\n    PDFDocument.prototype.setCreator = function (creator) {\n        assertIs(creator, 'creator', ['string']);\n        var key = PDFName.of('Creator');\n        this.getInfoDict().set(key, PDFHexString.fromText(creator));\n    };\n    /**\n     * Set this document's producer metadata. The producer will appear in the\n     * \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setProducer('PDF App 9000 ')\n     * ```\n     * @param producer The producer of this document.\n     */\n    PDFDocument.prototype.setProducer = function (producer) {\n        assertIs(producer, 'creator', ['string']);\n        var key = PDFName.of('Producer');\n        this.getInfoDict().set(key, PDFHexString.fromText(producer));\n    };\n    /**\n     * Set this document's language metadata. The language will appear in the\n     * \"Document Properties\" section of some PDF readers. For example:\n     * ```js\n     * pdfDoc.setLanguage('en-us')\n     * ```\n     *\n     * @param language An RFC 3066 _Language-Tag_ denoting the language of this\n     *                 document, or an empty string if the language is unknown.\n     */\n    PDFDocument.prototype.setLanguage = function (language) {\n        assertIs(language, 'language', ['string']);\n        var key = PDFName.of('Lang');\n        this.catalog.set(key, PDFString.of(language));\n    };\n    /**\n     * Set this document's creation date metadata. The creation date will appear\n     * in the \"Document Properties\" section of most PDF readers. For example:\n     * ```js\n     * pdfDoc.setCreationDate(new Date())\n     * ```\n     * @param creationDate The date this document was created.\n     */\n    PDFDocument.prototype.setCreationDate = function (creationDate) {\n        assertIs(creationDate, 'creationDate', [[Date, 'Date']]);\n        var key = PDFName.of('CreationDate');\n        this.getInfoDict().set(key, PDFString.fromDate(creationDate));\n    };\n    /**\n     * Set this document's modification date metadata. The modification date will\n     * appear in the \"Document Properties\" section of most PDF readers. For\n     * example:\n     * ```js\n     * pdfDoc.setModificationDate(new Date())\n     * ```\n     * @param modificationDate The date this document was last modified.\n     */\n    PDFDocument.prototype.setModificationDate = function (modificationDate) {\n        assertIs(modificationDate, 'modificationDate', [[Date, 'Date']]);\n        var key = PDFName.of('ModDate');\n        this.getInfoDict().set(key, PDFString.fromDate(modificationDate));\n    };\n    /**\n     * Get the number of pages contained in this document. For example:\n     * ```js\n     * const totalPages = pdfDoc.getPageCount()\n     * ```\n     * @returns The number of pages in this document.\n     */\n    PDFDocument.prototype.getPageCount = function () {\n        if (this.pageCount === undefined)\n            this.pageCount = this.getPages().length;\n        return this.pageCount;\n    };\n    /**\n     * Get an array of all the pages contained in this document. The pages are\n     * stored in the array in the same order that they are rendered in the\n     * document. For example:\n     * ```js\n     * const pages = pdfDoc.getPages()\n     * pages[0]   // The first page of the document\n     * pages[2]   // The third page of the document\n     * pages[197] // The 198th page of the document\n     * ```\n     * @returns An array of all the pages contained in this document.\n     */\n    PDFDocument.prototype.getPages = function () {\n        return this.pageCache.access();\n    };\n    /**\n     * Get the page rendered at a particular `index` of the document. For example:\n     * ```js\n     * pdfDoc.getPage(0)   // The first page of the document\n     * pdfDoc.getPage(2)   // The third page of the document\n     * pdfDoc.getPage(197) // The 198th page of the document\n     * ```\n     * @returns The [[PDFPage]] rendered at the given `index` of the document.\n     */\n    PDFDocument.prototype.getPage = function (index) {\n        var pages = this.getPages();\n        assertRange(index, 'index', 0, pages.length - 1);\n        return pages[index];\n    };\n    /**\n     * Get an array of indices for all the pages contained in this document. The\n     * array will contain a range of integers from\n     * `0..pdfDoc.getPageCount() - 1`. For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     * pdfDoc.addPage()\n     * pdfDoc.addPage()\n     * pdfDoc.addPage()\n     *\n     * const indices = pdfDoc.getPageIndices()\n     * indices // => [0, 1, 2]\n     * ```\n     * @returns An array of indices for all pages contained in this document.\n     */\n    PDFDocument.prototype.getPageIndices = function () {\n        return range(0, this.getPageCount());\n    };\n    /**\n     * Remove the page at a given index from this document. For example:\n     * ```js\n     * pdfDoc.removePage(0)   // Remove the first page of the document\n     * pdfDoc.removePage(2)   // Remove the third page of the document\n     * pdfDoc.removePage(197) // Remove the 198th page of the document\n     * ```\n     * Once a page has been removed, it will no longer be rendered at that index\n     * in the document.\n     * @param index The index of the page to be removed.\n     */\n    PDFDocument.prototype.removePage = function (index) {\n        var pageCount = this.getPageCount();\n        if (this.pageCount === 0)\n            throw new RemovePageFromEmptyDocumentError();\n        assertRange(index, 'index', 0, pageCount - 1);\n        this.catalog.removeLeafNode(index);\n        this.pageCount = pageCount - 1;\n    };\n    /**\n     * Add a page to the end of this document. This method accepts three\n     * different value types for the `page` parameter:\n     *\n     * | Type               | Behavior                                                                            |\n     * | ------------------ | ----------------------------------------------------------------------------------- |\n     * | `undefined`        | Create a new page and add it to the end of this document                            |\n     * | `[number, number]` | Create a new page with the given dimensions and add it to the end of this document  |\n     * | `PDFPage`          | Add the existing page to the end of this document                                   |\n     *\n     * For example:\n     * ```js\n     * // page=undefined\n     * const newPage = pdfDoc.addPage()\n     *\n     * // page=[number, number]\n     * import { PageSizes } from 'pdf-lib'\n     * const newPage1 = pdfDoc.addPage(PageSizes.A7)\n     * const newPage2 = pdfDoc.addPage(PageSizes.Letter)\n     * const newPage3 = pdfDoc.addPage([500, 750])\n     *\n     * // page=PDFPage\n     * const pdfDoc1 = await PDFDocument.create()\n     * const pdfDoc2 = await PDFDocument.load(...)\n     * const [existingPage] = await pdfDoc1.copyPages(pdfDoc2, [0])\n     * pdfDoc1.addPage(existingPage)\n     * ```\n     *\n     * @param page Optionally, the desired dimensions or existing page.\n     * @returns The newly created (or existing) page.\n     */\n    PDFDocument.prototype.addPage = function (page) {\n        assertIs(page, 'page', ['undefined', [PDFPage, 'PDFPage'], Array]);\n        return this.insertPage(this.getPageCount(), page);\n    };\n    /**\n     * Insert a page at a given index within this document. This method accepts\n     * three different value types for the `page` parameter:\n     *\n     * | Type               | Behavior                                                                       |\n     * | ------------------ | ------------------------------------------------------------------------------ |\n     * | `undefined`        | Create a new page and insert it into this document                             |\n     * | `[number, number]` | Create a new page with the given dimensions and insert it into this document   |\n     * | `PDFPage`          | Insert the existing page into this document                                    |\n     *\n     * For example:\n     * ```js\n     * // page=undefined\n     * const newPage = pdfDoc.insertPage(2)\n     *\n     * // page=[number, number]\n     * import { PageSizes } from 'pdf-lib'\n     * const newPage1 = pdfDoc.insertPage(2, PageSizes.A7)\n     * const newPage2 = pdfDoc.insertPage(0, PageSizes.Letter)\n     * const newPage3 = pdfDoc.insertPage(198, [500, 750])\n     *\n     * // page=PDFPage\n     * const pdfDoc1 = await PDFDocument.create()\n     * const pdfDoc2 = await PDFDocument.load(...)\n     * const [existingPage] = await pdfDoc1.copyPages(pdfDoc2, [0])\n     * pdfDoc1.insertPage(0, existingPage)\n     * ```\n     *\n     * @param index The index at which the page should be inserted (zero-based).\n     * @param page Optionally, the desired dimensions or existing page.\n     * @returns The newly created (or existing) page.\n     */\n    PDFDocument.prototype.insertPage = function (index, page) {\n        var pageCount = this.getPageCount();\n        assertRange(index, 'index', 0, pageCount);\n        assertIs(page, 'page', ['undefined', [PDFPage, 'PDFPage'], Array]);\n        if (!page || Array.isArray(page)) {\n            var dims = Array.isArray(page) ? page : PageSizes.A4;\n            page = PDFPage.create(this);\n            page.setSize.apply(page, dims);\n        }\n        else if (page.doc !== this) {\n            throw new ForeignPageError();\n        }\n        var parentRef = this.catalog.insertLeafNode(page.ref, index);\n        page.node.setParent(parentRef);\n        this.pageMap.set(page.node, page);\n        this.pageCache.invalidate();\n        this.pageCount = pageCount + 1;\n        return page;\n    };\n    /**\n     * Copy pages from a source document into this document. Allows pages to be\n     * copied between different [[PDFDocument]] instances. For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     * const srcDoc = await PDFDocument.load(...)\n     *\n     * const copiedPages = await pdfDoc.copyPages(srcDoc, [0, 3, 89])\n     * const [firstPage, fourthPage, ninetiethPage] = copiedPages;\n     *\n     * pdfDoc.addPage(fourthPage)\n     * pdfDoc.insertPage(0, ninetiethPage)\n     * pdfDoc.addPage(firstPage)\n     * ```\n     * @param srcDoc The document from which pages should be copied.\n     * @param indices The indices of the pages that should be copied.\n     * @returns Resolves with an array of pages copied into this document.\n     */\n    PDFDocument.prototype.copyPages = function (srcDoc, indices) {\n        return __awaiter(this, void 0, void 0, function () {\n            var copier, srcPages, copiedPages, idx, len, srcPage, copiedPage, ref;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(srcDoc, 'srcDoc', [[PDFDocument, 'PDFDocument']]);\n                        assertIs(indices, 'indices', [Array]);\n                        return [4 /*yield*/, srcDoc.flush()];\n                    case 1:\n                        _a.sent();\n                        copier = PDFObjectCopier.for(srcDoc.context, this.context);\n                        srcPages = srcDoc.getPages();\n                        copiedPages = new Array(indices.length);\n                        for (idx = 0, len = indices.length; idx < len; idx++) {\n                            srcPage = srcPages[indices[idx]];\n                            copiedPage = copier.copy(srcPage.node);\n                            ref = this.context.register(copiedPage);\n                            copiedPages[idx] = PDFPage.of(copiedPage, ref, this);\n                        }\n                        return [2 /*return*/, copiedPages];\n                }\n            });\n        });\n    };\n    /**\n     * Get a copy of this document.\n     *\n     * For example:\n     * ```js\n     * const srcDoc = await PDFDocument.load(...)\n     * const pdfDoc = await srcDoc.copy()\n     * ```\n     *\n     * > **NOTE:**  This method won't copy all information over to the new\n     * > document (acroforms, outlines, etc...).\n     *\n     * @returns Resolves with a copy this document.\n     */\n    PDFDocument.prototype.copy = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var pdfCopy, contentPages, idx, len;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, PDFDocument.create()];\n                    case 1:\n                        pdfCopy = _a.sent();\n                        return [4 /*yield*/, pdfCopy.copyPages(this, this.getPageIndices())];\n                    case 2:\n                        contentPages = _a.sent();\n                        for (idx = 0, len = contentPages.length; idx < len; idx++) {\n                            pdfCopy.addPage(contentPages[idx]);\n                        }\n                        if (this.getAuthor() !== undefined) {\n                            pdfCopy.setAuthor(this.getAuthor());\n                        }\n                        if (this.getCreationDate() !== undefined) {\n                            pdfCopy.setCreationDate(this.getCreationDate());\n                        }\n                        if (this.getCreator() !== undefined) {\n                            pdfCopy.setCreator(this.getCreator());\n                        }\n                        if (this.getModificationDate() !== undefined) {\n                            pdfCopy.setModificationDate(this.getModificationDate());\n                        }\n                        if (this.getProducer() !== undefined) {\n                            pdfCopy.setProducer(this.getProducer());\n                        }\n                        if (this.getSubject() !== undefined) {\n                            pdfCopy.setSubject(this.getSubject());\n                        }\n                        if (this.getTitle() !== undefined) {\n                            pdfCopy.setTitle(this.getTitle());\n                        }\n                        pdfCopy.defaultWordBreaks = this.defaultWordBreaks;\n                        return [2 /*return*/, pdfCopy];\n                }\n            });\n        });\n    };\n    /**\n     * Add JavaScript to this document. The supplied `script` is executed when the\n     * document is opened. The `script` can be used to perform some operation\n     * when the document is opened (e.g. logging to the console), or it can be\n     * used to define a function that can be referenced later in a JavaScript\n     * action. For example:\n     * ```js\n     * // Show \"Hello World!\" in the console when the PDF is opened\n     * pdfDoc.addJavaScript(\n     *   'main',\n     *   'console.show(); console.println(\"Hello World!\");'\n     * );\n     *\n     * // Define a function named \"foo\" that can be called in JavaScript Actions\n     * pdfDoc.addJavaScript(\n     *   'foo',\n     *   'function foo() { return \"foo\"; }'\n     * );\n     * ```\n     * See the [JavaScript for Acrobat API Reference](https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/js_api_reference.pdf)\n     * for details.\n     * @param name The name of the script. Must be unique per document.\n     * @param script The JavaScript to execute.\n     */\n    PDFDocument.prototype.addJavaScript = function (name, script) {\n        assertIs(name, 'name', ['string']);\n        assertIs(script, 'script', ['string']);\n        var embedder = JavaScriptEmbedder.for(script, name);\n        var ref = this.context.nextRef();\n        var javaScript = PDFJavaScript.of(ref, this, embedder);\n        this.javaScripts.push(javaScript);\n    };\n    /**\n     * Add an attachment to this document. Attachments are visible in the\n     * \"Attachments\" panel of Adobe Acrobat and some other PDF readers. Any\n     * type of file can be added as an attachment. This includes, but is not\n     * limited to, `.png`, `.jpg`, `.pdf`, `.csv`, `.docx`, and `.xlsx` files.\n     *\n     * The input data can be provided in multiple formats:\n     *\n     * | Type          | Contents                                                       |\n     * | ------------- | -------------------------------------------------------------- |\n     * | `string`      | A base64 encoded string (or data URI) containing an attachment |\n     * | `Uint8Array`  | The raw bytes of an attachment                                 |\n     * | `ArrayBuffer` | The raw bytes of an attachment                                 |\n     *\n     * For example:\n     * ```js\n     * // attachment=string\n     * await pdfDoc.attach('/9j/4AAQSkZJRgABAQAAAQABAAD/2wBD...', 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     * await pdfDoc.attach('data:image/jpeg;base64,/9j/4AAQ...', 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     *\n     * // attachment=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('cat_riding_unicorn.jpg')\n     * await pdfDoc.attach(uint8Array, 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     *\n     * // attachment=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * await pdfDoc.attach(arrayBuffer, 'cat_riding_unicorn.jpg', {\n     *   mimeType: 'image/jpeg',\n     *   description: 'Cool cat riding a unicorn! ',\n     *   creationDate: new Date('2019/12/01'),\n     *   modificationDate: new Date('2020/04/19'),\n     * })\n     * ```\n     *\n     * @param attachment The input data containing the file to be attached.\n     * @param name The name of the file to be attached.\n     * @returns Resolves when the attachment is complete.\n     */\n    PDFDocument.prototype.attach = function (attachment, name, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var bytes, embedder, ref, embeddedFile;\n            return __generator(this, function (_a) {\n                assertIs(attachment, 'attachment', ['string', Uint8Array, ArrayBuffer]);\n                assertIs(name, 'name', ['string']);\n                assertOrUndefined(options.mimeType, 'mimeType', ['string']);\n                assertOrUndefined(options.description, 'description', ['string']);\n                assertOrUndefined(options.creationDate, 'options.creationDate', [Date]);\n                assertOrUndefined(options.modificationDate, 'options.modificationDate', [\n                    Date,\n                ]);\n                assertIsOneOfOrUndefined(options.afRelationship, 'options.afRelationship', AFRelationship);\n                bytes = toUint8Array(attachment);\n                embedder = FileEmbedder.for(bytes, name, options);\n                ref = this.context.nextRef();\n                embeddedFile = PDFEmbeddedFile.of(ref, this, embedder);\n                this.embeddedFiles.push(embeddedFile);\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n     * Embed a font into this document. The input data can be provided in multiple\n     * formats:\n     *\n     * | Type            | Contents                                                |\n     * | --------------- | ------------------------------------------------------- |\n     * | `StandardFonts` | One of the standard 14 fonts                            |\n     * | `string`        | A base64 encoded string (or data URI) containing a font |\n     * | `Uint8Array`    | The raw bytes of a font                                 |\n     * | `ArrayBuffer`   | The raw bytes of a font                                 |\n     *\n     * For example:\n     * ```js\n     * // font=StandardFonts\n     * import { StandardFonts } from 'pdf-lib'\n     * const font1 = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     *\n     * // font=string\n     * const font2 = await pdfDoc.embedFont('AAEAAAAVAQAABABQRFNJRx/upe...')\n     * const font3 = await pdfDoc.embedFont('data:font/opentype;base64,AAEAAA...')\n     *\n     * // font=Uint8Array\n     * import fs from 'fs'\n     * const font4 = await pdfDoc.embedFont(fs.readFileSync('Ubuntu-R.ttf'))\n     *\n     * // font=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/ubuntu/Ubuntu-R.ttf'\n     * const ubuntuBytes = await fetch(url).then(res => res.arrayBuffer())\n     * const font5 = await pdfDoc.embedFont(ubuntuBytes)\n     * ```\n     * See also: [[registerFontkit]]\n     * @param font The input data for a font.\n     * @param options The options to be used when embedding the font.\n     * @returns Resolves with the embedded font.\n     */\n    PDFDocument.prototype.embedFont = function (font, options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, subset, customName, features, embedder, bytes, fontkit, _b, ref, pdfFont;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _a = options.subset, subset = _a === void 0 ? false : _a, customName = options.customName, features = options.features;\n                        assertIs(font, 'font', ['string', Uint8Array, ArrayBuffer]);\n                        assertIs(subset, 'subset', ['boolean']);\n                        if (!isStandardFont(font)) return [3 /*break*/, 1];\n                        embedder = StandardFontEmbedder.for(font, customName);\n                        return [3 /*break*/, 7];\n                    case 1:\n                        if (!canBeConvertedToUint8Array(font)) return [3 /*break*/, 6];\n                        bytes = toUint8Array(font);\n                        fontkit = this.assertFontkit();\n                        if (!subset) return [3 /*break*/, 3];\n                        return [4 /*yield*/, CustomFontSubsetEmbedder.for(fontkit, bytes, customName, features)];\n                    case 2:\n                        _b = _c.sent();\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, CustomFontEmbedder.for(fontkit, bytes, customName, features)];\n                    case 4:\n                        _b = _c.sent();\n                        _c.label = 5;\n                    case 5:\n                        embedder = _b;\n                        return [3 /*break*/, 7];\n                    case 6: throw new TypeError('`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`');\n                    case 7:\n                        ref = this.context.nextRef();\n                        pdfFont = PDFFont.of(ref, this, embedder);\n                        this.fonts.push(pdfFont);\n                        return [2 /*return*/, pdfFont];\n                }\n            });\n        });\n    };\n    /**\n     * Embed a standard font into this document.\n     * For example:\n     * ```js\n     * import { StandardFonts } from 'pdf-lib'\n     * const helveticaFont = pdfDoc.embedFont(StandardFonts.Helvetica)\n     * ```\n     * @param font The standard font to be embedded.\n     * @param customName The name to be used when embedding the font.\n     * @returns The embedded font.\n     */\n    PDFDocument.prototype.embedStandardFont = function (font, customName) {\n        assertIs(font, 'font', ['string']);\n        if (!isStandardFont(font)) {\n            throw new TypeError('`font` must be one of type `StandardFonts`');\n        }\n        var embedder = StandardFontEmbedder.for(font, customName);\n        var ref = this.context.nextRef();\n        var pdfFont = PDFFont.of(ref, this, embedder);\n        this.fonts.push(pdfFont);\n        return pdfFont;\n    };\n    /**\n     * Embed a JPEG image into this document. The input data can be provided in\n     * multiple formats:\n     *\n     * | Type          | Contents                                                      |\n     * | ------------- | ------------------------------------------------------------- |\n     * | `string`      | A base64 encoded string (or data URI) containing a JPEG image |\n     * | `Uint8Array`  | The raw bytes of a JPEG image                                 |\n     * | `ArrayBuffer` | The raw bytes of a JPEG image                                 |\n     *\n     * For example:\n     * ```js\n     * // jpg=string\n     * const image1 = await pdfDoc.embedJpg('/9j/4AAQSkZJRgABAQAAAQABAAD/2wBD...')\n     * const image2 = await pdfDoc.embedJpg('data:image/jpeg;base64,/9j/4AAQ...')\n     *\n     * // jpg=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('cat_riding_unicorn.jpg')\n     * const image3 = await pdfDoc.embedJpg(uint8Array)\n     *\n     * // jpg=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * const image4 = await pdfDoc.embedJpg(arrayBuffer)\n     * ```\n     *\n     * @param jpg The input data for a JPEG image.\n     * @returns Resolves with the embedded image.\n     */\n    PDFDocument.prototype.embedJpg = function (jpg) {\n        return __awaiter(this, void 0, void 0, function () {\n            var bytes, embedder, ref, pdfImage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(jpg, 'jpg', ['string', Uint8Array, ArrayBuffer]);\n                        bytes = toUint8Array(jpg);\n                        return [4 /*yield*/, JpegEmbedder.for(bytes)];\n                    case 1:\n                        embedder = _a.sent();\n                        ref = this.context.nextRef();\n                        pdfImage = PDFImage.of(ref, this, embedder);\n                        this.images.push(pdfImage);\n                        return [2 /*return*/, pdfImage];\n                }\n            });\n        });\n    };\n    /**\n     * Embed a PNG image into this document. The input data can be provided in\n     * multiple formats:\n     *\n     * | Type          | Contents                                                     |\n     * | ------------- | ------------------------------------------------------------ |\n     * | `string`      | A base64 encoded string (or data URI) containing a PNG image |\n     * | `Uint8Array`  | The raw bytes of a PNG image                                 |\n     * | `ArrayBuffer` | The raw bytes of a PNG image                                 |\n     *\n     * For example:\n     * ```js\n     * // png=string\n     * const image1 = await pdfDoc.embedPng('iVBORw0KGgoAAAANSUhEUgAAAlgAAAF3...')\n     * const image2 = await pdfDoc.embedPng('data:image/png;base64,iVBORw0KGg...')\n     *\n     * // png=Uint8Array\n     * import fs from 'fs'\n     * const uint8Array = fs.readFileSync('small_mario.png')\n     * const image3 = await pdfDoc.embedPng(uint8Array)\n     *\n     * // png=ArrayBuffer\n     * const url = 'https://pdf-lib.js.org/assets/small_mario.png'\n     * const arrayBuffer = await fetch(url).then(res => res.arrayBuffer())\n     * const image4 = await pdfDoc.embedPng(arrayBuffer)\n     * ```\n     *\n     * @param png The input data for a PNG image.\n     * @returns Resolves with the embedded image.\n     */\n    PDFDocument.prototype.embedPng = function (png) {\n        return __awaiter(this, void 0, void 0, function () {\n            var bytes, embedder, ref, pdfImage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(png, 'png', ['string', Uint8Array, ArrayBuffer]);\n                        bytes = toUint8Array(png);\n                        return [4 /*yield*/, PngEmbedder.for(bytes)];\n                    case 1:\n                        embedder = _a.sent();\n                        ref = this.context.nextRef();\n                        pdfImage = PDFImage.of(ref, this, embedder);\n                        this.images.push(pdfImage);\n                        return [2 /*return*/, pdfImage];\n                }\n            });\n        });\n    };\n    /**\n     * Embed one or more PDF pages into this document.\n     *\n     * For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourcePdf = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     *\n     * // Embed page 74 of `sourcePdf` into `pdfDoc`\n     * const [embeddedPage] = await pdfDoc.embedPdf(sourcePdf, [73])\n     * ```\n     *\n     * See [[PDFDocument.load]] for examples of the allowed input data formats.\n     *\n     * @param pdf The input data containing a PDF document.\n     * @param indices The indices of the pages that should be embedded.\n     * @returns Resolves with an array of the embedded pages.\n     */\n    PDFDocument.prototype.embedPdf = function (pdf, indices) {\n        if (indices === void 0) { indices = [0]; }\n        return __awaiter(this, void 0, void 0, function () {\n            var srcDoc, _a, srcPages;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        assertIs(pdf, 'pdf', [\n                            'string',\n                            Uint8Array,\n                            ArrayBuffer,\n                            [PDFDocument, 'PDFDocument'],\n                        ]);\n                        assertIs(indices, 'indices', [Array]);\n                        if (!(pdf instanceof PDFDocument)) return [3 /*break*/, 1];\n                        _a = pdf;\n                        return [3 /*break*/, 3];\n                    case 1: return [4 /*yield*/, PDFDocument.load(pdf)];\n                    case 2:\n                        _a = _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        srcDoc = _a;\n                        srcPages = pluckIndices(srcDoc.getPages(), indices);\n                        return [2 /*return*/, this.embedPages(srcPages)];\n                }\n            });\n        });\n    };\n    /**\n     * Embed a single PDF page into this document.\n     *\n     * For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourceBuffer = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     * const sourcePdfDoc = await PDFDocument.load(sourceBuffer)\n     * const sourcePdfPage = sourcePdfDoc.getPages()[73]\n     *\n     * const embeddedPage = await pdfDoc.embedPage(\n     *   sourcePdfPage,\n     *\n     *   // Clip a section of the source page so that we only embed part of it\n     *   { left: 100, right: 450, bottom: 330, top: 570 },\n     *\n     *   // Translate all drawings of the embedded page by (10, 200) units\n     *   [1, 0, 0, 1, 10, 200],\n     * )\n     * ```\n     *\n     * @param page The page to be embedded.\n     * @param boundingBox\n     * Optionally, an area of the source page that should be embedded\n     * (defaults to entire page).\n     * @param transformationMatrix\n     * Optionally, a transformation matrix that is always applied to the embedded\n     * page anywhere it is drawn.\n     * @returns Resolves with the embedded pdf page.\n     */\n    PDFDocument.prototype.embedPage = function (page, boundingBox, transformationMatrix) {\n        return __awaiter(this, void 0, void 0, function () {\n            var embeddedPage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        assertIs(page, 'page', [[PDFPage, 'PDFPage']]);\n                        return [4 /*yield*/, this.embedPages([page], [boundingBox], [transformationMatrix])];\n                    case 1:\n                        embeddedPage = (_a.sent())[0];\n                        return [2 /*return*/, embeddedPage];\n                }\n            });\n        });\n    };\n    /**\n     * Embed one or more PDF pages into this document.\n     *\n     * For example:\n     * ```js\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourceBuffer = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     * const sourcePdfDoc = await PDFDocument.load(sourceBuffer)\n     *\n     * const page1 = sourcePdfDoc.getPages()[0]\n     * const page2 = sourcePdfDoc.getPages()[52]\n     * const page3 = sourcePdfDoc.getPages()[73]\n     *\n     * const embeddedPages = await pdfDoc.embedPages([page1, page2, page3])\n     * ```\n     *\n     * @param page\n     * The pages to be embedded (they must all share the same context).\n     * @param boundingBoxes\n     * Optionally, an array of clipping boundaries - one for each page\n     * (defaults to entirety of each page).\n     * @param transformationMatrices\n     * Optionally, an array of transformation matrices - one for each page\n     * (each page's transformation will apply anywhere it is drawn).\n     * @returns Resolves with an array of the embedded pdf pages.\n     */\n    PDFDocument.prototype.embedPages = function (pages, boundingBoxes, transformationMatrices) {\n        if (boundingBoxes === void 0) { boundingBoxes = []; }\n        if (transformationMatrices === void 0) { transformationMatrices = []; }\n        return __awaiter(this, void 0, void 0, function () {\n            var idx, len, currPage, nextPage, context, maybeCopyPage, embeddedPages, idx, len, page, box, matrix, embedder, ref;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (pages.length === 0)\n                            return [2 /*return*/, []];\n                        // Assert all pages have the same context\n                        for (idx = 0, len = pages.length - 1; idx < len; idx++) {\n                            currPage = pages[idx];\n                            nextPage = pages[idx + 1];\n                            if (currPage.node.context !== nextPage.node.context) {\n                                throw new PageEmbeddingMismatchedContextError();\n                            }\n                        }\n                        context = pages[0].node.context;\n                        maybeCopyPage = context === this.context\n                            ? function (p) { return p; }\n                            : PDFObjectCopier.for(context, this.context).copy;\n                        embeddedPages = new Array(pages.length);\n                        idx = 0, len = pages.length;\n                        _b.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        page = maybeCopyPage(pages[idx].node);\n                        box = boundingBoxes[idx];\n                        matrix = transformationMatrices[idx];\n                        return [4 /*yield*/, PDFPageEmbedder.for(page, box, matrix)];\n                    case 2:\n                        embedder = _b.sent();\n                        ref = this.context.nextRef();\n                        embeddedPages[idx] = PDFEmbeddedPage.of(ref, this, embedder);\n                        _b.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        (_a = this.embeddedPages).push.apply(_a, embeddedPages);\n                        return [2 /*return*/, embeddedPages];\n                }\n            });\n        });\n    };\n    /**\n     * > **NOTE:** You shouldn't need to call this method directly. The [[save]]\n     * > and [[saveAsBase64]] methods will automatically ensure that all embedded\n     * > assets are flushed before serializing the document.\n     *\n     * Flush all embedded fonts, PDF pages, and images to this document's\n     * [[context]].\n     *\n     * @returns Resolves when the flush is complete.\n     */\n    PDFDocument.prototype.flush = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.embedAll(this.fonts)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.images)];\n                    case 2:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.embeddedPages)];\n                    case 3:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.embeddedFiles)];\n                    case 4:\n                        _a.sent();\n                        return [4 /*yield*/, this.embedAll(this.javaScripts)];\n                    case 5:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Serialize this document to an array of bytes making up a PDF file.\n     * For example:\n     * ```js\n     * const pdfBytes = await pdfDoc.save()\n     * ```\n     *\n     * There are a number of things you can do with the serialized document,\n     * depending on the JavaScript environment you're running in:\n     * * Write it to a file in Node or React Native\n     * * Download it as a Blob in the browser\n     * * Render it in an `iframe`\n     *\n     * @param options The options to be used when saving the document.\n     * @returns Resolves with the bytes of the serialized document.\n     */\n    PDFDocument.prototype.save = function (options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, useObjectStreams, _b, addDefaultPage, _c, objectsPerTick, _d, updateFieldAppearances, form, Writer;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        _a = options.useObjectStreams, useObjectStreams = _a === void 0 ? true : _a, _b = options.addDefaultPage, addDefaultPage = _b === void 0 ? true : _b, _c = options.objectsPerTick, objectsPerTick = _c === void 0 ? 50 : _c, _d = options.updateFieldAppearances, updateFieldAppearances = _d === void 0 ? true : _d;\n                        assertIs(useObjectStreams, 'useObjectStreams', ['boolean']);\n                        assertIs(addDefaultPage, 'addDefaultPage', ['boolean']);\n                        assertIs(objectsPerTick, 'objectsPerTick', ['number']);\n                        assertIs(updateFieldAppearances, 'updateFieldAppearances', ['boolean']);\n                        if (addDefaultPage && this.getPageCount() === 0)\n                            this.addPage();\n                        if (updateFieldAppearances) {\n                            form = this.formCache.getValue();\n                            if (form)\n                                form.updateFieldAppearances();\n                        }\n                        return [4 /*yield*/, this.flush()];\n                    case 1:\n                        _e.sent();\n                        Writer = useObjectStreams ? PDFStreamWriter : PDFWriter;\n                        return [2 /*return*/, Writer.forContext(this.context, objectsPerTick).serializeToBuffer()];\n                }\n            });\n        });\n    };\n    /**\n     * Serialize this document to a base64 encoded string or data URI making up a\n     * PDF file. For example:\n     * ```js\n     * const base64String = await pdfDoc.saveAsBase64()\n     * base64String // => 'JVBERi0xLjcKJYGBgYEKC...'\n     *\n     * const base64DataUri = await pdfDoc.saveAsBase64({ dataUri: true })\n     * base64DataUri // => 'data:application/pdf;base64,JVBERi0xLjcKJYGBgYEKC...'\n     * ```\n     *\n     * @param options The options to be used when saving the document.\n     * @returns Resolves with a base64 encoded string or data URI of the\n     *          serialized document.\n     */\n    PDFDocument.prototype.saveAsBase64 = function (options) {\n        if (options === void 0) { options = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, dataUri, otherOptions, bytes, base64;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = options.dataUri, dataUri = _a === void 0 ? false : _a, otherOptions = __rest(options, [\"dataUri\"]);\n                        assertIs(dataUri, 'dataUri', ['boolean']);\n                        return [4 /*yield*/, this.save(otherOptions)];\n                    case 1:\n                        bytes = _b.sent();\n                        base64 = encodeToBase64(bytes);\n                        return [2 /*return*/, dataUri ? \"data:application/pdf;base64,\" + base64 : base64];\n                }\n            });\n        });\n    };\n    PDFDocument.prototype.findPageForAnnotationRef = function (ref) {\n        var pages = this.getPages();\n        for (var idx = 0, len = pages.length; idx < len; idx++) {\n            var page = pages[idx];\n            var annotations = page.node.Annots();\n            if ((annotations === null || annotations === void 0 ? void 0 : annotations.indexOf(ref)) !== undefined) {\n                return page;\n            }\n        }\n        return undefined;\n    };\n    PDFDocument.prototype.embedAll = function (embeddables) {\n        return __awaiter(this, void 0, void 0, function () {\n            var idx, len;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        idx = 0, len = embeddables.length;\n                        _a.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, embeddables[idx].embed()];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PDFDocument.prototype.updateInfoDict = function () {\n        var pdfLib = \"pdf-lib (https://github.com/Hopding/pdf-lib)\";\n        var now = new Date();\n        var info = this.getInfoDict();\n        this.setProducer(pdfLib);\n        this.setModificationDate(now);\n        if (!info.get(PDFName.of('Creator')))\n            this.setCreator(pdfLib);\n        if (!info.get(PDFName.of('CreationDate')))\n            this.setCreationDate(now);\n    };\n    PDFDocument.prototype.getInfoDict = function () {\n        var existingInfo = this.context.lookup(this.context.trailerInfo.Info);\n        if (existingInfo instanceof PDFDict)\n            return existingInfo;\n        var newInfo = this.context.obj({});\n        this.context.trailerInfo.Info = this.context.register(newInfo);\n        return newInfo;\n    };\n    PDFDocument.prototype.assertFontkit = function () {\n        if (!this.fontkit)\n            throw new FontkitNotRegisteredError();\n        return this.fontkit;\n    };\n    return PDFDocument;\n}());\nexport default PDFDocument;\n/* tslint:disable-next-line only-arrow-functions */\nfunction assertIsLiteralOrHexString(pdfObject) {\n    if (!(pdfObject instanceof PDFHexString) &&\n        !(pdfObject instanceof PDFString)) {\n        throw new UnexpectedObjectTypeError([PDFHexString, PDFString], pdfObject);\n    }\n}\n//# sourceMappingURL=PDFDocument.js.map","export var BlendMode;\n(function (BlendMode) {\n    BlendMode[\"Normal\"] = \"Normal\";\n    BlendMode[\"Multiply\"] = \"Multiply\";\n    BlendMode[\"Screen\"] = \"Screen\";\n    BlendMode[\"Overlay\"] = \"Overlay\";\n    BlendMode[\"Darken\"] = \"Darken\";\n    BlendMode[\"Lighten\"] = \"Lighten\";\n    BlendMode[\"ColorDodge\"] = \"ColorDodge\";\n    BlendMode[\"ColorBurn\"] = \"ColorBurn\";\n    BlendMode[\"HardLight\"] = \"HardLight\";\n    BlendMode[\"SoftLight\"] = \"SoftLight\";\n    BlendMode[\"Difference\"] = \"Difference\";\n    BlendMode[\"Exclusion\"] = \"Exclusion\";\n})(BlendMode || (BlendMode = {}));\n//# sourceMappingURL=PDFPageOptions.js.map","import { __assign } from \"tslib\";\nimport { rgb } from \"./colors\";\nimport { drawImage, drawLine, drawLinesOfText, drawPage, drawRectangle, drawSvgPath, drawEllipse, } from \"./operations\";\nimport { popGraphicsState, pushGraphicsState, translate, LineCapStyle, scale, } from \"./operators\";\nimport PDFDocument from \"./PDFDocument\";\nimport PDFEmbeddedPage from \"./PDFEmbeddedPage\";\nimport PDFFont from \"./PDFFont\";\nimport PDFImage from \"./PDFImage\";\nimport { BlendMode, } from \"./PDFPageOptions\";\nimport { degrees, toDegrees } from \"./rotations\";\nimport { StandardFonts } from \"./StandardFonts\";\nimport { PDFContentStream, PDFName, PDFOperator, PDFPageLeaf, PDFRef, PDFDict, PDFArray, } from \"../core\";\nimport { assertEachIs, assertIs, assertMultiple, assertOrUndefined, breakTextIntoLines, cleanText, rectanglesAreEqual, lineSplit, assertRangeOrUndefined, assertIsOneOfOrUndefined, } from \"../utils\";\n/**\n * Represents a single page of a [[PDFDocument]].\n */\nvar PDFPage = /** @class */ (function () {\n    function PDFPage(leafNode, ref, doc) {\n        this.fontSize = 24;\n        this.fontColor = rgb(0, 0, 0);\n        this.lineHeight = 24;\n        this.x = 0;\n        this.y = 0;\n        assertIs(leafNode, 'leafNode', [[PDFPageLeaf, 'PDFPageLeaf']]);\n        assertIs(ref, 'ref', [[PDFRef, 'PDFRef']]);\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        this.node = leafNode;\n        this.ref = ref;\n        this.doc = doc;\n    }\n    /**\n     * Rotate this page by a multiple of 90 degrees. For example:\n     * ```js\n     * import { degrees } from 'pdf-lib'\n     *\n     * page.setRotation(degrees(-90))\n     * page.setRotation(degrees(0))\n     * page.setRotation(degrees(90))\n     * page.setRotation(degrees(180))\n     * page.setRotation(degrees(270))\n     * ```\n     * @param angle The angle to rotate this page.\n     */\n    PDFPage.prototype.setRotation = function (angle) {\n        var degreesAngle = toDegrees(angle);\n        assertMultiple(degreesAngle, 'degreesAngle', 90);\n        this.node.set(PDFName.of('Rotate'), this.doc.context.obj(degreesAngle));\n    };\n    /**\n     * Get this page's rotation angle in degrees. For example:\n     * ```js\n     * const rotationAngle = page.getRotation().angle;\n     * ```\n     * @returns The rotation angle of the page in degrees (always a multiple of\n     *          90 degrees).\n     */\n    PDFPage.prototype.getRotation = function () {\n        var Rotate = this.node.Rotate();\n        return degrees(Rotate ? Rotate.asNumber() : 0);\n    };\n    /**\n     * Resize this page by increasing or decreasing its width and height. For\n     * example:\n     * ```js\n     * page.setSize(250, 500)\n     * page.setSize(page.getWidth() + 50, page.getHeight() + 100)\n     * page.setSize(page.getWidth() - 50, page.getHeight() - 100)\n     * ```\n     *\n     * Note that the PDF specification does not allow for pages to have explicit\n     * widths and heights. Instead it defines the \"size\" of a page in terms of\n     * five rectangles: the MediaBox, CropBox, BleedBox, TrimBox, and ArtBox. As a\n     * result, this method cannot directly change the width and height of a page.\n     * Instead, it works by adjusting these five boxes.\n     *\n     * This method performs the following steps:\n     *   1. Set width & height of MediaBox.\n     *   2. Set width & height of CropBox, if it has same dimensions as MediaBox.\n     *   3. Set width & height of BleedBox, if it has same dimensions as MediaBox.\n     *   4. Set width & height of TrimBox, if it has same dimensions as MediaBox.\n     *   5. Set width & height of ArtBox, if it has same dimensions as MediaBox.\n     *\n     * This approach works well for most PDF documents as all PDF pages must\n     * have a MediaBox, but relatively few have a CropBox, BleedBox, TrimBox, or\n     * ArtBox. And when they do have these additional boxes, they often have the\n     * same dimensions as the MediaBox. However, if you find this method does not\n     * work for your document, consider setting the boxes directly:\n     *   * [[PDFPage.setMediaBox]]\n     *   * [[PDFPage.setCropBox]]\n     *   * [[PDFPage.setBleedBox]]\n     *   * [[PDFPage.setTrimBox]]\n     *   * [[PDFPage.setArtBox]]\n     *\n     * @param width The new width of the page.\n     * @param height The new height of the page.\n     */\n    PDFPage.prototype.setSize = function (width, height) {\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var mediaBox = this.getMediaBox();\n        this.setMediaBox(mediaBox.x, mediaBox.y, width, height);\n        var cropBox = this.getCropBox();\n        var bleedBox = this.getBleedBox();\n        var trimBox = this.getTrimBox();\n        var artBox = this.getArtBox();\n        var hasCropBox = this.node.CropBox();\n        var hasBleedBox = this.node.BleedBox();\n        var hasTrimBox = this.node.TrimBox();\n        var hasArtBox = this.node.ArtBox();\n        if (hasCropBox && rectanglesAreEqual(cropBox, mediaBox)) {\n            this.setCropBox(mediaBox.x, mediaBox.y, width, height);\n        }\n        if (hasBleedBox && rectanglesAreEqual(bleedBox, mediaBox)) {\n            this.setBleedBox(mediaBox.x, mediaBox.y, width, height);\n        }\n        if (hasTrimBox && rectanglesAreEqual(trimBox, mediaBox)) {\n            this.setTrimBox(mediaBox.x, mediaBox.y, width, height);\n        }\n        if (hasArtBox && rectanglesAreEqual(artBox, mediaBox)) {\n            this.setArtBox(mediaBox.x, mediaBox.y, width, height);\n        }\n    };\n    /**\n     * Resize this page by increasing or decreasing its width. For example:\n     * ```js\n     * page.setWidth(250)\n     * page.setWidth(page.getWidth() + 50)\n     * page.setWidth(page.getWidth() - 50)\n     * ```\n     *\n     * This method uses [[PDFPage.setSize]] to set the page's width.\n     *\n     * @param width The new width of the page.\n     */\n    PDFPage.prototype.setWidth = function (width) {\n        assertIs(width, 'width', ['number']);\n        this.setSize(width, this.getSize().height);\n    };\n    /**\n     * Resize this page by increasing or decreasing its height. For example:\n     * ```js\n     * page.setHeight(500)\n     * page.setHeight(page.getWidth() + 100)\n     * page.setHeight(page.getWidth() - 100)\n     * ```\n     *\n     * This method uses [[PDFPage.setSize]] to set the page's height.\n     *\n     * @param height The new height of the page.\n     */\n    PDFPage.prototype.setHeight = function (height) {\n        assertIs(height, 'height', ['number']);\n        this.setSize(this.getSize().width, height);\n    };\n    /**\n     * Set the MediaBox of this page. For example:\n     * ```js\n     * const mediaBox = page.getMediaBox()\n     *\n     * page.setMediaBox(0, 0, 250, 500)\n     * page.setMediaBox(mediaBox.x, mediaBox.y, 50, 100)\n     * page.setMediaBox(15, 5, mediaBox.width - 50, mediaBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getMediaBox]] for details about what the MediaBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new MediaBox.\n     * @param y The y coordinate of the lower left corner of the new MediaBox.\n     * @param width The width of the new MediaBox.\n     * @param height The height of the new MediaBox.\n     */\n    PDFPage.prototype.setMediaBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var mediaBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.MediaBox, mediaBox);\n    };\n    /**\n     * Set the CropBox of this page. For example:\n     * ```js\n     * const cropBox = page.getCropBox()\n     *\n     * page.setCropBox(0, 0, 250, 500)\n     * page.setCropBox(cropBox.x, cropBox.y, 50, 100)\n     * page.setCropBox(15, 5, cropBox.width - 50, cropBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getCropBox]] for details about what the CropBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new CropBox.\n     * @param y The y coordinate of the lower left corner of the new CropBox.\n     * @param width The width of the new CropBox.\n     * @param height The height of the new CropBox.\n     */\n    PDFPage.prototype.setCropBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var cropBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.CropBox, cropBox);\n    };\n    /**\n     * Set the BleedBox of this page. For example:\n     * ```js\n     * const bleedBox = page.getBleedBox()\n     *\n     * page.setBleedBox(0, 0, 250, 500)\n     * page.setBleedBox(bleedBox.x, bleedBox.y, 50, 100)\n     * page.setBleedBox(15, 5, bleedBox.width - 50, bleedBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getBleedBox]] for details about what the BleedBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new BleedBox.\n     * @param y The y coordinate of the lower left corner of the new BleedBox.\n     * @param width The width of the new BleedBox.\n     * @param height The height of the new BleedBox.\n     */\n    PDFPage.prototype.setBleedBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var bleedBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.BleedBox, bleedBox);\n    };\n    /**\n     * Set the TrimBox of this page. For example:\n     * ```js\n     * const trimBox = page.getTrimBox()\n     *\n     * page.setTrimBox(0, 0, 250, 500)\n     * page.setTrimBox(trimBox.x, trimBox.y, 50, 100)\n     * page.setTrimBox(15, 5, trimBox.width - 50, trimBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getTrimBox]] for details about what the TrimBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new TrimBox.\n     * @param y The y coordinate of the lower left corner of the new TrimBox.\n     * @param width The width of the new TrimBox.\n     * @param height The height of the new TrimBox.\n     */\n    PDFPage.prototype.setTrimBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var trimBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.TrimBox, trimBox);\n    };\n    /**\n     * Set the ArtBox of this page. For example:\n     * ```js\n     * const artBox = page.getArtBox()\n     *\n     * page.setArtBox(0, 0, 250, 500)\n     * page.setArtBox(artBox.x, artBox.y, 50, 100)\n     * page.setArtBox(15, 5, artBox.width - 50, artBox.height - 100)\n     * ```\n     *\n     * See [[PDFPage.getArtBox]] for details about what the ArtBox represents.\n     *\n     * @param x The x coordinate of the lower left corner of the new ArtBox.\n     * @param y The y coordinate of the lower left corner of the new ArtBox.\n     * @param width The width of the new ArtBox.\n     * @param height The height of the new ArtBox.\n     */\n    PDFPage.prototype.setArtBox = function (x, y, width, height) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        assertIs(width, 'width', ['number']);\n        assertIs(height, 'height', ['number']);\n        var artBox = this.doc.context.obj([x, y, x + width, y + height]);\n        this.node.set(PDFName.ArtBox, artBox);\n    };\n    /**\n     * Get this page's width and height. For example:\n     * ```js\n     * const { width, height } = page.getSize()\n     * ```\n     *\n     * This method uses [[PDFPage.getMediaBox]] to obtain the page's\n     * width and height.\n     *\n     * @returns The width and height of the page.\n     */\n    PDFPage.prototype.getSize = function () {\n        var _a = this.getMediaBox(), width = _a.width, height = _a.height;\n        return { width: width, height: height };\n    };\n    /**\n     * Get this page's width. For example:\n     * ```js\n     * const width = page.getWidth()\n     * ```\n     *\n     * This method uses [[PDFPage.getSize]] to obtain the page's size.\n     *\n     * @returns The width of the page.\n     */\n    PDFPage.prototype.getWidth = function () {\n        return this.getSize().width;\n    };\n    /**\n     * Get this page's height. For example:\n     * ```js\n     * const height = page.getHeight()\n     * ```\n     *\n     * This method uses [[PDFPage.getSize]] to obtain the page's size.\n     *\n     * @returns The height of the page.\n     */\n    PDFPage.prototype.getHeight = function () {\n        return this.getSize().height;\n    };\n    /**\n     * Get the rectangle defining this page's MediaBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getMediaBox()\n     * ```\n     *\n     * The MediaBox of a page defines the boundaries of the physical medium on\n     * which the page is to be displayed/printed. It may include extended area\n     * surrounding the page content for bleed marks, printing marks, etc...\n     * It may also include areas close to the edges of the medium that cannot be\n     * marked because of physical limitations of the output device. Content\n     * falling outside this boundary may safely be discarded without affecting\n     * the meaning of the PDF file.\n     *\n     * @returns An object defining the lower left corner of the MediaBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getMediaBox = function () {\n        var mediaBox = this.node.MediaBox();\n        return mediaBox.asRectangle();\n    };\n    /**\n     * Get the rectangle defining this page's CropBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getCropBox()\n     * ```\n     *\n     * The CropBox of a page defines the region to which the contents of the page\n     * shall be clipped when displayed or printed. Unlike the other boxes, the\n     * CropBox does not necessarily represent the physical page geometry. It\n     * merely imposes clipping on the page contents.\n     *\n     * The CropBox's default value is the page's MediaBox.\n     *\n     * @returns An object defining the lower left corner of the CropBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getCropBox = function () {\n        var _a;\n        var cropBox = this.node.CropBox();\n        return (_a = cropBox === null || cropBox === void 0 ? void 0 : cropBox.asRectangle()) !== null && _a !== void 0 ? _a : this.getMediaBox();\n    };\n    /**\n     * Get the rectangle defining this page's BleedBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getBleedBox()\n     * ```\n     *\n     * The BleedBox of a page defines the region to which the contents of the\n     * page shall be clipped when output in a production environment. This may\n     * include any extra bleed area needed to accommodate the physical\n     * limitations of cutting, folding, and trimming equipment. The actual\n     * printed page may include printing marks that fall outside the BleedBox.\n     *\n     * The BleedBox's default value is the page's CropBox.\n     *\n     * @returns An object defining the lower left corner of the BleedBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getBleedBox = function () {\n        var _a;\n        var bleedBox = this.node.BleedBox();\n        return (_a = bleedBox === null || bleedBox === void 0 ? void 0 : bleedBox.asRectangle()) !== null && _a !== void 0 ? _a : this.getCropBox();\n    };\n    /**\n     * Get the rectangle defining this page's TrimBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getTrimBox()\n     * ```\n     *\n     * The TrimBox of a page defines the intended dimensions of the finished\n     * page after trimming. It may be smaller than the MediaBox to allow for\n     * production-related content, such as printing instructions, cut marks, or\n     * color bars.\n     *\n     * The TrimBox's default value is the page's CropBox.\n     *\n     * @returns An object defining the lower left corner of the TrimBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getTrimBox = function () {\n        var _a;\n        var trimBox = this.node.TrimBox();\n        return (_a = trimBox === null || trimBox === void 0 ? void 0 : trimBox.asRectangle()) !== null && _a !== void 0 ? _a : this.getCropBox();\n    };\n    /**\n     * Get the rectangle defining this page's ArtBox. For example:\n     * ```js\n     * const { x, y, width, height } = page.getArtBox()\n     * ```\n     *\n     * The ArtBox of a page defines the extent of the page's meaningful content\n     * (including potential white space).\n     *\n     * The ArtBox's default value is the page's CropBox.\n     *\n     * @returns An object defining the lower left corner of the ArtBox and its\n     *          width & height.\n     */\n    PDFPage.prototype.getArtBox = function () {\n        var _a;\n        var artBox = this.node.ArtBox();\n        return (_a = artBox === null || artBox === void 0 ? void 0 : artBox.asRectangle()) !== null && _a !== void 0 ? _a : this.getCropBox();\n    };\n    /**\n     * Translate this page's content to a new location on the page. This operation\n     * is often useful after resizing the page with [[setSize]]. For example:\n     * ```js\n     * // Add 50 units of whitespace to the top and right of the page\n     * page.setSize(page.getWidth() + 50, page.getHeight() + 50)\n     *\n     * // Move the page's content from the lower-left corner of the page\n     * // to the top-right corner.\n     * page.translateContent(50, 50)\n     *\n     * // Now there are 50 units of whitespace to the left and bottom of the page\n     * ```\n     * See also: [[resetPosition]]\n     * @param x The new position on the x-axis for this page's content.\n     * @param y The new position on the y-axis for this page's content.\n     */\n    PDFPage.prototype.translateContent = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        this.node.normalize();\n        this.getContentStream();\n        var start = this.createContentStream(pushGraphicsState(), translate(x, y));\n        var startRef = this.doc.context.register(start);\n        var end = this.createContentStream(popGraphicsState());\n        var endRef = this.doc.context.register(end);\n        this.node.wrapContentStreams(startRef, endRef);\n    };\n    /**\n     * Scale the size, content, and annotations of a page.\n     *\n     * For example:\n     * ```js\n     * page.scale(0.5, 0.5);\n     * ```\n     *\n     * @param x The factor by which the width for the page should be scaled\n     *          (e.g. `0.5` is 50%).\n     * @param y The factor by which the height for the page should be scaled\n     *          (e.g. `2.0` is 200%).\n     */\n    PDFPage.prototype.scale = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        this.setSize(this.getWidth() * x, this.getHeight() * y);\n        this.scaleContent(x, y);\n        this.scaleAnnotations(x, y);\n    };\n    /**\n     * Scale the content of a page. This is useful after resizing an existing\n     * page. This scales only the content, not the annotations.\n     *\n     * For example:\n     * ```js\n     * // Bisect the size of the page\n     * page.setSize(page.getWidth() / 2, page.getHeight() / 2);\n     *\n     * // Scale the content of the page down by 50% in x and y\n     * page.scaleContent(0.5, 0.5);\n     * ```\n     * See also: [[scaleAnnotations]]\n     * @param x The factor by which the x-axis for the content should be scaled\n     *          (e.g. `0.5` is 50%).\n     * @param y The factor by which the y-axis for the content should be scaled\n     *          (e.g. `2.0` is 200%).\n     */\n    PDFPage.prototype.scaleContent = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        this.node.normalize();\n        this.getContentStream();\n        var start = this.createContentStream(pushGraphicsState(), scale(x, y));\n        var startRef = this.doc.context.register(start);\n        var end = this.createContentStream(popGraphicsState());\n        var endRef = this.doc.context.register(end);\n        this.node.wrapContentStreams(startRef, endRef);\n    };\n    /**\n     * Scale the annotations of a page. This is useful if you want to scale a\n     * page with comments or other annotations.\n     * ```js\n     * // Scale the content of the page down by 50% in x and y\n     * page.scaleContent(0.5, 0.5);\n     *\n     * // Scale the content of the page down by 50% in x and y\n     * page.scaleAnnotations(0.5, 0.5);\n     * ```\n     * See also: [[scaleContent]]\n     * @param x The factor by which the x-axis for the annotations should be\n     *          scaled (e.g. `0.5` is 50%).\n     * @param y The factor by which the y-axis for the annotations should be\n     *          scaled (e.g. `2.0` is 200%).\n     */\n    PDFPage.prototype.scaleAnnotations = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        var annots = this.node.Annots();\n        if (!annots)\n            return;\n        for (var idx = 0; idx < annots.size(); idx++) {\n            var annot = annots.lookup(idx);\n            if (annot instanceof PDFDict)\n                this.scaleAnnot(annot, x, y);\n        }\n    };\n    /**\n     * Reset the x and y coordinates of this page to `(0, 0)`. This operation is\n     * often useful after calling [[translateContent]]. For example:\n     * ```js\n     * // Shift the page's contents up and to the right by 50 units\n     * page.translateContent(50, 50)\n     *\n     * // This text will shifted - it will be drawn at (50, 50)\n     * page.drawText('I am shifted')\n     *\n     * // Move back to (0, 0)\n     * page.resetPosition()\n     *\n     * // This text will not be shifted - it will be drawn at (0, 0)\n     * page.drawText('I am not shifted')\n     * ```\n     */\n    PDFPage.prototype.resetPosition = function () {\n        this.getContentStream(false);\n        this.x = 0;\n        this.y = 0;\n    };\n    /**\n     * Choose a default font for this page. The default font will be used whenever\n     * text is drawn on this page and no font is specified. For example:\n     * ```js\n     * import { StandardFonts } from 'pdf-lib'\n     *\n     * const timesRomanFont = await pdfDoc.embedFont(StandardFonts.TimesRoman)\n     * const helveticaFont = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const courierFont = await pdfDoc.embedFont(StandardFonts.Courier)\n     *\n     * const page = pdfDoc.addPage()\n     *\n     * page.setFont(helveticaFont)\n     * page.drawText('I will be drawn in Helvetica')\n     *\n     * page.setFont(timesRomanFont)\n     * page.drawText('I will be drawn in Courier', { font: courierFont })\n     * ```\n     * @param font The default font to be used when drawing text on this page.\n     */\n    PDFPage.prototype.setFont = function (font) {\n        // TODO: Reuse image Font name if we've already added this image to Resources.Fonts\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.font = font;\n        this.fontKey = this.node.newFontDictionary(this.font.name, this.font.ref);\n    };\n    /**\n     * Choose a default font size for this page. The default font size will be\n     * used whenever text is drawn on this page and no font size is specified.\n     * For example:\n     * ```js\n     * page.setFontSize(12)\n     * page.drawText('I will be drawn in size 12')\n     *\n     * page.setFontSize(36)\n     * page.drawText('I will be drawn in size 24', { fontSize: 24 })\n     * ```\n     * @param fontSize The default font size to be used when drawing text on this\n     *                 page.\n     */\n    PDFPage.prototype.setFontSize = function (fontSize) {\n        assertIs(fontSize, 'fontSize', ['number']);\n        this.fontSize = fontSize;\n    };\n    /**\n     * Choose a default font color for this page. The default font color will be\n     * used whenever text is drawn on this page and no font color is specified.\n     * For example:\n     * ```js\n     * import { rgb, cmyk, grayscale } from 'pdf-lib'\n     *\n     * page.setFontColor(rgb(0.97, 0.02, 0.97))\n     * page.drawText('I will be drawn in pink')\n     *\n     * page.setFontColor(cmyk(0.4, 0.7, 0.39, 0.15))\n     * page.drawText('I will be drawn in gray', { color: grayscale(0.5) })\n     * ```\n     * @param fontColor The default font color to be used when drawing text on\n     *                  this page.\n     */\n    PDFPage.prototype.setFontColor = function (fontColor) {\n        assertIs(fontColor, 'fontColor', [[Object, 'Color']]);\n        this.fontColor = fontColor;\n    };\n    /**\n     * Choose a default line height for this page. The default line height will be\n     * used whenever text is drawn on this page and no line height is specified.\n     * For example:\n     * ```js\n     * page.setLineHeight(12);\n     * page.drawText('These lines will be vertically \\n separated by 12 units')\n     *\n     * page.setLineHeight(36);\n     * page.drawText('These lines will be vertically \\n separated by 24 units', {\n     *   lineHeight: 24\n     * })\n     * ```\n     * @param lineHeight The default line height to be used when drawing text on\n     *                   this page.\n     */\n    PDFPage.prototype.setLineHeight = function (lineHeight) {\n        assertIs(lineHeight, 'lineHeight', ['number']);\n        this.lineHeight = lineHeight;\n    };\n    /**\n     * Get the default position of this page. For example:\n     * ```js\n     * const { x, y } = page.getPosition()\n     * ```\n     * @returns The default position of the page.\n     */\n    PDFPage.prototype.getPosition = function () {\n        return { x: this.x, y: this.y };\n    };\n    /**\n     * Get the default x coordinate of this page. For example:\n     * ```js\n     * const x = page.getX()\n     * ```\n     * @returns The default x coordinate of the page.\n     */\n    PDFPage.prototype.getX = function () {\n        return this.x;\n    };\n    /**\n     * Get the default y coordinate of this page. For example:\n     * ```js\n     * const y = page.getY()\n     * ```\n     * @returns The default y coordinate of the page.\n     */\n    PDFPage.prototype.getY = function () {\n        return this.y;\n    };\n    /**\n     * Change the default position of this page. For example:\n     * ```js\n     * page.moveTo(0, 0)\n     * page.drawText('I will be drawn at the origin')\n     *\n     * page.moveTo(0, 25)\n     * page.drawText('I will be drawn 25 units up')\n     *\n     * page.moveTo(25, 25)\n     * page.drawText('I will be drawn 25 units up and 25 units to the right')\n     * ```\n     * @param x The new default position on the x-axis for this page.\n     * @param y The new default position on the y-axis for this page.\n     */\n    PDFPage.prototype.moveTo = function (x, y) {\n        assertIs(x, 'x', ['number']);\n        assertIs(y, 'y', ['number']);\n        this.x = x;\n        this.y = y;\n    };\n    /**\n     * Change the default position of this page to be further down the y-axis.\n     * For example:\n     * ```js\n     * page.moveTo(50, 50)\n     * page.drawText('I will be drawn at (50, 50)')\n     *\n     * page.moveDown(10)\n     * page.drawText('I will be drawn at (50, 40)')\n     * ```\n     * @param yDecrease The amount by which the page's default position along the\n     *                  y-axis should be decreased.\n     */\n    PDFPage.prototype.moveDown = function (yDecrease) {\n        assertIs(yDecrease, 'yDecrease', ['number']);\n        this.y -= yDecrease;\n    };\n    /**\n     * Change the default position of this page to be further up the y-axis.\n     * For example:\n     * ```js\n     * page.moveTo(50, 50)\n     * page.drawText('I will be drawn at (50, 50)')\n     *\n     * page.moveUp(10)\n     * page.drawText('I will be drawn at (50, 60)')\n     * ```\n     * @param yIncrease The amount by which the page's default position along the\n     *                  y-axis should be increased.\n     */\n    PDFPage.prototype.moveUp = function (yIncrease) {\n        assertIs(yIncrease, 'yIncrease', ['number']);\n        this.y += yIncrease;\n    };\n    /**\n     * Change the default position of this page to be further left on the x-axis.\n     * For example:\n     * ```js\n     * page.moveTo(50, 50)\n     * page.drawText('I will be drawn at (50, 50)')\n     *\n     * page.moveLeft(10)\n     * page.drawText('I will be drawn at (40, 50)')\n     * ```\n     * @param xDecrease The amount by which the page's default position along the\n     *                  x-axis should be decreased.\n     */\n    PDFPage.prototype.moveLeft = function (xDecrease) {\n        assertIs(xDecrease, 'xDecrease', ['number']);\n        this.x -= xDecrease;\n    };\n    /**\n     * Change the default position of this page to be further right on the y-axis.\n     * For example:\n     * ```js\n     * page.moveTo(50, 50)\n     * page.drawText('I will be drawn at (50, 50)')\n     *\n     * page.moveRight(10)\n     * page.drawText('I will be drawn at (60, 50)')\n     * ```\n     * @param xIncrease The amount by which the page's default position along the\n     *                  x-axis should be increased.\n     */\n    PDFPage.prototype.moveRight = function (xIncrease) {\n        assertIs(xIncrease, 'xIncrease', ['number']);\n        this.x += xIncrease;\n    };\n    /**\n     * Push one or more operators to the end of this page's current content\n     * stream. For example:\n     * ```js\n     * import {\n     *   pushGraphicsState,\n     *   moveTo,\n     *   lineTo,\n     *   closePath,\n     *   setFillingColor,\n     *   rgb,\n     *   fill,\n     *   popGraphicsState,\n     * } from 'pdf-lib'\n     *\n     * // Draw a green triangle in the lower-left corner of the page\n     * page.pushOperators(\n     *   pushGraphicsState(),\n     *   moveTo(0, 0),\n     *   lineTo(100, 0),\n     *   lineTo(50, 100),\n     *   closePath(),\n     *   setFillingColor(rgb(0.0, 1.0, 0.0)),\n     *   fill(),\n     *   popGraphicsState(),\n     * )\n     * ```\n     * @param operator The operators to be pushed.\n     */\n    PDFPage.prototype.pushOperators = function () {\n        var operator = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operator[_i] = arguments[_i];\n        }\n        assertEachIs(operator, 'operator', [[PDFOperator, 'PDFOperator']]);\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, operator);\n    };\n    /**\n     * Draw one or more lines of text on this page. For example:\n     * ```js\n     * import { StandardFonts, rgb } from 'pdf-lib'\n     *\n     * const helveticaFont = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const timesRomanFont = await pdfDoc.embedFont(StandardFonts.TimesRoman)\n     *\n     * const page = pdfDoc.addPage()\n     *\n     * page.setFont(helveticaFont)\n     *\n     * page.moveTo(5, 200)\n     * page.drawText('The Life of an Egg', { size: 36 })\n     *\n     * page.moveDown(36)\n     * page.drawText('An Epic Tale of Woe', { size: 30 })\n     *\n     * page.drawText(\n     *   `Humpty Dumpty sat on a wall \\n` +\n     *   `Humpty Dumpty had a great fall; \\n` +\n     *   `All the king's horses and all the king's men \\n` +\n     *   `Couldn't put Humpty together again. \\n`,\n     *   {\n     *     x: 25,\n     *     y: 100,\n     *     font: timesRomanFont,\n     *     size: 24,\n     *     color: rgb(1, 0, 0),\n     *     lineHeight: 24,\n     *     opacity: 0.75,\n     *   },\n     * )\n     * ```\n     * @param text The text to be drawn.\n     * @param options The options to be used when drawing the text.\n     */\n    PDFPage.prototype.drawText = function (text, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (options === void 0) { options = {}; }\n        assertIs(text, 'text', ['string']);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertOrUndefined(options.font, 'options.font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(options.size, 'options.size', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.xSkew, 'options.xSkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.ySkew, 'options.ySkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.lineHeight, 'options.lineHeight', ['number']);\n        assertOrUndefined(options.maxWidth, 'options.maxWidth', ['number']);\n        assertOrUndefined(options.wordBreaks, 'options.wordBreaks', [Array]);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var _h = this.setOrEmbedFont(options.font), oldFont = _h.oldFont, newFont = _h.newFont, newFontKey = _h.newFontKey;\n        var fontSize = options.size || this.fontSize;\n        var wordBreaks = options.wordBreaks || this.doc.defaultWordBreaks;\n        var textWidth = function (t) { return newFont.widthOfTextAtSize(t, fontSize); };\n        var lines = options.maxWidth === undefined\n            ? lineSplit(cleanText(text))\n            : breakTextIntoLines(text, wordBreaks, options.maxWidth, textWidth);\n        var encodedLines = new Array(lines.length);\n        for (var idx = 0, len = lines.length; idx < len; idx++) {\n            encodedLines[idx] = newFont.encodeText(lines[idx]);\n        }\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            blendMode: options.blendMode,\n        });\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawLinesOfText(encodedLines, {\n            color: (_a = options.color) !== null && _a !== void 0 ? _a : this.fontColor,\n            font: newFontKey,\n            size: fontSize,\n            rotate: (_b = options.rotate) !== null && _b !== void 0 ? _b : degrees(0),\n            xSkew: (_c = options.xSkew) !== null && _c !== void 0 ? _c : degrees(0),\n            ySkew: (_d = options.ySkew) !== null && _d !== void 0 ? _d : degrees(0),\n            x: (_e = options.x) !== null && _e !== void 0 ? _e : this.x,\n            y: (_f = options.y) !== null && _f !== void 0 ? _f : this.y,\n            lineHeight: (_g = options.lineHeight) !== null && _g !== void 0 ? _g : this.lineHeight,\n            graphicsState: graphicsStateKey,\n        }));\n        if (options.font) {\n            if (oldFont)\n                this.setFont(oldFont);\n            else\n                this.resetFont();\n        }\n    };\n    /**\n     * Draw an image on this page. For example:\n     * ```js\n     * import { degrees } from 'pdf-lib'\n     *\n     * const jpgUrl = 'https://pdf-lib.js.org/assets/cat_riding_unicorn.jpg'\n     * const jpgImageBytes = await fetch(jpgUrl).then((res) => res.arrayBuffer())\n     *\n     * const jpgImage = await pdfDoc.embedJpg(jpgImageBytes)\n     * const jpgDims = jpgImage.scale(0.5)\n     *\n     * const page = pdfDoc.addPage()\n     *\n     * page.drawImage(jpgImage, {\n     *   x: 25,\n     *   y: 25,\n     *   width: jpgDims.width,\n     *   height: jpgDims.height,\n     *   rotate: degrees(30),\n     *   opacity: 0.75,\n     * })\n     * ```\n     * @param image The image to be drawn.\n     * @param options The options to be used when drawing the image.\n     */\n    PDFPage.prototype.drawImage = function (image, options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (options === void 0) { options = {}; }\n        // TODO: Reuse image XObject name if we've already added this image to Resources.XObjects\n        assertIs(image, 'image', [[PDFImage, 'PDFImage']]);\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.width, 'options.width', ['number']);\n        assertOrUndefined(options.height, 'options.height', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.xSkew, 'options.xSkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.ySkew, 'options.ySkew', [[Object, 'Rotation']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var xObjectKey = this.node.newXObject('Image', image.ref);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            blendMode: options.blendMode,\n        });\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawImage(xObjectKey, {\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : image.size().width,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : image.size().height,\n            rotate: (_e = options.rotate) !== null && _e !== void 0 ? _e : degrees(0),\n            xSkew: (_f = options.xSkew) !== null && _f !== void 0 ? _f : degrees(0),\n            ySkew: (_g = options.ySkew) !== null && _g !== void 0 ? _g : degrees(0),\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw an embedded PDF page on this page. For example:\n     * ```js\n     * import { degrees } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const page = pdfDoc.addPage()\n     *\n     * const sourcePdfUrl = 'https://pdf-lib.js.org/assets/with_large_page_count.pdf'\n     * const sourcePdf = await fetch(sourcePdfUrl).then((res) => res.arrayBuffer())\n     *\n     * // Embed page 74 from the PDF\n     * const [embeddedPage] = await pdfDoc.embedPdf(sourcePdf, 73)\n     *\n     * page.drawPage(embeddedPage, {\n     *   x: 250,\n     *   y: 200,\n     *   xScale: 0.5,\n     *   yScale: 0.5,\n     *   rotate: degrees(30),\n     *   opacity: 0.75,\n     * })\n     * ```\n     *\n     * The `options` argument accepts both `width`/`height` and `xScale`/`yScale`\n     * as options. Since each of these options defines the size of the drawn page,\n     * if both options are given, `width` and `height` take precedence and the\n     * corresponding scale variants are ignored.\n     *\n     * @param embeddedPage The embedded page to be drawn.\n     * @param options The options to be used when drawing the embedded page.\n     */\n    PDFPage.prototype.drawPage = function (embeddedPage, options) {\n        var _a, _b, _c, _d, _e;\n        if (options === void 0) { options = {}; }\n        // TODO: Reuse embeddedPage XObject name if we've already added this embeddedPage to Resources.XObjects\n        assertIs(embeddedPage, 'embeddedPage', [\n            [PDFEmbeddedPage, 'PDFEmbeddedPage'],\n        ]);\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.xScale, 'options.xScale', ['number']);\n        assertOrUndefined(options.yScale, 'options.yScale', ['number']);\n        assertOrUndefined(options.width, 'options.width', ['number']);\n        assertOrUndefined(options.height, 'options.height', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.xSkew, 'options.xSkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.ySkew, 'options.ySkew', [[Object, 'Rotation']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var xObjectKey = this.node.newXObject('EmbeddedPdfPage', embeddedPage.ref);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            blendMode: options.blendMode,\n        });\n        // prettier-ignore\n        var xScale = (options.width !== undefined ? options.width / embeddedPage.width\n            : options.xScale !== undefined ? options.xScale\n                : 1);\n        // prettier-ignore\n        var yScale = (options.height !== undefined ? options.height / embeddedPage.height\n            : options.yScale !== undefined ? options.yScale\n                : 1);\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawPage(xObjectKey, {\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            xScale: xScale,\n            yScale: yScale,\n            rotate: (_c = options.rotate) !== null && _c !== void 0 ? _c : degrees(0),\n            xSkew: (_d = options.xSkew) !== null && _d !== void 0 ? _d : degrees(0),\n            ySkew: (_e = options.ySkew) !== null && _e !== void 0 ? _e : degrees(0),\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw an SVG path on this page. For example:\n     * ```js\n     * import { rgb } from 'pdf-lib'\n     *\n     * const svgPath = 'M 0,20 L 100,160 Q 130,200 150,120 C 190,-40 200,200 300,150 L 400,90'\n     *\n     * // Draw path as black line\n     * page.drawSvgPath(svgPath, { x: 25, y: 75 })\n     *\n     * // Change border style and opacity\n     * page.drawSvgPath(svgPath, {\n     *   x: 25,\n     *   y: 275,\n     *   borderColor: rgb(0.5, 0.5, 0.5),\n     *   borderWidth: 2,\n     *   borderOpacity: 0.75,\n     * })\n     *\n     * // Set fill color and opacity\n     * page.drawSvgPath(svgPath, {\n     *   x: 25,\n     *   y: 475,\n     *   color: rgb(1.0, 0, 0),\n     *   opacity: 0.75,\n     * })\n     *\n     * // Draw 50% of original size\n     * page.drawSvgPath(svgPath, {\n     *   x: 25,\n     *   y: 675,\n     *   scale: 0.5,\n     * })\n     * ```\n     * @param path The SVG path to be drawn.\n     * @param options The options to be used when drawing the SVG path.\n     */\n    PDFPage.prototype.drawSvgPath = function (path, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (options === void 0) { options = {}; }\n        assertIs(path, 'path', ['string']);\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.scale, 'options.scale', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.borderWidth, 'options.borderWidth', ['number']);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertOrUndefined(options.borderColor, 'options.borderColor', [\n            [Object, 'Color'],\n        ]);\n        assertOrUndefined(options.borderDashArray, 'options.borderDashArray', [\n            Array,\n        ]);\n        assertOrUndefined(options.borderDashPhase, 'options.borderDashPhase', [\n            'number',\n        ]);\n        assertIsOneOfOrUndefined(options.borderLineCap, 'options.borderLineCap', LineCapStyle);\n        assertRangeOrUndefined(options.borderOpacity, 'options.borderOpacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            borderOpacity: options.borderOpacity,\n            blendMode: options.blendMode,\n        });\n        if (!('color' in options) && !('borderColor' in options)) {\n            options.borderColor = rgb(0, 0, 0);\n        }\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawSvgPath(path, {\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            scale: options.scale,\n            rotate: (_c = options.rotate) !== null && _c !== void 0 ? _c : degrees(0),\n            color: (_d = options.color) !== null && _d !== void 0 ? _d : undefined,\n            borderColor: (_e = options.borderColor) !== null && _e !== void 0 ? _e : undefined,\n            borderWidth: (_f = options.borderWidth) !== null && _f !== void 0 ? _f : 0,\n            borderDashArray: (_g = options.borderDashArray) !== null && _g !== void 0 ? _g : undefined,\n            borderDashPhase: (_h = options.borderDashPhase) !== null && _h !== void 0 ? _h : undefined,\n            borderLineCap: (_j = options.borderLineCap) !== null && _j !== void 0 ? _j : undefined,\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw a line on this page. For example:\n     * ```js\n     * import { rgb } from 'pdf-lib'\n     *\n     * page.drawLine({\n     *   start: { x: 25, y: 75 },\n     *   end: { x: 125, y: 175 },\n     *   thickness: 2,\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the line.\n     */\n    PDFPage.prototype.drawLine = function (options) {\n        var _a, _b, _c, _d, _e;\n        assertIs(options.start, 'options.start', [\n            [Object, '{ x: number, y: number }'],\n        ]);\n        assertIs(options.end, 'options.end', [\n            [Object, '{ x: number, y: number }'],\n        ]);\n        assertIs(options.start.x, 'options.start.x', ['number']);\n        assertIs(options.start.y, 'options.start.y', ['number']);\n        assertIs(options.end.x, 'options.end.x', ['number']);\n        assertIs(options.end.y, 'options.end.y', ['number']);\n        assertOrUndefined(options.thickness, 'options.thickness', ['number']);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertOrUndefined(options.dashArray, 'options.dashArray', [Array]);\n        assertOrUndefined(options.dashPhase, 'options.dashPhase', ['number']);\n        assertIsOneOfOrUndefined(options.lineCap, 'options.lineCap', LineCapStyle);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            borderOpacity: options.opacity,\n            blendMode: options.blendMode,\n        });\n        if (!('color' in options)) {\n            options.color = rgb(0, 0, 0);\n        }\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawLine({\n            start: options.start,\n            end: options.end,\n            thickness: (_a = options.thickness) !== null && _a !== void 0 ? _a : 1,\n            color: (_b = options.color) !== null && _b !== void 0 ? _b : undefined,\n            dashArray: (_c = options.dashArray) !== null && _c !== void 0 ? _c : undefined,\n            dashPhase: (_d = options.dashPhase) !== null && _d !== void 0 ? _d : undefined,\n            lineCap: (_e = options.lineCap) !== null && _e !== void 0 ? _e : undefined,\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw a rectangle on this page. For example:\n     * ```js\n     * import { degrees, grayscale, rgb } from 'pdf-lib'\n     *\n     * page.drawRectangle({\n     *   x: 25,\n     *   y: 75,\n     *   width: 250,\n     *   height: 75,\n     *   rotate: degrees(-15),\n     *   borderWidth: 5,\n     *   borderColor: grayscale(0.5),\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.5,\n     *   borderOpacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the rectangle.\n     */\n    PDFPage.prototype.drawRectangle = function (options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        if (options === void 0) { options = {}; }\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.width, 'options.width', ['number']);\n        assertOrUndefined(options.height, 'options.height', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.xSkew, 'options.xSkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.ySkew, 'options.ySkew', [[Object, 'Rotation']]);\n        assertOrUndefined(options.borderWidth, 'options.borderWidth', ['number']);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertOrUndefined(options.borderColor, 'options.borderColor', [\n            [Object, 'Color'],\n        ]);\n        assertOrUndefined(options.borderDashArray, 'options.borderDashArray', [\n            Array,\n        ]);\n        assertOrUndefined(options.borderDashPhase, 'options.borderDashPhase', [\n            'number',\n        ]);\n        assertIsOneOfOrUndefined(options.borderLineCap, 'options.borderLineCap', LineCapStyle);\n        assertRangeOrUndefined(options.borderOpacity, 'options.borderOpacity', 0, 1);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            borderOpacity: options.borderOpacity,\n            blendMode: options.blendMode,\n        });\n        if (!('color' in options) && !('borderColor' in options)) {\n            options.color = rgb(0, 0, 0);\n        }\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawRectangle({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            width: (_c = options.width) !== null && _c !== void 0 ? _c : 150,\n            height: (_d = options.height) !== null && _d !== void 0 ? _d : 100,\n            rotate: (_e = options.rotate) !== null && _e !== void 0 ? _e : degrees(0),\n            xSkew: (_f = options.xSkew) !== null && _f !== void 0 ? _f : degrees(0),\n            ySkew: (_g = options.ySkew) !== null && _g !== void 0 ? _g : degrees(0),\n            borderWidth: (_h = options.borderWidth) !== null && _h !== void 0 ? _h : 0,\n            color: (_j = options.color) !== null && _j !== void 0 ? _j : undefined,\n            borderColor: (_k = options.borderColor) !== null && _k !== void 0 ? _k : undefined,\n            borderDashArray: (_l = options.borderDashArray) !== null && _l !== void 0 ? _l : undefined,\n            borderDashPhase: (_m = options.borderDashPhase) !== null && _m !== void 0 ? _m : undefined,\n            graphicsState: graphicsStateKey,\n            borderLineCap: (_o = options.borderLineCap) !== null && _o !== void 0 ? _o : undefined,\n        }));\n    };\n    /**\n     * Draw a square on this page. For example:\n     * ```js\n     * import { degrees, grayscale, rgb } from 'pdf-lib'\n     *\n     * page.drawSquare({\n     *   x: 25,\n     *   y: 75,\n     *   size: 100,\n     *   rotate: degrees(-15),\n     *   borderWidth: 5,\n     *   borderColor: grayscale(0.5),\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.5,\n     *   borderOpacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the square.\n     */\n    PDFPage.prototype.drawSquare = function (options) {\n        if (options === void 0) { options = {}; }\n        var size = options.size;\n        assertOrUndefined(size, 'size', ['number']);\n        this.drawRectangle(__assign(__assign({}, options), { width: size, height: size }));\n    };\n    /**\n     * Draw an ellipse on this page. For example:\n     * ```js\n     * import { grayscale, rgb } from 'pdf-lib'\n     *\n     * page.drawEllipse({\n     *   x: 200,\n     *   y: 75,\n     *   xScale: 100,\n     *   yScale: 50,\n     *   borderWidth: 5,\n     *   borderColor: grayscale(0.5),\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.5,\n     *   borderOpacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the ellipse.\n     */\n    PDFPage.prototype.drawEllipse = function (options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        if (options === void 0) { options = {}; }\n        assertOrUndefined(options.x, 'options.x', ['number']);\n        assertOrUndefined(options.y, 'options.y', ['number']);\n        assertOrUndefined(options.xScale, 'options.xScale', ['number']);\n        assertOrUndefined(options.yScale, 'options.yScale', ['number']);\n        assertOrUndefined(options.rotate, 'options.rotate', [[Object, 'Rotation']]);\n        assertOrUndefined(options.color, 'options.color', [[Object, 'Color']]);\n        assertRangeOrUndefined(options.opacity, 'opacity.opacity', 0, 1);\n        assertOrUndefined(options.borderColor, 'options.borderColor', [\n            [Object, 'Color'],\n        ]);\n        assertRangeOrUndefined(options.borderOpacity, 'options.borderOpacity', 0, 1);\n        assertOrUndefined(options.borderWidth, 'options.borderWidth', ['number']);\n        assertOrUndefined(options.borderDashArray, 'options.borderDashArray', [\n            Array,\n        ]);\n        assertOrUndefined(options.borderDashPhase, 'options.borderDashPhase', [\n            'number',\n        ]);\n        assertIsOneOfOrUndefined(options.borderLineCap, 'options.borderLineCap', LineCapStyle);\n        assertIsOneOfOrUndefined(options.blendMode, 'options.blendMode', BlendMode);\n        var graphicsStateKey = this.maybeEmbedGraphicsState({\n            opacity: options.opacity,\n            borderOpacity: options.borderOpacity,\n            blendMode: options.blendMode,\n        });\n        if (!('color' in options) && !('borderColor' in options)) {\n            options.color = rgb(0, 0, 0);\n        }\n        var contentStream = this.getContentStream();\n        contentStream.push.apply(contentStream, drawEllipse({\n            x: (_a = options.x) !== null && _a !== void 0 ? _a : this.x,\n            y: (_b = options.y) !== null && _b !== void 0 ? _b : this.y,\n            xScale: (_c = options.xScale) !== null && _c !== void 0 ? _c : 100,\n            yScale: (_d = options.yScale) !== null && _d !== void 0 ? _d : 100,\n            rotate: (_e = options.rotate) !== null && _e !== void 0 ? _e : undefined,\n            color: (_f = options.color) !== null && _f !== void 0 ? _f : undefined,\n            borderColor: (_g = options.borderColor) !== null && _g !== void 0 ? _g : undefined,\n            borderWidth: (_h = options.borderWidth) !== null && _h !== void 0 ? _h : 0,\n            borderDashArray: (_j = options.borderDashArray) !== null && _j !== void 0 ? _j : undefined,\n            borderDashPhase: (_k = options.borderDashPhase) !== null && _k !== void 0 ? _k : undefined,\n            borderLineCap: (_l = options.borderLineCap) !== null && _l !== void 0 ? _l : undefined,\n            graphicsState: graphicsStateKey,\n        }));\n    };\n    /**\n     * Draw a circle on this page. For example:\n     * ```js\n     * import { grayscale, rgb } from 'pdf-lib'\n     *\n     * page.drawCircle({\n     *   x: 200,\n     *   y: 150,\n     *   size: 100,\n     *   borderWidth: 5,\n     *   borderColor: grayscale(0.5),\n     *   color: rgb(0.75, 0.2, 0.2),\n     *   opacity: 0.5,\n     *   borderOpacity: 0.75,\n     * })\n     * ```\n     * @param options The options to be used when drawing the ellipse.\n     */\n    PDFPage.prototype.drawCircle = function (options) {\n        if (options === void 0) { options = {}; }\n        var _a = options.size, size = _a === void 0 ? 100 : _a;\n        assertOrUndefined(size, 'size', ['number']);\n        this.drawEllipse(__assign(__assign({}, options), { xScale: size, yScale: size }));\n    };\n    PDFPage.prototype.setOrEmbedFont = function (font) {\n        var oldFont = this.font;\n        var oldFontKey = this.fontKey;\n        if (font)\n            this.setFont(font);\n        else\n            this.getFont();\n        var newFont = this.font;\n        var newFontKey = this.fontKey;\n        return { oldFont: oldFont, oldFontKey: oldFontKey, newFont: newFont, newFontKey: newFontKey };\n    };\n    PDFPage.prototype.getFont = function () {\n        if (!this.font || !this.fontKey) {\n            var font = this.doc.embedStandardFont(StandardFonts.Helvetica);\n            this.setFont(font);\n        }\n        return [this.font, this.fontKey];\n    };\n    PDFPage.prototype.resetFont = function () {\n        this.font = undefined;\n        this.fontKey = undefined;\n    };\n    PDFPage.prototype.getContentStream = function (useExisting) {\n        if (useExisting === void 0) { useExisting = true; }\n        if (useExisting && this.contentStream)\n            return this.contentStream;\n        this.contentStream = this.createContentStream();\n        this.contentStreamRef = this.doc.context.register(this.contentStream);\n        this.node.addContentStream(this.contentStreamRef);\n        return this.contentStream;\n    };\n    PDFPage.prototype.createContentStream = function () {\n        var operators = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operators[_i] = arguments[_i];\n        }\n        var dict = this.doc.context.obj({});\n        var contentStream = PDFContentStream.of(dict, operators);\n        return contentStream;\n    };\n    PDFPage.prototype.maybeEmbedGraphicsState = function (options) {\n        var opacity = options.opacity, borderOpacity = options.borderOpacity, blendMode = options.blendMode;\n        if (opacity === undefined &&\n            borderOpacity === undefined &&\n            blendMode === undefined) {\n            return undefined;\n        }\n        var graphicsState = this.doc.context.obj({\n            Type: 'ExtGState',\n            ca: opacity,\n            CA: borderOpacity,\n            BM: blendMode,\n        });\n        var key = this.node.newExtGState('GS', graphicsState);\n        return key;\n    };\n    PDFPage.prototype.scaleAnnot = function (annot, x, y) {\n        var selectors = ['RD', 'CL', 'Vertices', 'QuadPoints', 'L', 'Rect'];\n        for (var idx = 0, len = selectors.length; idx < len; idx++) {\n            var list = annot.lookup(PDFName.of(selectors[idx]));\n            if (list instanceof PDFArray)\n                list.scalePDFNumbers(x, y);\n        }\n        var inkLists = annot.lookup(PDFName.of('InkList'));\n        if (inkLists instanceof PDFArray) {\n            for (var idx = 0, len = inkLists.size(); idx < len; idx++) {\n                var arr = inkLists.lookup(idx);\n                if (arr instanceof PDFArray)\n                    arr.scalePDFNumbers(x, y);\n            }\n        }\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.addPage]] and [[PDFDocument.insertPage]]\n     * > methods, which can create instances of [[PDFPage]] for you.\n     *\n     * Create an instance of [[PDFPage]] from an existing leaf node.\n     *\n     * @param leafNode The leaf node to be wrapped.\n     * @param ref The unique reference for the page.\n     * @param doc The document to which the page will belong.\n     */\n    PDFPage.of = function (leafNode, ref, doc) {\n        return new PDFPage(leafNode, ref, doc);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFDocument.addPage]] and [[PDFDocument.insertPage]]\n     * > methods, which can create instances of [[PDFPage]] for you.\n     *\n     * Create an instance of [[PDFPage]].\n     *\n     * @param doc The document to which the page will belong.\n     */\n    PDFPage.create = function (doc) {\n        assertIs(doc, 'doc', [[PDFDocument, 'PDFDocument']]);\n        var dummyRef = PDFRef.of(-1);\n        var pageLeaf = PDFPageLeaf.withContextAndParent(doc.context, dummyRef);\n        var pageRef = doc.context.register(pageLeaf);\n        return new PDFPage(pageLeaf, pageRef, doc);\n    };\n    return PDFPage;\n}());\nexport default PDFPage;\n//# sourceMappingURL=PDFPage.js.map","import { __extends } from \"tslib\";\nimport PDFPage from \"../PDFPage\";\nimport PDFFont from \"../PDFFont\";\nimport { ImageAlignment } from \"../image/alignment\";\nimport { normalizeAppearance, defaultButtonAppearanceProvider, } from \"./appearances\";\nimport PDFField, { assertFieldAppearanceOptions, } from \"./PDFField\";\nimport { rgb } from \"../colors\";\nimport { degrees } from \"../rotations\";\nimport { PDFStream, PDFAcroPushButton, } from \"../../core\";\nimport { assertIs, assertOrUndefined, assertPositive } from \"../../utils\";\n/**\n * Represents a button field of a [[PDFForm]].\n *\n * [[PDFButton]] fields are interactive controls that users can click with their\n * mouse. This type of [[PDFField]] is not stateful. The purpose of a button\n * is to perform an action when the user clicks on it, such as opening a print\n * modal or resetting the form. Buttons are typically rectangular in shape and\n * have a text label describing the action that they perform when clicked.\n */\nvar PDFButton = /** @class */ (function (_super) {\n    __extends(PDFButton, _super);\n    function PDFButton(acroPushButton, ref, doc) {\n        var _this = _super.call(this, acroPushButton, ref, doc) || this;\n        assertIs(acroPushButton, 'acroButton', [\n            [PDFAcroPushButton, 'PDFAcroPushButton'],\n        ]);\n        _this.acroField = acroPushButton;\n        return _this;\n    }\n    /**\n     * Display an image inside the bounds of this button's widgets. For example:\n     * ```js\n     * const pngImage = await pdfDoc.embedPng(...)\n     * const button = form.getButton('some.button.field')\n     * button.setImage(pngImage, ImageAlignment.Center)\n     * ```\n     * This will update the appearances streams for each of this button's widgets.\n     * @param image The image that should be displayed.\n     * @param alignment The alignment of the image.\n     */\n    PDFButton.prototype.setImage = function (image, alignment) {\n        if (alignment === void 0) { alignment = ImageAlignment.Center; }\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var streamRef = this.createImageAppearanceStream(widget, image, alignment);\n            this.updateWidgetAppearances(widget, { normal: streamRef });\n        }\n        this.markAsClean();\n    };\n    /**\n     * Set the font size for this field. Larger font sizes will result in larger\n     * text being displayed when PDF readers render this button. Font sizes may\n     * be integer or floating point numbers. Supplying a negative font size will\n     * cause this method to throw an error.\n     *\n     * For example:\n     * ```js\n     * const button = form.getButton('some.button.field')\n     * button.setFontSize(4)\n     * button.setFontSize(15.7)\n     * ```\n     *\n     * > This method depends upon the existence of a default appearance\n     * > (`/DA`) string. If this field does not have a default appearance string,\n     * > or that string does not contain a font size (via the `Tf` operator),\n     * > then this method will throw an error.\n     *\n     * @param fontSize The font size to be used when rendering text in this field.\n     */\n    PDFButton.prototype.setFontSize = function (fontSize) {\n        assertPositive(fontSize, 'fontSize');\n        this.acroField.setFontSize(fontSize);\n        this.markAsDirty();\n    };\n    /**\n     * Show this button on the specified page with the given text. For example:\n     * ```js\n     * const ubuntuFont = await pdfDoc.embedFont(ubuntuFontBytes)\n     * const page = pdfDoc.addPage()\n     *\n     * const form = pdfDoc.getForm()\n     * const button = form.createButton('some.button.field')\n     *\n     * button.addToPage('Do Stuff', page, {\n     *   x: 50,\n     *   y: 75,\n     *   width: 200,\n     *   height: 100,\n     *   textColor: rgb(1, 0, 0),\n     *   backgroundColor: rgb(0, 1, 0),\n     *   borderColor: rgb(0, 0, 1),\n     *   borderWidth: 2,\n     *   rotate: degrees(90),\n     *   font: ubuntuFont,\n     * })\n     * ```\n     * This will create a new widget for this button field.\n     * @param text The text to be displayed for this button widget.\n     * @param page The page to which this button widget should be added.\n     * @param options The options to be used when adding this button widget.\n     */\n    PDFButton.prototype.addToPage = function (\n    // TODO: This needs to be optional, e.g. for image buttons\n    text, page, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        assertOrUndefined(text, 'text', ['string']);\n        assertOrUndefined(page, 'page', [[PDFPage, 'PDFPage']]);\n        assertFieldAppearanceOptions(options);\n        // Create a widget for this button\n        var widget = this.createWidget({\n            x: ((_a = options === null || options === void 0 ? void 0 : options.x) !== null && _a !== void 0 ? _a : 0) - ((_b = options === null || options === void 0 ? void 0 : options.borderWidth) !== null && _b !== void 0 ? _b : 0) / 2,\n            y: ((_c = options === null || options === void 0 ? void 0 : options.y) !== null && _c !== void 0 ? _c : 0) - ((_d = options === null || options === void 0 ? void 0 : options.borderWidth) !== null && _d !== void 0 ? _d : 0) / 2,\n            width: (_e = options === null || options === void 0 ? void 0 : options.width) !== null && _e !== void 0 ? _e : 100,\n            height: (_f = options === null || options === void 0 ? void 0 : options.height) !== null && _f !== void 0 ? _f : 50,\n            textColor: (_g = options === null || options === void 0 ? void 0 : options.textColor) !== null && _g !== void 0 ? _g : rgb(0, 0, 0),\n            backgroundColor: (_h = options === null || options === void 0 ? void 0 : options.backgroundColor) !== null && _h !== void 0 ? _h : rgb(0.75, 0.75, 0.75),\n            borderColor: options === null || options === void 0 ? void 0 : options.borderColor,\n            borderWidth: (_j = options === null || options === void 0 ? void 0 : options.borderWidth) !== null && _j !== void 0 ? _j : 0,\n            rotate: (_k = options === null || options === void 0 ? void 0 : options.rotate) !== null && _k !== void 0 ? _k : degrees(0),\n            caption: text,\n            hidden: options === null || options === void 0 ? void 0 : options.hidden,\n            page: page.ref,\n        });\n        var widgetRef = this.doc.context.register(widget.dict);\n        // Add widget to this field\n        this.acroField.addWidget(widgetRef);\n        // Set appearance streams for widget\n        var font = (_l = options === null || options === void 0 ? void 0 : options.font) !== null && _l !== void 0 ? _l : this.doc.getForm().getDefaultFont();\n        this.updateWidgetAppearance(widget, font);\n        // Add widget to the given page\n        page.node.addAnnot(widgetRef);\n    };\n    /**\n     * Returns `true` if this button has been marked as dirty, or if any of this\n     * button's widgets do not have an appearance stream. For example:\n     * ```js\n     * const button = form.getButton('some.button.field')\n     * if (button.needsAppearancesUpdate()) console.log('Needs update')\n     * ```\n     * @returns Whether or not this button needs an appearance update.\n     */\n    PDFButton.prototype.needsAppearancesUpdate = function () {\n        var _a;\n        if (this.isDirty())\n            return true;\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var hasAppearances = ((_a = widget.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal) instanceof PDFStream;\n            if (!hasAppearances)\n                return true;\n        }\n        return false;\n    };\n    /**\n     * Update the appearance streams for each of this button's widgets using\n     * the default appearance provider for buttons. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const button = form.getButton('some.button.field')\n     * button.defaultUpdateAppearances(helvetica)\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     */\n    PDFButton.prototype.defaultUpdateAppearances = function (font) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        this.updateAppearances(font);\n    };\n    /**\n     * Update the appearance streams for each of this button's widgets using\n     * the given appearance provider. If no `provider` is passed, the default\n     * appearance provider for buttons will be used. For example:\n     * ```js\n     * const helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica)\n     * const button = form.getButton('some.button.field')\n     * button.updateAppearances(helvetica, (field, widget, font) => {\n     *   ...\n     *   return {\n     *     normal: drawButton(...),\n     *     down: drawButton(...),\n     *   }\n     * })\n     * ```\n     * @param font The font to be used for creating the appearance streams.\n     * @param provider Optionally, the appearance provider to be used for\n     *                 generating the contents of the appearance streams.\n     */\n    PDFButton.prototype.updateAppearances = function (font, provider) {\n        assertIs(font, 'font', [[PDFFont, 'PDFFont']]);\n        assertOrUndefined(provider, 'provider', [Function]);\n        var widgets = this.acroField.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            this.updateWidgetAppearance(widget, font, provider);\n        }\n    };\n    PDFButton.prototype.updateWidgetAppearance = function (widget, font, provider) {\n        var apProvider = provider !== null && provider !== void 0 ? provider : defaultButtonAppearanceProvider;\n        var appearances = normalizeAppearance(apProvider(this, widget, font));\n        this.updateWidgetAppearanceWithFont(widget, font, appearances);\n    };\n    /**\n     * > **NOTE:** You probably don't want to call this method directly. Instead,\n     * > consider using the [[PDFForm.getButton]] method, which will create an\n     * > instance of [[PDFButton]] for you.\n     *\n     * Create an instance of [[PDFButton]] from an existing acroPushButton and ref\n     *\n     * @param acroPushButton The underlying `PDFAcroPushButton` for this button.\n     * @param ref The unique reference for this button.\n     * @param doc The document to which this button will belong.\n     */\n    PDFButton.of = function (acroPushButton, ref, doc) { return new PDFButton(acroPushButton, ref, doc); };\n    return PDFButton;\n}(PDFField));\nexport default PDFButton;\n//# sourceMappingURL=PDFButton.js.map"],"names":["asPDFName","name","PDFName","asPDFNumber","num","PDFNumber","asNumber","RotationTypes","radians","radianAngle","assertIs","degrees","degreeAngle","Radians","Degrees","degreesToRadians","degree","radiansToDegrees","radian","toRadians","rotation","error","toDegrees","reduceRotation","quadrants","adjustDimsForRotation","dims","rotateRectangle","rectangle","borderWidth","x","y","w","h","r","b","clip","PDFOperator","Ops","clipEvenOdd","cos","sin","tan","concatTransformationMatrix","a","c","d","e","f","translate","xPos","yPos","scale","rotateRadians","angle","rotateDegrees","skewRadians","xSkewAngle","ySkewAngle","skewDegrees","setDashPattern","dashArray","dashPhase","restoreDashPattern","LineCapStyle","setLineCap","style","LineJoinStyle","setLineJoin","setGraphicsState","state","pushGraphicsState","popGraphicsState","setLineWidth","width","appendBezierCurve","x1","y1","x2","y2","x3","y3","appendQuadraticCurve","closePath","moveTo","lineTo","height","square","size","stroke","fill","fillAndStroke","endPath","nextLine","moveText","showText","text","beginText","endText","setFontAndSize","setCharacterSpacing","spacing","setWordSpacing","setCharacterSqueeze","squeeze","setLineHeight","lineHeight","setTextRise","rise","TextRenderingMode","setTextRenderingMode","mode","setTextMatrix","rotateAndSkewTextRadiansAndTranslate","rotationAngle","rotateAndSkewTextDegreesAndTranslate","drawObject","setFillingGrayscaleColor","gray","setStrokingGrayscaleColor","setFillingRgbColor","red","green","blue","setStrokingRgbColor","setFillingCmykColor","cyan","magenta","yellow","key","setStrokingCmykColor","beginMarkedContent","tag","endMarkedContent","ColorTypes","grayscale","assertRange","rgb","cmyk","Grayscale","RGB","CMYK","setFillingColor","color","setStrokingColor","componentsToColor","comps","colorToComponents","cx","cy","px","py","sx","sy","parameters","parse","path","cmd","ret","args","curArg","foundDecimal","params","_i","path_1","apply","commands","cmds","i","runners","solveArc","coords","rx","ry","rot","large","sweep","ex","ey","segs","arcToSegments","segs_1","seg","bez","segmentToBezier","rotateX","ox","oy","th","sinTh","cosTh","pl","a00","a01","a10","a11","x0","y0","sfactorSq","sfactor","xc","yc","th0","th1","thArc","segments","result","th2","th3","cx1","cy1","thHalf","t","svgPathToOperators","drawText","line","options","drawLinesOfText","lines","operators","idx","len","drawImage","drawPage","drawLine","_a","_b","drawRectangle","KAPPA","drawEllipsePath","config","xScale","yScale","xe","ye","xm","ym","drawEllipseCurves","centerX","centerY","drawEllipse","_c","__spreadArrays","drawSvgPath","drawCheckMark","p2x","p2y","p3y","p3x","p1x","p1y","rotateInPlace","drawCheckBox","outline","checkMarkSize","checkMark","drawRadioButton","outlineScale","dot","drawButton","background","drawTextLines","encoded","drawTextField","padding","clipX","clipY","clipWidth","clipHeight","clippingArea","markedContent","drawOptionList","highlights","EncryptedPDFError","_super","__extends","_this","msg","FontkitNotRegisteredError","ForeignPageError","RemovePageFromEmptyDocumentError","NoSuchFieldError","UnexpectedFieldTypeError","expected","actual","expectedType","actualType","MissingOnValueCheckError","onValue","FieldAlreadyExistsError","InvalidFieldNamePartError","namePart","FieldExistsAsNonTerminalError","RichTextFieldReadError","fieldName","CombedTextLayoutError","lineLength","cellCount","ExceededMaxLengthError","textLength","maxLength","InvalidMaxLengthError","TextAlignment","MIN_FONT_SIZE","MAX_FONT_SIZE","computeFontSize","font","bounds","multiline","fontSize","linesUsed","lineIdx","lineLen","words","spaceInLineRemaining","isLastWord","word","widthOfWord","totalHeight","computeCombedFontSize","cellWidth","cellHeight","chars","charSplit","tooLong","lastIndexOfWhitespace","splitOutLines","input","maxWidth","lastWhitespaceIdx","remainder","layoutMultilineText","alignment","lineSplit","cleanText","textLines","minX","minY","maxX","maxY","prevRemainder","layoutCombedText","mergeLines","cells","cellOffset","charOffset","charAtIndex","char","charLength","cellCenter","layoutSinglelineText","normalizeAppearance","appearance","tfRegex","getDefaultFontSize","field","da","daMatch","findLastMatch","defaultFontSize","colorRegex","getDefaultColor","c1","c2","c3","c4","colorSpace","updateDefaultAppearance","defaultCheckBoxAppearanceProvider","checkBox","widget","widgetColor","fieldColor","ap","bs","_d","rotate","__assign","black","borderColor","normalBackgroundColor","downBackgroundColor","textColor","defaultRadioGroupAppearanceProvider","radioGroup","defaultButtonAppearanceProvider","button","_e","widgetFontSize","fieldFontSize","captions","normalText","downText","_f","normalLayout","downLayout","defaultTextFieldAppearanceProvider","textField","layout","defaultDropdownAppearanceProvider","dropdown","defaultOptionListAppearanceProvider","optionList","selected","selectedLines","PDFEmbeddedPage","ref","doc","embedder","PDFRef","PDFDocument","PDFPageEmbedder","factor","__awaiter","__generator","PDFFont","CustomFontEmbedder","StandardFontEmbedder","assertOrUndefined","PDFImage","JpegEmbedder","PngEmbedder","imgWidthScale","imgHeightScale","ImageAlignment","assertFieldAppearanceOptions","PDFField","acroField","PDFAcroTerminal","AcroFieldFlags","MethodNotImplementedError","_font","backgroundColor","degreesAngle","caption","hidden","pageRef","assertMultiple","PDFWidgetAnnotation","rect","ac","AnnotationFlags","newDa","normal","rollover","down","context","Resources","stream","streamRef","image","adj","imageDims","imageName","onStreamRef","offStreamRef","appearanceDict","PDFCheckBox","acroCheckBox","PDFAcroCheckBox","page","PDFPage","widgetRef","widgets","PDFDict","provider","apProvider","appearances","PDFDropdown","acroComboBox","PDFAcroComboBox","rawOptions","display","value","values","optionObjects","PDFHexString","optionsArr","existingOptions","newOptions","merge","validOptions","hasCustomOption","option","existingValues","assertPositive","AcroChoiceFlags","_g","hasAppearances","PDFStream","PDFOptionList","acroListBox","PDFAcroListBox","assertIsSubset","PDFRadioGroup","acroRadioButton","PDFAcroRadioButton","exportValues","exportOptions","onValues","onOptions","assertIsOneOf","AcroButtonFlags","_h","_j","apStateValue","PDFSignature","acroSignature","PDFAcroSignature","PDFTextField","acroText","PDFAcroText","quadding","assertRangeOrUndefined","fieldAlignment","AcroTextFlags","StandardFonts","PDFForm","acroForm","PDFAcroForm","Cache","allFields","fields","convertToPDFField","PDFButton","nameParts","splitFieldName","parent","PDFAcroPushButton","addFieldToParent","comboBox","listBox","radioButton","lenFields","j","lenWidgets","xObjectKey","pages","fieldKids","kidsCount","childIndex","child","fieldRef","refOrDict","name_1","partialNames","nonTerminal","parent_1","parentRef","res","node","PDFAcroNonTerminal","nodeRef","partialName","createPDFAcroFields","fullyQualifiedName","parts","entries","PageSizes","ParseSpeeds","PDFEmbeddedFile","Names","EmbeddedFiles","EFNames","AF","PDFArray","PDFJavaScript","catalog","Javascript","JSNames","ignoreEncryption","updateMetadata","PDFPageLeaf","PDFContext","pdf","parseSpeed","throwOnInvalidObject","capNumbers","bytes","toUint8Array","PDFParser","pageTree","pageTreeRef","PDFPageTree","PDFCatalog","fontkit","form","title","assertIsLiteralOrHexString","author","subject","keywords","creator","producer","creationDate","modificationDate","prefs","language","PDFString","index","range","pageCount","srcDoc","indices","copier","srcPages","copiedPages","srcPage","copiedPage","PDFObjectCopier","pdfCopy","contentPages","script","JavaScriptEmbedder","javaScript","attachment","embeddedFile","assertIsOneOfOrUndefined","AFRelationship","FileEmbedder","subset","customName","features","pdfFont","isStandardFont","canBeConvertedToUint8Array","CustomFontSubsetEmbedder","jpg","pdfImage","png","pluckIndices","boundingBox","transformationMatrix","embeddedPage","boundingBoxes","transformationMatrices","currPage","nextPage","maybeCopyPage","embeddedPages","box","matrix","PageEmbeddingMismatchedContextError","p","useObjectStreams","addDefaultPage","objectsPerTick","updateFieldAppearances","Writer","PDFStreamWriter","PDFWriter","dataUri","otherOptions","base64","__rest","encodeToBase64","annotations","embeddables","pdfLib","now","info","existingInfo","newInfo","pdfObject","UnexpectedObjectTypeError","BlendMode","leafNode","Rotate","mediaBox","cropBox","bleedBox","trimBox","artBox","hasCropBox","hasBleedBox","hasTrimBox","hasArtBox","rectanglesAreEqual","start","startRef","end","endRef","annots","annot","fontColor","yDecrease","yIncrease","xDecrease","xIncrease","operator","assertEachIs","contentStream","oldFont","newFont","newFontKey","wordBreaks","textWidth","breakTextIntoLines","encodedLines","graphicsStateKey","_k","_l","_m","_o","oldFontKey","useExisting","dict","PDFContentStream","opacity","borderOpacity","blendMode","graphicsState","selectors","list","inkLists","arr","dummyRef","pageLeaf","acroPushButton"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}