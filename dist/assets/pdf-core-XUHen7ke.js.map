{"version":3,"file":"pdf-core-XUHen7ke.js","sources":["../../node_modules/pdf-lib/es/core/errors.js","../../node_modules/pdf-lib/es/core/syntax/CharCodes.js","../../node_modules/pdf-lib/es/core/document/PDFHeader.js","../../node_modules/pdf-lib/es/core/objects/PDFObject.js","../../node_modules/pdf-lib/es/core/objects/PDFNumber.js","../../node_modules/pdf-lib/es/core/objects/PDFArray.js","../../node_modules/pdf-lib/es/core/objects/PDFBool.js","../../node_modules/pdf-lib/es/core/syntax/Delimiters.js","../../node_modules/pdf-lib/es/core/syntax/Whitespace.js","../../node_modules/pdf-lib/es/core/syntax/Irregular.js","../../node_modules/pdf-lib/es/core/objects/PDFName.js","../../node_modules/pdf-lib/es/core/objects/PDFNull.js","../../node_modules/pdf-lib/es/core/objects/PDFDict.js","../../node_modules/pdf-lib/es/core/objects/PDFStream.js","../../node_modules/pdf-lib/es/core/objects/PDFRawStream.js","../../node_modules/pdf-lib/es/core/objects/PDFRef.js","../../node_modules/pdf-lib/es/core/operators/PDFOperator.js","../../node_modules/pdf-lib/es/core/operators/PDFOperatorNames.js","../../node_modules/pdf-lib/es/core/structures/PDFFlateStream.js","../../node_modules/pdf-lib/es/core/structures/PDFContentStream.js","../../node_modules/pdf-lib/es/core/PDFContext.js","../../node_modules/pdf-lib/es/core/structures/PDFPageLeaf.js","../../node_modules/pdf-lib/es/core/PDFObjectCopier.js","../../node_modules/pdf-lib/es/core/document/PDFCrossRefSection.js","../../node_modules/pdf-lib/es/core/document/PDFTrailer.js","../../node_modules/pdf-lib/es/core/document/PDFTrailerDict.js","../../node_modules/pdf-lib/es/core/structures/PDFObjectStream.js","../../node_modules/pdf-lib/es/core/writers/PDFWriter.js","../../node_modules/pdf-lib/es/core/objects/PDFInvalidObject.js","../../node_modules/pdf-lib/es/core/structures/PDFCrossRefStream.js","../../node_modules/pdf-lib/es/core/writers/PDFStreamWriter.js","../../node_modules/pdf-lib/es/core/objects/PDFHexString.js","../../node_modules/pdf-lib/es/core/embedders/StandardFontEmbedder.js","../../node_modules/pdf-lib/es/core/embedders/CMap.js","../../node_modules/pdf-lib/es/core/embedders/FontFlags.js","../../node_modules/pdf-lib/es/core/objects/PDFString.js","../../node_modules/pdf-lib/es/core/embedders/CustomFontEmbedder.js","../../node_modules/pdf-lib/es/core/embedders/CustomFontSubsetEmbedder.js","../../node_modules/pdf-lib/es/core/embedders/FileEmbedder.js","../../node_modules/pdf-lib/es/core/embedders/JpegEmbedder.js","../../node_modules/pdf-lib/es/core/embedders/PngEmbedder.js","../../node_modules/pdf-lib/es/core/streams/Stream.js","../../node_modules/pdf-lib/es/core/streams/DecodeStream.js","../../node_modules/pdf-lib/es/core/streams/Ascii85Stream.js","../../node_modules/pdf-lib/es/core/streams/AsciiHexStream.js","../../node_modules/pdf-lib/es/core/streams/FlateStream.js","../../node_modules/pdf-lib/es/core/streams/LZWStream.js","../../node_modules/pdf-lib/es/core/streams/RunLengthStream.js","../../node_modules/pdf-lib/es/core/streams/decode.js","../../node_modules/pdf-lib/es/core/embedders/PDFPageEmbedder.js","../../node_modules/pdf-lib/es/core/interactive/ViewerPreferences.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroField.js","../../node_modules/pdf-lib/es/core/annotation/BorderStyle.js","../../node_modules/pdf-lib/es/core/annotation/PDFAnnotation.js","../../node_modules/pdf-lib/es/core/annotation/AppearanceCharacteristics.js","../../node_modules/pdf-lib/es/core/annotation/PDFWidgetAnnotation.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroTerminal.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroButton.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroCheckBox.js","../../node_modules/pdf-lib/es/core/acroform/flags.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroChoice.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroComboBox.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroNonTerminal.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroSignature.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroText.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroPushButton.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroRadioButton.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroListBox.js","../../node_modules/pdf-lib/es/core/acroform/utils.js","../../node_modules/pdf-lib/es/core/acroform/PDFAcroForm.js","../../node_modules/pdf-lib/es/core/structures/PDFCatalog.js","../../node_modules/pdf-lib/es/core/structures/PDFPageTree.js","../../node_modules/pdf-lib/es/core/syntax/Numeric.js","../../node_modules/pdf-lib/es/core/parser/BaseParser.js","../../node_modules/pdf-lib/es/core/parser/ByteStream.js","../../node_modules/pdf-lib/es/core/syntax/Keywords.js","../../node_modules/pdf-lib/es/core/parser/PDFObjectParser.js","../../node_modules/pdf-lib/es/core/parser/PDFObjectStreamParser.js","../../node_modules/pdf-lib/es/core/parser/PDFXRefStreamParser.js","../../node_modules/pdf-lib/es/core/parser/PDFParser.js","../../node_modules/pdf-lib/es/core/annotation/flags.js","../../node_modules/pdf-lib/es/core/embedders/JavaScriptEmbedder.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport { arrayAsString } from \"../utils\";\nvar MethodNotImplementedError = /** @class */ (function (_super) {\n    __extends(MethodNotImplementedError, _super);\n    function MethodNotImplementedError(className, methodName) {\n        var _this = this;\n        var msg = \"Method \" + className + \".\" + methodName + \"() not implemented\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MethodNotImplementedError;\n}(Error));\nexport { MethodNotImplementedError };\nvar PrivateConstructorError = /** @class */ (function (_super) {\n    __extends(PrivateConstructorError, _super);\n    function PrivateConstructorError(className) {\n        var _this = this;\n        var msg = \"Cannot construct \" + className + \" - it has a private constructor\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return PrivateConstructorError;\n}(Error));\nexport { PrivateConstructorError };\nvar UnexpectedObjectTypeError = /** @class */ (function (_super) {\n    __extends(UnexpectedObjectTypeError, _super);\n    function UnexpectedObjectTypeError(expected, actual) {\n        var _this = this;\n        var name = function (t) { var _a, _b; return (_a = t === null || t === void 0 ? void 0 : t.name) !== null && _a !== void 0 ? _a : (_b = t === null || t === void 0 ? void 0 : t.constructor) === null || _b === void 0 ? void 0 : _b.name; };\n        var expectedTypes = Array.isArray(expected)\n            ? expected.map(name)\n            : [name(expected)];\n        var msg = \"Expected instance of \" + expectedTypes.join(' or ') + \", \" +\n            (\"but got instance of \" + (actual ? name(actual) : actual));\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return UnexpectedObjectTypeError;\n}(Error));\nexport { UnexpectedObjectTypeError };\nvar UnsupportedEncodingError = /** @class */ (function (_super) {\n    __extends(UnsupportedEncodingError, _super);\n    function UnsupportedEncodingError(encoding) {\n        var _this = this;\n        var msg = encoding + \" stream encoding not supported\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return UnsupportedEncodingError;\n}(Error));\nexport { UnsupportedEncodingError };\nvar ReparseError = /** @class */ (function (_super) {\n    __extends(ReparseError, _super);\n    function ReparseError(className, methodName) {\n        var _this = this;\n        var msg = \"Cannot call \" + className + \".\" + methodName + \"() more than once\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return ReparseError;\n}(Error));\nexport { ReparseError };\nvar MissingCatalogError = /** @class */ (function (_super) {\n    __extends(MissingCatalogError, _super);\n    function MissingCatalogError(ref) {\n        var _this = this;\n        var msg = \"Missing catalog (ref=\" + ref + \")\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingCatalogError;\n}(Error));\nexport { MissingCatalogError };\nvar MissingPageContentsEmbeddingError = /** @class */ (function (_super) {\n    __extends(MissingPageContentsEmbeddingError, _super);\n    function MissingPageContentsEmbeddingError() {\n        var _this = this;\n        var msg = \"Can't embed page with missing Contents\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingPageContentsEmbeddingError;\n}(Error));\nexport { MissingPageContentsEmbeddingError };\nvar UnrecognizedStreamTypeError = /** @class */ (function (_super) {\n    __extends(UnrecognizedStreamTypeError, _super);\n    function UnrecognizedStreamTypeError(stream) {\n        var _a, _b, _c;\n        var _this = this;\n        var streamType = (_c = (_b = (_a = stream === null || stream === void 0 ? void 0 : stream.contructor) === null || _a === void 0 ? void 0 : _a.name) !== null && _b !== void 0 ? _b : stream === null || stream === void 0 ? void 0 : stream.name) !== null && _c !== void 0 ? _c : stream;\n        var msg = \"Unrecognized stream type: \" + streamType;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return UnrecognizedStreamTypeError;\n}(Error));\nexport { UnrecognizedStreamTypeError };\nvar PageEmbeddingMismatchedContextError = /** @class */ (function (_super) {\n    __extends(PageEmbeddingMismatchedContextError, _super);\n    function PageEmbeddingMismatchedContextError() {\n        var _this = this;\n        var msg = \"Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return PageEmbeddingMismatchedContextError;\n}(Error));\nexport { PageEmbeddingMismatchedContextError };\nvar PDFArrayIsNotRectangleError = /** @class */ (function (_super) {\n    __extends(PDFArrayIsNotRectangleError, _super);\n    function PDFArrayIsNotRectangleError(size) {\n        var _this = this;\n        var msg = \"Attempted to convert PDFArray with \" + size + \" elements to rectangle, but must have exactly 4 elements.\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return PDFArrayIsNotRectangleError;\n}(Error));\nexport { PDFArrayIsNotRectangleError };\nvar InvalidPDFDateStringError = /** @class */ (function (_super) {\n    __extends(InvalidPDFDateStringError, _super);\n    function InvalidPDFDateStringError(value) {\n        var _this = this;\n        var msg = \"Attempted to convert \\\"\" + value + \"\\\" to a date, but it does not match the PDF date string format.\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidPDFDateStringError;\n}(Error));\nexport { InvalidPDFDateStringError };\nvar InvalidTargetIndexError = /** @class */ (function (_super) {\n    __extends(InvalidTargetIndexError, _super);\n    function InvalidTargetIndexError(targetIndex, Count) {\n        var _this = this;\n        var msg = \"Invalid targetIndex specified: targetIndex=\" + targetIndex + \" must be less than Count=\" + Count;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidTargetIndexError;\n}(Error));\nexport { InvalidTargetIndexError };\nvar CorruptPageTreeError = /** @class */ (function (_super) {\n    __extends(CorruptPageTreeError, _super);\n    function CorruptPageTreeError(targetIndex, operation) {\n        var _this = this;\n        var msg = \"Failed to \" + operation + \" at targetIndex=\" + targetIndex + \" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return CorruptPageTreeError;\n}(Error));\nexport { CorruptPageTreeError };\nvar IndexOutOfBoundsError = /** @class */ (function (_super) {\n    __extends(IndexOutOfBoundsError, _super);\n    function IndexOutOfBoundsError(index, min, max) {\n        var _this = this;\n        var msg = \"index should be at least \" + min + \" and at most \" + max + \", but was actually \" + index;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return IndexOutOfBoundsError;\n}(Error));\nexport { IndexOutOfBoundsError };\nvar InvalidAcroFieldValueError = /** @class */ (function (_super) {\n    __extends(InvalidAcroFieldValueError, _super);\n    function InvalidAcroFieldValueError() {\n        var _this = this;\n        var msg = \"Attempted to set invalid field value\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return InvalidAcroFieldValueError;\n}(Error));\nexport { InvalidAcroFieldValueError };\nvar MultiSelectValueError = /** @class */ (function (_super) {\n    __extends(MultiSelectValueError, _super);\n    function MultiSelectValueError() {\n        var _this = this;\n        var msg = \"Attempted to select multiple values for single-select field\";\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MultiSelectValueError;\n}(Error));\nexport { MultiSelectValueError };\nvar MissingDAEntryError = /** @class */ (function (_super) {\n    __extends(MissingDAEntryError, _super);\n    function MissingDAEntryError(fieldName) {\n        var _this = this;\n        var msg = \"No /DA (default appearance) entry found for field: \" + fieldName;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingDAEntryError;\n}(Error));\nexport { MissingDAEntryError };\nvar MissingTfOperatorError = /** @class */ (function (_super) {\n    __extends(MissingTfOperatorError, _super);\n    function MissingTfOperatorError(fieldName) {\n        var _this = this;\n        var msg = \"No Tf operator found for DA of field: \" + fieldName;\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return MissingTfOperatorError;\n}(Error));\nexport { MissingTfOperatorError };\nvar NumberParsingError = /** @class */ (function (_super) {\n    __extends(NumberParsingError, _super);\n    function NumberParsingError(pos, value) {\n        var _this = this;\n        var msg = \"Failed to parse number \" +\n            (\"(line:\" + pos.line + \" col:\" + pos.column + \" offset=\" + pos.offset + \"): \\\"\" + value + \"\\\"\");\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return NumberParsingError;\n}(Error));\nexport { NumberParsingError };\nvar PDFParsingError = /** @class */ (function (_super) {\n    __extends(PDFParsingError, _super);\n    function PDFParsingError(pos, details) {\n        var _this = this;\n        var msg = \"Failed to parse PDF document \" +\n            (\"(line:\" + pos.line + \" col:\" + pos.column + \" offset=\" + pos.offset + \"): \" + details);\n        _this = _super.call(this, msg) || this;\n        return _this;\n    }\n    return PDFParsingError;\n}(Error));\nexport { PDFParsingError };\nvar NextByteAssertionError = /** @class */ (function (_super) {\n    __extends(NextByteAssertionError, _super);\n    function NextByteAssertionError(pos, expectedByte, actualByte) {\n        var _this = this;\n        var msg = \"Expected next byte to be \" + expectedByte + \" but it was actually \" + actualByte;\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return NextByteAssertionError;\n}(PDFParsingError));\nexport { NextByteAssertionError };\nvar PDFObjectParsingError = /** @class */ (function (_super) {\n    __extends(PDFObjectParsingError, _super);\n    function PDFObjectParsingError(pos, byte) {\n        var _this = this;\n        var msg = \"Failed to parse PDF object starting with the following byte: \" + byte;\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return PDFObjectParsingError;\n}(PDFParsingError));\nexport { PDFObjectParsingError };\nvar PDFInvalidObjectParsingError = /** @class */ (function (_super) {\n    __extends(PDFInvalidObjectParsingError, _super);\n    function PDFInvalidObjectParsingError(pos) {\n        var _this = this;\n        var msg = \"Failed to parse invalid PDF object\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return PDFInvalidObjectParsingError;\n}(PDFParsingError));\nexport { PDFInvalidObjectParsingError };\nvar PDFStreamParsingError = /** @class */ (function (_super) {\n    __extends(PDFStreamParsingError, _super);\n    function PDFStreamParsingError(pos) {\n        var _this = this;\n        var msg = \"Failed to parse PDF stream\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return PDFStreamParsingError;\n}(PDFParsingError));\nexport { PDFStreamParsingError };\nvar UnbalancedParenthesisError = /** @class */ (function (_super) {\n    __extends(UnbalancedParenthesisError, _super);\n    function UnbalancedParenthesisError(pos) {\n        var _this = this;\n        var msg = \"Failed to parse PDF literal string due to unbalanced parenthesis\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return UnbalancedParenthesisError;\n}(PDFParsingError));\nexport { UnbalancedParenthesisError };\nvar StalledParserError = /** @class */ (function (_super) {\n    __extends(StalledParserError, _super);\n    function StalledParserError(pos) {\n        var _this = this;\n        var msg = \"Parser stalled\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return StalledParserError;\n}(PDFParsingError));\nexport { StalledParserError };\nvar MissingPDFHeaderError = /** @class */ (function (_super) {\n    __extends(MissingPDFHeaderError, _super);\n    function MissingPDFHeaderError(pos) {\n        var _this = this;\n        var msg = \"No PDF header found\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return MissingPDFHeaderError;\n}(PDFParsingError));\nexport { MissingPDFHeaderError };\nvar MissingKeywordError = /** @class */ (function (_super) {\n    __extends(MissingKeywordError, _super);\n    function MissingKeywordError(pos, keyword) {\n        var _this = this;\n        var msg = \"Did not find expected keyword '\" + arrayAsString(keyword) + \"'\";\n        _this = _super.call(this, pos, msg) || this;\n        return _this;\n    }\n    return MissingKeywordError;\n}(PDFParsingError));\nexport { MissingKeywordError };\n//# sourceMappingURL=errors.js.map","var CharCodes;\n(function (CharCodes) {\n    CharCodes[CharCodes[\"Null\"] = 0] = \"Null\";\n    CharCodes[CharCodes[\"Backspace\"] = 8] = \"Backspace\";\n    CharCodes[CharCodes[\"Tab\"] = 9] = \"Tab\";\n    CharCodes[CharCodes[\"Newline\"] = 10] = \"Newline\";\n    CharCodes[CharCodes[\"FormFeed\"] = 12] = \"FormFeed\";\n    CharCodes[CharCodes[\"CarriageReturn\"] = 13] = \"CarriageReturn\";\n    CharCodes[CharCodes[\"Space\"] = 32] = \"Space\";\n    CharCodes[CharCodes[\"ExclamationPoint\"] = 33] = \"ExclamationPoint\";\n    CharCodes[CharCodes[\"Hash\"] = 35] = \"Hash\";\n    CharCodes[CharCodes[\"Percent\"] = 37] = \"Percent\";\n    CharCodes[CharCodes[\"LeftParen\"] = 40] = \"LeftParen\";\n    CharCodes[CharCodes[\"RightParen\"] = 41] = \"RightParen\";\n    CharCodes[CharCodes[\"Plus\"] = 43] = \"Plus\";\n    CharCodes[CharCodes[\"Minus\"] = 45] = \"Minus\";\n    CharCodes[CharCodes[\"Dash\"] = 45] = \"Dash\";\n    CharCodes[CharCodes[\"Period\"] = 46] = \"Period\";\n    CharCodes[CharCodes[\"ForwardSlash\"] = 47] = \"ForwardSlash\";\n    CharCodes[CharCodes[\"Zero\"] = 48] = \"Zero\";\n    CharCodes[CharCodes[\"One\"] = 49] = \"One\";\n    CharCodes[CharCodes[\"Two\"] = 50] = \"Two\";\n    CharCodes[CharCodes[\"Three\"] = 51] = \"Three\";\n    CharCodes[CharCodes[\"Four\"] = 52] = \"Four\";\n    CharCodes[CharCodes[\"Five\"] = 53] = \"Five\";\n    CharCodes[CharCodes[\"Six\"] = 54] = \"Six\";\n    CharCodes[CharCodes[\"Seven\"] = 55] = \"Seven\";\n    CharCodes[CharCodes[\"Eight\"] = 56] = \"Eight\";\n    CharCodes[CharCodes[\"Nine\"] = 57] = \"Nine\";\n    CharCodes[CharCodes[\"LessThan\"] = 60] = \"LessThan\";\n    CharCodes[CharCodes[\"GreaterThan\"] = 62] = \"GreaterThan\";\n    CharCodes[CharCodes[\"A\"] = 65] = \"A\";\n    CharCodes[CharCodes[\"D\"] = 68] = \"D\";\n    CharCodes[CharCodes[\"E\"] = 69] = \"E\";\n    CharCodes[CharCodes[\"F\"] = 70] = \"F\";\n    CharCodes[CharCodes[\"O\"] = 79] = \"O\";\n    CharCodes[CharCodes[\"P\"] = 80] = \"P\";\n    CharCodes[CharCodes[\"R\"] = 82] = \"R\";\n    CharCodes[CharCodes[\"LeftSquareBracket\"] = 91] = \"LeftSquareBracket\";\n    CharCodes[CharCodes[\"BackSlash\"] = 92] = \"BackSlash\";\n    CharCodes[CharCodes[\"RightSquareBracket\"] = 93] = \"RightSquareBracket\";\n    CharCodes[CharCodes[\"a\"] = 97] = \"a\";\n    CharCodes[CharCodes[\"b\"] = 98] = \"b\";\n    CharCodes[CharCodes[\"d\"] = 100] = \"d\";\n    CharCodes[CharCodes[\"e\"] = 101] = \"e\";\n    CharCodes[CharCodes[\"f\"] = 102] = \"f\";\n    CharCodes[CharCodes[\"i\"] = 105] = \"i\";\n    CharCodes[CharCodes[\"j\"] = 106] = \"j\";\n    CharCodes[CharCodes[\"l\"] = 108] = \"l\";\n    CharCodes[CharCodes[\"m\"] = 109] = \"m\";\n    CharCodes[CharCodes[\"n\"] = 110] = \"n\";\n    CharCodes[CharCodes[\"o\"] = 111] = \"o\";\n    CharCodes[CharCodes[\"r\"] = 114] = \"r\";\n    CharCodes[CharCodes[\"s\"] = 115] = \"s\";\n    CharCodes[CharCodes[\"t\"] = 116] = \"t\";\n    CharCodes[CharCodes[\"u\"] = 117] = \"u\";\n    CharCodes[CharCodes[\"x\"] = 120] = \"x\";\n    CharCodes[CharCodes[\"LeftCurly\"] = 123] = \"LeftCurly\";\n    CharCodes[CharCodes[\"RightCurly\"] = 125] = \"RightCurly\";\n    CharCodes[CharCodes[\"Tilde\"] = 126] = \"Tilde\";\n})(CharCodes || (CharCodes = {}));\nexport default CharCodes;\n//# sourceMappingURL=CharCodes.js.map","import CharCodes from \"../syntax/CharCodes\";\nimport { charFromCode, copyStringIntoBuffer } from \"../../utils\";\nvar PDFHeader = /** @class */ (function () {\n    function PDFHeader(major, minor) {\n        this.major = String(major);\n        this.minor = String(minor);\n    }\n    PDFHeader.prototype.toString = function () {\n        var bc = charFromCode(129);\n        return \"%PDF-\" + this.major + \".\" + this.minor + \"\\n%\" + bc + bc + bc + bc;\n    };\n    PDFHeader.prototype.sizeInBytes = function () {\n        return 12 + this.major.length + this.minor.length;\n    };\n    PDFHeader.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.Percent;\n        buffer[offset++] = CharCodes.P;\n        buffer[offset++] = CharCodes.D;\n        buffer[offset++] = CharCodes.F;\n        buffer[offset++] = CharCodes.Dash;\n        offset += copyStringIntoBuffer(this.major, buffer, offset);\n        buffer[offset++] = CharCodes.Period;\n        offset += copyStringIntoBuffer(this.minor, buffer, offset);\n        buffer[offset++] = CharCodes.Newline;\n        buffer[offset++] = CharCodes.Percent;\n        buffer[offset++] = 129;\n        buffer[offset++] = 129;\n        buffer[offset++] = 129;\n        buffer[offset++] = 129;\n        return offset - initialOffset;\n    };\n    PDFHeader.forVersion = function (major, minor) {\n        return new PDFHeader(major, minor);\n    };\n    return PDFHeader;\n}());\nexport default PDFHeader;\n//# sourceMappingURL=PDFHeader.js.map","import { MethodNotImplementedError } from \"../errors\";\nvar PDFObject = /** @class */ (function () {\n    function PDFObject() {\n    }\n    PDFObject.prototype.clone = function (_context) {\n        throw new MethodNotImplementedError(this.constructor.name, 'clone');\n    };\n    PDFObject.prototype.toString = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'toString');\n    };\n    PDFObject.prototype.sizeInBytes = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'sizeInBytes');\n    };\n    PDFObject.prototype.copyBytesInto = function (_buffer, _offset) {\n        throw new MethodNotImplementedError(this.constructor.name, 'copyBytesInto');\n    };\n    return PDFObject;\n}());\nexport default PDFObject;\n//# sourceMappingURL=PDFObject.js.map","import { __extends } from \"tslib\";\nimport { copyStringIntoBuffer, numberToString } from \"../../utils/index\";\nimport PDFObject from \"./PDFObject\";\nvar PDFNumber = /** @class */ (function (_super) {\n    __extends(PDFNumber, _super);\n    function PDFNumber(value) {\n        var _this = _super.call(this) || this;\n        _this.numberValue = value;\n        _this.stringValue = numberToString(value);\n        return _this;\n    }\n    PDFNumber.prototype.asNumber = function () {\n        return this.numberValue;\n    };\n    /** @deprecated in favor of [[PDFNumber.asNumber]] */\n    PDFNumber.prototype.value = function () {\n        return this.numberValue;\n    };\n    PDFNumber.prototype.clone = function () {\n        return PDFNumber.of(this.numberValue);\n    };\n    PDFNumber.prototype.toString = function () {\n        return this.stringValue;\n    };\n    PDFNumber.prototype.sizeInBytes = function () {\n        return this.stringValue.length;\n    };\n    PDFNumber.prototype.copyBytesInto = function (buffer, offset) {\n        offset += copyStringIntoBuffer(this.stringValue, buffer, offset);\n        return this.stringValue.length;\n    };\n    PDFNumber.of = function (value) { return new PDFNumber(value); };\n    return PDFNumber;\n}(PDFObject));\nexport default PDFNumber;\n//# sourceMappingURL=PDFNumber.js.map","import { __extends, __spreadArrays } from \"tslib\";\nimport PDFNumber from \"./PDFNumber\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { PDFArrayIsNotRectangleError } from \"../errors\";\nvar PDFArray = /** @class */ (function (_super) {\n    __extends(PDFArray, _super);\n    function PDFArray(context) {\n        var _this = _super.call(this) || this;\n        _this.array = [];\n        _this.context = context;\n        return _this;\n    }\n    PDFArray.prototype.size = function () {\n        return this.array.length;\n    };\n    PDFArray.prototype.push = function (object) {\n        this.array.push(object);\n    };\n    PDFArray.prototype.insert = function (index, object) {\n        this.array.splice(index, 0, object);\n    };\n    PDFArray.prototype.indexOf = function (object) {\n        var index = this.array.indexOf(object);\n        return index === -1 ? undefined : index;\n    };\n    PDFArray.prototype.remove = function (index) {\n        this.array.splice(index, 1);\n    };\n    PDFArray.prototype.set = function (idx, object) {\n        this.array[idx] = object;\n    };\n    PDFArray.prototype.get = function (index) {\n        return this.array[index];\n    };\n    PDFArray.prototype.lookupMaybe = function (index) {\n        var _a;\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        return (_a = this.context).lookupMaybe.apply(_a, __spreadArrays([this.get(index)], types));\n    };\n    PDFArray.prototype.lookup = function (index) {\n        var _a;\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        return (_a = this.context).lookup.apply(_a, __spreadArrays([this.get(index)], types));\n    };\n    PDFArray.prototype.asRectangle = function () {\n        if (this.size() !== 4)\n            throw new PDFArrayIsNotRectangleError(this.size());\n        var lowerLeftX = this.lookup(0, PDFNumber).asNumber();\n        var lowerLeftY = this.lookup(1, PDFNumber).asNumber();\n        var upperRightX = this.lookup(2, PDFNumber).asNumber();\n        var upperRightY = this.lookup(3, PDFNumber).asNumber();\n        var x = lowerLeftX;\n        var y = lowerLeftY;\n        var width = upperRightX - lowerLeftX;\n        var height = upperRightY - lowerLeftY;\n        return { x: x, y: y, width: width, height: height };\n    };\n    PDFArray.prototype.asArray = function () {\n        return this.array.slice();\n    };\n    PDFArray.prototype.clone = function (context) {\n        var clone = PDFArray.withContext(context || this.context);\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            clone.push(this.array[idx]);\n        }\n        return clone;\n    };\n    PDFArray.prototype.toString = function () {\n        var arrayString = '[ ';\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            arrayString += this.get(idx).toString();\n            arrayString += ' ';\n        }\n        arrayString += ']';\n        return arrayString;\n    };\n    PDFArray.prototype.sizeInBytes = function () {\n        var size = 3;\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            size += this.get(idx).sizeInBytes() + 1;\n        }\n        return size;\n    };\n    PDFArray.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.LeftSquareBracket;\n        buffer[offset++] = CharCodes.Space;\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            offset += this.get(idx).copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n        }\n        buffer[offset++] = CharCodes.RightSquareBracket;\n        return offset - initialOffset;\n    };\n    PDFArray.prototype.scalePDFNumbers = function (x, y) {\n        for (var idx = 0, len = this.size(); idx < len; idx++) {\n            var el = this.lookup(idx);\n            if (el instanceof PDFNumber) {\n                var factor = idx % 2 === 0 ? x : y;\n                this.set(idx, PDFNumber.of(el.asNumber() * factor));\n            }\n        }\n    };\n    PDFArray.withContext = function (context) { return new PDFArray(context); };\n    return PDFArray;\n}(PDFObject));\nexport default PDFArray;\n//# sourceMappingURL=PDFArray.js.map","import { __extends } from \"tslib\";\nimport { PrivateConstructorError } from \"../errors\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar ENFORCER = {};\nvar PDFBool = /** @class */ (function (_super) {\n    __extends(PDFBool, _super);\n    function PDFBool(enforcer, value) {\n        var _this = this;\n        if (enforcer !== ENFORCER)\n            throw new PrivateConstructorError('PDFBool');\n        _this = _super.call(this) || this;\n        _this.value = value;\n        return _this;\n    }\n    PDFBool.prototype.asBoolean = function () {\n        return this.value;\n    };\n    PDFBool.prototype.clone = function () {\n        return this;\n    };\n    PDFBool.prototype.toString = function () {\n        return String(this.value);\n    };\n    PDFBool.prototype.sizeInBytes = function () {\n        return this.value ? 4 : 5;\n    };\n    PDFBool.prototype.copyBytesInto = function (buffer, offset) {\n        if (this.value) {\n            buffer[offset++] = CharCodes.t;\n            buffer[offset++] = CharCodes.r;\n            buffer[offset++] = CharCodes.u;\n            buffer[offset++] = CharCodes.e;\n            return 4;\n        }\n        else {\n            buffer[offset++] = CharCodes.f;\n            buffer[offset++] = CharCodes.a;\n            buffer[offset++] = CharCodes.l;\n            buffer[offset++] = CharCodes.s;\n            buffer[offset++] = CharCodes.e;\n            return 5;\n        }\n    };\n    PDFBool.True = new PDFBool(ENFORCER, true);\n    PDFBool.False = new PDFBool(ENFORCER, false);\n    return PDFBool;\n}(PDFObject));\nexport default PDFBool;\n//# sourceMappingURL=PDFBool.js.map","import CharCodes from \"./CharCodes\";\nexport var IsDelimiter = new Uint8Array(256);\nIsDelimiter[CharCodes.LeftParen] = 1;\nIsDelimiter[CharCodes.RightParen] = 1;\nIsDelimiter[CharCodes.LessThan] = 1;\nIsDelimiter[CharCodes.GreaterThan] = 1;\nIsDelimiter[CharCodes.LeftSquareBracket] = 1;\nIsDelimiter[CharCodes.RightSquareBracket] = 1;\nIsDelimiter[CharCodes.LeftCurly] = 1;\nIsDelimiter[CharCodes.RightCurly] = 1;\nIsDelimiter[CharCodes.ForwardSlash] = 1;\nIsDelimiter[CharCodes.Percent] = 1;\n//# sourceMappingURL=Delimiters.js.map","import CharCodes from \"./CharCodes\";\nexport var IsWhitespace = new Uint8Array(256);\nIsWhitespace[CharCodes.Null] = 1;\nIsWhitespace[CharCodes.Tab] = 1;\nIsWhitespace[CharCodes.Newline] = 1;\nIsWhitespace[CharCodes.FormFeed] = 1;\nIsWhitespace[CharCodes.CarriageReturn] = 1;\nIsWhitespace[CharCodes.Space] = 1;\n//# sourceMappingURL=Whitespace.js.map","import CharCodes from \"./CharCodes\";\nimport { IsDelimiter } from \"./Delimiters\";\nimport { IsWhitespace } from \"./Whitespace\";\nexport var IsIrregular = new Uint8Array(256);\nfor (var idx = 0, len = 256; idx < len; idx++) {\n    IsIrregular[idx] = IsWhitespace[idx] || IsDelimiter[idx] ? 1 : 0;\n}\nIsIrregular[CharCodes.Hash] = 1;\n//# sourceMappingURL=Irregular.js.map","import { __extends } from \"tslib\";\nimport { PrivateConstructorError } from \"../errors\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { IsIrregular } from \"../syntax/Irregular\";\nimport { charFromHexCode, copyStringIntoBuffer, toCharCode, toHexString, } from \"../../utils\";\nvar decodeName = function (name) {\n    return name.replace(/#([\\dABCDEF]{2})/g, function (_, hex) { return charFromHexCode(hex); });\n};\nvar isRegularChar = function (charCode) {\n    return charCode >= CharCodes.ExclamationPoint &&\n        charCode <= CharCodes.Tilde &&\n        !IsIrregular[charCode];\n};\nvar ENFORCER = {};\nvar pool = new Map();\nvar PDFName = /** @class */ (function (_super) {\n    __extends(PDFName, _super);\n    function PDFName(enforcer, name) {\n        var _this = this;\n        if (enforcer !== ENFORCER)\n            throw new PrivateConstructorError('PDFName');\n        _this = _super.call(this) || this;\n        var encodedName = '/';\n        for (var idx = 0, len = name.length; idx < len; idx++) {\n            var character = name[idx];\n            var code = toCharCode(character);\n            encodedName += isRegularChar(code) ? character : \"#\" + toHexString(code);\n        }\n        _this.encodedName = encodedName;\n        return _this;\n    }\n    PDFName.prototype.asBytes = function () {\n        var bytes = [];\n        var hex = '';\n        var escaped = false;\n        var pushByte = function (byte) {\n            if (byte !== undefined)\n                bytes.push(byte);\n            escaped = false;\n        };\n        for (var idx = 1, len = this.encodedName.length; idx < len; idx++) {\n            var char = this.encodedName[idx];\n            var byte = toCharCode(char);\n            var nextChar = this.encodedName[idx + 1];\n            if (!escaped) {\n                if (byte === CharCodes.Hash)\n                    escaped = true;\n                else\n                    pushByte(byte);\n            }\n            else {\n                if ((byte >= CharCodes.Zero && byte <= CharCodes.Nine) ||\n                    (byte >= CharCodes.a && byte <= CharCodes.f) ||\n                    (byte >= CharCodes.A && byte <= CharCodes.F)) {\n                    hex += char;\n                    if (hex.length === 2 ||\n                        !((nextChar >= '0' && nextChar <= '9') ||\n                            (nextChar >= 'a' && nextChar <= 'f') ||\n                            (nextChar >= 'A' && nextChar <= 'F'))) {\n                        pushByte(parseInt(hex, 16));\n                        hex = '';\n                    }\n                }\n                else {\n                    pushByte(byte);\n                }\n            }\n        }\n        return new Uint8Array(bytes);\n    };\n    // TODO: This should probably use `utf8Decode()`\n    // TODO: Polyfill Array.from?\n    PDFName.prototype.decodeText = function () {\n        var bytes = this.asBytes();\n        return String.fromCharCode.apply(String, Array.from(bytes));\n    };\n    PDFName.prototype.asString = function () {\n        return this.encodedName;\n    };\n    /** @deprecated in favor of [[PDFName.asString]] */\n    PDFName.prototype.value = function () {\n        return this.encodedName;\n    };\n    PDFName.prototype.clone = function () {\n        return this;\n    };\n    PDFName.prototype.toString = function () {\n        return this.encodedName;\n    };\n    PDFName.prototype.sizeInBytes = function () {\n        return this.encodedName.length;\n    };\n    PDFName.prototype.copyBytesInto = function (buffer, offset) {\n        offset += copyStringIntoBuffer(this.encodedName, buffer, offset);\n        return this.encodedName.length;\n    };\n    PDFName.of = function (name) {\n        var decodedValue = decodeName(name);\n        var instance = pool.get(decodedValue);\n        if (!instance) {\n            instance = new PDFName(ENFORCER, decodedValue);\n            pool.set(decodedValue, instance);\n        }\n        return instance;\n    };\n    /* tslint:disable member-ordering */\n    PDFName.Length = PDFName.of('Length');\n    PDFName.FlateDecode = PDFName.of('FlateDecode');\n    PDFName.Resources = PDFName.of('Resources');\n    PDFName.Font = PDFName.of('Font');\n    PDFName.XObject = PDFName.of('XObject');\n    PDFName.ExtGState = PDFName.of('ExtGState');\n    PDFName.Contents = PDFName.of('Contents');\n    PDFName.Type = PDFName.of('Type');\n    PDFName.Parent = PDFName.of('Parent');\n    PDFName.MediaBox = PDFName.of('MediaBox');\n    PDFName.Page = PDFName.of('Page');\n    PDFName.Annots = PDFName.of('Annots');\n    PDFName.TrimBox = PDFName.of('TrimBox');\n    PDFName.ArtBox = PDFName.of('ArtBox');\n    PDFName.BleedBox = PDFName.of('BleedBox');\n    PDFName.CropBox = PDFName.of('CropBox');\n    PDFName.Rotate = PDFName.of('Rotate');\n    PDFName.Title = PDFName.of('Title');\n    PDFName.Author = PDFName.of('Author');\n    PDFName.Subject = PDFName.of('Subject');\n    PDFName.Creator = PDFName.of('Creator');\n    PDFName.Keywords = PDFName.of('Keywords');\n    PDFName.Producer = PDFName.of('Producer');\n    PDFName.CreationDate = PDFName.of('CreationDate');\n    PDFName.ModDate = PDFName.of('ModDate');\n    return PDFName;\n}(PDFObject));\nexport default PDFName;\n//# sourceMappingURL=PDFName.js.map","import { __extends } from \"tslib\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar PDFNull = /** @class */ (function (_super) {\n    __extends(PDFNull, _super);\n    function PDFNull() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFNull.prototype.asNull = function () {\n        return null;\n    };\n    PDFNull.prototype.clone = function () {\n        return this;\n    };\n    PDFNull.prototype.toString = function () {\n        return 'null';\n    };\n    PDFNull.prototype.sizeInBytes = function () {\n        return 4;\n    };\n    PDFNull.prototype.copyBytesInto = function (buffer, offset) {\n        buffer[offset++] = CharCodes.n;\n        buffer[offset++] = CharCodes.u;\n        buffer[offset++] = CharCodes.l;\n        buffer[offset++] = CharCodes.l;\n        return 4;\n    };\n    return PDFNull;\n}(PDFObject));\nexport default new PDFNull();\n//# sourceMappingURL=PDFNull.js.map","import { __extends, __spreadArrays } from \"tslib\";\nimport PDFName from \"./PDFName\";\nimport PDFNull from \"./PDFNull\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar PDFDict = /** @class */ (function (_super) {\n    __extends(PDFDict, _super);\n    function PDFDict(map, context) {\n        var _this = _super.call(this) || this;\n        _this.dict = map;\n        _this.context = context;\n        return _this;\n    }\n    PDFDict.prototype.keys = function () {\n        return Array.from(this.dict.keys());\n    };\n    PDFDict.prototype.values = function () {\n        return Array.from(this.dict.values());\n    };\n    PDFDict.prototype.entries = function () {\n        return Array.from(this.dict.entries());\n    };\n    PDFDict.prototype.set = function (key, value) {\n        this.dict.set(key, value);\n    };\n    PDFDict.prototype.get = function (key, \n    // TODO: `preservePDFNull` is for backwards compatibility. Should be\n    // removed in next breaking API change.\n    preservePDFNull) {\n        if (preservePDFNull === void 0) { preservePDFNull = false; }\n        var value = this.dict.get(key);\n        if (value === PDFNull && !preservePDFNull)\n            return undefined;\n        return value;\n    };\n    PDFDict.prototype.has = function (key) {\n        var value = this.dict.get(key);\n        return value !== undefined && value !== PDFNull;\n    };\n    PDFDict.prototype.lookupMaybe = function (key) {\n        var _a;\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        // TODO: `preservePDFNull` is for backwards compatibility. Should be\n        // removed in next breaking API change.\n        var preservePDFNull = types.includes(PDFNull);\n        var value = (_a = this.context).lookupMaybe.apply(_a, __spreadArrays([this.get(key, preservePDFNull)], types));\n        if (value === PDFNull && !preservePDFNull)\n            return undefined;\n        return value;\n    };\n    PDFDict.prototype.lookup = function (key) {\n        var _a;\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        // TODO: `preservePDFNull` is for backwards compatibility. Should be\n        // removed in next breaking API change.\n        var preservePDFNull = types.includes(PDFNull);\n        var value = (_a = this.context).lookup.apply(_a, __spreadArrays([this.get(key, preservePDFNull)], types));\n        if (value === PDFNull && !preservePDFNull)\n            return undefined;\n        return value;\n    };\n    PDFDict.prototype.delete = function (key) {\n        return this.dict.delete(key);\n    };\n    PDFDict.prototype.asMap = function () {\n        return new Map(this.dict);\n    };\n    /** Generate a random key that doesn't exist in current key set */\n    PDFDict.prototype.uniqueKey = function (tag) {\n        if (tag === void 0) { tag = ''; }\n        var existingKeys = this.keys();\n        var key = PDFName.of(this.context.addRandomSuffix(tag, 10));\n        while (existingKeys.includes(key)) {\n            key = PDFName.of(this.context.addRandomSuffix(tag, 10));\n        }\n        return key;\n    };\n    PDFDict.prototype.clone = function (context) {\n        var clone = PDFDict.withContext(context || this.context);\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            clone.set(key, value);\n        }\n        return clone;\n    };\n    PDFDict.prototype.toString = function () {\n        var dictString = '<<\\n';\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            dictString += key.toString() + ' ' + value.toString() + '\\n';\n        }\n        dictString += '>>';\n        return dictString;\n    };\n    PDFDict.prototype.sizeInBytes = function () {\n        var size = 5;\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            size += key.sizeInBytes() + value.sizeInBytes() + 2;\n        }\n        return size;\n    };\n    PDFDict.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.LessThan;\n        buffer[offset++] = CharCodes.LessThan;\n        buffer[offset++] = CharCodes.Newline;\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            offset += key.copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n            offset += value.copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Newline;\n        }\n        buffer[offset++] = CharCodes.GreaterThan;\n        buffer[offset++] = CharCodes.GreaterThan;\n        return offset - initialOffset;\n    };\n    PDFDict.withContext = function (context) { return new PDFDict(new Map(), context); };\n    PDFDict.fromMapWithContext = function (map, context) {\n        return new PDFDict(map, context);\n    };\n    return PDFDict;\n}(PDFObject));\nexport default PDFDict;\n//# sourceMappingURL=PDFDict.js.map","import { __extends } from \"tslib\";\nimport { MethodNotImplementedError } from \"../errors\";\nimport PDFName from \"./PDFName\";\nimport PDFNumber from \"./PDFNumber\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar PDFStream = /** @class */ (function (_super) {\n    __extends(PDFStream, _super);\n    function PDFStream(dict) {\n        var _this = _super.call(this) || this;\n        _this.dict = dict;\n        return _this;\n    }\n    PDFStream.prototype.clone = function (_context) {\n        throw new MethodNotImplementedError(this.constructor.name, 'clone');\n    };\n    PDFStream.prototype.getContentsString = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'getContentsString');\n    };\n    PDFStream.prototype.getContents = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'getContents');\n    };\n    PDFStream.prototype.getContentsSize = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'getContentsSize');\n    };\n    PDFStream.prototype.updateDict = function () {\n        var contentsSize = this.getContentsSize();\n        this.dict.set(PDFName.Length, PDFNumber.of(contentsSize));\n    };\n    PDFStream.prototype.sizeInBytes = function () {\n        this.updateDict();\n        return this.dict.sizeInBytes() + this.getContentsSize() + 18;\n    };\n    PDFStream.prototype.toString = function () {\n        this.updateDict();\n        var streamString = this.dict.toString();\n        streamString += '\\nstream\\n';\n        streamString += this.getContentsString();\n        streamString += '\\nendstream';\n        return streamString;\n    };\n    PDFStream.prototype.copyBytesInto = function (buffer, offset) {\n        this.updateDict();\n        var initialOffset = offset;\n        offset += this.dict.copyBytesInto(buffer, offset);\n        buffer[offset++] = CharCodes.Newline;\n        buffer[offset++] = CharCodes.s;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.a;\n        buffer[offset++] = CharCodes.m;\n        buffer[offset++] = CharCodes.Newline;\n        var contents = this.getContents();\n        for (var idx = 0, len = contents.length; idx < len; idx++) {\n            buffer[offset++] = contents[idx];\n        }\n        buffer[offset++] = CharCodes.Newline;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.n;\n        buffer[offset++] = CharCodes.d;\n        buffer[offset++] = CharCodes.s;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.a;\n        buffer[offset++] = CharCodes.m;\n        return offset - initialOffset;\n    };\n    return PDFStream;\n}(PDFObject));\nexport default PDFStream;\n//# sourceMappingURL=PDFStream.js.map","import { __extends } from \"tslib\";\nimport PDFStream from \"./PDFStream\";\nimport { arrayAsString } from \"../../utils\";\nvar PDFRawStream = /** @class */ (function (_super) {\n    __extends(PDFRawStream, _super);\n    function PDFRawStream(dict, contents) {\n        var _this = _super.call(this, dict) || this;\n        _this.contents = contents;\n        return _this;\n    }\n    PDFRawStream.prototype.asUint8Array = function () {\n        return this.contents.slice();\n    };\n    PDFRawStream.prototype.clone = function (context) {\n        return PDFRawStream.of(this.dict.clone(context), this.contents.slice());\n    };\n    PDFRawStream.prototype.getContentsString = function () {\n        return arrayAsString(this.contents);\n    };\n    PDFRawStream.prototype.getContents = function () {\n        return this.contents;\n    };\n    PDFRawStream.prototype.getContentsSize = function () {\n        return this.contents.length;\n    };\n    PDFRawStream.of = function (dict, contents) {\n        return new PDFRawStream(dict, contents);\n    };\n    return PDFRawStream;\n}(PDFStream));\nexport default PDFRawStream;\n//# sourceMappingURL=PDFRawStream.js.map","import { __extends } from \"tslib\";\nimport { PrivateConstructorError } from \"../errors\";\nimport PDFObject from \"./PDFObject\";\nimport { copyStringIntoBuffer } from \"../../utils\";\nvar ENFORCER = {};\nvar pool = new Map();\nvar PDFRef = /** @class */ (function (_super) {\n    __extends(PDFRef, _super);\n    function PDFRef(enforcer, objectNumber, generationNumber) {\n        var _this = this;\n        if (enforcer !== ENFORCER)\n            throw new PrivateConstructorError('PDFRef');\n        _this = _super.call(this) || this;\n        _this.objectNumber = objectNumber;\n        _this.generationNumber = generationNumber;\n        _this.tag = objectNumber + \" \" + generationNumber + \" R\";\n        return _this;\n    }\n    PDFRef.prototype.clone = function () {\n        return this;\n    };\n    PDFRef.prototype.toString = function () {\n        return this.tag;\n    };\n    PDFRef.prototype.sizeInBytes = function () {\n        return this.tag.length;\n    };\n    PDFRef.prototype.copyBytesInto = function (buffer, offset) {\n        offset += copyStringIntoBuffer(this.tag, buffer, offset);\n        return this.tag.length;\n    };\n    PDFRef.of = function (objectNumber, generationNumber) {\n        if (generationNumber === void 0) { generationNumber = 0; }\n        var tag = objectNumber + \" \" + generationNumber + \" R\";\n        var instance = pool.get(tag);\n        if (!instance) {\n            instance = new PDFRef(ENFORCER, objectNumber, generationNumber);\n            pool.set(tag, instance);\n        }\n        return instance;\n    };\n    return PDFRef;\n}(PDFObject));\nexport default PDFRef;\n//# sourceMappingURL=PDFRef.js.map","import PDFObject from \"../objects/PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer } from \"../../utils\";\nvar PDFOperator = /** @class */ (function () {\n    function PDFOperator(name, args) {\n        this.name = name;\n        this.args = args || [];\n    }\n    PDFOperator.prototype.clone = function (context) {\n        var args = new Array(this.args.length);\n        for (var idx = 0, len = args.length; idx < len; idx++) {\n            var arg = this.args[idx];\n            args[idx] = arg instanceof PDFObject ? arg.clone(context) : arg;\n        }\n        return PDFOperator.of(this.name, args);\n    };\n    PDFOperator.prototype.toString = function () {\n        var value = '';\n        for (var idx = 0, len = this.args.length; idx < len; idx++) {\n            value += String(this.args[idx]) + ' ';\n        }\n        value += this.name;\n        return value;\n    };\n    PDFOperator.prototype.sizeInBytes = function () {\n        var size = 0;\n        for (var idx = 0, len = this.args.length; idx < len; idx++) {\n            var arg = this.args[idx];\n            size += (arg instanceof PDFObject ? arg.sizeInBytes() : arg.length) + 1;\n        }\n        size += this.name.length;\n        return size;\n    };\n    PDFOperator.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        for (var idx = 0, len = this.args.length; idx < len; idx++) {\n            var arg = this.args[idx];\n            if (arg instanceof PDFObject) {\n                offset += arg.copyBytesInto(buffer, offset);\n            }\n            else {\n                offset += copyStringIntoBuffer(arg, buffer, offset);\n            }\n            buffer[offset++] = CharCodes.Space;\n        }\n        offset += copyStringIntoBuffer(this.name, buffer, offset);\n        return offset - initialOffset;\n    };\n    PDFOperator.of = function (name, args) {\n        return new PDFOperator(name, args);\n    };\n    return PDFOperator;\n}());\nexport default PDFOperator;\n//# sourceMappingURL=PDFOperator.js.map","var PDFOperatorNames;\n(function (PDFOperatorNames) {\n    // Non Stroking Color Operators\n    PDFOperatorNames[\"NonStrokingColor\"] = \"sc\";\n    PDFOperatorNames[\"NonStrokingColorN\"] = \"scn\";\n    PDFOperatorNames[\"NonStrokingColorRgb\"] = \"rg\";\n    PDFOperatorNames[\"NonStrokingColorGray\"] = \"g\";\n    PDFOperatorNames[\"NonStrokingColorCmyk\"] = \"k\";\n    PDFOperatorNames[\"NonStrokingColorspace\"] = \"cs\";\n    // Stroking Color Operators\n    PDFOperatorNames[\"StrokingColor\"] = \"SC\";\n    PDFOperatorNames[\"StrokingColorN\"] = \"SCN\";\n    PDFOperatorNames[\"StrokingColorRgb\"] = \"RG\";\n    PDFOperatorNames[\"StrokingColorGray\"] = \"G\";\n    PDFOperatorNames[\"StrokingColorCmyk\"] = \"K\";\n    PDFOperatorNames[\"StrokingColorspace\"] = \"CS\";\n    // Marked Content Operators\n    PDFOperatorNames[\"BeginMarkedContentSequence\"] = \"BDC\";\n    PDFOperatorNames[\"BeginMarkedContent\"] = \"BMC\";\n    PDFOperatorNames[\"EndMarkedContent\"] = \"EMC\";\n    PDFOperatorNames[\"MarkedContentPointWithProps\"] = \"DP\";\n    PDFOperatorNames[\"MarkedContentPoint\"] = \"MP\";\n    PDFOperatorNames[\"DrawObject\"] = \"Do\";\n    // Graphics State Operators\n    PDFOperatorNames[\"ConcatTransformationMatrix\"] = \"cm\";\n    PDFOperatorNames[\"PopGraphicsState\"] = \"Q\";\n    PDFOperatorNames[\"PushGraphicsState\"] = \"q\";\n    PDFOperatorNames[\"SetFlatness\"] = \"i\";\n    PDFOperatorNames[\"SetGraphicsStateParams\"] = \"gs\";\n    PDFOperatorNames[\"SetLineCapStyle\"] = \"J\";\n    PDFOperatorNames[\"SetLineDashPattern\"] = \"d\";\n    PDFOperatorNames[\"SetLineJoinStyle\"] = \"j\";\n    PDFOperatorNames[\"SetLineMiterLimit\"] = \"M\";\n    PDFOperatorNames[\"SetLineWidth\"] = \"w\";\n    PDFOperatorNames[\"SetTextMatrix\"] = \"Tm\";\n    PDFOperatorNames[\"SetRenderingIntent\"] = \"ri\";\n    // Graphics Operators\n    PDFOperatorNames[\"AppendRectangle\"] = \"re\";\n    PDFOperatorNames[\"BeginInlineImage\"] = \"BI\";\n    PDFOperatorNames[\"BeginInlineImageData\"] = \"ID\";\n    PDFOperatorNames[\"EndInlineImage\"] = \"EI\";\n    PDFOperatorNames[\"ClipEvenOdd\"] = \"W*\";\n    PDFOperatorNames[\"ClipNonZero\"] = \"W\";\n    PDFOperatorNames[\"CloseAndStroke\"] = \"s\";\n    PDFOperatorNames[\"CloseFillEvenOddAndStroke\"] = \"b*\";\n    PDFOperatorNames[\"CloseFillNonZeroAndStroke\"] = \"b\";\n    PDFOperatorNames[\"ClosePath\"] = \"h\";\n    PDFOperatorNames[\"AppendBezierCurve\"] = \"c\";\n    PDFOperatorNames[\"CurveToReplicateFinalPoint\"] = \"y\";\n    PDFOperatorNames[\"CurveToReplicateInitialPoint\"] = \"v\";\n    PDFOperatorNames[\"EndPath\"] = \"n\";\n    PDFOperatorNames[\"FillEvenOddAndStroke\"] = \"B*\";\n    PDFOperatorNames[\"FillEvenOdd\"] = \"f*\";\n    PDFOperatorNames[\"FillNonZeroAndStroke\"] = \"B\";\n    PDFOperatorNames[\"FillNonZero\"] = \"f\";\n    PDFOperatorNames[\"LegacyFillNonZero\"] = \"F\";\n    PDFOperatorNames[\"LineTo\"] = \"l\";\n    PDFOperatorNames[\"MoveTo\"] = \"m\";\n    PDFOperatorNames[\"ShadingFill\"] = \"sh\";\n    PDFOperatorNames[\"StrokePath\"] = \"S\";\n    // Text Operators\n    PDFOperatorNames[\"BeginText\"] = \"BT\";\n    PDFOperatorNames[\"EndText\"] = \"ET\";\n    PDFOperatorNames[\"MoveText\"] = \"Td\";\n    PDFOperatorNames[\"MoveTextSetLeading\"] = \"TD\";\n    PDFOperatorNames[\"NextLine\"] = \"T*\";\n    PDFOperatorNames[\"SetCharacterSpacing\"] = \"Tc\";\n    PDFOperatorNames[\"SetFontAndSize\"] = \"Tf\";\n    PDFOperatorNames[\"SetTextHorizontalScaling\"] = \"Tz\";\n    PDFOperatorNames[\"SetTextLineHeight\"] = \"TL\";\n    PDFOperatorNames[\"SetTextRenderingMode\"] = \"Tr\";\n    PDFOperatorNames[\"SetTextRise\"] = \"Ts\";\n    PDFOperatorNames[\"SetWordSpacing\"] = \"Tw\";\n    PDFOperatorNames[\"ShowText\"] = \"Tj\";\n    PDFOperatorNames[\"ShowTextAdjusted\"] = \"TJ\";\n    PDFOperatorNames[\"ShowTextLine\"] = \"'\";\n    PDFOperatorNames[\"ShowTextLineAndSpace\"] = \"\\\"\";\n    // Type3 Font Operators\n    PDFOperatorNames[\"Type3D0\"] = \"d0\";\n    PDFOperatorNames[\"Type3D1\"] = \"d1\";\n    // Compatibility Section Operators\n    PDFOperatorNames[\"BeginCompatibilitySection\"] = \"BX\";\n    PDFOperatorNames[\"EndCompatibilitySection\"] = \"EX\";\n})(PDFOperatorNames || (PDFOperatorNames = {}));\nexport default PDFOperatorNames;\n//# sourceMappingURL=PDFOperatorNames.js.map","import { __extends } from \"tslib\";\nimport pako from 'pako';\nimport { MethodNotImplementedError } from \"../errors\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFStream from \"../objects/PDFStream\";\nimport { Cache } from \"../../utils\";\nvar PDFFlateStream = /** @class */ (function (_super) {\n    __extends(PDFFlateStream, _super);\n    function PDFFlateStream(dict, encode) {\n        var _this = _super.call(this, dict) || this;\n        _this.computeContents = function () {\n            var unencodedContents = _this.getUnencodedContents();\n            return _this.encode ? pako.deflate(unencodedContents) : unencodedContents;\n        };\n        _this.encode = encode;\n        if (encode)\n            dict.set(PDFName.of('Filter'), PDFName.of('FlateDecode'));\n        _this.contentsCache = Cache.populatedBy(_this.computeContents);\n        return _this;\n    }\n    PDFFlateStream.prototype.getContents = function () {\n        return this.contentsCache.access();\n    };\n    PDFFlateStream.prototype.getContentsSize = function () {\n        return this.contentsCache.access().length;\n    };\n    PDFFlateStream.prototype.getUnencodedContents = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'getUnencodedContents');\n    };\n    return PDFFlateStream;\n}(PDFStream));\nexport default PDFFlateStream;\n//# sourceMappingURL=PDFFlateStream.js.map","import { __extends } from \"tslib\";\nimport PDFFlateStream from \"./PDFFlateStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nvar PDFContentStream = /** @class */ (function (_super) {\n    __extends(PDFContentStream, _super);\n    function PDFContentStream(dict, operators, encode) {\n        if (encode === void 0) { encode = true; }\n        var _this = _super.call(this, dict, encode) || this;\n        _this.operators = operators;\n        return _this;\n    }\n    PDFContentStream.prototype.push = function () {\n        var _a;\n        var operators = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operators[_i] = arguments[_i];\n        }\n        (_a = this.operators).push.apply(_a, operators);\n    };\n    PDFContentStream.prototype.clone = function (context) {\n        var operators = new Array(this.operators.length);\n        for (var idx = 0, len = this.operators.length; idx < len; idx++) {\n            operators[idx] = this.operators[idx].clone(context);\n        }\n        var _a = this, dict = _a.dict, encode = _a.encode;\n        return PDFContentStream.of(dict.clone(context), operators, encode);\n    };\n    PDFContentStream.prototype.getContentsString = function () {\n        var value = '';\n        for (var idx = 0, len = this.operators.length; idx < len; idx++) {\n            value += this.operators[idx] + \"\\n\";\n        }\n        return value;\n    };\n    PDFContentStream.prototype.getUnencodedContents = function () {\n        var buffer = new Uint8Array(this.getUnencodedContentsSize());\n        var offset = 0;\n        for (var idx = 0, len = this.operators.length; idx < len; idx++) {\n            offset += this.operators[idx].copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Newline;\n        }\n        return buffer;\n    };\n    PDFContentStream.prototype.getUnencodedContentsSize = function () {\n        var size = 0;\n        for (var idx = 0, len = this.operators.length; idx < len; idx++) {\n            size += this.operators[idx].sizeInBytes() + 1;\n        }\n        return size;\n    };\n    PDFContentStream.of = function (dict, operators, encode) {\n        if (encode === void 0) { encode = true; }\n        return new PDFContentStream(dict, operators, encode);\n    };\n    return PDFContentStream;\n}(PDFFlateStream));\nexport default PDFContentStream;\n//# sourceMappingURL=PDFContentStream.js.map","import { __assign } from \"tslib\";\nimport pako from 'pako';\nimport PDFHeader from \"./document/PDFHeader\";\nimport { UnexpectedObjectTypeError } from \"./errors\";\nimport PDFArray from \"./objects/PDFArray\";\nimport PDFBool from \"./objects/PDFBool\";\nimport PDFDict from \"./objects/PDFDict\";\nimport PDFName from \"./objects/PDFName\";\nimport PDFNull from \"./objects/PDFNull\";\nimport PDFNumber from \"./objects/PDFNumber\";\nimport PDFObject from \"./objects/PDFObject\";\nimport PDFRawStream from \"./objects/PDFRawStream\";\nimport PDFRef from \"./objects/PDFRef\";\nimport PDFOperator from \"./operators/PDFOperator\";\nimport Ops from \"./operators/PDFOperatorNames\";\nimport PDFContentStream from \"./structures/PDFContentStream\";\nimport { typedArrayFor } from \"../utils\";\nimport { SimpleRNG } from \"../utils/rng\";\nvar byAscendingObjectNumber = function (_a, _b) {\n    var a = _a[0];\n    var b = _b[0];\n    return a.objectNumber - b.objectNumber;\n};\nvar PDFContext = /** @class */ (function () {\n    function PDFContext() {\n        this.largestObjectNumber = 0;\n        this.header = PDFHeader.forVersion(1, 7);\n        this.trailerInfo = {};\n        this.indirectObjects = new Map();\n        this.rng = SimpleRNG.withSeed(1);\n    }\n    PDFContext.prototype.assign = function (ref, object) {\n        this.indirectObjects.set(ref, object);\n        if (ref.objectNumber > this.largestObjectNumber) {\n            this.largestObjectNumber = ref.objectNumber;\n        }\n    };\n    PDFContext.prototype.nextRef = function () {\n        this.largestObjectNumber += 1;\n        return PDFRef.of(this.largestObjectNumber);\n    };\n    PDFContext.prototype.register = function (object) {\n        var ref = this.nextRef();\n        this.assign(ref, object);\n        return ref;\n    };\n    PDFContext.prototype.delete = function (ref) {\n        return this.indirectObjects.delete(ref);\n    };\n    PDFContext.prototype.lookupMaybe = function (ref) {\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        // TODO: `preservePDFNull` is for backwards compatibility. Should be\n        // removed in next breaking API change.\n        var preservePDFNull = types.includes(PDFNull);\n        var result = ref instanceof PDFRef ? this.indirectObjects.get(ref) : ref;\n        if (!result || (result === PDFNull && !preservePDFNull))\n            return undefined;\n        for (var idx = 0, len = types.length; idx < len; idx++) {\n            var type = types[idx];\n            if (type === PDFNull) {\n                if (result === PDFNull)\n                    return result;\n            }\n            else {\n                if (result instanceof type)\n                    return result;\n            }\n        }\n        throw new UnexpectedObjectTypeError(types, result);\n    };\n    PDFContext.prototype.lookup = function (ref) {\n        var types = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            types[_i - 1] = arguments[_i];\n        }\n        var result = ref instanceof PDFRef ? this.indirectObjects.get(ref) : ref;\n        if (types.length === 0)\n            return result;\n        for (var idx = 0, len = types.length; idx < len; idx++) {\n            var type = types[idx];\n            if (type === PDFNull) {\n                if (result === PDFNull)\n                    return result;\n            }\n            else {\n                if (result instanceof type)\n                    return result;\n            }\n        }\n        throw new UnexpectedObjectTypeError(types, result);\n    };\n    PDFContext.prototype.getObjectRef = function (pdfObject) {\n        var entries = Array.from(this.indirectObjects.entries());\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], ref = _a[0], object = _a[1];\n            if (object === pdfObject) {\n                return ref;\n            }\n        }\n        return undefined;\n    };\n    PDFContext.prototype.enumerateIndirectObjects = function () {\n        return Array.from(this.indirectObjects.entries()).sort(byAscendingObjectNumber);\n    };\n    PDFContext.prototype.obj = function (literal) {\n        if (literal instanceof PDFObject) {\n            return literal;\n        }\n        else if (literal === null || literal === undefined) {\n            return PDFNull;\n        }\n        else if (typeof literal === 'string') {\n            return PDFName.of(literal);\n        }\n        else if (typeof literal === 'number') {\n            return PDFNumber.of(literal);\n        }\n        else if (typeof literal === 'boolean') {\n            return literal ? PDFBool.True : PDFBool.False;\n        }\n        else if (Array.isArray(literal)) {\n            var array = PDFArray.withContext(this);\n            for (var idx = 0, len = literal.length; idx < len; idx++) {\n                array.push(this.obj(literal[idx]));\n            }\n            return array;\n        }\n        else {\n            var dict = PDFDict.withContext(this);\n            var keys = Object.keys(literal);\n            for (var idx = 0, len = keys.length; idx < len; idx++) {\n                var key = keys[idx];\n                var value = literal[key];\n                if (value !== undefined)\n                    dict.set(PDFName.of(key), this.obj(value));\n            }\n            return dict;\n        }\n    };\n    PDFContext.prototype.stream = function (contents, dict) {\n        if (dict === void 0) { dict = {}; }\n        return PDFRawStream.of(this.obj(dict), typedArrayFor(contents));\n    };\n    PDFContext.prototype.flateStream = function (contents, dict) {\n        if (dict === void 0) { dict = {}; }\n        return this.stream(pako.deflate(typedArrayFor(contents)), __assign(__assign({}, dict), { Filter: 'FlateDecode' }));\n    };\n    PDFContext.prototype.contentStream = function (operators, dict) {\n        if (dict === void 0) { dict = {}; }\n        return PDFContentStream.of(this.obj(dict), operators);\n    };\n    PDFContext.prototype.formXObject = function (operators, dict) {\n        if (dict === void 0) { dict = {}; }\n        return this.contentStream(operators, __assign(__assign({ BBox: this.obj([0, 0, 0, 0]), Matrix: this.obj([1, 0, 0, 1, 0, 0]) }, dict), { Type: 'XObject', Subtype: 'Form' }));\n    };\n    /*\n     * Reference to PDFContentStream that contains a single PDFOperator: `q`.\n     * Used by [[PDFPageLeaf]] instances to ensure that when content streams are\n     * added to a modified PDF, they start in the default, unchanged graphics\n     * state.\n     */\n    PDFContext.prototype.getPushGraphicsStateContentStream = function () {\n        if (this.pushGraphicsStateContentStreamRef) {\n            return this.pushGraphicsStateContentStreamRef;\n        }\n        var dict = this.obj({});\n        var op = PDFOperator.of(Ops.PushGraphicsState);\n        var stream = PDFContentStream.of(dict, [op]);\n        this.pushGraphicsStateContentStreamRef = this.register(stream);\n        return this.pushGraphicsStateContentStreamRef;\n    };\n    /*\n     * Reference to PDFContentStream that contains a single PDFOperator: `Q`.\n     * Used by [[PDFPageLeaf]] instances to ensure that when content streams are\n     * added to a modified PDF, they start in the default, unchanged graphics\n     * state.\n     */\n    PDFContext.prototype.getPopGraphicsStateContentStream = function () {\n        if (this.popGraphicsStateContentStreamRef) {\n            return this.popGraphicsStateContentStreamRef;\n        }\n        var dict = this.obj({});\n        var op = PDFOperator.of(Ops.PopGraphicsState);\n        var stream = PDFContentStream.of(dict, [op]);\n        this.popGraphicsStateContentStreamRef = this.register(stream);\n        return this.popGraphicsStateContentStreamRef;\n    };\n    PDFContext.prototype.addRandomSuffix = function (prefix, suffixLength) {\n        if (suffixLength === void 0) { suffixLength = 4; }\n        return prefix + \"-\" + Math.floor(this.rng.nextInt() * Math.pow(10, suffixLength));\n    };\n    PDFContext.create = function () { return new PDFContext(); };\n    return PDFContext;\n}());\nexport default PDFContext;\n//# sourceMappingURL=PDFContext.js.map","import { __extends } from \"tslib\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFStream from \"../objects/PDFStream\";\nvar PDFPageLeaf = /** @class */ (function (_super) {\n    __extends(PDFPageLeaf, _super);\n    function PDFPageLeaf(map, context, autoNormalizeCTM) {\n        if (autoNormalizeCTM === void 0) { autoNormalizeCTM = true; }\n        var _this = _super.call(this, map, context) || this;\n        _this.normalized = false;\n        _this.autoNormalizeCTM = autoNormalizeCTM;\n        return _this;\n    }\n    PDFPageLeaf.prototype.clone = function (context) {\n        var clone = PDFPageLeaf.fromMapWithContext(new Map(), context || this.context, this.autoNormalizeCTM);\n        var entries = this.entries();\n        for (var idx = 0, len = entries.length; idx < len; idx++) {\n            var _a = entries[idx], key = _a[0], value = _a[1];\n            clone.set(key, value);\n        }\n        return clone;\n    };\n    PDFPageLeaf.prototype.Parent = function () {\n        return this.lookupMaybe(PDFName.Parent, PDFDict);\n    };\n    PDFPageLeaf.prototype.Contents = function () {\n        return this.lookup(PDFName.of('Contents'));\n    };\n    PDFPageLeaf.prototype.Annots = function () {\n        return this.lookupMaybe(PDFName.Annots, PDFArray);\n    };\n    PDFPageLeaf.prototype.BleedBox = function () {\n        return this.lookupMaybe(PDFName.BleedBox, PDFArray);\n    };\n    PDFPageLeaf.prototype.TrimBox = function () {\n        return this.lookupMaybe(PDFName.TrimBox, PDFArray);\n    };\n    PDFPageLeaf.prototype.ArtBox = function () {\n        return this.lookupMaybe(PDFName.ArtBox, PDFArray);\n    };\n    PDFPageLeaf.prototype.Resources = function () {\n        var dictOrRef = this.getInheritableAttribute(PDFName.Resources);\n        return this.context.lookupMaybe(dictOrRef, PDFDict);\n    };\n    PDFPageLeaf.prototype.MediaBox = function () {\n        var arrayOrRef = this.getInheritableAttribute(PDFName.MediaBox);\n        return this.context.lookup(arrayOrRef, PDFArray);\n    };\n    PDFPageLeaf.prototype.CropBox = function () {\n        var arrayOrRef = this.getInheritableAttribute(PDFName.CropBox);\n        return this.context.lookupMaybe(arrayOrRef, PDFArray);\n    };\n    PDFPageLeaf.prototype.Rotate = function () {\n        var numberOrRef = this.getInheritableAttribute(PDFName.Rotate);\n        return this.context.lookupMaybe(numberOrRef, PDFNumber);\n    };\n    PDFPageLeaf.prototype.getInheritableAttribute = function (name) {\n        var attribute;\n        this.ascend(function (node) {\n            if (!attribute)\n                attribute = node.get(name);\n        });\n        return attribute;\n    };\n    PDFPageLeaf.prototype.setParent = function (parentRef) {\n        this.set(PDFName.Parent, parentRef);\n    };\n    PDFPageLeaf.prototype.addContentStream = function (contentStreamRef) {\n        var Contents = this.normalizedEntries().Contents || this.context.obj([]);\n        this.set(PDFName.Contents, Contents);\n        Contents.push(contentStreamRef);\n    };\n    PDFPageLeaf.prototype.wrapContentStreams = function (startStream, endStream) {\n        var Contents = this.Contents();\n        if (Contents instanceof PDFArray) {\n            Contents.insert(0, startStream);\n            Contents.push(endStream);\n            return true;\n        }\n        return false;\n    };\n    PDFPageLeaf.prototype.addAnnot = function (annotRef) {\n        var Annots = this.normalizedEntries().Annots;\n        Annots.push(annotRef);\n    };\n    PDFPageLeaf.prototype.removeAnnot = function (annotRef) {\n        var Annots = this.normalizedEntries().Annots;\n        var index = Annots.indexOf(annotRef);\n        if (index !== undefined) {\n            Annots.remove(index);\n        }\n    };\n    PDFPageLeaf.prototype.setFontDictionary = function (name, fontDictRef) {\n        var Font = this.normalizedEntries().Font;\n        Font.set(name, fontDictRef);\n    };\n    PDFPageLeaf.prototype.newFontDictionaryKey = function (tag) {\n        var Font = this.normalizedEntries().Font;\n        return Font.uniqueKey(tag);\n    };\n    PDFPageLeaf.prototype.newFontDictionary = function (tag, fontDictRef) {\n        var key = this.newFontDictionaryKey(tag);\n        this.setFontDictionary(key, fontDictRef);\n        return key;\n    };\n    PDFPageLeaf.prototype.setXObject = function (name, xObjectRef) {\n        var XObject = this.normalizedEntries().XObject;\n        XObject.set(name, xObjectRef);\n    };\n    PDFPageLeaf.prototype.newXObjectKey = function (tag) {\n        var XObject = this.normalizedEntries().XObject;\n        return XObject.uniqueKey(tag);\n    };\n    PDFPageLeaf.prototype.newXObject = function (tag, xObjectRef) {\n        var key = this.newXObjectKey(tag);\n        this.setXObject(key, xObjectRef);\n        return key;\n    };\n    PDFPageLeaf.prototype.setExtGState = function (name, extGStateRef) {\n        var ExtGState = this.normalizedEntries().ExtGState;\n        ExtGState.set(name, extGStateRef);\n    };\n    PDFPageLeaf.prototype.newExtGStateKey = function (tag) {\n        var ExtGState = this.normalizedEntries().ExtGState;\n        return ExtGState.uniqueKey(tag);\n    };\n    PDFPageLeaf.prototype.newExtGState = function (tag, extGStateRef) {\n        var key = this.newExtGStateKey(tag);\n        this.setExtGState(key, extGStateRef);\n        return key;\n    };\n    PDFPageLeaf.prototype.ascend = function (visitor) {\n        visitor(this);\n        var Parent = this.Parent();\n        if (Parent)\n            Parent.ascend(visitor);\n    };\n    PDFPageLeaf.prototype.normalize = function () {\n        if (this.normalized)\n            return;\n        var context = this.context;\n        var contentsRef = this.get(PDFName.Contents);\n        var contents = this.context.lookup(contentsRef);\n        if (contents instanceof PDFStream) {\n            this.set(PDFName.Contents, context.obj([contentsRef]));\n        }\n        if (this.autoNormalizeCTM) {\n            this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(), this.context.getPopGraphicsStateContentStream());\n        }\n        // TODO: Clone `Resources` if it is inherited\n        var dictOrRef = this.getInheritableAttribute(PDFName.Resources);\n        var Resources = context.lookupMaybe(dictOrRef, PDFDict) || context.obj({});\n        this.set(PDFName.Resources, Resources);\n        // TODO: Clone `Font` if it is inherited\n        var Font = Resources.lookupMaybe(PDFName.Font, PDFDict) || context.obj({});\n        Resources.set(PDFName.Font, Font);\n        // TODO: Clone `XObject` if it is inherited\n        var XObject = Resources.lookupMaybe(PDFName.XObject, PDFDict) || context.obj({});\n        Resources.set(PDFName.XObject, XObject);\n        // TODO: Clone `ExtGState` if it is inherited\n        var ExtGState = Resources.lookupMaybe(PDFName.ExtGState, PDFDict) || context.obj({});\n        Resources.set(PDFName.ExtGState, ExtGState);\n        var Annots = this.Annots() || context.obj([]);\n        this.set(PDFName.Annots, Annots);\n        this.normalized = true;\n    };\n    PDFPageLeaf.prototype.normalizedEntries = function () {\n        this.normalize();\n        var Annots = this.Annots();\n        var Resources = this.Resources();\n        var Contents = this.Contents();\n        return {\n            Annots: Annots,\n            Resources: Resources,\n            Contents: Contents,\n            Font: Resources.lookup(PDFName.Font, PDFDict),\n            XObject: Resources.lookup(PDFName.XObject, PDFDict),\n            ExtGState: Resources.lookup(PDFName.ExtGState, PDFDict),\n        };\n    };\n    PDFPageLeaf.InheritableEntries = [\n        'Resources',\n        'MediaBox',\n        'CropBox',\n        'Rotate',\n    ];\n    PDFPageLeaf.withContextAndParent = function (context, parent) {\n        var dict = new Map();\n        dict.set(PDFName.Type, PDFName.Page);\n        dict.set(PDFName.Parent, parent);\n        dict.set(PDFName.Resources, context.obj({}));\n        dict.set(PDFName.MediaBox, context.obj([0, 0, 612, 792]));\n        return new PDFPageLeaf(dict, context, false);\n    };\n    PDFPageLeaf.fromMapWithContext = function (map, context, autoNormalizeCTM) {\n        if (autoNormalizeCTM === void 0) { autoNormalizeCTM = true; }\n        return new PDFPageLeaf(map, context, autoNormalizeCTM);\n    };\n    return PDFPageLeaf;\n}(PDFDict));\nexport default PDFPageLeaf;\n//# sourceMappingURL=PDFPageLeaf.js.map","import PDFArray from \"./objects/PDFArray\";\nimport PDFDict from \"./objects/PDFDict\";\nimport PDFName from \"./objects/PDFName\";\nimport PDFRef from \"./objects/PDFRef\";\nimport PDFStream from \"./objects/PDFStream\";\nimport PDFPageLeaf from \"./structures/PDFPageLeaf\";\n/**\n * PDFObjectCopier copies PDFObjects from a src context to a dest context.\n * The primary use case for this is to copy pages between PDFs.\n *\n * _Copying_ an object with a PDFObjectCopier is different from _cloning_ an\n * object with its [[PDFObject.clone]] method:\n *\n * ```\n *   const src: PDFContext = ...\n *   const dest: PDFContext = ...\n *   const originalObject: PDFObject = ...\n *   const copiedObject = PDFObjectCopier.for(src, dest).copy(originalObject);\n *   const clonedObject = originalObject.clone();\n * ```\n *\n * Copying an object is equivalent to cloning it and then copying over any other\n * objects that it references. Note that only dictionaries, arrays, and streams\n * (or structures build from them) can contain indirect references to other\n * objects. Copying a PDFObject that is not a dictionary, array, or stream is\n * supported, but is equivalent to cloning it.\n */\nvar PDFObjectCopier = /** @class */ (function () {\n    function PDFObjectCopier(src, dest) {\n        var _this = this;\n        this.traversedObjects = new Map();\n        // prettier-ignore\n        this.copy = function (object) { return (object instanceof PDFPageLeaf ? _this.copyPDFPage(object)\n            : object instanceof PDFDict ? _this.copyPDFDict(object)\n                : object instanceof PDFArray ? _this.copyPDFArray(object)\n                    : object instanceof PDFStream ? _this.copyPDFStream(object)\n                        : object instanceof PDFRef ? _this.copyPDFIndirectObject(object)\n                            : object.clone()); };\n        this.copyPDFPage = function (originalPage) {\n            var clonedPage = originalPage.clone();\n            // Move any entries that the originalPage is inheriting from its parent\n            // tree nodes directly into originalPage so they are preserved during\n            // the copy.\n            var InheritableEntries = PDFPageLeaf.InheritableEntries;\n            for (var idx = 0, len = InheritableEntries.length; idx < len; idx++) {\n                var key = PDFName.of(InheritableEntries[idx]);\n                var value = clonedPage.getInheritableAttribute(key);\n                if (!clonedPage.get(key) && value)\n                    clonedPage.set(key, value);\n            }\n            // Remove the parent reference to prevent the whole donor document's page\n            // tree from being copied when we only need a single page.\n            clonedPage.delete(PDFName.of('Parent'));\n            return _this.copyPDFDict(clonedPage);\n        };\n        this.copyPDFDict = function (originalDict) {\n            if (_this.traversedObjects.has(originalDict)) {\n                return _this.traversedObjects.get(originalDict);\n            }\n            var clonedDict = originalDict.clone(_this.dest);\n            _this.traversedObjects.set(originalDict, clonedDict);\n            var entries = originalDict.entries();\n            for (var idx = 0, len = entries.length; idx < len; idx++) {\n                var _a = entries[idx], key = _a[0], value = _a[1];\n                clonedDict.set(key, _this.copy(value));\n            }\n            return clonedDict;\n        };\n        this.copyPDFArray = function (originalArray) {\n            if (_this.traversedObjects.has(originalArray)) {\n                return _this.traversedObjects.get(originalArray);\n            }\n            var clonedArray = originalArray.clone(_this.dest);\n            _this.traversedObjects.set(originalArray, clonedArray);\n            for (var idx = 0, len = originalArray.size(); idx < len; idx++) {\n                var value = originalArray.get(idx);\n                clonedArray.set(idx, _this.copy(value));\n            }\n            return clonedArray;\n        };\n        this.copyPDFStream = function (originalStream) {\n            if (_this.traversedObjects.has(originalStream)) {\n                return _this.traversedObjects.get(originalStream);\n            }\n            var clonedStream = originalStream.clone(_this.dest);\n            _this.traversedObjects.set(originalStream, clonedStream);\n            var entries = originalStream.dict.entries();\n            for (var idx = 0, len = entries.length; idx < len; idx++) {\n                var _a = entries[idx], key = _a[0], value = _a[1];\n                clonedStream.dict.set(key, _this.copy(value));\n            }\n            return clonedStream;\n        };\n        this.copyPDFIndirectObject = function (ref) {\n            var alreadyMapped = _this.traversedObjects.has(ref);\n            if (!alreadyMapped) {\n                var newRef = _this.dest.nextRef();\n                _this.traversedObjects.set(ref, newRef);\n                var dereferencedValue = _this.src.lookup(ref);\n                if (dereferencedValue) {\n                    var cloned = _this.copy(dereferencedValue);\n                    _this.dest.assign(newRef, cloned);\n                }\n            }\n            return _this.traversedObjects.get(ref);\n        };\n        this.src = src;\n        this.dest = dest;\n    }\n    PDFObjectCopier.for = function (src, dest) {\n        return new PDFObjectCopier(src, dest);\n    };\n    return PDFObjectCopier;\n}());\nexport default PDFObjectCopier;\n//# sourceMappingURL=PDFObjectCopier.js.map","import PDFRef from \"../objects/PDFRef\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, padStart } from \"../../utils\";\n/**\n * Entries should be added using the [[addEntry]] and [[addDeletedEntry]]\n * methods **in order of ascending object number**.\n */\nvar PDFCrossRefSection = /** @class */ (function () {\n    function PDFCrossRefSection(firstEntry) {\n        this.subsections = firstEntry ? [[firstEntry]] : [];\n        this.chunkIdx = 0;\n        this.chunkLength = firstEntry ? 1 : 0;\n    }\n    PDFCrossRefSection.prototype.addEntry = function (ref, offset) {\n        this.append({ ref: ref, offset: offset, deleted: false });\n    };\n    PDFCrossRefSection.prototype.addDeletedEntry = function (ref, nextFreeObjectNumber) {\n        this.append({ ref: ref, offset: nextFreeObjectNumber, deleted: true });\n    };\n    PDFCrossRefSection.prototype.toString = function () {\n        var section = \"xref\\n\";\n        for (var rangeIdx = 0, rangeLen = this.subsections.length; rangeIdx < rangeLen; rangeIdx++) {\n            var range = this.subsections[rangeIdx];\n            section += range[0].ref.objectNumber + \" \" + range.length + \"\\n\";\n            for (var entryIdx = 0, entryLen = range.length; entryIdx < entryLen; entryIdx++) {\n                var entry = range[entryIdx];\n                section += padStart(String(entry.offset), 10, '0');\n                section += ' ';\n                section += padStart(String(entry.ref.generationNumber), 5, '0');\n                section += ' ';\n                section += entry.deleted ? 'f' : 'n';\n                section += ' \\n';\n            }\n        }\n        return section;\n    };\n    PDFCrossRefSection.prototype.sizeInBytes = function () {\n        var size = 5;\n        for (var idx = 0, len = this.subsections.length; idx < len; idx++) {\n            var subsection = this.subsections[idx];\n            var subsectionLength = subsection.length;\n            var firstEntry = subsection[0];\n            size += 2;\n            size += String(firstEntry.ref.objectNumber).length;\n            size += String(subsectionLength).length;\n            size += 20 * subsectionLength;\n        }\n        return size;\n    };\n    PDFCrossRefSection.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.x;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.f;\n        buffer[offset++] = CharCodes.Newline;\n        offset += this.copySubsectionsIntoBuffer(this.subsections, buffer, offset);\n        return offset - initialOffset;\n    };\n    PDFCrossRefSection.prototype.copySubsectionsIntoBuffer = function (subsections, buffer, offset) {\n        var initialOffset = offset;\n        var length = subsections.length;\n        for (var idx = 0; idx < length; idx++) {\n            var subsection = this.subsections[idx];\n            var firstObjectNumber = String(subsection[0].ref.objectNumber);\n            offset += copyStringIntoBuffer(firstObjectNumber, buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n            var rangeLength = String(subsection.length);\n            offset += copyStringIntoBuffer(rangeLength, buffer, offset);\n            buffer[offset++] = CharCodes.Newline;\n            offset += this.copyEntriesIntoBuffer(subsection, buffer, offset);\n        }\n        return offset - initialOffset;\n    };\n    PDFCrossRefSection.prototype.copyEntriesIntoBuffer = function (entries, buffer, offset) {\n        var length = entries.length;\n        for (var idx = 0; idx < length; idx++) {\n            var entry = entries[idx];\n            var entryOffset = padStart(String(entry.offset), 10, '0');\n            offset += copyStringIntoBuffer(entryOffset, buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n            var entryGen = padStart(String(entry.ref.generationNumber), 5, '0');\n            offset += copyStringIntoBuffer(entryGen, buffer, offset);\n            buffer[offset++] = CharCodes.Space;\n            buffer[offset++] = entry.deleted ? CharCodes.f : CharCodes.n;\n            buffer[offset++] = CharCodes.Space;\n            buffer[offset++] = CharCodes.Newline;\n        }\n        return 20 * length;\n    };\n    PDFCrossRefSection.prototype.append = function (currEntry) {\n        if (this.chunkLength === 0) {\n            this.subsections.push([currEntry]);\n            this.chunkIdx = 0;\n            this.chunkLength = 1;\n            return;\n        }\n        var chunk = this.subsections[this.chunkIdx];\n        var prevEntry = chunk[this.chunkLength - 1];\n        if (currEntry.ref.objectNumber - prevEntry.ref.objectNumber > 1) {\n            this.subsections.push([currEntry]);\n            this.chunkIdx += 1;\n            this.chunkLength = 1;\n        }\n        else {\n            chunk.push(currEntry);\n            this.chunkLength += 1;\n        }\n    };\n    PDFCrossRefSection.create = function () {\n        return new PDFCrossRefSection({\n            ref: PDFRef.of(0, 65535),\n            offset: 0,\n            deleted: true,\n        });\n    };\n    PDFCrossRefSection.createEmpty = function () { return new PDFCrossRefSection(); };\n    return PDFCrossRefSection;\n}());\nexport default PDFCrossRefSection;\n//# sourceMappingURL=PDFCrossRefSection.js.map","import CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer } from \"../../utils\";\nvar PDFTrailer = /** @class */ (function () {\n    function PDFTrailer(lastXRefOffset) {\n        this.lastXRefOffset = String(lastXRefOffset);\n    }\n    PDFTrailer.prototype.toString = function () {\n        return \"startxref\\n\" + this.lastXRefOffset + \"\\n%%EOF\";\n    };\n    PDFTrailer.prototype.sizeInBytes = function () {\n        return 16 + this.lastXRefOffset.length;\n    };\n    PDFTrailer.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.s;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.a;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.x;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.f;\n        buffer[offset++] = CharCodes.Newline;\n        offset += copyStringIntoBuffer(this.lastXRefOffset, buffer, offset);\n        buffer[offset++] = CharCodes.Newline;\n        buffer[offset++] = CharCodes.Percent;\n        buffer[offset++] = CharCodes.Percent;\n        buffer[offset++] = CharCodes.E;\n        buffer[offset++] = CharCodes.O;\n        buffer[offset++] = CharCodes.F;\n        return offset - initialOffset;\n    };\n    PDFTrailer.forLastCrossRefSectionOffset = function (offset) {\n        return new PDFTrailer(offset);\n    };\n    return PDFTrailer;\n}());\nexport default PDFTrailer;\n//# sourceMappingURL=PDFTrailer.js.map","import CharCodes from \"../syntax/CharCodes\";\nvar PDFTrailerDict = /** @class */ (function () {\n    function PDFTrailerDict(dict) {\n        this.dict = dict;\n    }\n    PDFTrailerDict.prototype.toString = function () {\n        return \"trailer\\n\" + this.dict.toString();\n    };\n    PDFTrailerDict.prototype.sizeInBytes = function () {\n        return 8 + this.dict.sizeInBytes();\n    };\n    PDFTrailerDict.prototype.copyBytesInto = function (buffer, offset) {\n        var initialOffset = offset;\n        buffer[offset++] = CharCodes.t;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.a;\n        buffer[offset++] = CharCodes.i;\n        buffer[offset++] = CharCodes.l;\n        buffer[offset++] = CharCodes.e;\n        buffer[offset++] = CharCodes.r;\n        buffer[offset++] = CharCodes.Newline;\n        offset += this.dict.copyBytesInto(buffer, offset);\n        return offset - initialOffset;\n    };\n    PDFTrailerDict.of = function (dict) { return new PDFTrailerDict(dict); };\n    return PDFTrailerDict;\n}());\nexport default PDFTrailerDict;\n//# sourceMappingURL=PDFTrailerDict.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFFlateStream from \"./PDFFlateStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, last } from \"../../utils\";\nvar PDFObjectStream = /** @class */ (function (_super) {\n    __extends(PDFObjectStream, _super);\n    function PDFObjectStream(context, objects, encode) {\n        if (encode === void 0) { encode = true; }\n        var _this = _super.call(this, context.obj({}), encode) || this;\n        _this.objects = objects;\n        _this.offsets = _this.computeObjectOffsets();\n        _this.offsetsString = _this.computeOffsetsString();\n        _this.dict.set(PDFName.of('Type'), PDFName.of('ObjStm'));\n        _this.dict.set(PDFName.of('N'), PDFNumber.of(_this.objects.length));\n        _this.dict.set(PDFName.of('First'), PDFNumber.of(_this.offsetsString.length));\n        return _this;\n    }\n    PDFObjectStream.prototype.getObjectsCount = function () {\n        return this.objects.length;\n    };\n    PDFObjectStream.prototype.clone = function (context) {\n        return PDFObjectStream.withContextAndObjects(context || this.dict.context, this.objects.slice(), this.encode);\n    };\n    PDFObjectStream.prototype.getContentsString = function () {\n        var value = this.offsetsString;\n        for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n            var _a = this.objects[idx], object = _a[1];\n            value += object + \"\\n\";\n        }\n        return value;\n    };\n    PDFObjectStream.prototype.getUnencodedContents = function () {\n        var buffer = new Uint8Array(this.getUnencodedContentsSize());\n        var offset = copyStringIntoBuffer(this.offsetsString, buffer, 0);\n        for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n            var _a = this.objects[idx], object = _a[1];\n            offset += object.copyBytesInto(buffer, offset);\n            buffer[offset++] = CharCodes.Newline;\n        }\n        return buffer;\n    };\n    PDFObjectStream.prototype.getUnencodedContentsSize = function () {\n        return (this.offsetsString.length +\n            last(this.offsets)[1] +\n            last(this.objects)[1].sizeInBytes() +\n            1);\n    };\n    PDFObjectStream.prototype.computeOffsetsString = function () {\n        var offsetsString = '';\n        for (var idx = 0, len = this.offsets.length; idx < len; idx++) {\n            var _a = this.offsets[idx], objectNumber = _a[0], offset = _a[1];\n            offsetsString += objectNumber + \" \" + offset + \" \";\n        }\n        return offsetsString;\n    };\n    PDFObjectStream.prototype.computeObjectOffsets = function () {\n        var offset = 0;\n        var offsets = new Array(this.objects.length);\n        for (var idx = 0, len = this.objects.length; idx < len; idx++) {\n            var _a = this.objects[idx], ref = _a[0], object = _a[1];\n            offsets[idx] = [ref.objectNumber, offset];\n            offset += object.sizeInBytes() + 1; // '\\n'\n        }\n        return offsets;\n    };\n    PDFObjectStream.withContextAndObjects = function (context, objects, encode) {\n        if (encode === void 0) { encode = true; }\n        return new PDFObjectStream(context, objects, encode);\n    };\n    return PDFObjectStream;\n}(PDFFlateStream));\nexport default PDFObjectStream;\n//# sourceMappingURL=PDFObjectStream.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFCrossRefSection from \"../document/PDFCrossRefSection\";\nimport PDFHeader from \"../document/PDFHeader\";\nimport PDFTrailer from \"../document/PDFTrailer\";\nimport PDFTrailerDict from \"../document/PDFTrailerDict\";\nimport PDFObjectStream from \"../structures/PDFObjectStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, waitForTick } from \"../../utils\";\nvar PDFWriter = /** @class */ (function () {\n    function PDFWriter(context, objectsPerTick) {\n        var _this = this;\n        this.parsedObjects = 0;\n        this.shouldWaitForTick = function (n) {\n            _this.parsedObjects += n;\n            return _this.parsedObjects % _this.objectsPerTick === 0;\n        };\n        this.context = context;\n        this.objectsPerTick = objectsPerTick;\n    }\n    PDFWriter.prototype.serializeToBuffer = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, size, header, indirectObjects, xref, trailerDict, trailer, offset, buffer, idx, len, _b, ref, object, objectNumber, generationNumber, n;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, this.computeBufferSize()];\n                    case 1:\n                        _a = _c.sent(), size = _a.size, header = _a.header, indirectObjects = _a.indirectObjects, xref = _a.xref, trailerDict = _a.trailerDict, trailer = _a.trailer;\n                        offset = 0;\n                        buffer = new Uint8Array(size);\n                        offset += header.copyBytesInto(buffer, offset);\n                        buffer[offset++] = CharCodes.Newline;\n                        buffer[offset++] = CharCodes.Newline;\n                        idx = 0, len = indirectObjects.length;\n                        _c.label = 2;\n                    case 2:\n                        if (!(idx < len)) return [3 /*break*/, 5];\n                        _b = indirectObjects[idx], ref = _b[0], object = _b[1];\n                        objectNumber = String(ref.objectNumber);\n                        offset += copyStringIntoBuffer(objectNumber, buffer, offset);\n                        buffer[offset++] = CharCodes.Space;\n                        generationNumber = String(ref.generationNumber);\n                        offset += copyStringIntoBuffer(generationNumber, buffer, offset);\n                        buffer[offset++] = CharCodes.Space;\n                        buffer[offset++] = CharCodes.o;\n                        buffer[offset++] = CharCodes.b;\n                        buffer[offset++] = CharCodes.j;\n                        buffer[offset++] = CharCodes.Newline;\n                        offset += object.copyBytesInto(buffer, offset);\n                        buffer[offset++] = CharCodes.Newline;\n                        buffer[offset++] = CharCodes.e;\n                        buffer[offset++] = CharCodes.n;\n                        buffer[offset++] = CharCodes.d;\n                        buffer[offset++] = CharCodes.o;\n                        buffer[offset++] = CharCodes.b;\n                        buffer[offset++] = CharCodes.j;\n                        buffer[offset++] = CharCodes.Newline;\n                        buffer[offset++] = CharCodes.Newline;\n                        n = object instanceof PDFObjectStream ? object.getObjectsCount() : 1;\n                        if (!this.shouldWaitForTick(n)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, waitForTick()];\n                    case 3:\n                        _c.sent();\n                        _c.label = 4;\n                    case 4:\n                        idx++;\n                        return [3 /*break*/, 2];\n                    case 5:\n                        if (xref) {\n                            offset += xref.copyBytesInto(buffer, offset);\n                            buffer[offset++] = CharCodes.Newline;\n                        }\n                        if (trailerDict) {\n                            offset += trailerDict.copyBytesInto(buffer, offset);\n                            buffer[offset++] = CharCodes.Newline;\n                            buffer[offset++] = CharCodes.Newline;\n                        }\n                        offset += trailer.copyBytesInto(buffer, offset);\n                        return [2 /*return*/, buffer];\n                }\n            });\n        });\n    };\n    PDFWriter.prototype.computeIndirectObjectSize = function (_a) {\n        var ref = _a[0], object = _a[1];\n        var refSize = ref.sizeInBytes() + 3; // 'R' -> 'obj\\n'\n        var objectSize = object.sizeInBytes() + 9; // '\\nendobj\\n\\n'\n        return refSize + objectSize;\n    };\n    PDFWriter.prototype.createTrailerDict = function () {\n        return this.context.obj({\n            Size: this.context.largestObjectNumber + 1,\n            Root: this.context.trailerInfo.Root,\n            Encrypt: this.context.trailerInfo.Encrypt,\n            Info: this.context.trailerInfo.Info,\n            ID: this.context.trailerInfo.ID,\n        });\n    };\n    PDFWriter.prototype.computeBufferSize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var header, size, xref, indirectObjects, idx, len, indirectObject, ref, xrefOffset, trailerDict, trailer;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        header = PDFHeader.forVersion(1, 7);\n                        size = header.sizeInBytes() + 2;\n                        xref = PDFCrossRefSection.create();\n                        indirectObjects = this.context.enumerateIndirectObjects();\n                        idx = 0, len = indirectObjects.length;\n                        _a.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        indirectObject = indirectObjects[idx];\n                        ref = indirectObject[0];\n                        xref.addEntry(ref, size);\n                        size += this.computeIndirectObjectSize(indirectObject);\n                        if (!this.shouldWaitForTick(1)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, waitForTick()];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        xrefOffset = size;\n                        size += xref.sizeInBytes() + 1; // '\\n'\n                        trailerDict = PDFTrailerDict.of(this.createTrailerDict());\n                        size += trailerDict.sizeInBytes() + 2; // '\\n\\n'\n                        trailer = PDFTrailer.forLastCrossRefSectionOffset(xrefOffset);\n                        size += trailer.sizeInBytes();\n                        return [2 /*return*/, { size: size, header: header, indirectObjects: indirectObjects, xref: xref, trailerDict: trailerDict, trailer: trailer }];\n                }\n            });\n        });\n    };\n    PDFWriter.forContext = function (context, objectsPerTick) {\n        return new PDFWriter(context, objectsPerTick);\n    };\n    return PDFWriter;\n}());\nexport default PDFWriter;\n//# sourceMappingURL=PDFWriter.js.map","import { __extends } from \"tslib\";\nimport PDFObject from \"./PDFObject\";\nvar PDFInvalidObject = /** @class */ (function (_super) {\n    __extends(PDFInvalidObject, _super);\n    function PDFInvalidObject(data) {\n        var _this = _super.call(this) || this;\n        _this.data = data;\n        return _this;\n    }\n    PDFInvalidObject.prototype.clone = function () {\n        return PDFInvalidObject.of(this.data.slice());\n    };\n    PDFInvalidObject.prototype.toString = function () {\n        return \"PDFInvalidObject(\" + this.data.length + \" bytes)\";\n    };\n    PDFInvalidObject.prototype.sizeInBytes = function () {\n        return this.data.length;\n    };\n    PDFInvalidObject.prototype.copyBytesInto = function (buffer, offset) {\n        var length = this.data.length;\n        for (var idx = 0; idx < length; idx++) {\n            buffer[offset++] = this.data[idx];\n        }\n        return length;\n    };\n    PDFInvalidObject.of = function (data) { return new PDFInvalidObject(data); };\n    return PDFInvalidObject;\n}(PDFObject));\nexport default PDFInvalidObject;\n//# sourceMappingURL=PDFInvalidObject.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFFlateStream from \"./PDFFlateStream\";\nimport { bytesFor, Cache, reverseArray, sizeInBytes, sum } from \"../../utils\";\nexport var EntryType;\n(function (EntryType) {\n    EntryType[EntryType[\"Deleted\"] = 0] = \"Deleted\";\n    EntryType[EntryType[\"Uncompressed\"] = 1] = \"Uncompressed\";\n    EntryType[EntryType[\"Compressed\"] = 2] = \"Compressed\";\n})(EntryType || (EntryType = {}));\n/**\n * Entries should be added using the [[addDeletedEntry]],\n * [[addUncompressedEntry]], and [[addCompressedEntry]] methods\n * **in order of ascending object number**.\n */\nvar PDFCrossRefStream = /** @class */ (function (_super) {\n    __extends(PDFCrossRefStream, _super);\n    function PDFCrossRefStream(dict, entries, encode) {\n        if (encode === void 0) { encode = true; }\n        var _this = _super.call(this, dict, encode) || this;\n        // Returns an array of integer pairs for each subsection of the cross ref\n        // section, where each integer pair represents:\n        //   firstObjectNumber(OfSection), length(OfSection)\n        _this.computeIndex = function () {\n            var subsections = [];\n            var subsectionLength = 0;\n            for (var idx = 0, len = _this.entries.length; idx < len; idx++) {\n                var currEntry = _this.entries[idx];\n                var prevEntry = _this.entries[idx - 1];\n                if (idx === 0) {\n                    subsections.push(currEntry.ref.objectNumber);\n                }\n                else if (currEntry.ref.objectNumber - prevEntry.ref.objectNumber > 1) {\n                    subsections.push(subsectionLength);\n                    subsections.push(currEntry.ref.objectNumber);\n                    subsectionLength = 0;\n                }\n                subsectionLength += 1;\n            }\n            subsections.push(subsectionLength);\n            return subsections;\n        };\n        _this.computeEntryTuples = function () {\n            var entryTuples = new Array(_this.entries.length);\n            for (var idx = 0, len = _this.entries.length; idx < len; idx++) {\n                var entry = _this.entries[idx];\n                if (entry.type === EntryType.Deleted) {\n                    var type = entry.type, nextFreeObjectNumber = entry.nextFreeObjectNumber, ref = entry.ref;\n                    entryTuples[idx] = [type, nextFreeObjectNumber, ref.generationNumber];\n                }\n                if (entry.type === EntryType.Uncompressed) {\n                    var type = entry.type, offset = entry.offset, ref = entry.ref;\n                    entryTuples[idx] = [type, offset, ref.generationNumber];\n                }\n                if (entry.type === EntryType.Compressed) {\n                    var type = entry.type, objectStreamRef = entry.objectStreamRef, index = entry.index;\n                    entryTuples[idx] = [type, objectStreamRef.objectNumber, index];\n                }\n            }\n            return entryTuples;\n        };\n        _this.computeMaxEntryByteWidths = function () {\n            var entryTuples = _this.entryTuplesCache.access();\n            var widths = [0, 0, 0];\n            for (var idx = 0, len = entryTuples.length; idx < len; idx++) {\n                var _a = entryTuples[idx], first = _a[0], second = _a[1], third = _a[2];\n                var firstSize = sizeInBytes(first);\n                var secondSize = sizeInBytes(second);\n                var thirdSize = sizeInBytes(third);\n                if (firstSize > widths[0])\n                    widths[0] = firstSize;\n                if (secondSize > widths[1])\n                    widths[1] = secondSize;\n                if (thirdSize > widths[2])\n                    widths[2] = thirdSize;\n            }\n            return widths;\n        };\n        _this.entries = entries || [];\n        _this.entryTuplesCache = Cache.populatedBy(_this.computeEntryTuples);\n        _this.maxByteWidthsCache = Cache.populatedBy(_this.computeMaxEntryByteWidths);\n        _this.indexCache = Cache.populatedBy(_this.computeIndex);\n        dict.set(PDFName.of('Type'), PDFName.of('XRef'));\n        return _this;\n    }\n    PDFCrossRefStream.prototype.addDeletedEntry = function (ref, nextFreeObjectNumber) {\n        var type = EntryType.Deleted;\n        this.entries.push({ type: type, ref: ref, nextFreeObjectNumber: nextFreeObjectNumber });\n        this.entryTuplesCache.invalidate();\n        this.maxByteWidthsCache.invalidate();\n        this.indexCache.invalidate();\n        this.contentsCache.invalidate();\n    };\n    PDFCrossRefStream.prototype.addUncompressedEntry = function (ref, offset) {\n        var type = EntryType.Uncompressed;\n        this.entries.push({ type: type, ref: ref, offset: offset });\n        this.entryTuplesCache.invalidate();\n        this.maxByteWidthsCache.invalidate();\n        this.indexCache.invalidate();\n        this.contentsCache.invalidate();\n    };\n    PDFCrossRefStream.prototype.addCompressedEntry = function (ref, objectStreamRef, index) {\n        var type = EntryType.Compressed;\n        this.entries.push({ type: type, ref: ref, objectStreamRef: objectStreamRef, index: index });\n        this.entryTuplesCache.invalidate();\n        this.maxByteWidthsCache.invalidate();\n        this.indexCache.invalidate();\n        this.contentsCache.invalidate();\n    };\n    PDFCrossRefStream.prototype.clone = function (context) {\n        var _a = this, dict = _a.dict, entries = _a.entries, encode = _a.encode;\n        return PDFCrossRefStream.of(dict.clone(context), entries.slice(), encode);\n    };\n    PDFCrossRefStream.prototype.getContentsString = function () {\n        var entryTuples = this.entryTuplesCache.access();\n        var byteWidths = this.maxByteWidthsCache.access();\n        var value = '';\n        for (var entryIdx = 0, entriesLen = entryTuples.length; entryIdx < entriesLen; entryIdx++) {\n            var _a = entryTuples[entryIdx], first = _a[0], second = _a[1], third = _a[2];\n            var firstBytes = reverseArray(bytesFor(first));\n            var secondBytes = reverseArray(bytesFor(second));\n            var thirdBytes = reverseArray(bytesFor(third));\n            for (var idx = byteWidths[0] - 1; idx >= 0; idx--) {\n                value += (firstBytes[idx] || 0).toString(2);\n            }\n            for (var idx = byteWidths[1] - 1; idx >= 0; idx--) {\n                value += (secondBytes[idx] || 0).toString(2);\n            }\n            for (var idx = byteWidths[2] - 1; idx >= 0; idx--) {\n                value += (thirdBytes[idx] || 0).toString(2);\n            }\n        }\n        return value;\n    };\n    PDFCrossRefStream.prototype.getUnencodedContents = function () {\n        var entryTuples = this.entryTuplesCache.access();\n        var byteWidths = this.maxByteWidthsCache.access();\n        var buffer = new Uint8Array(this.getUnencodedContentsSize());\n        var offset = 0;\n        for (var entryIdx = 0, entriesLen = entryTuples.length; entryIdx < entriesLen; entryIdx++) {\n            var _a = entryTuples[entryIdx], first = _a[0], second = _a[1], third = _a[2];\n            var firstBytes = reverseArray(bytesFor(first));\n            var secondBytes = reverseArray(bytesFor(second));\n            var thirdBytes = reverseArray(bytesFor(third));\n            for (var idx = byteWidths[0] - 1; idx >= 0; idx--) {\n                buffer[offset++] = firstBytes[idx] || 0;\n            }\n            for (var idx = byteWidths[1] - 1; idx >= 0; idx--) {\n                buffer[offset++] = secondBytes[idx] || 0;\n            }\n            for (var idx = byteWidths[2] - 1; idx >= 0; idx--) {\n                buffer[offset++] = thirdBytes[idx] || 0;\n            }\n        }\n        return buffer;\n    };\n    PDFCrossRefStream.prototype.getUnencodedContentsSize = function () {\n        var byteWidths = this.maxByteWidthsCache.access();\n        var entryWidth = sum(byteWidths);\n        return entryWidth * this.entries.length;\n    };\n    PDFCrossRefStream.prototype.updateDict = function () {\n        _super.prototype.updateDict.call(this);\n        var byteWidths = this.maxByteWidthsCache.access();\n        var index = this.indexCache.access();\n        var context = this.dict.context;\n        this.dict.set(PDFName.of('W'), context.obj(byteWidths));\n        this.dict.set(PDFName.of('Index'), context.obj(index));\n    };\n    PDFCrossRefStream.create = function (dict, encode) {\n        if (encode === void 0) { encode = true; }\n        var stream = new PDFCrossRefStream(dict, [], encode);\n        stream.addDeletedEntry(PDFRef.of(0, 65535), 0);\n        return stream;\n    };\n    PDFCrossRefStream.of = function (dict, entries, encode) {\n        if (encode === void 0) { encode = true; }\n        return new PDFCrossRefStream(dict, entries, encode);\n    };\n    return PDFCrossRefStream;\n}(PDFFlateStream));\nexport default PDFCrossRefStream;\n//# sourceMappingURL=PDFCrossRefStream.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport PDFHeader from \"../document/PDFHeader\";\nimport PDFTrailer from \"../document/PDFTrailer\";\nimport PDFInvalidObject from \"../objects/PDFInvalidObject\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFStream from \"../objects/PDFStream\";\nimport PDFCrossRefStream from \"../structures/PDFCrossRefStream\";\nimport PDFObjectStream from \"../structures/PDFObjectStream\";\nimport PDFWriter from \"./PDFWriter\";\nimport { last, waitForTick } from \"../../utils\";\nvar PDFStreamWriter = /** @class */ (function (_super) {\n    __extends(PDFStreamWriter, _super);\n    function PDFStreamWriter(context, objectsPerTick, encodeStreams, objectsPerStream) {\n        var _this = _super.call(this, context, objectsPerTick) || this;\n        _this.encodeStreams = encodeStreams;\n        _this.objectsPerStream = objectsPerStream;\n        return _this;\n    }\n    PDFStreamWriter.prototype.computeBufferSize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var objectNumber, header, size, xrefStream, uncompressedObjects, compressedObjects, objectStreamRefs, indirectObjects, idx, len, indirectObject, ref, object, shouldNotCompress, chunk, objectStreamRef, idx, len, chunk, ref, objectStream, xrefStreamRef, xrefOffset, trailer;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        objectNumber = this.context.largestObjectNumber + 1;\n                        header = PDFHeader.forVersion(1, 7);\n                        size = header.sizeInBytes() + 2;\n                        xrefStream = PDFCrossRefStream.create(this.createTrailerDict(), this.encodeStreams);\n                        uncompressedObjects = [];\n                        compressedObjects = [];\n                        objectStreamRefs = [];\n                        indirectObjects = this.context.enumerateIndirectObjects();\n                        idx = 0, len = indirectObjects.length;\n                        _a.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 6];\n                        indirectObject = indirectObjects[idx];\n                        ref = indirectObject[0], object = indirectObject[1];\n                        shouldNotCompress = ref === this.context.trailerInfo.Encrypt ||\n                            object instanceof PDFStream ||\n                            object instanceof PDFInvalidObject ||\n                            ref.generationNumber !== 0;\n                        if (!shouldNotCompress) return [3 /*break*/, 4];\n                        uncompressedObjects.push(indirectObject);\n                        xrefStream.addUncompressedEntry(ref, size);\n                        size += this.computeIndirectObjectSize(indirectObject);\n                        if (!this.shouldWaitForTick(1)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, waitForTick()];\n                    case 2:\n                        _a.sent();\n                        _a.label = 3;\n                    case 3: return [3 /*break*/, 5];\n                    case 4:\n                        chunk = last(compressedObjects);\n                        objectStreamRef = last(objectStreamRefs);\n                        if (!chunk || chunk.length % this.objectsPerStream === 0) {\n                            chunk = [];\n                            compressedObjects.push(chunk);\n                            objectStreamRef = PDFRef.of(objectNumber++);\n                            objectStreamRefs.push(objectStreamRef);\n                        }\n                        xrefStream.addCompressedEntry(ref, objectStreamRef, chunk.length);\n                        chunk.push(indirectObject);\n                        _a.label = 5;\n                    case 5:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 6:\n                        idx = 0, len = compressedObjects.length;\n                        _a.label = 7;\n                    case 7:\n                        if (!(idx < len)) return [3 /*break*/, 10];\n                        chunk = compressedObjects[idx];\n                        ref = objectStreamRefs[idx];\n                        objectStream = PDFObjectStream.withContextAndObjects(this.context, chunk, this.encodeStreams);\n                        xrefStream.addUncompressedEntry(ref, size);\n                        size += this.computeIndirectObjectSize([ref, objectStream]);\n                        uncompressedObjects.push([ref, objectStream]);\n                        if (!this.shouldWaitForTick(chunk.length)) return [3 /*break*/, 9];\n                        return [4 /*yield*/, waitForTick()];\n                    case 8:\n                        _a.sent();\n                        _a.label = 9;\n                    case 9:\n                        idx++;\n                        return [3 /*break*/, 7];\n                    case 10:\n                        xrefStreamRef = PDFRef.of(objectNumber++);\n                        xrefStream.dict.set(PDFName.of('Size'), PDFNumber.of(objectNumber));\n                        xrefStream.addUncompressedEntry(xrefStreamRef, size);\n                        xrefOffset = size;\n                        size += this.computeIndirectObjectSize([xrefStreamRef, xrefStream]);\n                        uncompressedObjects.push([xrefStreamRef, xrefStream]);\n                        trailer = PDFTrailer.forLastCrossRefSectionOffset(xrefOffset);\n                        size += trailer.sizeInBytes();\n                        return [2 /*return*/, { size: size, header: header, indirectObjects: uncompressedObjects, trailer: trailer }];\n                }\n            });\n        });\n    };\n    PDFStreamWriter.forContext = function (context, objectsPerTick, encodeStreams, objectsPerStream) {\n        if (encodeStreams === void 0) { encodeStreams = true; }\n        if (objectsPerStream === void 0) { objectsPerStream = 50; }\n        return new PDFStreamWriter(context, objectsPerTick, encodeStreams, objectsPerStream);\n    };\n    return PDFStreamWriter;\n}(PDFWriter));\nexport default PDFStreamWriter;\n//# sourceMappingURL=PDFStreamWriter.js.map","import { __extends } from \"tslib\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, toHexStringOfMinLength, utf16Decode, utf16Encode, pdfDocEncodingDecode, parseDate, hasUtf16BOM, } from \"../../utils\";\nimport { InvalidPDFDateStringError } from \"../errors\";\nvar PDFHexString = /** @class */ (function (_super) {\n    __extends(PDFHexString, _super);\n    function PDFHexString(value) {\n        var _this = _super.call(this) || this;\n        _this.value = value;\n        return _this;\n    }\n    PDFHexString.prototype.asBytes = function () {\n        // Append a zero if the number of digits is odd. See PDF spec 7.3.4.3\n        var hex = this.value + (this.value.length % 2 === 1 ? '0' : '');\n        var hexLength = hex.length;\n        var bytes = new Uint8Array(hex.length / 2);\n        var hexOffset = 0;\n        var bytesOffset = 0;\n        // Interpret each pair of hex digits as a single byte\n        while (hexOffset < hexLength) {\n            var byte = parseInt(hex.substring(hexOffset, hexOffset + 2), 16);\n            bytes[bytesOffset] = byte;\n            hexOffset += 2;\n            bytesOffset += 1;\n        }\n        return bytes;\n    };\n    PDFHexString.prototype.decodeText = function () {\n        var bytes = this.asBytes();\n        if (hasUtf16BOM(bytes))\n            return utf16Decode(bytes);\n        return pdfDocEncodingDecode(bytes);\n    };\n    PDFHexString.prototype.decodeDate = function () {\n        var text = this.decodeText();\n        var date = parseDate(text);\n        if (!date)\n            throw new InvalidPDFDateStringError(text);\n        return date;\n    };\n    PDFHexString.prototype.asString = function () {\n        return this.value;\n    };\n    PDFHexString.prototype.clone = function () {\n        return PDFHexString.of(this.value);\n    };\n    PDFHexString.prototype.toString = function () {\n        return \"<\" + this.value + \">\";\n    };\n    PDFHexString.prototype.sizeInBytes = function () {\n        return this.value.length + 2;\n    };\n    PDFHexString.prototype.copyBytesInto = function (buffer, offset) {\n        buffer[offset++] = CharCodes.LessThan;\n        offset += copyStringIntoBuffer(this.value, buffer, offset);\n        buffer[offset++] = CharCodes.GreaterThan;\n        return this.value.length + 2;\n    };\n    PDFHexString.of = function (value) { return new PDFHexString(value); };\n    PDFHexString.fromText = function (value) {\n        var encoded = utf16Encode(value);\n        var hex = '';\n        for (var idx = 0, len = encoded.length; idx < len; idx++) {\n            hex += toHexStringOfMinLength(encoded[idx], 4);\n        }\n        return new PDFHexString(hex);\n    };\n    return PDFHexString;\n}(PDFObject));\nexport default PDFHexString;\n//# sourceMappingURL=PDFHexString.js.map","import { Encodings, Font, FontNames, } from '@pdf-lib/standard-fonts';\nimport PDFHexString from \"../objects/PDFHexString\";\nimport { toCodePoint, toHexString } from \"../../utils\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/foliojs/pdfkit/blob/f91bdd61c164a72ea06be1a43dc0a412afc3925f/lib/font/afm.coffee\n */\nvar StandardFontEmbedder = /** @class */ (function () {\n    function StandardFontEmbedder(fontName, customName) {\n        // prettier-ignore\n        this.encoding = (fontName === FontNames.ZapfDingbats ? Encodings.ZapfDingbats\n            : fontName === FontNames.Symbol ? Encodings.Symbol\n                : Encodings.WinAnsi);\n        this.font = Font.load(fontName);\n        this.fontName = this.font.FontName;\n        this.customName = customName;\n    }\n    /**\n     * Encode the JavaScript string into this font. (JavaScript encodes strings in\n     * Unicode, but standard fonts use either WinAnsi, ZapfDingbats, or Symbol\n     * encodings)\n     */\n    StandardFontEmbedder.prototype.encodeText = function (text) {\n        var glyphs = this.encodeTextAsGlyphs(text);\n        var hexCodes = new Array(glyphs.length);\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            hexCodes[idx] = toHexString(glyphs[idx].code);\n        }\n        return PDFHexString.of(hexCodes.join(''));\n    };\n    StandardFontEmbedder.prototype.widthOfTextAtSize = function (text, size) {\n        var glyphs = this.encodeTextAsGlyphs(text);\n        var totalWidth = 0;\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            var left = glyphs[idx].name;\n            var right = (glyphs[idx + 1] || {}).name;\n            var kernAmount = this.font.getXAxisKerningForPair(left, right) || 0;\n            totalWidth += this.widthOfGlyph(left) + kernAmount;\n        }\n        var scale = size / 1000;\n        return totalWidth * scale;\n    };\n    StandardFontEmbedder.prototype.heightOfFontAtSize = function (size, options) {\n        if (options === void 0) { options = {}; }\n        var _a = options.descender, descender = _a === void 0 ? true : _a;\n        var _b = this.font, Ascender = _b.Ascender, Descender = _b.Descender, FontBBox = _b.FontBBox;\n        var yTop = Ascender || FontBBox[3];\n        var yBottom = Descender || FontBBox[1];\n        var height = yTop - yBottom;\n        if (!descender)\n            height += Descender || 0;\n        return (height / 1000) * size;\n    };\n    StandardFontEmbedder.prototype.sizeOfFontAtHeight = function (height) {\n        var _a = this.font, Ascender = _a.Ascender, Descender = _a.Descender, FontBBox = _a.FontBBox;\n        var yTop = Ascender || FontBBox[3];\n        var yBottom = Descender || FontBBox[1];\n        return (1000 * height) / (yTop - yBottom);\n    };\n    StandardFontEmbedder.prototype.embedIntoContext = function (context, ref) {\n        var fontDict = context.obj({\n            Type: 'Font',\n            Subtype: 'Type1',\n            BaseFont: this.customName || this.fontName,\n            Encoding: this.encoding === Encodings.WinAnsi ? 'WinAnsiEncoding' : undefined,\n        });\n        if (ref) {\n            context.assign(ref, fontDict);\n            return ref;\n        }\n        else {\n            return context.register(fontDict);\n        }\n    };\n    StandardFontEmbedder.prototype.widthOfGlyph = function (glyphName) {\n        // Default to 250 if font doesn't specify a width\n        return this.font.getWidthOfGlyph(glyphName) || 250;\n    };\n    StandardFontEmbedder.prototype.encodeTextAsGlyphs = function (text) {\n        var codePoints = Array.from(text);\n        var glyphs = new Array(codePoints.length);\n        for (var idx = 0, len = codePoints.length; idx < len; idx++) {\n            var codePoint = toCodePoint(codePoints[idx]);\n            glyphs[idx] = this.encoding.encodeUnicodeCodePoint(codePoint);\n        }\n        return glyphs;\n    };\n    StandardFontEmbedder.for = function (fontName, customName) {\n        return new StandardFontEmbedder(fontName, customName);\n    };\n    return StandardFontEmbedder;\n}());\nexport default StandardFontEmbedder;\n//# sourceMappingURL=StandardFontEmbedder.js.map","import { toHexString, toHexStringOfMinLength } from \"../../utils\";\nimport { hasSurrogates, highSurrogate, isWithinBMP, lowSurrogate, } from \"../../utils/unicode\";\n/** `glyphs` should be an array of unique glyphs */\nexport var createCmap = function (glyphs, glyphId) {\n    var bfChars = new Array(glyphs.length);\n    for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n        var glyph = glyphs[idx];\n        var id = cmapHexFormat(cmapHexString(glyphId(glyph)));\n        var unicode = cmapHexFormat.apply(void 0, glyph.codePoints.map(cmapCodePointFormat));\n        bfChars[idx] = [id, unicode];\n    }\n    return fillCmapTemplate(bfChars);\n};\n/* =============================== Templates ================================ */\nvar fillCmapTemplate = function (bfChars) { return \"/CIDInit /ProcSet findresource begin\\n12 dict begin\\nbegincmap\\n/CIDSystemInfo <<\\n  /Registry (Adobe)\\n  /Ordering (UCS)\\n  /Supplement 0\\n>> def\\n/CMapName /Adobe-Identity-UCS def\\n/CMapType 2 def\\n1 begincodespacerange\\n<0000><ffff>\\nendcodespacerange\\n\" + bfChars.length + \" beginbfchar\\n\" + bfChars.map(function (_a) {\n    var glyphId = _a[0], codePoint = _a[1];\n    return glyphId + \" \" + codePoint;\n}).join('\\n') + \"\\nendbfchar\\nendcmap\\nCMapName currentdict /CMap defineresource pop\\nend\\nend\"; };\n/* =============================== Utilities ================================ */\nvar cmapHexFormat = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"<\" + values.join('') + \">\";\n};\nvar cmapHexString = function (value) { return toHexStringOfMinLength(value, 4); };\nvar cmapCodePointFormat = function (codePoint) {\n    if (isWithinBMP(codePoint))\n        return cmapHexString(codePoint);\n    if (hasSurrogates(codePoint)) {\n        var hs = highSurrogate(codePoint);\n        var ls = lowSurrogate(codePoint);\n        return \"\" + cmapHexString(hs) + cmapHexString(ls);\n    }\n    var hex = toHexString(codePoint);\n    var msg = \"0x\" + hex + \" is not a valid UTF-8 or UTF-16 codepoint.\";\n    throw new Error(msg);\n};\n//# sourceMappingURL=CMap.js.map","// prettier-ignore\nvar makeFontFlags = function (options) {\n    var flags = 0;\n    var flipBit = function (bit) { flags |= (1 << (bit - 1)); };\n    if (options.fixedPitch)\n        flipBit(1);\n    if (options.serif)\n        flipBit(2);\n    if (options.symbolic)\n        flipBit(3);\n    if (options.script)\n        flipBit(4);\n    if (options.nonsymbolic)\n        flipBit(6);\n    if (options.italic)\n        flipBit(7);\n    if (options.allCap)\n        flipBit(17);\n    if (options.smallCap)\n        flipBit(18);\n    if (options.forceBold)\n        flipBit(19);\n    return flags;\n};\n// From: https://github.com/foliojs/pdfkit/blob/83f5f7243172a017adcf6a7faa5547c55982c57b/lib/font/embedded.js#L123-L129\nexport var deriveFontFlags = function (font) {\n    var familyClass = font['OS/2'] ? font['OS/2'].sFamilyClass : 0;\n    var flags = makeFontFlags({\n        fixedPitch: font.post.isFixedPitch,\n        serif: 1 <= familyClass && familyClass <= 7,\n        symbolic: true,\n        script: familyClass === 10,\n        italic: font.head.macStyle.italic,\n    });\n    return flags;\n};\n//# sourceMappingURL=FontFlags.js.map","import { __extends } from \"tslib\";\nimport PDFObject from \"./PDFObject\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { copyStringIntoBuffer, padStart, utf16Decode, pdfDocEncodingDecode, toCharCode, parseDate, hasUtf16BOM, } from \"../../utils\";\nimport { InvalidPDFDateStringError } from \"../errors\";\nvar PDFString = /** @class */ (function (_super) {\n    __extends(PDFString, _super);\n    function PDFString(value) {\n        var _this = _super.call(this) || this;\n        _this.value = value;\n        return _this;\n    }\n    PDFString.prototype.asBytes = function () {\n        var bytes = [];\n        var octal = '';\n        var escaped = false;\n        var pushByte = function (byte) {\n            if (byte !== undefined)\n                bytes.push(byte);\n            escaped = false;\n        };\n        for (var idx = 0, len = this.value.length; idx < len; idx++) {\n            var char = this.value[idx];\n            var byte = toCharCode(char);\n            var nextChar = this.value[idx + 1];\n            if (!escaped) {\n                if (byte === CharCodes.BackSlash)\n                    escaped = true;\n                else\n                    pushByte(byte);\n            }\n            else {\n                if (byte === CharCodes.Newline)\n                    pushByte();\n                else if (byte === CharCodes.CarriageReturn)\n                    pushByte();\n                else if (byte === CharCodes.n)\n                    pushByte(CharCodes.Newline);\n                else if (byte === CharCodes.r)\n                    pushByte(CharCodes.CarriageReturn);\n                else if (byte === CharCodes.t)\n                    pushByte(CharCodes.Tab);\n                else if (byte === CharCodes.b)\n                    pushByte(CharCodes.Backspace);\n                else if (byte === CharCodes.f)\n                    pushByte(CharCodes.FormFeed);\n                else if (byte === CharCodes.LeftParen)\n                    pushByte(CharCodes.LeftParen);\n                else if (byte === CharCodes.RightParen)\n                    pushByte(CharCodes.RightParen);\n                else if (byte === CharCodes.Backspace)\n                    pushByte(CharCodes.BackSlash);\n                else if (byte >= CharCodes.Zero && byte <= CharCodes.Seven) {\n                    octal += char;\n                    if (octal.length === 3 || !(nextChar >= '0' && nextChar <= '7')) {\n                        pushByte(parseInt(octal, 8));\n                        octal = '';\n                    }\n                }\n                else {\n                    pushByte(byte);\n                }\n            }\n        }\n        return new Uint8Array(bytes);\n    };\n    PDFString.prototype.decodeText = function () {\n        var bytes = this.asBytes();\n        if (hasUtf16BOM(bytes))\n            return utf16Decode(bytes);\n        return pdfDocEncodingDecode(bytes);\n    };\n    PDFString.prototype.decodeDate = function () {\n        var text = this.decodeText();\n        var date = parseDate(text);\n        if (!date)\n            throw new InvalidPDFDateStringError(text);\n        return date;\n    };\n    PDFString.prototype.asString = function () {\n        return this.value;\n    };\n    PDFString.prototype.clone = function () {\n        return PDFString.of(this.value);\n    };\n    PDFString.prototype.toString = function () {\n        return \"(\" + this.value + \")\";\n    };\n    PDFString.prototype.sizeInBytes = function () {\n        return this.value.length + 2;\n    };\n    PDFString.prototype.copyBytesInto = function (buffer, offset) {\n        buffer[offset++] = CharCodes.LeftParen;\n        offset += copyStringIntoBuffer(this.value, buffer, offset);\n        buffer[offset++] = CharCodes.RightParen;\n        return this.value.length + 2;\n    };\n    // The PDF spec allows newlines and parens to appear directly within a literal\n    // string. These character _may_ be escaped. But they do not _have_ to be. So\n    // for simplicity, we will not bother escaping them.\n    PDFString.of = function (value) { return new PDFString(value); };\n    PDFString.fromDate = function (date) {\n        var year = padStart(String(date.getUTCFullYear()), 4, '0');\n        var month = padStart(String(date.getUTCMonth() + 1), 2, '0');\n        var day = padStart(String(date.getUTCDate()), 2, '0');\n        var hours = padStart(String(date.getUTCHours()), 2, '0');\n        var mins = padStart(String(date.getUTCMinutes()), 2, '0');\n        var secs = padStart(String(date.getUTCSeconds()), 2, '0');\n        return new PDFString(\"D:\" + year + month + day + hours + mins + secs + \"Z\");\n    };\n    return PDFString;\n}(PDFObject));\nexport default PDFString;\n//# sourceMappingURL=PDFString.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { createCmap } from \"./CMap\";\nimport { deriveFontFlags } from \"./FontFlags\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFString from \"../objects/PDFString\";\nimport { byAscendingId, Cache, sortedUniq, toHexStringOfMinLength, } from \"../../utils\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/jpeg.coffee\n */\nvar CustomFontEmbedder = /** @class */ (function () {\n    function CustomFontEmbedder(font, fontData, customName, fontFeatures) {\n        var _this = this;\n        this.allGlyphsInFontSortedById = function () {\n            var glyphs = new Array(_this.font.characterSet.length);\n            for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n                var codePoint = _this.font.characterSet[idx];\n                glyphs[idx] = _this.font.glyphForCodePoint(codePoint);\n            }\n            return sortedUniq(glyphs.sort(byAscendingId), function (g) { return g.id; });\n        };\n        this.font = font;\n        this.scale = 1000 / this.font.unitsPerEm;\n        this.fontData = fontData;\n        this.fontName = this.font.postscriptName || 'Font';\n        this.customName = customName;\n        this.fontFeatures = fontFeatures;\n        this.baseFontName = '';\n        this.glyphCache = Cache.populatedBy(this.allGlyphsInFontSortedById);\n    }\n    CustomFontEmbedder.for = function (fontkit, fontData, customName, fontFeatures) {\n        return __awaiter(this, void 0, void 0, function () {\n            var font;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, fontkit.create(fontData)];\n                    case 1:\n                        font = _a.sent();\n                        return [2 /*return*/, new CustomFontEmbedder(font, fontData, customName, fontFeatures)];\n                }\n            });\n        });\n    };\n    /**\n     * Encode the JavaScript string into this font. (JavaScript encodes strings in\n     * Unicode, but embedded fonts use their own custom encodings)\n     */\n    CustomFontEmbedder.prototype.encodeText = function (text) {\n        var glyphs = this.font.layout(text, this.fontFeatures).glyphs;\n        var hexCodes = new Array(glyphs.length);\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            hexCodes[idx] = toHexStringOfMinLength(glyphs[idx].id, 4);\n        }\n        return PDFHexString.of(hexCodes.join(''));\n    };\n    // The advanceWidth takes into account kerning automatically, so we don't\n    // have to do that manually like we do for the standard fonts.\n    CustomFontEmbedder.prototype.widthOfTextAtSize = function (text, size) {\n        var glyphs = this.font.layout(text, this.fontFeatures).glyphs;\n        var totalWidth = 0;\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            totalWidth += glyphs[idx].advanceWidth * this.scale;\n        }\n        var scale = size / 1000;\n        return totalWidth * scale;\n    };\n    CustomFontEmbedder.prototype.heightOfFontAtSize = function (size, options) {\n        if (options === void 0) { options = {}; }\n        var _a = options.descender, descender = _a === void 0 ? true : _a;\n        var _b = this.font, ascent = _b.ascent, descent = _b.descent, bbox = _b.bbox;\n        var yTop = (ascent || bbox.maxY) * this.scale;\n        var yBottom = (descent || bbox.minY) * this.scale;\n        var height = yTop - yBottom;\n        if (!descender)\n            height -= Math.abs(descent) || 0;\n        return (height / 1000) * size;\n    };\n    CustomFontEmbedder.prototype.sizeOfFontAtHeight = function (height) {\n        var _a = this.font, ascent = _a.ascent, descent = _a.descent, bbox = _a.bbox;\n        var yTop = (ascent || bbox.maxY) * this.scale;\n        var yBottom = (descent || bbox.minY) * this.scale;\n        return (1000 * height) / (yTop - yBottom);\n    };\n    CustomFontEmbedder.prototype.embedIntoContext = function (context, ref) {\n        this.baseFontName =\n            this.customName || context.addRandomSuffix(this.fontName);\n        return this.embedFontDict(context, ref);\n    };\n    CustomFontEmbedder.prototype.embedFontDict = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var cidFontDictRef, unicodeCMapRef, fontDict;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.embedCIDFontDict(context)];\n                    case 1:\n                        cidFontDictRef = _a.sent();\n                        unicodeCMapRef = this.embedUnicodeCmap(context);\n                        fontDict = context.obj({\n                            Type: 'Font',\n                            Subtype: 'Type0',\n                            BaseFont: this.baseFontName,\n                            Encoding: 'Identity-H',\n                            DescendantFonts: [cidFontDictRef],\n                            ToUnicode: unicodeCMapRef,\n                        });\n                        if (ref) {\n                            context.assign(ref, fontDict);\n                            return [2 /*return*/, ref];\n                        }\n                        else {\n                            return [2 /*return*/, context.register(fontDict)];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.isCFF = function () {\n        return this.font.cff;\n    };\n    CustomFontEmbedder.prototype.embedCIDFontDict = function (context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fontDescriptorRef, cidFontDict;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.embedFontDescriptor(context)];\n                    case 1:\n                        fontDescriptorRef = _a.sent();\n                        cidFontDict = context.obj({\n                            Type: 'Font',\n                            Subtype: this.isCFF() ? 'CIDFontType0' : 'CIDFontType2',\n                            CIDToGIDMap: 'Identity',\n                            BaseFont: this.baseFontName,\n                            CIDSystemInfo: {\n                                Registry: PDFString.of('Adobe'),\n                                Ordering: PDFString.of('Identity'),\n                                Supplement: 0,\n                            },\n                            FontDescriptor: fontDescriptorRef,\n                            W: this.computeWidths(),\n                        });\n                        return [2 /*return*/, context.register(cidFontDict)];\n                }\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.embedFontDescriptor = function (context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fontStreamRef, scale, _a, italicAngle, ascent, descent, capHeight, xHeight, _b, minX, minY, maxX, maxY, fontDescriptor;\n            var _c;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0: return [4 /*yield*/, this.embedFontStream(context)];\n                    case 1:\n                        fontStreamRef = _d.sent();\n                        scale = this.scale;\n                        _a = this.font, italicAngle = _a.italicAngle, ascent = _a.ascent, descent = _a.descent, capHeight = _a.capHeight, xHeight = _a.xHeight;\n                        _b = this.font.bbox, minX = _b.minX, minY = _b.minY, maxX = _b.maxX, maxY = _b.maxY;\n                        fontDescriptor = context.obj((_c = {\n                                Type: 'FontDescriptor',\n                                FontName: this.baseFontName,\n                                Flags: deriveFontFlags(this.font),\n                                FontBBox: [minX * scale, minY * scale, maxX * scale, maxY * scale],\n                                ItalicAngle: italicAngle,\n                                Ascent: ascent * scale,\n                                Descent: descent * scale,\n                                CapHeight: (capHeight || ascent) * scale,\n                                XHeight: (xHeight || 0) * scale,\n                                // Not sure how to compute/find this, nor is anybody else really:\n                                // https://stackoverflow.com/questions/35485179/stemv-value-of-the-truetype-font\n                                StemV: 0\n                            },\n                            _c[this.isCFF() ? 'FontFile3' : 'FontFile2'] = fontStreamRef,\n                            _c));\n                        return [2 /*return*/, context.register(fontDescriptor)];\n                }\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.serializeFont = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.fontData];\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.embedFontStream = function (context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var fontStream, _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _b = (_a = context).flateStream;\n                        return [4 /*yield*/, this.serializeFont()];\n                    case 1:\n                        fontStream = _b.apply(_a, [_c.sent(), {\n                                Subtype: this.isCFF() ? 'CIDFontType0C' : undefined,\n                            }]);\n                        return [2 /*return*/, context.register(fontStream)];\n                }\n            });\n        });\n    };\n    CustomFontEmbedder.prototype.embedUnicodeCmap = function (context) {\n        var cmap = createCmap(this.glyphCache.access(), this.glyphId.bind(this));\n        var cmapStream = context.flateStream(cmap);\n        return context.register(cmapStream);\n    };\n    CustomFontEmbedder.prototype.glyphId = function (glyph) {\n        return glyph ? glyph.id : -1;\n    };\n    CustomFontEmbedder.prototype.computeWidths = function () {\n        var glyphs = this.glyphCache.access();\n        var widths = [];\n        var currSection = [];\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            var currGlyph = glyphs[idx];\n            var prevGlyph = glyphs[idx - 1];\n            var currGlyphId = this.glyphId(currGlyph);\n            var prevGlyphId = this.glyphId(prevGlyph);\n            if (idx === 0) {\n                widths.push(currGlyphId);\n            }\n            else if (currGlyphId - prevGlyphId !== 1) {\n                widths.push(currSection);\n                widths.push(currGlyphId);\n                currSection = [];\n            }\n            currSection.push(currGlyph.advanceWidth * this.scale);\n        }\n        widths.push(currSection);\n        return widths;\n    };\n    return CustomFontEmbedder;\n}());\nexport default CustomFontEmbedder;\n//# sourceMappingURL=CustomFontEmbedder.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport CustomFontEmbedder from \"./CustomFontEmbedder\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport { Cache, mergeUint8Arrays, toHexStringOfMinLength } from \"../../utils\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/jpeg.coffee\n */\nvar CustomFontSubsetEmbedder = /** @class */ (function (_super) {\n    __extends(CustomFontSubsetEmbedder, _super);\n    function CustomFontSubsetEmbedder(font, fontData, customFontName, fontFeatures) {\n        var _this = _super.call(this, font, fontData, customFontName, fontFeatures) || this;\n        _this.subset = _this.font.createSubset();\n        _this.glyphs = [];\n        _this.glyphCache = Cache.populatedBy(function () { return _this.glyphs; });\n        _this.glyphIdMap = new Map();\n        return _this;\n    }\n    CustomFontSubsetEmbedder.for = function (fontkit, fontData, customFontName, fontFeatures) {\n        return __awaiter(this, void 0, void 0, function () {\n            var font;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, fontkit.create(fontData)];\n                    case 1:\n                        font = _a.sent();\n                        return [2 /*return*/, new CustomFontSubsetEmbedder(font, fontData, customFontName, fontFeatures)];\n                }\n            });\n        });\n    };\n    CustomFontSubsetEmbedder.prototype.encodeText = function (text) {\n        var glyphs = this.font.layout(text, this.fontFeatures).glyphs;\n        var hexCodes = new Array(glyphs.length);\n        for (var idx = 0, len = glyphs.length; idx < len; idx++) {\n            var glyph = glyphs[idx];\n            var subsetGlyphId = this.subset.includeGlyph(glyph);\n            this.glyphs[subsetGlyphId - 1] = glyph;\n            this.glyphIdMap.set(glyph.id, subsetGlyphId);\n            hexCodes[idx] = toHexStringOfMinLength(subsetGlyphId, 4);\n        }\n        this.glyphCache.invalidate();\n        return PDFHexString.of(hexCodes.join(''));\n    };\n    CustomFontSubsetEmbedder.prototype.isCFF = function () {\n        return this.subset.cff;\n    };\n    CustomFontSubsetEmbedder.prototype.glyphId = function (glyph) {\n        return glyph ? this.glyphIdMap.get(glyph.id) : -1;\n    };\n    CustomFontSubsetEmbedder.prototype.serializeFont = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var parts = [];\n            _this.subset\n                .encodeStream()\n                .on('data', function (bytes) { return parts.push(bytes); })\n                .on('end', function () { return resolve(mergeUint8Arrays(parts)); })\n                .on('error', function (err) { return reject(err); });\n        });\n    };\n    return CustomFontSubsetEmbedder;\n}(CustomFontEmbedder));\nexport default CustomFontSubsetEmbedder;\n//# sourceMappingURL=CustomFontSubsetEmbedder.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\n/**\n * From the PDF-A3 specification, section **3.1. Requirements - General**.\n * See:\n * * https://www.pdfa.org/wp-content/uploads/2018/10/PDF20_AN002-AF.pdf\n */\nexport var AFRelationship;\n(function (AFRelationship) {\n    AFRelationship[\"Source\"] = \"Source\";\n    AFRelationship[\"Data\"] = \"Data\";\n    AFRelationship[\"Alternative\"] = \"Alternative\";\n    AFRelationship[\"Supplement\"] = \"Supplement\";\n    AFRelationship[\"EncryptedPayload\"] = \"EncryptedPayload\";\n    AFRelationship[\"FormData\"] = \"EncryptedPayload\";\n    AFRelationship[\"Schema\"] = \"Schema\";\n    AFRelationship[\"Unspecified\"] = \"Unspecified\";\n})(AFRelationship || (AFRelationship = {}));\nvar FileEmbedder = /** @class */ (function () {\n    function FileEmbedder(fileData, fileName, options) {\n        if (options === void 0) { options = {}; }\n        this.fileData = fileData;\n        this.fileName = fileName;\n        this.options = options;\n    }\n    FileEmbedder.for = function (bytes, fileName, options) {\n        if (options === void 0) { options = {}; }\n        return new FileEmbedder(bytes, fileName, options);\n    };\n    FileEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, mimeType, description, creationDate, modificationDate, afRelationship, embeddedFileStream, embeddedFileStreamRef, fileSpecDict;\n            return __generator(this, function (_b) {\n                _a = this.options, mimeType = _a.mimeType, description = _a.description, creationDate = _a.creationDate, modificationDate = _a.modificationDate, afRelationship = _a.afRelationship;\n                embeddedFileStream = context.flateStream(this.fileData, {\n                    Type: 'EmbeddedFile',\n                    Subtype: mimeType !== null && mimeType !== void 0 ? mimeType : undefined,\n                    Params: {\n                        Size: this.fileData.length,\n                        CreationDate: creationDate\n                            ? PDFString.fromDate(creationDate)\n                            : undefined,\n                        ModDate: modificationDate\n                            ? PDFString.fromDate(modificationDate)\n                            : undefined,\n                    },\n                });\n                embeddedFileStreamRef = context.register(embeddedFileStream);\n                fileSpecDict = context.obj({\n                    Type: 'Filespec',\n                    F: PDFString.of(this.fileName),\n                    UF: PDFHexString.fromText(this.fileName),\n                    EF: { F: embeddedFileStreamRef },\n                    Desc: description ? PDFHexString.fromText(description) : undefined,\n                    AFRelationship: afRelationship !== null && afRelationship !== void 0 ? afRelationship : undefined,\n                });\n                if (ref) {\n                    context.assign(ref, fileSpecDict);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(fileSpecDict)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return FileEmbedder;\n}());\nexport default FileEmbedder;\n//# sourceMappingURL=FileEmbedder.js.map","import { __awaiter, __generator } from \"tslib\";\n// prettier-ignore\nvar MARKERS = [\n    0xffc0, 0xffc1, 0xffc2,\n    0xffc3, 0xffc5, 0xffc6,\n    0xffc7, 0xffc8, 0xffc9,\n    0xffca, 0xffcb, 0xffcc,\n    0xffcd, 0xffce, 0xffcf,\n];\nvar ColorSpace;\n(function (ColorSpace) {\n    ColorSpace[\"DeviceGray\"] = \"DeviceGray\";\n    ColorSpace[\"DeviceRGB\"] = \"DeviceRGB\";\n    ColorSpace[\"DeviceCMYK\"] = \"DeviceCMYK\";\n})(ColorSpace || (ColorSpace = {}));\nvar ChannelToColorSpace = {\n    1: ColorSpace.DeviceGray,\n    3: ColorSpace.DeviceRGB,\n    4: ColorSpace.DeviceCMYK,\n};\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/foliojs/pdfkit/blob/a6af76467ce06bd6a2af4aa7271ccac9ff152a7d/lib/image/jpeg.js\n */\nvar JpegEmbedder = /** @class */ (function () {\n    function JpegEmbedder(imageData, bitsPerComponent, width, height, colorSpace) {\n        this.imageData = imageData;\n        this.bitsPerComponent = bitsPerComponent;\n        this.width = width;\n        this.height = height;\n        this.colorSpace = colorSpace;\n    }\n    JpegEmbedder.for = function (imageData) {\n        return __awaiter(this, void 0, void 0, function () {\n            var dataView, soi, pos, marker, bitsPerComponent, height, width, channelByte, channelName, colorSpace;\n            return __generator(this, function (_a) {\n                dataView = new DataView(imageData.buffer);\n                soi = dataView.getUint16(0);\n                if (soi !== 0xffd8)\n                    throw new Error('SOI not found in JPEG');\n                pos = 2;\n                while (pos < dataView.byteLength) {\n                    marker = dataView.getUint16(pos);\n                    pos += 2;\n                    if (MARKERS.includes(marker))\n                        break;\n                    pos += dataView.getUint16(pos);\n                }\n                if (!MARKERS.includes(marker))\n                    throw new Error('Invalid JPEG');\n                pos += 2;\n                bitsPerComponent = dataView.getUint8(pos++);\n                height = dataView.getUint16(pos);\n                pos += 2;\n                width = dataView.getUint16(pos);\n                pos += 2;\n                channelByte = dataView.getUint8(pos++);\n                channelName = ChannelToColorSpace[channelByte];\n                if (!channelName)\n                    throw new Error('Unknown JPEG channel.');\n                colorSpace = channelName;\n                return [2 /*return*/, new JpegEmbedder(imageData, bitsPerComponent, width, height, colorSpace)];\n            });\n        });\n    };\n    JpegEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var xObject;\n            return __generator(this, function (_a) {\n                xObject = context.stream(this.imageData, {\n                    Type: 'XObject',\n                    Subtype: 'Image',\n                    BitsPerComponent: this.bitsPerComponent,\n                    Width: this.width,\n                    Height: this.height,\n                    ColorSpace: this.colorSpace,\n                    Filter: 'DCTDecode',\n                    // CMYK JPEG streams in PDF are typically stored complemented,\n                    // with 1 as 'off' and 0 as 'on' (PDF 32000-1:2008, 8.6.4.4).\n                    //\n                    // Standalone CMYK JPEG (usually exported by Photoshop) are\n                    // stored inverse, with 0 as 'off' and 1 as 'on', like RGB.\n                    //\n                    // Applying a swap here as a hedge that most bytes passing\n                    // through this method will benefit from it.\n                    Decode: this.colorSpace === ColorSpace.DeviceCMYK\n                        ? [1, 0, 1, 0, 1, 0, 1, 0]\n                        : undefined,\n                });\n                if (ref) {\n                    context.assign(ref, xObject);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(xObject)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return JpegEmbedder;\n}());\nexport default JpegEmbedder;\n//# sourceMappingURL=JpegEmbedder.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { PNG } from \"../../utils/png\";\n/**\n * A note of thanks to the developers of https://github.com/foliojs/pdfkit, as\n * this class borrows from:\n *   https://github.com/devongovett/pdfkit/blob/e71edab0dd4657b5a767804ba86c94c58d01fbca/lib/image/png.coffee\n */\nvar PngEmbedder = /** @class */ (function () {\n    function PngEmbedder(png) {\n        this.image = png;\n        this.bitsPerComponent = png.bitsPerComponent;\n        this.width = png.width;\n        this.height = png.height;\n        this.colorSpace = 'DeviceRGB';\n    }\n    PngEmbedder.for = function (imageData) {\n        return __awaiter(this, void 0, void 0, function () {\n            var png;\n            return __generator(this, function (_a) {\n                png = PNG.load(imageData);\n                return [2 /*return*/, new PngEmbedder(png)];\n            });\n        });\n    };\n    PngEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var SMask, xObject;\n            return __generator(this, function (_a) {\n                SMask = this.embedAlphaChannel(context);\n                xObject = context.flateStream(this.image.rgbChannel, {\n                    Type: 'XObject',\n                    Subtype: 'Image',\n                    BitsPerComponent: this.image.bitsPerComponent,\n                    Width: this.image.width,\n                    Height: this.image.height,\n                    ColorSpace: this.colorSpace,\n                    SMask: SMask,\n                });\n                if (ref) {\n                    context.assign(ref, xObject);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(xObject)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    PngEmbedder.prototype.embedAlphaChannel = function (context) {\n        if (!this.image.alphaChannel)\n            return undefined;\n        var xObject = context.flateStream(this.image.alphaChannel, {\n            Type: 'XObject',\n            Subtype: 'Image',\n            Height: this.image.height,\n            Width: this.image.width,\n            BitsPerComponent: this.image.bitsPerComponent,\n            ColorSpace: 'DeviceGray',\n            Decode: [0, 1],\n        });\n        return context.register(xObject);\n    };\n    return PngEmbedder;\n}());\nexport default PngEmbedder;\n//# sourceMappingURL=PngEmbedder.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The Stream class contained in this file is a TypeScript port of the\n * JavaScript Stream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nvar Stream = /** @class */ (function () {\n    function Stream(buffer, start, length) {\n        this.bytes = buffer;\n        this.start = start || 0;\n        this.pos = this.start;\n        this.end = !!start && !!length ? start + length : this.bytes.length;\n    }\n    Object.defineProperty(Stream.prototype, \"length\", {\n        get: function () {\n            return this.end - this.start;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Stream.prototype, \"isEmpty\", {\n        get: function () {\n            return this.length === 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Stream.prototype.getByte = function () {\n        if (this.pos >= this.end) {\n            return -1;\n        }\n        return this.bytes[this.pos++];\n    };\n    Stream.prototype.getUint16 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        if (b0 === -1 || b1 === -1) {\n            return -1;\n        }\n        return (b0 << 8) + b1;\n    };\n    Stream.prototype.getInt32 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        var b2 = this.getByte();\n        var b3 = this.getByte();\n        return (b0 << 24) + (b1 << 16) + (b2 << 8) + b3;\n    };\n    // Returns subarray of original buffer, should only be read.\n    Stream.prototype.getBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var bytes = this.bytes;\n        var pos = this.pos;\n        var strEnd = this.end;\n        if (!length) {\n            var subarray = bytes.subarray(pos, strEnd);\n            // `this.bytes` is always a `Uint8Array` here.\n            return forceClamped ? new Uint8ClampedArray(subarray) : subarray;\n        }\n        else {\n            var end = pos + length;\n            if (end > strEnd) {\n                end = strEnd;\n            }\n            this.pos = end;\n            var subarray = bytes.subarray(pos, end);\n            // `this.bytes` is always a `Uint8Array` here.\n            return forceClamped ? new Uint8ClampedArray(subarray) : subarray;\n        }\n    };\n    Stream.prototype.peekByte = function () {\n        var peekedByte = this.getByte();\n        this.pos--;\n        return peekedByte;\n    };\n    Stream.prototype.peekBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var bytes = this.getBytes(length, forceClamped);\n        this.pos -= bytes.length;\n        return bytes;\n    };\n    Stream.prototype.skip = function (n) {\n        if (!n) {\n            n = 1;\n        }\n        this.pos += n;\n    };\n    Stream.prototype.reset = function () {\n        this.pos = this.start;\n    };\n    Stream.prototype.moveStart = function () {\n        this.start = this.pos;\n    };\n    Stream.prototype.makeSubStream = function (start, length) {\n        return new Stream(this.bytes, start, length);\n    };\n    Stream.prototype.decode = function () {\n        return this.bytes;\n    };\n    return Stream;\n}());\nexport default Stream;\n//# sourceMappingURL=Stream.js.map","import { MethodNotImplementedError } from \"../errors\";\nimport Stream from \"./Stream\";\n/*\n * Copyright 2012 Mozilla Foundation\n *\n * The DecodeStream class contained in this file is a TypeScript port of the\n * JavaScript DecodeStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\n// Lots of DecodeStreams are created whose buffers are never used.  For these\n// we share a single empty buffer. This is (a) space-efficient and (b) avoids\n// having special cases that would be required if we used |null| for an empty\n// buffer.\nvar emptyBuffer = new Uint8Array(0);\n/**\n * Super class for the decoding streams\n */\nvar DecodeStream = /** @class */ (function () {\n    function DecodeStream(maybeMinBufferLength) {\n        this.pos = 0;\n        this.bufferLength = 0;\n        this.eof = false;\n        this.buffer = emptyBuffer;\n        this.minBufferLength = 512;\n        if (maybeMinBufferLength) {\n            // Compute the first power of two that is as big as maybeMinBufferLength.\n            while (this.minBufferLength < maybeMinBufferLength) {\n                this.minBufferLength *= 2;\n            }\n        }\n    }\n    Object.defineProperty(DecodeStream.prototype, \"isEmpty\", {\n        get: function () {\n            while (!this.eof && this.bufferLength === 0) {\n                this.readBlock();\n            }\n            return this.bufferLength === 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DecodeStream.prototype.getByte = function () {\n        var pos = this.pos;\n        while (this.bufferLength <= pos) {\n            if (this.eof) {\n                return -1;\n            }\n            this.readBlock();\n        }\n        return this.buffer[this.pos++];\n    };\n    DecodeStream.prototype.getUint16 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        if (b0 === -1 || b1 === -1) {\n            return -1;\n        }\n        return (b0 << 8) + b1;\n    };\n    DecodeStream.prototype.getInt32 = function () {\n        var b0 = this.getByte();\n        var b1 = this.getByte();\n        var b2 = this.getByte();\n        var b3 = this.getByte();\n        return (b0 << 24) + (b1 << 16) + (b2 << 8) + b3;\n    };\n    DecodeStream.prototype.getBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var end;\n        var pos = this.pos;\n        if (length) {\n            this.ensureBuffer(pos + length);\n            end = pos + length;\n            while (!this.eof && this.bufferLength < end) {\n                this.readBlock();\n            }\n            var bufEnd = this.bufferLength;\n            if (end > bufEnd) {\n                end = bufEnd;\n            }\n        }\n        else {\n            while (!this.eof) {\n                this.readBlock();\n            }\n            end = this.bufferLength;\n        }\n        this.pos = end;\n        var subarray = this.buffer.subarray(pos, end);\n        // `this.buffer` is either a `Uint8Array` or `Uint8ClampedArray` here.\n        return forceClamped && !(subarray instanceof Uint8ClampedArray)\n            ? new Uint8ClampedArray(subarray)\n            : subarray;\n    };\n    DecodeStream.prototype.peekByte = function () {\n        var peekedByte = this.getByte();\n        this.pos--;\n        return peekedByte;\n    };\n    DecodeStream.prototype.peekBytes = function (length, forceClamped) {\n        if (forceClamped === void 0) { forceClamped = false; }\n        var bytes = this.getBytes(length, forceClamped);\n        this.pos -= bytes.length;\n        return bytes;\n    };\n    DecodeStream.prototype.skip = function (n) {\n        if (!n) {\n            n = 1;\n        }\n        this.pos += n;\n    };\n    DecodeStream.prototype.reset = function () {\n        this.pos = 0;\n    };\n    DecodeStream.prototype.makeSubStream = function (start, length /* dict */) {\n        var end = start + length;\n        while (this.bufferLength <= end && !this.eof) {\n            this.readBlock();\n        }\n        return new Stream(this.buffer, start, length /* dict */);\n    };\n    DecodeStream.prototype.decode = function () {\n        while (!this.eof)\n            this.readBlock();\n        return this.buffer.subarray(0, this.bufferLength);\n    };\n    DecodeStream.prototype.readBlock = function () {\n        throw new MethodNotImplementedError(this.constructor.name, 'readBlock');\n    };\n    DecodeStream.prototype.ensureBuffer = function (requested) {\n        var buffer = this.buffer;\n        if (requested <= buffer.byteLength) {\n            return buffer;\n        }\n        var size = this.minBufferLength;\n        while (size < requested) {\n            size *= 2;\n        }\n        var buffer2 = new Uint8Array(size);\n        buffer2.set(buffer);\n        return (this.buffer = buffer2);\n    };\n    return DecodeStream;\n}());\nexport default DecodeStream;\n//# sourceMappingURL=DecodeStream.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The Ascii85Stream class contained in this file is a TypeScript port of the\n * JavaScript Ascii85Stream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nimport { __extends } from \"tslib\";\nimport DecodeStream from \"./DecodeStream\";\nvar isSpace = function (ch) {\n    return ch === 0x20 || ch === 0x09 || ch === 0x0d || ch === 0x0a;\n};\nvar Ascii85Stream = /** @class */ (function (_super) {\n    __extends(Ascii85Stream, _super);\n    function Ascii85Stream(stream, maybeLength) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        _this.input = new Uint8Array(5);\n        // Most streams increase in size when decoded, but Ascii85 streams\n        // typically shrink by ~20%.\n        if (maybeLength) {\n            maybeLength = 0.8 * maybeLength;\n        }\n        return _this;\n    }\n    Ascii85Stream.prototype.readBlock = function () {\n        var TILDA_CHAR = 0x7e; // '~'\n        var Z_LOWER_CHAR = 0x7a; // 'z'\n        var EOF = -1;\n        var stream = this.stream;\n        var c = stream.getByte();\n        while (isSpace(c)) {\n            c = stream.getByte();\n        }\n        if (c === EOF || c === TILDA_CHAR) {\n            this.eof = true;\n            return;\n        }\n        var bufferLength = this.bufferLength;\n        var buffer;\n        var i;\n        // special code for z\n        if (c === Z_LOWER_CHAR) {\n            buffer = this.ensureBuffer(bufferLength + 4);\n            for (i = 0; i < 4; ++i) {\n                buffer[bufferLength + i] = 0;\n            }\n            this.bufferLength += 4;\n        }\n        else {\n            var input = this.input;\n            input[0] = c;\n            for (i = 1; i < 5; ++i) {\n                c = stream.getByte();\n                while (isSpace(c)) {\n                    c = stream.getByte();\n                }\n                input[i] = c;\n                if (c === EOF || c === TILDA_CHAR) {\n                    break;\n                }\n            }\n            buffer = this.ensureBuffer(bufferLength + i - 1);\n            this.bufferLength += i - 1;\n            // partial ending;\n            if (i < 5) {\n                for (; i < 5; ++i) {\n                    input[i] = 0x21 + 84;\n                }\n                this.eof = true;\n            }\n            var t = 0;\n            for (i = 0; i < 5; ++i) {\n                t = t * 85 + (input[i] - 0x21);\n            }\n            for (i = 3; i >= 0; --i) {\n                buffer[bufferLength + i] = t & 0xff;\n                t >>= 8;\n            }\n        }\n    };\n    return Ascii85Stream;\n}(DecodeStream));\nexport default Ascii85Stream;\n//# sourceMappingURL=Ascii85Stream.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The AsciiHexStream class contained in this file is a TypeScript port of the\n * JavaScript AsciiHexStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nimport { __extends } from \"tslib\";\nimport DecodeStream from \"./DecodeStream\";\nvar AsciiHexStream = /** @class */ (function (_super) {\n    __extends(AsciiHexStream, _super);\n    function AsciiHexStream(stream, maybeLength) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        _this.firstDigit = -1;\n        // Most streams increase in size when decoded, but AsciiHex streams shrink\n        // by 50%.\n        if (maybeLength) {\n            maybeLength = 0.5 * maybeLength;\n        }\n        return _this;\n    }\n    AsciiHexStream.prototype.readBlock = function () {\n        var UPSTREAM_BLOCK_SIZE = 8000;\n        var bytes = this.stream.getBytes(UPSTREAM_BLOCK_SIZE);\n        if (!bytes.length) {\n            this.eof = true;\n            return;\n        }\n        var maxDecodeLength = (bytes.length + 1) >> 1;\n        var buffer = this.ensureBuffer(this.bufferLength + maxDecodeLength);\n        var bufferLength = this.bufferLength;\n        var firstDigit = this.firstDigit;\n        for (var i = 0, ii = bytes.length; i < ii; i++) {\n            var ch = bytes[i];\n            var digit = void 0;\n            if (ch >= 0x30 && ch <= 0x39) {\n                // '0'-'9'\n                digit = ch & 0x0f;\n            }\n            else if ((ch >= 0x41 && ch <= 0x46) || (ch >= 0x61 && ch <= 0x66)) {\n                // 'A'-'Z', 'a'-'z'\n                digit = (ch & 0x0f) + 9;\n            }\n            else if (ch === 0x3e) {\n                // '>'\n                this.eof = true;\n                break;\n            }\n            else {\n                // probably whitespace\n                continue; // ignoring\n            }\n            if (firstDigit < 0) {\n                firstDigit = digit;\n            }\n            else {\n                buffer[bufferLength++] = (firstDigit << 4) | digit;\n                firstDigit = -1;\n            }\n        }\n        if (firstDigit >= 0 && this.eof) {\n            // incomplete byte\n            buffer[bufferLength++] = firstDigit << 4;\n            firstDigit = -1;\n        }\n        this.firstDigit = firstDigit;\n        this.bufferLength = bufferLength;\n    };\n    return AsciiHexStream;\n}(DecodeStream));\nexport default AsciiHexStream;\n//# sourceMappingURL=AsciiHexStream.js.map","/*\n * Copyright 1996-2003 Glyph & Cog, LLC\n *\n * The flate stream implementation contained in this file is a JavaScript port\n * of XPDF's implementation, made available under the Apache 2.0 open source\n * license.\n */\nimport { __extends } from \"tslib\";\n/*\n * Copyright 2012 Mozilla Foundation\n *\n * The FlateStream class contained in this file is a TypeScript port of the\n * JavaScript FlateStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\n/* tslint:disable  no-conditional-assignment */\nimport DecodeStream from \"./DecodeStream\";\n// prettier-ignore\nvar codeLenCodeMap = new Int32Array([\n    16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15\n]);\n// prettier-ignore\nvar lengthDecode = new Int32Array([\n    0x00003, 0x00004, 0x00005, 0x00006, 0x00007, 0x00008, 0x00009, 0x0000a,\n    0x1000b, 0x1000d, 0x1000f, 0x10011, 0x20013, 0x20017, 0x2001b, 0x2001f,\n    0x30023, 0x3002b, 0x30033, 0x3003b, 0x40043, 0x40053, 0x40063, 0x40073,\n    0x50083, 0x500a3, 0x500c3, 0x500e3, 0x00102, 0x00102, 0x00102\n]);\n// prettier-ignore\nvar distDecode = new Int32Array([\n    0x00001, 0x00002, 0x00003, 0x00004, 0x10005, 0x10007, 0x20009, 0x2000d,\n    0x30011, 0x30019, 0x40021, 0x40031, 0x50041, 0x50061, 0x60081, 0x600c1,\n    0x70101, 0x70181, 0x80201, 0x80301, 0x90401, 0x90601, 0xa0801, 0xa0c01,\n    0xb1001, 0xb1801, 0xc2001, 0xc3001, 0xd4001, 0xd6001\n]);\n// prettier-ignore\nvar fixedLitCodeTab = [new Int32Array([\n        0x70100, 0x80050, 0x80010, 0x80118, 0x70110, 0x80070, 0x80030, 0x900c0,\n        0x70108, 0x80060, 0x80020, 0x900a0, 0x80000, 0x80080, 0x80040, 0x900e0,\n        0x70104, 0x80058, 0x80018, 0x90090, 0x70114, 0x80078, 0x80038, 0x900d0,\n        0x7010c, 0x80068, 0x80028, 0x900b0, 0x80008, 0x80088, 0x80048, 0x900f0,\n        0x70102, 0x80054, 0x80014, 0x8011c, 0x70112, 0x80074, 0x80034, 0x900c8,\n        0x7010a, 0x80064, 0x80024, 0x900a8, 0x80004, 0x80084, 0x80044, 0x900e8,\n        0x70106, 0x8005c, 0x8001c, 0x90098, 0x70116, 0x8007c, 0x8003c, 0x900d8,\n        0x7010e, 0x8006c, 0x8002c, 0x900b8, 0x8000c, 0x8008c, 0x8004c, 0x900f8,\n        0x70101, 0x80052, 0x80012, 0x8011a, 0x70111, 0x80072, 0x80032, 0x900c4,\n        0x70109, 0x80062, 0x80022, 0x900a4, 0x80002, 0x80082, 0x80042, 0x900e4,\n        0x70105, 0x8005a, 0x8001a, 0x90094, 0x70115, 0x8007a, 0x8003a, 0x900d4,\n        0x7010d, 0x8006a, 0x8002a, 0x900b4, 0x8000a, 0x8008a, 0x8004a, 0x900f4,\n        0x70103, 0x80056, 0x80016, 0x8011e, 0x70113, 0x80076, 0x80036, 0x900cc,\n        0x7010b, 0x80066, 0x80026, 0x900ac, 0x80006, 0x80086, 0x80046, 0x900ec,\n        0x70107, 0x8005e, 0x8001e, 0x9009c, 0x70117, 0x8007e, 0x8003e, 0x900dc,\n        0x7010f, 0x8006e, 0x8002e, 0x900bc, 0x8000e, 0x8008e, 0x8004e, 0x900fc,\n        0x70100, 0x80051, 0x80011, 0x80119, 0x70110, 0x80071, 0x80031, 0x900c2,\n        0x70108, 0x80061, 0x80021, 0x900a2, 0x80001, 0x80081, 0x80041, 0x900e2,\n        0x70104, 0x80059, 0x80019, 0x90092, 0x70114, 0x80079, 0x80039, 0x900d2,\n        0x7010c, 0x80069, 0x80029, 0x900b2, 0x80009, 0x80089, 0x80049, 0x900f2,\n        0x70102, 0x80055, 0x80015, 0x8011d, 0x70112, 0x80075, 0x80035, 0x900ca,\n        0x7010a, 0x80065, 0x80025, 0x900aa, 0x80005, 0x80085, 0x80045, 0x900ea,\n        0x70106, 0x8005d, 0x8001d, 0x9009a, 0x70116, 0x8007d, 0x8003d, 0x900da,\n        0x7010e, 0x8006d, 0x8002d, 0x900ba, 0x8000d, 0x8008d, 0x8004d, 0x900fa,\n        0x70101, 0x80053, 0x80013, 0x8011b, 0x70111, 0x80073, 0x80033, 0x900c6,\n        0x70109, 0x80063, 0x80023, 0x900a6, 0x80003, 0x80083, 0x80043, 0x900e6,\n        0x70105, 0x8005b, 0x8001b, 0x90096, 0x70115, 0x8007b, 0x8003b, 0x900d6,\n        0x7010d, 0x8006b, 0x8002b, 0x900b6, 0x8000b, 0x8008b, 0x8004b, 0x900f6,\n        0x70103, 0x80057, 0x80017, 0x8011f, 0x70113, 0x80077, 0x80037, 0x900ce,\n        0x7010b, 0x80067, 0x80027, 0x900ae, 0x80007, 0x80087, 0x80047, 0x900ee,\n        0x70107, 0x8005f, 0x8001f, 0x9009e, 0x70117, 0x8007f, 0x8003f, 0x900de,\n        0x7010f, 0x8006f, 0x8002f, 0x900be, 0x8000f, 0x8008f, 0x8004f, 0x900fe,\n        0x70100, 0x80050, 0x80010, 0x80118, 0x70110, 0x80070, 0x80030, 0x900c1,\n        0x70108, 0x80060, 0x80020, 0x900a1, 0x80000, 0x80080, 0x80040, 0x900e1,\n        0x70104, 0x80058, 0x80018, 0x90091, 0x70114, 0x80078, 0x80038, 0x900d1,\n        0x7010c, 0x80068, 0x80028, 0x900b1, 0x80008, 0x80088, 0x80048, 0x900f1,\n        0x70102, 0x80054, 0x80014, 0x8011c, 0x70112, 0x80074, 0x80034, 0x900c9,\n        0x7010a, 0x80064, 0x80024, 0x900a9, 0x80004, 0x80084, 0x80044, 0x900e9,\n        0x70106, 0x8005c, 0x8001c, 0x90099, 0x70116, 0x8007c, 0x8003c, 0x900d9,\n        0x7010e, 0x8006c, 0x8002c, 0x900b9, 0x8000c, 0x8008c, 0x8004c, 0x900f9,\n        0x70101, 0x80052, 0x80012, 0x8011a, 0x70111, 0x80072, 0x80032, 0x900c5,\n        0x70109, 0x80062, 0x80022, 0x900a5, 0x80002, 0x80082, 0x80042, 0x900e5,\n        0x70105, 0x8005a, 0x8001a, 0x90095, 0x70115, 0x8007a, 0x8003a, 0x900d5,\n        0x7010d, 0x8006a, 0x8002a, 0x900b5, 0x8000a, 0x8008a, 0x8004a, 0x900f5,\n        0x70103, 0x80056, 0x80016, 0x8011e, 0x70113, 0x80076, 0x80036, 0x900cd,\n        0x7010b, 0x80066, 0x80026, 0x900ad, 0x80006, 0x80086, 0x80046, 0x900ed,\n        0x70107, 0x8005e, 0x8001e, 0x9009d, 0x70117, 0x8007e, 0x8003e, 0x900dd,\n        0x7010f, 0x8006e, 0x8002e, 0x900bd, 0x8000e, 0x8008e, 0x8004e, 0x900fd,\n        0x70100, 0x80051, 0x80011, 0x80119, 0x70110, 0x80071, 0x80031, 0x900c3,\n        0x70108, 0x80061, 0x80021, 0x900a3, 0x80001, 0x80081, 0x80041, 0x900e3,\n        0x70104, 0x80059, 0x80019, 0x90093, 0x70114, 0x80079, 0x80039, 0x900d3,\n        0x7010c, 0x80069, 0x80029, 0x900b3, 0x80009, 0x80089, 0x80049, 0x900f3,\n        0x70102, 0x80055, 0x80015, 0x8011d, 0x70112, 0x80075, 0x80035, 0x900cb,\n        0x7010a, 0x80065, 0x80025, 0x900ab, 0x80005, 0x80085, 0x80045, 0x900eb,\n        0x70106, 0x8005d, 0x8001d, 0x9009b, 0x70116, 0x8007d, 0x8003d, 0x900db,\n        0x7010e, 0x8006d, 0x8002d, 0x900bb, 0x8000d, 0x8008d, 0x8004d, 0x900fb,\n        0x70101, 0x80053, 0x80013, 0x8011b, 0x70111, 0x80073, 0x80033, 0x900c7,\n        0x70109, 0x80063, 0x80023, 0x900a7, 0x80003, 0x80083, 0x80043, 0x900e7,\n        0x70105, 0x8005b, 0x8001b, 0x90097, 0x70115, 0x8007b, 0x8003b, 0x900d7,\n        0x7010d, 0x8006b, 0x8002b, 0x900b7, 0x8000b, 0x8008b, 0x8004b, 0x900f7,\n        0x70103, 0x80057, 0x80017, 0x8011f, 0x70113, 0x80077, 0x80037, 0x900cf,\n        0x7010b, 0x80067, 0x80027, 0x900af, 0x80007, 0x80087, 0x80047, 0x900ef,\n        0x70107, 0x8005f, 0x8001f, 0x9009f, 0x70117, 0x8007f, 0x8003f, 0x900df,\n        0x7010f, 0x8006f, 0x8002f, 0x900bf, 0x8000f, 0x8008f, 0x8004f, 0x900ff\n    ]), 9];\n// prettier-ignore\nvar fixedDistCodeTab = [new Int32Array([\n        0x50000, 0x50010, 0x50008, 0x50018, 0x50004, 0x50014, 0x5000c, 0x5001c,\n        0x50002, 0x50012, 0x5000a, 0x5001a, 0x50006, 0x50016, 0x5000e, 0x00000,\n        0x50001, 0x50011, 0x50009, 0x50019, 0x50005, 0x50015, 0x5000d, 0x5001d,\n        0x50003, 0x50013, 0x5000b, 0x5001b, 0x50007, 0x50017, 0x5000f, 0x00000\n    ]), 5];\nvar FlateStream = /** @class */ (function (_super) {\n    __extends(FlateStream, _super);\n    function FlateStream(stream, maybeLength) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        var cmf = stream.getByte();\n        var flg = stream.getByte();\n        if (cmf === -1 || flg === -1) {\n            throw new Error(\"Invalid header in flate stream: \" + cmf + \", \" + flg);\n        }\n        if ((cmf & 0x0f) !== 0x08) {\n            throw new Error(\"Unknown compression method in flate stream: \" + cmf + \", \" + flg);\n        }\n        if (((cmf << 8) + flg) % 31 !== 0) {\n            throw new Error(\"Bad FCHECK in flate stream: \" + cmf + \", \" + flg);\n        }\n        if (flg & 0x20) {\n            throw new Error(\"FDICT bit set in flate stream: \" + cmf + \", \" + flg);\n        }\n        _this.codeSize = 0;\n        _this.codeBuf = 0;\n        return _this;\n    }\n    FlateStream.prototype.readBlock = function () {\n        var buffer;\n        var len;\n        var str = this.stream;\n        // read block header\n        var hdr = this.getBits(3);\n        if (hdr & 1) {\n            this.eof = true;\n        }\n        hdr >>= 1;\n        if (hdr === 0) {\n            // uncompressed block\n            var b = void 0;\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad block header in flate stream');\n            }\n            var blockLen = b;\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad block header in flate stream');\n            }\n            blockLen |= b << 8;\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad block header in flate stream');\n            }\n            var check = b;\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad block header in flate stream');\n            }\n            check |= b << 8;\n            if (check !== (~blockLen & 0xffff) && (blockLen !== 0 || check !== 0)) {\n                // Ignoring error for bad \"empty\" block (see issue 1277)\n                throw new Error('Bad uncompressed block length in flate stream');\n            }\n            this.codeBuf = 0;\n            this.codeSize = 0;\n            var bufferLength = this.bufferLength;\n            buffer = this.ensureBuffer(bufferLength + blockLen);\n            var end = bufferLength + blockLen;\n            this.bufferLength = end;\n            if (blockLen === 0) {\n                if (str.peekByte() === -1) {\n                    this.eof = true;\n                }\n            }\n            else {\n                for (var n = bufferLength; n < end; ++n) {\n                    if ((b = str.getByte()) === -1) {\n                        this.eof = true;\n                        break;\n                    }\n                    buffer[n] = b;\n                }\n            }\n            return;\n        }\n        var litCodeTable;\n        var distCodeTable;\n        if (hdr === 1) {\n            // compressed block, fixed codes\n            litCodeTable = fixedLitCodeTab;\n            distCodeTable = fixedDistCodeTab;\n        }\n        else if (hdr === 2) {\n            // compressed block, dynamic codes\n            var numLitCodes = this.getBits(5) + 257;\n            var numDistCodes = this.getBits(5) + 1;\n            var numCodeLenCodes = this.getBits(4) + 4;\n            // build the code lengths code table\n            var codeLenCodeLengths = new Uint8Array(codeLenCodeMap.length);\n            var i = void 0;\n            for (i = 0; i < numCodeLenCodes; ++i) {\n                codeLenCodeLengths[codeLenCodeMap[i]] = this.getBits(3);\n            }\n            var codeLenCodeTab = this.generateHuffmanTable(codeLenCodeLengths);\n            // build the literal and distance code tables\n            len = 0;\n            i = 0;\n            var codes = numLitCodes + numDistCodes;\n            var codeLengths = new Uint8Array(codes);\n            var bitsLength = void 0;\n            var bitsOffset = void 0;\n            var what = void 0;\n            while (i < codes) {\n                var code = this.getCode(codeLenCodeTab);\n                if (code === 16) {\n                    bitsLength = 2;\n                    bitsOffset = 3;\n                    what = len;\n                }\n                else if (code === 17) {\n                    bitsLength = 3;\n                    bitsOffset = 3;\n                    what = len = 0;\n                }\n                else if (code === 18) {\n                    bitsLength = 7;\n                    bitsOffset = 11;\n                    what = len = 0;\n                }\n                else {\n                    codeLengths[i++] = len = code;\n                    continue;\n                }\n                var repeatLength = this.getBits(bitsLength) + bitsOffset;\n                while (repeatLength-- > 0) {\n                    codeLengths[i++] = what;\n                }\n            }\n            litCodeTable = this.generateHuffmanTable(codeLengths.subarray(0, numLitCodes));\n            distCodeTable = this.generateHuffmanTable(codeLengths.subarray(numLitCodes, codes));\n        }\n        else {\n            throw new Error('Unknown block type in flate stream');\n        }\n        buffer = this.buffer;\n        var limit = buffer ? buffer.length : 0;\n        var pos = this.bufferLength;\n        while (true) {\n            var code1 = this.getCode(litCodeTable);\n            if (code1 < 256) {\n                if (pos + 1 >= limit) {\n                    buffer = this.ensureBuffer(pos + 1);\n                    limit = buffer.length;\n                }\n                buffer[pos++] = code1;\n                continue;\n            }\n            if (code1 === 256) {\n                this.bufferLength = pos;\n                return;\n            }\n            code1 -= 257;\n            code1 = lengthDecode[code1];\n            var code2 = code1 >> 16;\n            if (code2 > 0) {\n                code2 = this.getBits(code2);\n            }\n            len = (code1 & 0xffff) + code2;\n            code1 = this.getCode(distCodeTable);\n            code1 = distDecode[code1];\n            code2 = code1 >> 16;\n            if (code2 > 0) {\n                code2 = this.getBits(code2);\n            }\n            var dist = (code1 & 0xffff) + code2;\n            if (pos + len >= limit) {\n                buffer = this.ensureBuffer(pos + len);\n                limit = buffer.length;\n            }\n            for (var k = 0; k < len; ++k, ++pos) {\n                buffer[pos] = buffer[pos - dist];\n            }\n        }\n    };\n    FlateStream.prototype.getBits = function (bits) {\n        var str = this.stream;\n        var codeSize = this.codeSize;\n        var codeBuf = this.codeBuf;\n        var b;\n        while (codeSize < bits) {\n            if ((b = str.getByte()) === -1) {\n                throw new Error('Bad encoding in flate stream');\n            }\n            codeBuf |= b << codeSize;\n            codeSize += 8;\n        }\n        b = codeBuf & ((1 << bits) - 1);\n        this.codeBuf = codeBuf >> bits;\n        this.codeSize = codeSize -= bits;\n        return b;\n    };\n    FlateStream.prototype.getCode = function (table) {\n        var str = this.stream;\n        var codes = table[0];\n        var maxLen = table[1];\n        var codeSize = this.codeSize;\n        var codeBuf = this.codeBuf;\n        var b;\n        while (codeSize < maxLen) {\n            if ((b = str.getByte()) === -1) {\n                // premature end of stream. code might however still be valid.\n                // codeSize < codeLen check below guards against incomplete codeVal.\n                break;\n            }\n            codeBuf |= b << codeSize;\n            codeSize += 8;\n        }\n        var code = codes[codeBuf & ((1 << maxLen) - 1)];\n        if (typeof codes === 'number') {\n            console.log('FLATE:', code);\n        }\n        var codeLen = code >> 16;\n        var codeVal = code & 0xffff;\n        if (codeLen < 1 || codeSize < codeLen) {\n            throw new Error('Bad encoding in flate stream');\n        }\n        this.codeBuf = codeBuf >> codeLen;\n        this.codeSize = codeSize - codeLen;\n        return codeVal;\n    };\n    FlateStream.prototype.generateHuffmanTable = function (lengths) {\n        var n = lengths.length;\n        // find max code length\n        var maxLen = 0;\n        var i;\n        for (i = 0; i < n; ++i) {\n            if (lengths[i] > maxLen) {\n                maxLen = lengths[i];\n            }\n        }\n        // build the table\n        var size = 1 << maxLen;\n        var codes = new Int32Array(size);\n        for (var len = 1, code = 0, skip = 2; len <= maxLen; ++len, code <<= 1, skip <<= 1) {\n            for (var val = 0; val < n; ++val) {\n                if (lengths[val] === len) {\n                    // bit-reverse the code\n                    var code2 = 0;\n                    var t = code;\n                    for (i = 0; i < len; ++i) {\n                        code2 = (code2 << 1) | (t & 1);\n                        t >>= 1;\n                    }\n                    // fill the table entries\n                    for (i = code2; i < size; i += skip) {\n                        codes[i] = (len << 16) | val;\n                    }\n                    ++code;\n                }\n            }\n        }\n        return [codes, maxLen];\n    };\n    return FlateStream;\n}(DecodeStream));\nexport default FlateStream;\n//# sourceMappingURL=FlateStream.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The LZWStream class contained in this file is a TypeScript port of the\n * JavaScript LZWStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nimport { __extends } from \"tslib\";\nimport DecodeStream from \"./DecodeStream\";\nvar LZWStream = /** @class */ (function (_super) {\n    __extends(LZWStream, _super);\n    function LZWStream(stream, maybeLength, earlyChange) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        _this.cachedData = 0;\n        _this.bitsCached = 0;\n        var maxLzwDictionarySize = 4096;\n        var lzwState = {\n            earlyChange: earlyChange,\n            codeLength: 9,\n            nextCode: 258,\n            dictionaryValues: new Uint8Array(maxLzwDictionarySize),\n            dictionaryLengths: new Uint16Array(maxLzwDictionarySize),\n            dictionaryPrevCodes: new Uint16Array(maxLzwDictionarySize),\n            currentSequence: new Uint8Array(maxLzwDictionarySize),\n            currentSequenceLength: 0,\n        };\n        for (var i = 0; i < 256; ++i) {\n            lzwState.dictionaryValues[i] = i;\n            lzwState.dictionaryLengths[i] = 1;\n        }\n        _this.lzwState = lzwState;\n        return _this;\n    }\n    LZWStream.prototype.readBlock = function () {\n        var blockSize = 512;\n        var estimatedDecodedSize = blockSize * 2;\n        var decodedSizeDelta = blockSize;\n        var i;\n        var j;\n        var q;\n        var lzwState = this.lzwState;\n        if (!lzwState) {\n            return; // eof was found\n        }\n        var earlyChange = lzwState.earlyChange;\n        var nextCode = lzwState.nextCode;\n        var dictionaryValues = lzwState.dictionaryValues;\n        var dictionaryLengths = lzwState.dictionaryLengths;\n        var dictionaryPrevCodes = lzwState.dictionaryPrevCodes;\n        var codeLength = lzwState.codeLength;\n        var prevCode = lzwState.prevCode;\n        var currentSequence = lzwState.currentSequence;\n        var currentSequenceLength = lzwState.currentSequenceLength;\n        var decodedLength = 0;\n        var currentBufferLength = this.bufferLength;\n        var buffer = this.ensureBuffer(this.bufferLength + estimatedDecodedSize);\n        for (i = 0; i < blockSize; i++) {\n            var code = this.readBits(codeLength);\n            var hasPrev = currentSequenceLength > 0;\n            if (!code || code < 256) {\n                currentSequence[0] = code;\n                currentSequenceLength = 1;\n            }\n            else if (code >= 258) {\n                if (code < nextCode) {\n                    currentSequenceLength = dictionaryLengths[code];\n                    for (j = currentSequenceLength - 1, q = code; j >= 0; j--) {\n                        currentSequence[j] = dictionaryValues[q];\n                        q = dictionaryPrevCodes[q];\n                    }\n                }\n                else {\n                    currentSequence[currentSequenceLength++] = currentSequence[0];\n                }\n            }\n            else if (code === 256) {\n                codeLength = 9;\n                nextCode = 258;\n                currentSequenceLength = 0;\n                continue;\n            }\n            else {\n                this.eof = true;\n                delete this.lzwState;\n                break;\n            }\n            if (hasPrev) {\n                dictionaryPrevCodes[nextCode] = prevCode;\n                dictionaryLengths[nextCode] = dictionaryLengths[prevCode] + 1;\n                dictionaryValues[nextCode] = currentSequence[0];\n                nextCode++;\n                codeLength =\n                    (nextCode + earlyChange) & (nextCode + earlyChange - 1)\n                        ? codeLength\n                        : Math.min(Math.log(nextCode + earlyChange) / 0.6931471805599453 + 1, 12) | 0;\n            }\n            prevCode = code;\n            decodedLength += currentSequenceLength;\n            if (estimatedDecodedSize < decodedLength) {\n                do {\n                    estimatedDecodedSize += decodedSizeDelta;\n                } while (estimatedDecodedSize < decodedLength);\n                buffer = this.ensureBuffer(this.bufferLength + estimatedDecodedSize);\n            }\n            for (j = 0; j < currentSequenceLength; j++) {\n                buffer[currentBufferLength++] = currentSequence[j];\n            }\n        }\n        lzwState.nextCode = nextCode;\n        lzwState.codeLength = codeLength;\n        lzwState.prevCode = prevCode;\n        lzwState.currentSequenceLength = currentSequenceLength;\n        this.bufferLength = currentBufferLength;\n    };\n    LZWStream.prototype.readBits = function (n) {\n        var bitsCached = this.bitsCached;\n        var cachedData = this.cachedData;\n        while (bitsCached < n) {\n            var c = this.stream.getByte();\n            if (c === -1) {\n                this.eof = true;\n                return null;\n            }\n            cachedData = (cachedData << 8) | c;\n            bitsCached += 8;\n        }\n        this.bitsCached = bitsCached -= n;\n        this.cachedData = cachedData;\n        return (cachedData >>> bitsCached) & ((1 << n) - 1);\n    };\n    return LZWStream;\n}(DecodeStream));\nexport default LZWStream;\n//# sourceMappingURL=LZWStream.js.map","/*\n * Copyright 2012 Mozilla Foundation\n *\n * The RunLengthStream class contained in this file is a TypeScript port of the\n * JavaScript RunLengthStream class in Mozilla's pdf.js project, made available\n * under the Apache 2.0 open source license.\n */\nimport { __extends } from \"tslib\";\nimport DecodeStream from \"./DecodeStream\";\nvar RunLengthStream = /** @class */ (function (_super) {\n    __extends(RunLengthStream, _super);\n    function RunLengthStream(stream, maybeLength) {\n        var _this = _super.call(this, maybeLength) || this;\n        _this.stream = stream;\n        return _this;\n    }\n    RunLengthStream.prototype.readBlock = function () {\n        // The repeatHeader has following format. The first byte defines type of run\n        // and amount of bytes to repeat/copy: n = 0 through 127 - copy next n bytes\n        // (in addition to the second byte from the header), n = 129 through 255 -\n        // duplicate the second byte from the header (257 - n) times, n = 128 - end.\n        var repeatHeader = this.stream.getBytes(2);\n        if (!repeatHeader || repeatHeader.length < 2 || repeatHeader[0] === 128) {\n            this.eof = true;\n            return;\n        }\n        var buffer;\n        var bufferLength = this.bufferLength;\n        var n = repeatHeader[0];\n        if (n < 128) {\n            // copy n bytes\n            buffer = this.ensureBuffer(bufferLength + n + 1);\n            buffer[bufferLength++] = repeatHeader[1];\n            if (n > 0) {\n                var source = this.stream.getBytes(n);\n                buffer.set(source, bufferLength);\n                bufferLength += n;\n            }\n        }\n        else {\n            n = 257 - n;\n            var b = repeatHeader[1];\n            buffer = this.ensureBuffer(bufferLength + n + 1);\n            for (var i = 0; i < n; i++) {\n                buffer[bufferLength++] = b;\n            }\n        }\n        this.bufferLength = bufferLength;\n    };\n    return RunLengthStream;\n}(DecodeStream));\nexport default RunLengthStream;\n//# sourceMappingURL=RunLengthStream.js.map","import { UnexpectedObjectTypeError, UnsupportedEncodingError, } from \"../errors\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport Ascii85Stream from \"./Ascii85Stream\";\nimport AsciiHexStream from \"./AsciiHexStream\";\nimport FlateStream from \"./FlateStream\";\nimport LZWStream from \"./LZWStream\";\nimport RunLengthStream from \"./RunLengthStream\";\nimport Stream from \"./Stream\";\nvar decodeStream = function (stream, encoding, params) {\n    if (encoding === PDFName.of('FlateDecode')) {\n        return new FlateStream(stream);\n    }\n    if (encoding === PDFName.of('LZWDecode')) {\n        var earlyChange = 1;\n        if (params instanceof PDFDict) {\n            var EarlyChange = params.lookup(PDFName.of('EarlyChange'));\n            if (EarlyChange instanceof PDFNumber) {\n                earlyChange = EarlyChange.asNumber();\n            }\n        }\n        return new LZWStream(stream, undefined, earlyChange);\n    }\n    if (encoding === PDFName.of('ASCII85Decode')) {\n        return new Ascii85Stream(stream);\n    }\n    if (encoding === PDFName.of('ASCIIHexDecode')) {\n        return new AsciiHexStream(stream);\n    }\n    if (encoding === PDFName.of('RunLengthDecode')) {\n        return new RunLengthStream(stream);\n    }\n    throw new UnsupportedEncodingError(encoding.asString());\n};\nexport var decodePDFRawStream = function (_a) {\n    var dict = _a.dict, contents = _a.contents;\n    var stream = new Stream(contents);\n    var Filter = dict.lookup(PDFName.of('Filter'));\n    var DecodeParms = dict.lookup(PDFName.of('DecodeParms'));\n    if (Filter instanceof PDFName) {\n        stream = decodeStream(stream, Filter, DecodeParms);\n    }\n    else if (Filter instanceof PDFArray) {\n        for (var idx = 0, len = Filter.size(); idx < len; idx++) {\n            stream = decodeStream(stream, Filter.lookup(idx, PDFName), DecodeParms && DecodeParms.lookupMaybe(idx, PDFDict));\n        }\n    }\n    else if (!!Filter) {\n        throw new UnexpectedObjectTypeError([PDFName, PDFArray], Filter);\n    }\n    return stream;\n};\n//# sourceMappingURL=decode.js.map","import { __awaiter, __generator } from \"tslib\";\nimport { MissingPageContentsEmbeddingError, UnrecognizedStreamTypeError, } from \"../errors\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRawStream from \"../objects/PDFRawStream\";\nimport PDFStream from \"../objects/PDFStream\";\nimport { decodePDFRawStream } from \"../streams/decode\";\nimport PDFContentStream from \"../structures/PDFContentStream\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { mergeIntoTypedArray } from \"../../utils\";\nvar fullPageBoundingBox = function (page) {\n    var mediaBox = page.MediaBox();\n    var width = mediaBox.lookup(2, PDFNumber).asNumber() -\n        mediaBox.lookup(0, PDFNumber).asNumber();\n    var height = mediaBox.lookup(3, PDFNumber).asNumber() -\n        mediaBox.lookup(1, PDFNumber).asNumber();\n    return { left: 0, bottom: 0, right: width, top: height };\n};\n// Returns the identity matrix, modified to position the content of the given\n// bounding box at (0, 0).\nvar boundingBoxAdjustedMatrix = function (bb) { return [1, 0, 0, 1, -bb.left, -bb.bottom]; };\nvar PDFPageEmbedder = /** @class */ (function () {\n    function PDFPageEmbedder(page, boundingBox, transformationMatrix) {\n        this.page = page;\n        var bb = boundingBox !== null && boundingBox !== void 0 ? boundingBox : fullPageBoundingBox(page);\n        this.width = bb.right - bb.left;\n        this.height = bb.top - bb.bottom;\n        this.boundingBox = bb;\n        this.transformationMatrix = transformationMatrix !== null && transformationMatrix !== void 0 ? transformationMatrix : boundingBoxAdjustedMatrix(bb);\n    }\n    PDFPageEmbedder.for = function (page, boundingBox, transformationMatrix) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new PDFPageEmbedder(page, boundingBox, transformationMatrix)];\n            });\n        });\n    };\n    PDFPageEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, Contents, Resources, decodedContents, _b, left, bottom, right, top, xObject;\n            return __generator(this, function (_c) {\n                _a = this.page.normalizedEntries(), Contents = _a.Contents, Resources = _a.Resources;\n                if (!Contents)\n                    throw new MissingPageContentsEmbeddingError();\n                decodedContents = this.decodeContents(Contents);\n                _b = this.boundingBox, left = _b.left, bottom = _b.bottom, right = _b.right, top = _b.top;\n                xObject = context.flateStream(decodedContents, {\n                    Type: 'XObject',\n                    Subtype: 'Form',\n                    FormType: 1,\n                    BBox: [left, bottom, right, top],\n                    Matrix: this.transformationMatrix,\n                    Resources: Resources,\n                });\n                if (ref) {\n                    context.assign(ref, xObject);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(xObject)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    // `contents` is an array of streams which are merged to include them in the XObject.\n    // This methods extracts each stream and joins them with a newline character.\n    PDFPageEmbedder.prototype.decodeContents = function (contents) {\n        var newline = Uint8Array.of(CharCodes.Newline);\n        var decodedContents = [];\n        for (var idx = 0, len = contents.size(); idx < len; idx++) {\n            var stream = contents.lookup(idx, PDFStream);\n            var content = void 0;\n            if (stream instanceof PDFRawStream) {\n                content = decodePDFRawStream(stream).decode();\n            }\n            else if (stream instanceof PDFContentStream) {\n                content = stream.getUnencodedContents();\n            }\n            else {\n                throw new UnrecognizedStreamTypeError(stream);\n            }\n            decodedContents.push(content, newline);\n        }\n        return mergeIntoTypedArray.apply(void 0, decodedContents);\n    };\n    return PDFPageEmbedder;\n}());\nexport default PDFPageEmbedder;\n//# sourceMappingURL=PDFPageEmbedder.js.map","import PDFArray from \"../objects/PDFArray\";\nimport PDFBool from \"../objects/PDFBool\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport { assertEachIs, assertInteger, assertIsOneOf, assertRange, } from \"../../utils\";\nvar asEnum = function (rawValue, enumType) {\n    if (rawValue === undefined)\n        return undefined;\n    return enumType[rawValue];\n};\nexport var NonFullScreenPageMode;\n(function (NonFullScreenPageMode) {\n    /**\n     * After exiting FullScreen mode, neither the document outline nor thumbnail\n     * images should be visible.\n     */\n    NonFullScreenPageMode[\"UseNone\"] = \"UseNone\";\n    /** After exiting FullScreen mode, the document outline should be visible. */\n    NonFullScreenPageMode[\"UseOutlines\"] = \"UseOutlines\";\n    /** After exiting FullScreen mode, thumbnail images should be visible. */\n    NonFullScreenPageMode[\"UseThumbs\"] = \"UseThumbs\";\n    /**\n     * After exiting FullScreen mode, the optional content group panel should be\n     * visible.\n     */\n    NonFullScreenPageMode[\"UseOC\"] = \"UseOC\";\n})(NonFullScreenPageMode || (NonFullScreenPageMode = {}));\nexport var ReadingDirection;\n(function (ReadingDirection) {\n    /** The predominant reading order is Left to Right. */\n    ReadingDirection[\"L2R\"] = \"L2R\";\n    /**\n     * The predominant reading order is Right to left (including vertical writing\n     * systems, such as Chinese, Japanese and Korean).\n     */\n    ReadingDirection[\"R2L\"] = \"R2L\";\n})(ReadingDirection || (ReadingDirection = {}));\nexport var PrintScaling;\n(function (PrintScaling) {\n    /** No page scaling. */\n    PrintScaling[\"None\"] = \"None\";\n    /* Use the PDF reader's default print scaling. */\n    PrintScaling[\"AppDefault\"] = \"AppDefault\";\n})(PrintScaling || (PrintScaling = {}));\nexport var Duplex;\n(function (Duplex) {\n    /** The PDF reader should print single-sided. */\n    Duplex[\"Simplex\"] = \"Simplex\";\n    /**\n     * The PDF reader should print double sided and flip on the short edge of the\n     * sheet.\n     */\n    Duplex[\"DuplexFlipShortEdge\"] = \"DuplexFlipShortEdge\";\n    /**\n     * The PDF reader should print double sided and flip on the long edge of the\n     * sheet.\n     */\n    Duplex[\"DuplexFlipLongEdge\"] = \"DuplexFlipLongEdge\";\n})(Duplex || (Duplex = {}));\nvar ViewerPreferences = /** @class */ (function () {\n    /** @ignore */\n    function ViewerPreferences(dict) {\n        this.dict = dict;\n    }\n    ViewerPreferences.prototype.lookupBool = function (key) {\n        var returnObj = this.dict.lookup(PDFName.of(key));\n        if (returnObj instanceof PDFBool)\n            return returnObj;\n        return undefined;\n    };\n    ViewerPreferences.prototype.lookupName = function (key) {\n        var returnObj = this.dict.lookup(PDFName.of(key));\n        if (returnObj instanceof PDFName)\n            return returnObj;\n        return undefined;\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.HideToolbar = function () {\n        return this.lookupBool('HideToolbar');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.HideMenubar = function () {\n        return this.lookupBool('HideMenubar');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.HideWindowUI = function () {\n        return this.lookupBool('HideWindowUI');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.FitWindow = function () {\n        return this.lookupBool('FitWindow');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.CenterWindow = function () {\n        return this.lookupBool('CenterWindow');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.DisplayDocTitle = function () {\n        return this.lookupBool('DisplayDocTitle');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.NonFullScreenPageMode = function () {\n        return this.lookupName('NonFullScreenPageMode');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.Direction = function () {\n        return this.lookupName('Direction');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.PrintScaling = function () {\n        return this.lookupName('PrintScaling');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.Duplex = function () {\n        return this.lookupName('Duplex');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.PickTrayByPDFSize = function () {\n        return this.lookupBool('PickTrayByPDFSize');\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.PrintPageRange = function () {\n        var PrintPageRange = this.dict.lookup(PDFName.of('PrintPageRange'));\n        if (PrintPageRange instanceof PDFArray)\n            return PrintPageRange;\n        return undefined;\n    };\n    /** @ignore */\n    ViewerPreferences.prototype.NumCopies = function () {\n        var NumCopies = this.dict.lookup(PDFName.of('NumCopies'));\n        if (NumCopies instanceof PDFNumber)\n            return NumCopies;\n        return undefined;\n    };\n    /**\n     * Returns `true` if PDF readers should hide the toolbar menus when displaying\n     * this document.\n     * @returns Whether or not toolbars should be hidden.\n     */\n    ViewerPreferences.prototype.getHideToolbar = function () {\n        var _a, _b;\n        return (_b = (_a = this.HideToolbar()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if PDF readers should hide the menu bar when displaying this\n     * document.\n     * @returns Whether or not the menu bar should be hidden.\n     */\n    ViewerPreferences.prototype.getHideMenubar = function () {\n        var _a, _b;\n        return (_b = (_a = this.HideMenubar()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if PDF readers should hide the user interface elements in\n     * the document's window (such as scroll bars and navigation controls),\n     * leaving only the document's contents displayed.\n     * @returns Whether or not user interface elements should be hidden.\n     */\n    ViewerPreferences.prototype.getHideWindowUI = function () {\n        var _a, _b;\n        return (_b = (_a = this.HideWindowUI()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if PDF readers should resize the document's window to fit\n     * the size of the first displayed page.\n     * @returns Whether or not the window should be resized to fit.\n     */\n    ViewerPreferences.prototype.getFitWindow = function () {\n        var _a, _b;\n        return (_b = (_a = this.FitWindow()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if PDF readers should position the document's window in the\n     * center of the screen.\n     * @returns Whether or not to center the document window.\n     */\n    ViewerPreferences.prototype.getCenterWindow = function () {\n        var _a, _b;\n        return (_b = (_a = this.CenterWindow()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns `true` if the window's title bar should display the document\n     * `Title`, taken from the document metadata (see [[PDFDocument.getTitle]]).\n     * Returns `false` if the title bar should instead display the filename of the\n     * PDF file.\n     * @returns Whether to display the document title.\n     */\n    ViewerPreferences.prototype.getDisplayDocTitle = function () {\n        var _a, _b;\n        return (_b = (_a = this.DisplayDocTitle()) === null || _a === void 0 ? void 0 : _a.asBoolean()) !== null && _b !== void 0 ? _b : false;\n    };\n    /**\n     * Returns the page mode, which tells the PDF reader how to display the\n     * document after exiting full-screen mode.\n     * @returns The page mode after exiting full-screen mode.\n     */\n    ViewerPreferences.prototype.getNonFullScreenPageMode = function () {\n        var _a, _b;\n        var mode = (_a = this.NonFullScreenPageMode()) === null || _a === void 0 ? void 0 : _a.decodeText();\n        return (_b = asEnum(mode, NonFullScreenPageMode)) !== null && _b !== void 0 ? _b : NonFullScreenPageMode.UseNone;\n    };\n    /**\n     * Returns the predominant reading order for text.\n     * @returns The text reading order.\n     */\n    ViewerPreferences.prototype.getReadingDirection = function () {\n        var _a, _b;\n        var direction = (_a = this.Direction()) === null || _a === void 0 ? void 0 : _a.decodeText();\n        return (_b = asEnum(direction, ReadingDirection)) !== null && _b !== void 0 ? _b : ReadingDirection.L2R;\n    };\n    /**\n     * Returns the page scaling option that the PDF reader should select when the\n     * print dialog is displayed.\n     * @returns The page scaling option.\n     */\n    ViewerPreferences.prototype.getPrintScaling = function () {\n        var _a, _b;\n        var scaling = (_a = this.PrintScaling()) === null || _a === void 0 ? void 0 : _a.decodeText();\n        return (_b = asEnum(scaling, PrintScaling)) !== null && _b !== void 0 ? _b : PrintScaling.AppDefault;\n    };\n    /**\n     * Returns the paper handling option that should be used when printing the\n     * file from the print dialog.\n     * @returns The paper handling option.\n     */\n    ViewerPreferences.prototype.getDuplex = function () {\n        var _a;\n        var duplex = (_a = this.Duplex()) === null || _a === void 0 ? void 0 : _a.decodeText();\n        return asEnum(duplex, Duplex);\n    };\n    /**\n     * Returns `true` if the PDF page size should be used to select the input\n     * paper tray.\n     * @returns Whether or not the PDF page size should be used to select the\n     *          input paper tray.\n     */\n    ViewerPreferences.prototype.getPickTrayByPDFSize = function () {\n        var _a;\n        return (_a = this.PickTrayByPDFSize()) === null || _a === void 0 ? void 0 : _a.asBoolean();\n    };\n    /**\n     * Returns an array of page number ranges, which are the values used to\n     * initialize the print dialog box when the file is printed. Each range\n     * specifies the first (`start`) and last (`end`) pages in a sub-range of\n     * pages to be printed. The first page of the PDF file is denoted by 0.\n     * For example:\n     * ```js\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * const includesPage3 = viewerPrefs\n     *   .getPrintRanges()\n     *   .some(pr => pr.start =< 2 && pr.end >= 2)\n     * if (includesPage3) console.log('printRange includes page 3')\n     * ```\n     * @returns An array of objects, each with the properties `start` and `end`,\n     *          denoting page indices. If not, specified an empty array is\n     *          returned.\n     */\n    ViewerPreferences.prototype.getPrintPageRange = function () {\n        var rng = this.PrintPageRange();\n        if (!rng)\n            return [];\n        var pageRanges = [];\n        for (var i = 0; i < rng.size(); i += 2) {\n            // Despite the spec clearly stating that \"The first page of the PDF file\n            // shall be donoted by 1\", several test PDFs (spec 1.7) created in\n            // Acrobat XI 11.0 and also read with Reader DC 2020.013 indicate this is\n            // actually a 0 based index.\n            var start = rng.lookup(i, PDFNumber).asNumber();\n            var end = rng.lookup(i + 1, PDFNumber).asNumber();\n            pageRanges.push({ start: start, end: end });\n        }\n        return pageRanges;\n    };\n    /**\n     * Returns the number of copies to be printed when the print dialog is opened\n     * for this document.\n     * @returns The default number of copies to be printed.\n     */\n    ViewerPreferences.prototype.getNumCopies = function () {\n        var _a, _b;\n        return (_b = (_a = this.NumCopies()) === null || _a === void 0 ? void 0 : _a.asNumber()) !== null && _b !== void 0 ? _b : 1;\n    };\n    /**\n     * Choose whether the PDF reader's toolbars should be hidden while the\n     * document is active.\n     * @param hideToolbar `true` if the toolbar should be hidden.\n     */\n    ViewerPreferences.prototype.setHideToolbar = function (hideToolbar) {\n        var HideToolbar = this.dict.context.obj(hideToolbar);\n        this.dict.set(PDFName.of('HideToolbar'), HideToolbar);\n    };\n    /**\n     * Choose whether the PDF reader's menu bar should be hidden while the\n     * document is active.\n     * @param hideMenubar `true` if the menu bar should be hidden.\n     */\n    ViewerPreferences.prototype.setHideMenubar = function (hideMenubar) {\n        var HideMenubar = this.dict.context.obj(hideMenubar);\n        this.dict.set(PDFName.of('HideMenubar'), HideMenubar);\n    };\n    /**\n     * Choose whether the PDF reader should hide user interface elements in the\n     * document's window (such as scroll bars and navigation controls), leaving\n     * only the document's contents displayed.\n     * @param hideWindowUI `true` if the user interface elements should be hidden.\n     */\n    ViewerPreferences.prototype.setHideWindowUI = function (hideWindowUI) {\n        var HideWindowUI = this.dict.context.obj(hideWindowUI);\n        this.dict.set(PDFName.of('HideWindowUI'), HideWindowUI);\n    };\n    /**\n     * Choose whether the PDF reader should resize the document's window to fit\n     * the size of the first displayed page.\n     * @param fitWindow `true` if the window should be resized.\n     */\n    ViewerPreferences.prototype.setFitWindow = function (fitWindow) {\n        var FitWindow = this.dict.context.obj(fitWindow);\n        this.dict.set(PDFName.of('FitWindow'), FitWindow);\n    };\n    /**\n     * Choose whether the PDF reader should position the document's window in the\n     * center of the screen.\n     * @param centerWindow `true` if the window should be centered.\n     */\n    ViewerPreferences.prototype.setCenterWindow = function (centerWindow) {\n        var CenterWindow = this.dict.context.obj(centerWindow);\n        this.dict.set(PDFName.of('CenterWindow'), CenterWindow);\n    };\n    /**\n     * Choose whether the window's title bar should display the document `Title`\n     * taken from the document metadata (see [[PDFDocument.setTitle]]). If\n     * `false`, the title bar should instead display the PDF filename.\n     * @param displayTitle `true` if the document title should be displayed.\n     */\n    ViewerPreferences.prototype.setDisplayDocTitle = function (displayTitle) {\n        var DisplayDocTitle = this.dict.context.obj(displayTitle);\n        this.dict.set(PDFName.of('DisplayDocTitle'), DisplayDocTitle);\n    };\n    /**\n     * Choose how the PDF reader should display the document upon exiting\n     * full-screen mode. This entry is meaningful only if the value of the\n     * `PageMode` entry in the document's [[PDFCatalog]] is `FullScreen`.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument, NonFullScreenPageMode, PDFName } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     *\n     * // Set the PageMode\n     * pdfDoc.catalog.set(PDFName.of('PageMode'),PDFName.of('FullScreen'))\n     *\n     * // Set what happens when full-screen is closed\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * viewerPrefs.setNonFullScreenPageMode(NonFullScreenPageMode.UseOutlines)\n     * ```\n     *\n     * @param nonFullScreenPageMode How the document should be displayed upon\n     *                              exiting full screen mode.\n     */\n    ViewerPreferences.prototype.setNonFullScreenPageMode = function (nonFullScreenPageMode) {\n        assertIsOneOf(nonFullScreenPageMode, 'nonFullScreenPageMode', NonFullScreenPageMode);\n        var mode = PDFName.of(nonFullScreenPageMode);\n        this.dict.set(PDFName.of('NonFullScreenPageMode'), mode);\n    };\n    /**\n     * Choose the predominant reading order for text.\n     *\n     * This entry has no direct effect on the document's contents or page\n     * numbering, but may be used to determine the relative positioning of pages\n     * when displayed side by side or printed n-up.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument, ReadingDirection } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * viewerPrefs.setReadingDirection(ReadingDirection.R2L)\n     * ```\n     *\n     * @param readingDirection The reading order for text.\n     */\n    ViewerPreferences.prototype.setReadingDirection = function (readingDirection) {\n        assertIsOneOf(readingDirection, 'readingDirection', ReadingDirection);\n        var direction = PDFName.of(readingDirection);\n        this.dict.set(PDFName.of('Direction'), direction);\n    };\n    /**\n     * Choose the page scaling option that should be selected when a print dialog\n     * is displayed for this document.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument, PrintScaling } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * viewerPrefs.setPrintScaling(PrintScaling.None)\n     * ```\n     *\n     * @param printScaling The print scaling option.\n     */\n    ViewerPreferences.prototype.setPrintScaling = function (printScaling) {\n        assertIsOneOf(printScaling, 'printScaling', PrintScaling);\n        var scaling = PDFName.of(printScaling);\n        this.dict.set(PDFName.of('PrintScaling'), scaling);\n    };\n    /**\n     * Choose the paper handling option that should be selected by default in the\n     * print dialog.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument, Duplex } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     * viewerPrefs.setDuplex(Duplex.DuplexFlipShortEdge)\n     * ```\n     *\n     * @param duplex The double or single sided printing option.\n     */\n    ViewerPreferences.prototype.setDuplex = function (duplex) {\n        assertIsOneOf(duplex, 'duplex', Duplex);\n        var dup = PDFName.of(duplex);\n        this.dict.set(PDFName.of('Duplex'), dup);\n    };\n    /**\n     * Choose whether the PDF document's page size should be used to select the\n     * input paper tray when printing. This setting influences only the preset\n     * values used to populate the print dialog presented by a PDF reader.\n     *\n     * If PickTrayByPDFSize is true, the check box in the print dialog associated\n     * with input paper tray should be checked. This setting has no effect on\n     * operating systems that do not provide the ability to pick the input tray\n     * by size.\n     *\n     * @param pickTrayByPDFSize `true` if the document's page size should be used\n     *                          to select the input paper tray.\n     */\n    ViewerPreferences.prototype.setPickTrayByPDFSize = function (pickTrayByPDFSize) {\n        var PickTrayByPDFSize = this.dict.context.obj(pickTrayByPDFSize);\n        this.dict.set(PDFName.of('PickTrayByPDFSize'), PickTrayByPDFSize);\n    };\n    /**\n     * Choose the page numbers used to initialize the print dialog box when the\n     * file is printed. The first page of the PDF file is denoted by 0.\n     *\n     * For example:\n     * ```js\n     * import { PDFDocument } from 'pdf-lib'\n     *\n     * const pdfDoc = await PDFDocument.create()\n     * const viewerPrefs = pdfDoc.catalog.getOrCreateViewerPreferences()\n     *\n     * // We can set the default print range to only the first page\n     * viewerPrefs.setPrintPageRange({ start: 0, end: 0 })\n     *\n     * // Or we can supply noncontiguous ranges (e.g. pages 1, 3, and 5-7)\n     * viewerPrefs.setPrintPageRange([\n     *   { start: 0, end: 0 },\n     *   { start: 2, end: 2 },\n     *   { start: 4, end: 6 },\n     * ])\n     * ```\n     *\n     * @param printPageRange An object or array of objects, each with the\n     *                       properties `start` and `end`, denoting a range of\n     *                       page indices.\n     */\n    ViewerPreferences.prototype.setPrintPageRange = function (printPageRange) {\n        if (!Array.isArray(printPageRange))\n            printPageRange = [printPageRange];\n        var flatRange = [];\n        for (var idx = 0, len = printPageRange.length; idx < len; idx++) {\n            flatRange.push(printPageRange[idx].start);\n            flatRange.push(printPageRange[idx].end);\n        }\n        assertEachIs(flatRange, 'printPageRange', ['number']);\n        var pageRanges = this.dict.context.obj(flatRange);\n        this.dict.set(PDFName.of('PrintPageRange'), pageRanges);\n    };\n    /**\n     * Choose the default number of copies to be printed when the print dialog is\n     * opened for this file.\n     * @param numCopies The default number of copies.\n     */\n    ViewerPreferences.prototype.setNumCopies = function (numCopies) {\n        assertRange(numCopies, 'numCopies', 1, Number.MAX_VALUE);\n        assertInteger(numCopies, 'numCopies');\n        var NumCopies = this.dict.context.obj(numCopies);\n        this.dict.set(PDFName.of('NumCopies'), NumCopies);\n    };\n    /** @ignore */\n    ViewerPreferences.fromDict = function (dict) {\n        return new ViewerPreferences(dict);\n    };\n    /** @ignore */\n    ViewerPreferences.create = function (context) {\n        var dict = context.obj({});\n        return new ViewerPreferences(dict);\n    };\n    return ViewerPreferences;\n}());\nexport default ViewerPreferences;\n//# sourceMappingURL=ViewerPreferences.js.map","import PDFDict from \"../objects/PDFDict\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFRef from \"../objects/PDFRef\";\nimport { findLastMatch } from \"../../utils\";\nimport { MissingDAEntryError, MissingTfOperatorError } from \"../errors\";\n// Examples:\n//   `/Helv 12 Tf` -> ['Helv', '12']\n//   `/HeBo 8.00 Tf` -> ['HeBo', '8.00']\n//   `/HeBo Tf` -> ['HeBo', undefined]\nvar tfRegex = /\\/([^\\0\\t\\n\\f\\r\\ ]+)[\\0\\t\\n\\f\\r\\ ]*(\\d*\\.\\d+|\\d+)?[\\0\\t\\n\\f\\r\\ ]+Tf/;\nvar PDFAcroField = /** @class */ (function () {\n    function PDFAcroField(dict, ref) {\n        this.dict = dict;\n        this.ref = ref;\n    }\n    PDFAcroField.prototype.T = function () {\n        return this.dict.lookupMaybe(PDFName.of('T'), PDFString, PDFHexString);\n    };\n    PDFAcroField.prototype.Ff = function () {\n        var numberOrRef = this.getInheritableAttribute(PDFName.of('Ff'));\n        return this.dict.context.lookupMaybe(numberOrRef, PDFNumber);\n    };\n    PDFAcroField.prototype.V = function () {\n        var valueOrRef = this.getInheritableAttribute(PDFName.of('V'));\n        return this.dict.context.lookup(valueOrRef);\n    };\n    PDFAcroField.prototype.Kids = function () {\n        return this.dict.lookupMaybe(PDFName.of('Kids'), PDFArray);\n    };\n    // Parent(): PDFDict | undefined {\n    //   return this.dict.lookupMaybe(PDFName.of('Parent'), PDFDict);\n    // }\n    PDFAcroField.prototype.DA = function () {\n        var da = this.dict.lookup(PDFName.of('DA'));\n        if (da instanceof PDFString || da instanceof PDFHexString)\n            return da;\n        return undefined;\n    };\n    PDFAcroField.prototype.setKids = function (kids) {\n        this.dict.set(PDFName.of('Kids'), this.dict.context.obj(kids));\n    };\n    PDFAcroField.prototype.getParent = function () {\n        // const parent = this.Parent();\n        // if (!parent) return undefined;\n        // return new PDFAcroField(parent);\n        var parentRef = this.dict.get(PDFName.of('Parent'));\n        if (parentRef instanceof PDFRef) {\n            var parent_1 = this.dict.lookup(PDFName.of('Parent'), PDFDict);\n            return new PDFAcroField(parent_1, parentRef);\n        }\n        return undefined;\n    };\n    PDFAcroField.prototype.setParent = function (parent) {\n        if (!parent)\n            this.dict.delete(PDFName.of('Parent'));\n        else\n            this.dict.set(PDFName.of('Parent'), parent);\n    };\n    PDFAcroField.prototype.getFullyQualifiedName = function () {\n        var parent = this.getParent();\n        if (!parent)\n            return this.getPartialName();\n        return parent.getFullyQualifiedName() + \".\" + this.getPartialName();\n    };\n    PDFAcroField.prototype.getPartialName = function () {\n        var _a;\n        return (_a = this.T()) === null || _a === void 0 ? void 0 : _a.decodeText();\n    };\n    PDFAcroField.prototype.setPartialName = function (partialName) {\n        if (!partialName)\n            this.dict.delete(PDFName.of('T'));\n        else\n            this.dict.set(PDFName.of('T'), PDFHexString.fromText(partialName));\n    };\n    PDFAcroField.prototype.setDefaultAppearance = function (appearance) {\n        this.dict.set(PDFName.of('DA'), PDFString.of(appearance));\n    };\n    PDFAcroField.prototype.getDefaultAppearance = function () {\n        var DA = this.DA();\n        if (DA instanceof PDFHexString) {\n            return DA.decodeText();\n        }\n        return DA === null || DA === void 0 ? void 0 : DA.asString();\n    };\n    PDFAcroField.prototype.setFontSize = function (fontSize) {\n        var _a;\n        var name = (_a = this.getFullyQualifiedName()) !== null && _a !== void 0 ? _a : '';\n        var da = this.getDefaultAppearance();\n        if (!da)\n            throw new MissingDAEntryError(name);\n        var daMatch = findLastMatch(da, tfRegex);\n        if (!daMatch.match)\n            throw new MissingTfOperatorError(name);\n        var daStart = da.slice(0, daMatch.pos - daMatch.match[0].length);\n        var daEnd = daMatch.pos <= da.length ? da.slice(daMatch.pos) : '';\n        var fontName = daMatch.match[1];\n        var modifiedDa = daStart + \" /\" + fontName + \" \" + fontSize + \" Tf \" + daEnd;\n        this.setDefaultAppearance(modifiedDa);\n    };\n    PDFAcroField.prototype.getFlags = function () {\n        var _a, _b;\n        return (_b = (_a = this.Ff()) === null || _a === void 0 ? void 0 : _a.asNumber()) !== null && _b !== void 0 ? _b : 0;\n    };\n    PDFAcroField.prototype.setFlags = function (flags) {\n        this.dict.set(PDFName.of('Ff'), PDFNumber.of(flags));\n    };\n    PDFAcroField.prototype.hasFlag = function (flag) {\n        var flags = this.getFlags();\n        return (flags & flag) !== 0;\n    };\n    PDFAcroField.prototype.setFlag = function (flag) {\n        var flags = this.getFlags();\n        this.setFlags(flags | flag);\n    };\n    PDFAcroField.prototype.clearFlag = function (flag) {\n        var flags = this.getFlags();\n        this.setFlags(flags & ~flag);\n    };\n    PDFAcroField.prototype.setFlagTo = function (flag, enable) {\n        if (enable)\n            this.setFlag(flag);\n        else\n            this.clearFlag(flag);\n    };\n    PDFAcroField.prototype.getInheritableAttribute = function (name) {\n        var attribute;\n        this.ascend(function (node) {\n            if (!attribute)\n                attribute = node.dict.get(name);\n        });\n        return attribute;\n    };\n    PDFAcroField.prototype.ascend = function (visitor) {\n        visitor(this);\n        var parent = this.getParent();\n        if (parent)\n            parent.ascend(visitor);\n    };\n    return PDFAcroField;\n}());\nexport default PDFAcroField;\n//# sourceMappingURL=PDFAcroField.js.map","import PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\n// TODO: Also handle the `/S` and `/D` entries\nvar BorderStyle = /** @class */ (function () {\n    function BorderStyle(dict) {\n        this.dict = dict;\n    }\n    BorderStyle.prototype.W = function () {\n        var W = this.dict.lookup(PDFName.of('W'));\n        if (W instanceof PDFNumber)\n            return W;\n        return undefined;\n    };\n    BorderStyle.prototype.getWidth = function () {\n        var _a, _b;\n        return (_b = (_a = this.W()) === null || _a === void 0 ? void 0 : _a.asNumber()) !== null && _b !== void 0 ? _b : 1;\n    };\n    BorderStyle.prototype.setWidth = function (width) {\n        var W = this.dict.context.obj(width);\n        this.dict.set(PDFName.of('W'), W);\n    };\n    BorderStyle.fromDict = function (dict) { return new BorderStyle(dict); };\n    return BorderStyle;\n}());\nexport default BorderStyle;\n//# sourceMappingURL=BorderStyle.js.map","import PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFStream from \"../objects/PDFStream\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFNumber from \"../objects/PDFNumber\";\nvar PDFAnnotation = /** @class */ (function () {\n    function PDFAnnotation(dict) {\n        this.dict = dict;\n    }\n    // This is technically required by the PDF spec\n    PDFAnnotation.prototype.Rect = function () {\n        return this.dict.lookup(PDFName.of('Rect'), PDFArray);\n    };\n    PDFAnnotation.prototype.AP = function () {\n        return this.dict.lookupMaybe(PDFName.of('AP'), PDFDict);\n    };\n    PDFAnnotation.prototype.F = function () {\n        var numberOrRef = this.dict.lookup(PDFName.of('F'));\n        return this.dict.context.lookupMaybe(numberOrRef, PDFNumber);\n    };\n    PDFAnnotation.prototype.getRectangle = function () {\n        var _a;\n        var Rect = this.Rect();\n        return (_a = Rect === null || Rect === void 0 ? void 0 : Rect.asRectangle()) !== null && _a !== void 0 ? _a : { x: 0, y: 0, width: 0, height: 0 };\n    };\n    PDFAnnotation.prototype.setRectangle = function (rect) {\n        var x = rect.x, y = rect.y, width = rect.width, height = rect.height;\n        var Rect = this.dict.context.obj([x, y, x + width, y + height]);\n        this.dict.set(PDFName.of('Rect'), Rect);\n    };\n    PDFAnnotation.prototype.getAppearanceState = function () {\n        var AS = this.dict.lookup(PDFName.of('AS'));\n        if (AS instanceof PDFName)\n            return AS;\n        return undefined;\n    };\n    PDFAnnotation.prototype.setAppearanceState = function (state) {\n        this.dict.set(PDFName.of('AS'), state);\n    };\n    PDFAnnotation.prototype.setAppearances = function (appearances) {\n        this.dict.set(PDFName.of('AP'), appearances);\n    };\n    PDFAnnotation.prototype.ensureAP = function () {\n        var AP = this.AP();\n        if (!AP) {\n            AP = this.dict.context.obj({});\n            this.dict.set(PDFName.of('AP'), AP);\n        }\n        return AP;\n    };\n    PDFAnnotation.prototype.getNormalAppearance = function () {\n        var AP = this.ensureAP();\n        var N = AP.get(PDFName.of('N'));\n        if (N instanceof PDFRef || N instanceof PDFDict)\n            return N;\n        throw new Error(\"Unexpected N type: \" + (N === null || N === void 0 ? void 0 : N.constructor.name));\n    };\n    /** @param appearance A PDFDict or PDFStream (direct or ref) */\n    PDFAnnotation.prototype.setNormalAppearance = function (appearance) {\n        var AP = this.ensureAP();\n        AP.set(PDFName.of('N'), appearance);\n    };\n    /** @param appearance A PDFDict or PDFStream (direct or ref) */\n    PDFAnnotation.prototype.setRolloverAppearance = function (appearance) {\n        var AP = this.ensureAP();\n        AP.set(PDFName.of('R'), appearance);\n    };\n    /** @param appearance A PDFDict or PDFStream (direct or ref) */\n    PDFAnnotation.prototype.setDownAppearance = function (appearance) {\n        var AP = this.ensureAP();\n        AP.set(PDFName.of('D'), appearance);\n    };\n    PDFAnnotation.prototype.removeRolloverAppearance = function () {\n        var AP = this.AP();\n        AP === null || AP === void 0 ? void 0 : AP.delete(PDFName.of('R'));\n    };\n    PDFAnnotation.prototype.removeDownAppearance = function () {\n        var AP = this.AP();\n        AP === null || AP === void 0 ? void 0 : AP.delete(PDFName.of('D'));\n    };\n    PDFAnnotation.prototype.getAppearances = function () {\n        var AP = this.AP();\n        if (!AP)\n            return undefined;\n        var N = AP.lookup(PDFName.of('N'), PDFDict, PDFStream);\n        var R = AP.lookupMaybe(PDFName.of('R'), PDFDict, PDFStream);\n        var D = AP.lookupMaybe(PDFName.of('D'), PDFDict, PDFStream);\n        return { normal: N, rollover: R, down: D };\n    };\n    PDFAnnotation.prototype.getFlags = function () {\n        var _a, _b;\n        return (_b = (_a = this.F()) === null || _a === void 0 ? void 0 : _a.asNumber()) !== null && _b !== void 0 ? _b : 0;\n    };\n    PDFAnnotation.prototype.setFlags = function (flags) {\n        this.dict.set(PDFName.of('F'), PDFNumber.of(flags));\n    };\n    PDFAnnotation.prototype.hasFlag = function (flag) {\n        var flags = this.getFlags();\n        return (flags & flag) !== 0;\n    };\n    PDFAnnotation.prototype.setFlag = function (flag) {\n        var flags = this.getFlags();\n        this.setFlags(flags | flag);\n    };\n    PDFAnnotation.prototype.clearFlag = function (flag) {\n        var flags = this.getFlags();\n        this.setFlags(flags & ~flag);\n    };\n    PDFAnnotation.prototype.setFlagTo = function (flag, enable) {\n        if (enable)\n            this.setFlag(flag);\n        else\n            this.clearFlag(flag);\n    };\n    PDFAnnotation.fromDict = function (dict) { return new PDFAnnotation(dict); };\n    return PDFAnnotation;\n}());\nexport default PDFAnnotation;\n//# sourceMappingURL=PDFAnnotation.js.map","import PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFString from \"../objects/PDFString\";\nvar AppearanceCharacteristics = /** @class */ (function () {\n    function AppearanceCharacteristics(dict) {\n        this.dict = dict;\n    }\n    AppearanceCharacteristics.prototype.R = function () {\n        var R = this.dict.lookup(PDFName.of('R'));\n        if (R instanceof PDFNumber)\n            return R;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.BC = function () {\n        var BC = this.dict.lookup(PDFName.of('BC'));\n        if (BC instanceof PDFArray)\n            return BC;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.BG = function () {\n        var BG = this.dict.lookup(PDFName.of('BG'));\n        if (BG instanceof PDFArray)\n            return BG;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.CA = function () {\n        var CA = this.dict.lookup(PDFName.of('CA'));\n        if (CA instanceof PDFHexString || CA instanceof PDFString)\n            return CA;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.RC = function () {\n        var RC = this.dict.lookup(PDFName.of('RC'));\n        if (RC instanceof PDFHexString || RC instanceof PDFString)\n            return RC;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.AC = function () {\n        var AC = this.dict.lookup(PDFName.of('AC'));\n        if (AC instanceof PDFHexString || AC instanceof PDFString)\n            return AC;\n        return undefined;\n    };\n    AppearanceCharacteristics.prototype.getRotation = function () {\n        var _a;\n        return (_a = this.R()) === null || _a === void 0 ? void 0 : _a.asNumber();\n    };\n    AppearanceCharacteristics.prototype.getBorderColor = function () {\n        var BC = this.BC();\n        if (!BC)\n            return undefined;\n        var components = [];\n        for (var idx = 0, len = BC === null || BC === void 0 ? void 0 : BC.size(); idx < len; idx++) {\n            var component = BC.get(idx);\n            if (component instanceof PDFNumber)\n                components.push(component.asNumber());\n        }\n        return components;\n    };\n    AppearanceCharacteristics.prototype.getBackgroundColor = function () {\n        var BG = this.BG();\n        if (!BG)\n            return undefined;\n        var components = [];\n        for (var idx = 0, len = BG === null || BG === void 0 ? void 0 : BG.size(); idx < len; idx++) {\n            var component = BG.get(idx);\n            if (component instanceof PDFNumber)\n                components.push(component.asNumber());\n        }\n        return components;\n    };\n    AppearanceCharacteristics.prototype.getCaptions = function () {\n        var CA = this.CA();\n        var RC = this.RC();\n        var AC = this.AC();\n        return {\n            normal: CA === null || CA === void 0 ? void 0 : CA.decodeText(),\n            rollover: RC === null || RC === void 0 ? void 0 : RC.decodeText(),\n            down: AC === null || AC === void 0 ? void 0 : AC.decodeText(),\n        };\n    };\n    AppearanceCharacteristics.prototype.setRotation = function (rotation) {\n        var R = this.dict.context.obj(rotation);\n        this.dict.set(PDFName.of('R'), R);\n    };\n    AppearanceCharacteristics.prototype.setBorderColor = function (color) {\n        var BC = this.dict.context.obj(color);\n        this.dict.set(PDFName.of('BC'), BC);\n    };\n    AppearanceCharacteristics.prototype.setBackgroundColor = function (color) {\n        var BG = this.dict.context.obj(color);\n        this.dict.set(PDFName.of('BG'), BG);\n    };\n    AppearanceCharacteristics.prototype.setCaptions = function (captions) {\n        var CA = PDFHexString.fromText(captions.normal);\n        this.dict.set(PDFName.of('CA'), CA);\n        if (captions.rollover) {\n            var RC = PDFHexString.fromText(captions.rollover);\n            this.dict.set(PDFName.of('RC'), RC);\n        }\n        else {\n            this.dict.delete(PDFName.of('RC'));\n        }\n        if (captions.down) {\n            var AC = PDFHexString.fromText(captions.down);\n            this.dict.set(PDFName.of('AC'), AC);\n        }\n        else {\n            this.dict.delete(PDFName.of('AC'));\n        }\n    };\n    AppearanceCharacteristics.fromDict = function (dict) {\n        return new AppearanceCharacteristics(dict);\n    };\n    return AppearanceCharacteristics;\n}());\nexport default AppearanceCharacteristics;\n//# sourceMappingURL=AppearanceCharacteristics.js.map","import { __extends } from \"tslib\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport BorderStyle from \"./BorderStyle\";\nimport PDFAnnotation from \"./PDFAnnotation\";\nimport AppearanceCharacteristics from \"./AppearanceCharacteristics\";\nvar PDFWidgetAnnotation = /** @class */ (function (_super) {\n    __extends(PDFWidgetAnnotation, _super);\n    function PDFWidgetAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFWidgetAnnotation.prototype.MK = function () {\n        var MK = this.dict.lookup(PDFName.of('MK'));\n        if (MK instanceof PDFDict)\n            return MK;\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.BS = function () {\n        var BS = this.dict.lookup(PDFName.of('BS'));\n        if (BS instanceof PDFDict)\n            return BS;\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.DA = function () {\n        var da = this.dict.lookup(PDFName.of('DA'));\n        if (da instanceof PDFString || da instanceof PDFHexString)\n            return da;\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.P = function () {\n        var P = this.dict.get(PDFName.of('P'));\n        if (P instanceof PDFRef)\n            return P;\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.setP = function (page) {\n        this.dict.set(PDFName.of('P'), page);\n    };\n    PDFWidgetAnnotation.prototype.setDefaultAppearance = function (appearance) {\n        this.dict.set(PDFName.of('DA'), PDFString.of(appearance));\n    };\n    PDFWidgetAnnotation.prototype.getDefaultAppearance = function () {\n        var DA = this.DA();\n        if (DA instanceof PDFHexString) {\n            return DA.decodeText();\n        }\n        return DA === null || DA === void 0 ? void 0 : DA.asString();\n    };\n    PDFWidgetAnnotation.prototype.getAppearanceCharacteristics = function () {\n        var MK = this.MK();\n        if (MK)\n            return AppearanceCharacteristics.fromDict(MK);\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.getOrCreateAppearanceCharacteristics = function () {\n        var MK = this.MK();\n        if (MK)\n            return AppearanceCharacteristics.fromDict(MK);\n        var ac = AppearanceCharacteristics.fromDict(this.dict.context.obj({}));\n        this.dict.set(PDFName.of('MK'), ac.dict);\n        return ac;\n    };\n    PDFWidgetAnnotation.prototype.getBorderStyle = function () {\n        var BS = this.BS();\n        if (BS)\n            return BorderStyle.fromDict(BS);\n        return undefined;\n    };\n    PDFWidgetAnnotation.prototype.getOrCreateBorderStyle = function () {\n        var BS = this.BS();\n        if (BS)\n            return BorderStyle.fromDict(BS);\n        var bs = BorderStyle.fromDict(this.dict.context.obj({}));\n        this.dict.set(PDFName.of('BS'), bs.dict);\n        return bs;\n    };\n    PDFWidgetAnnotation.prototype.getOnValue = function () {\n        var _a;\n        var normal = (_a = this.getAppearances()) === null || _a === void 0 ? void 0 : _a.normal;\n        if (normal instanceof PDFDict) {\n            var keys = normal.keys();\n            for (var idx = 0, len = keys.length; idx < len; idx++) {\n                var key = keys[idx];\n                if (key !== PDFName.of('Off'))\n                    return key;\n            }\n        }\n        return undefined;\n    };\n    PDFWidgetAnnotation.fromDict = function (dict) {\n        return new PDFWidgetAnnotation(dict);\n    };\n    PDFWidgetAnnotation.create = function (context, parent) {\n        var dict = context.obj({\n            Type: 'Annot',\n            Subtype: 'Widget',\n            Rect: [0, 0, 0, 0],\n            Parent: parent,\n        });\n        return new PDFWidgetAnnotation(dict);\n    };\n    return PDFWidgetAnnotation;\n}(PDFAnnotation));\nexport default PDFWidgetAnnotation;\n//# sourceMappingURL=PDFWidgetAnnotation.js.map","import { __extends } from \"tslib\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroField from \"./PDFAcroField\";\nimport PDFWidgetAnnotation from \"../annotation/PDFWidgetAnnotation\";\nimport { IndexOutOfBoundsError } from \"../errors\";\nvar PDFAcroTerminal = /** @class */ (function (_super) {\n    __extends(PDFAcroTerminal, _super);\n    function PDFAcroTerminal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroTerminal.prototype.FT = function () {\n        var nameOrRef = this.getInheritableAttribute(PDFName.of('FT'));\n        return this.dict.context.lookup(nameOrRef, PDFName);\n    };\n    PDFAcroTerminal.prototype.getWidgets = function () {\n        var kidDicts = this.Kids();\n        // This field is itself a widget\n        if (!kidDicts)\n            return [PDFWidgetAnnotation.fromDict(this.dict)];\n        // This field's kids are its widgets\n        var widgets = new Array(kidDicts.size());\n        for (var idx = 0, len = kidDicts.size(); idx < len; idx++) {\n            var dict = kidDicts.lookup(idx, PDFDict);\n            widgets[idx] = PDFWidgetAnnotation.fromDict(dict);\n        }\n        return widgets;\n    };\n    PDFAcroTerminal.prototype.addWidget = function (ref) {\n        var Kids = this.normalizedEntries().Kids;\n        Kids.push(ref);\n    };\n    PDFAcroTerminal.prototype.removeWidget = function (idx) {\n        var kidDicts = this.Kids();\n        if (!kidDicts) {\n            // This field is itself a widget\n            if (idx !== 0)\n                throw new IndexOutOfBoundsError(idx, 0, 0);\n            this.setKids([]);\n        }\n        else {\n            // This field's kids are its widgets\n            if (idx < 0 || idx > kidDicts.size()) {\n                throw new IndexOutOfBoundsError(idx, 0, kidDicts.size());\n            }\n            kidDicts.remove(idx);\n        }\n    };\n    PDFAcroTerminal.prototype.normalizedEntries = function () {\n        var Kids = this.Kids();\n        // If this field is itself a widget (because it was only rendered once in\n        // the document, so the field and widget properties were merged) then we\n        // add itself to the `Kids` array. The alternative would be to try\n        // splitting apart the widget properties and creating a separate object\n        // for them.\n        if (!Kids) {\n            Kids = this.dict.context.obj([this.ref]);\n            this.dict.set(PDFName.of('Kids'), Kids);\n        }\n        return { Kids: Kids };\n    };\n    PDFAcroTerminal.fromDict = function (dict, ref) {\n        return new PDFAcroTerminal(dict, ref);\n    };\n    return PDFAcroTerminal;\n}(PDFAcroField));\nexport default PDFAcroTerminal;\n//# sourceMappingURL=PDFAcroTerminal.js.map","import { __extends } from \"tslib\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nimport { IndexOutOfBoundsError } from \"../errors\";\nvar PDFAcroButton = /** @class */ (function (_super) {\n    __extends(PDFAcroButton, _super);\n    function PDFAcroButton() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroButton.prototype.Opt = function () {\n        return this.dict.lookupMaybe(PDFName.of('Opt'), PDFString, PDFHexString, PDFArray);\n    };\n    PDFAcroButton.prototype.setOpt = function (opt) {\n        this.dict.set(PDFName.of('Opt'), this.dict.context.obj(opt));\n    };\n    PDFAcroButton.prototype.getExportValues = function () {\n        var opt = this.Opt();\n        if (!opt)\n            return undefined;\n        if (opt instanceof PDFString || opt instanceof PDFHexString) {\n            return [opt];\n        }\n        var values = [];\n        for (var idx = 0, len = opt.size(); idx < len; idx++) {\n            var value = opt.lookup(idx);\n            if (value instanceof PDFString || value instanceof PDFHexString) {\n                values.push(value);\n            }\n        }\n        return values;\n    };\n    PDFAcroButton.prototype.removeExportValue = function (idx) {\n        var opt = this.Opt();\n        if (!opt)\n            return;\n        if (opt instanceof PDFString || opt instanceof PDFHexString) {\n            if (idx !== 0)\n                throw new IndexOutOfBoundsError(idx, 0, 0);\n            this.setOpt([]);\n        }\n        else {\n            if (idx < 0 || idx > opt.size()) {\n                throw new IndexOutOfBoundsError(idx, 0, opt.size());\n            }\n            opt.remove(idx);\n        }\n    };\n    // Enforce use use of /Opt even if it isn't strictly necessary\n    PDFAcroButton.prototype.normalizeExportValues = function () {\n        var _a, _b, _c, _d;\n        var exportValues = (_a = this.getExportValues()) !== null && _a !== void 0 ? _a : [];\n        var Opt = [];\n        var widgets = this.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var exportVal = (_b = exportValues[idx]) !== null && _b !== void 0 ? _b : PDFHexString.fromText((_d = (_c = widget.getOnValue()) === null || _c === void 0 ? void 0 : _c.decodeText()) !== null && _d !== void 0 ? _d : '');\n            Opt.push(exportVal);\n        }\n        this.setOpt(Opt);\n    };\n    /**\n     * Reuses existing opt if one exists with the same value (assuming\n     * `useExistingIdx` is `true`). Returns index of existing (or new) opt.\n     */\n    PDFAcroButton.prototype.addOpt = function (opt, useExistingOptIdx) {\n        var _a;\n        this.normalizeExportValues();\n        var optText = opt.decodeText();\n        var existingIdx;\n        if (useExistingOptIdx) {\n            var exportValues = (_a = this.getExportValues()) !== null && _a !== void 0 ? _a : [];\n            for (var idx = 0, len = exportValues.length; idx < len; idx++) {\n                var exportVal = exportValues[idx];\n                if (exportVal.decodeText() === optText)\n                    existingIdx = idx;\n            }\n        }\n        var Opt = this.Opt();\n        Opt.push(opt);\n        return existingIdx !== null && existingIdx !== void 0 ? existingIdx : Opt.size() - 1;\n    };\n    PDFAcroButton.prototype.addWidgetWithOpt = function (widget, opt, useExistingOptIdx) {\n        var optIdx = this.addOpt(opt, useExistingOptIdx);\n        var apStateValue = PDFName.of(String(optIdx));\n        this.addWidget(widget);\n        return apStateValue;\n    };\n    return PDFAcroButton;\n}(PDFAcroTerminal));\nexport default PDFAcroButton;\n//# sourceMappingURL=PDFAcroButton.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroButton from \"./PDFAcroButton\";\nimport { InvalidAcroFieldValueError } from \"../errors\";\nvar PDFAcroCheckBox = /** @class */ (function (_super) {\n    __extends(PDFAcroCheckBox, _super);\n    function PDFAcroCheckBox() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroCheckBox.prototype.setValue = function (value) {\n        var _a;\n        var onValue = (_a = this.getOnValue()) !== null && _a !== void 0 ? _a : PDFName.of('Yes');\n        if (value !== onValue && value !== PDFName.of('Off')) {\n            throw new InvalidAcroFieldValueError();\n        }\n        this.dict.set(PDFName.of('V'), value);\n        var widgets = this.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var state = widget.getOnValue() === value ? value : PDFName.of('Off');\n            widget.setAppearanceState(state);\n        }\n    };\n    PDFAcroCheckBox.prototype.getValue = function () {\n        var v = this.V();\n        if (v instanceof PDFName)\n            return v;\n        return PDFName.of('Off');\n    };\n    PDFAcroCheckBox.prototype.getOnValue = function () {\n        var widget = this.getWidgets()[0];\n        return widget === null || widget === void 0 ? void 0 : widget.getOnValue();\n    };\n    PDFAcroCheckBox.fromDict = function (dict, ref) {\n        return new PDFAcroCheckBox(dict, ref);\n    };\n    PDFAcroCheckBox.create = function (context) {\n        var dict = context.obj({\n            FT: 'Btn',\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroCheckBox(dict, ref);\n    };\n    return PDFAcroCheckBox;\n}(PDFAcroButton));\nexport default PDFAcroCheckBox;\n//# sourceMappingURL=PDFAcroCheckBox.js.map","var flag = function (bitIndex) { return 1 << bitIndex; };\n/** From PDF spec table 221 */\nexport var AcroFieldFlags;\n(function (AcroFieldFlags) {\n    /**\n     * If set, the user may not change the value of the field. Any associated\n     * widget annotations will not interact with the user; that is, they will not\n     * respond to mouse clicks or change their appearance in response to mouse\n     * motions. This flag is useful for fields whose values are computed or\n     * imported from a database.\n     */\n    AcroFieldFlags[AcroFieldFlags[\"ReadOnly\"] = flag(1 - 1)] = \"ReadOnly\";\n    /**\n     * If set, the field shall have a value at the time it is exported by a\n     * submit-form action (see 12.7.5.2, \"Submit-Form Action\").\n     */\n    AcroFieldFlags[AcroFieldFlags[\"Required\"] = flag(2 - 1)] = \"Required\";\n    /**\n     * If set, the field shall not be exported by a submit-form action\n     * (see 12.7.5.2, \"Submit-Form Action\").\n     */\n    AcroFieldFlags[AcroFieldFlags[\"NoExport\"] = flag(3 - 1)] = \"NoExport\";\n})(AcroFieldFlags || (AcroFieldFlags = {}));\n/** From PDF spec table 226 */\nexport var AcroButtonFlags;\n(function (AcroButtonFlags) {\n    /**\n     * (Radio buttons only) If set, exactly one radio button shall be selected at\n     * all times; selecting the currently selected button has no effect. If clear,\n     * clicking the selected button deselects it, leaving no button selected.\n     */\n    AcroButtonFlags[AcroButtonFlags[\"NoToggleToOff\"] = flag(15 - 1)] = \"NoToggleToOff\";\n    /**\n     * If set, the field is a set of radio buttons; if clear, the field is a check\n     * box. This flag may be set only if the Pushbutton flag is clear.\n     */\n    AcroButtonFlags[AcroButtonFlags[\"Radio\"] = flag(16 - 1)] = \"Radio\";\n    /**\n     * If set, the field is a pushbutton that does not retain a permanent value.\n     */\n    AcroButtonFlags[AcroButtonFlags[\"PushButton\"] = flag(17 - 1)] = \"PushButton\";\n    /**\n     * If set, a group of radio buttons within a radio button field that use the\n     * same value for the on state will turn on and off in unison; that is if one\n     * is checked, they are all checked. If clear, the buttons are mutually\n     * exclusive (the same behavior as HTML radio buttons).\n     */\n    AcroButtonFlags[AcroButtonFlags[\"RadiosInUnison\"] = flag(26 - 1)] = \"RadiosInUnison\";\n})(AcroButtonFlags || (AcroButtonFlags = {}));\n/** From PDF spec table 228 */\nexport var AcroTextFlags;\n(function (AcroTextFlags) {\n    /**\n     * If set, the field may contain multiple lines of text; if clear, the field's\n     * text shall be restricted to a single line.\n     */\n    AcroTextFlags[AcroTextFlags[\"Multiline\"] = flag(13 - 1)] = \"Multiline\";\n    /**\n     * If set, the field is intended for entering a secure password that should\n     * not be echoed visibly to the screen. Characters typed from the keyboard\n     * shall instead be echoed in some unreadable form, such as asterisks or\n     * bullet characters.\n     * > NOTE   To protect password confidentiality, readers should never store\n     * >        the value of the text field in the PDF file if this flag is set.\n     */\n    AcroTextFlags[AcroTextFlags[\"Password\"] = flag(14 - 1)] = \"Password\";\n    /**\n     * If set, the text entered in the field represents the pathname of a file\n     * whose contents shall be submitted as the value of the field.\n     */\n    AcroTextFlags[AcroTextFlags[\"FileSelect\"] = flag(21 - 1)] = \"FileSelect\";\n    /**\n     * If set, text entered in the field shall not be spell-checked.\n     */\n    AcroTextFlags[AcroTextFlags[\"DoNotSpellCheck\"] = flag(23 - 1)] = \"DoNotSpellCheck\";\n    /**\n     * If set, the field shall not scroll (horizontally for single-line fields,\n     * vertically for multiple-line fields) to accommodate more text than fits\n     * within its annotation rectangle. Once the field is full, no further text\n     * shall be accepted for interactive form filling; for non-interactive form\n     * filling, the filler should take care not to add more character than will\n     * visibly fit in the defined area.\n     */\n    AcroTextFlags[AcroTextFlags[\"DoNotScroll\"] = flag(24 - 1)] = \"DoNotScroll\";\n    /**\n     * May be set only if the MaxLen entry is present in the text field dictionary\n     * (see Table 229) and if the Multiline, Password, and FileSelect flags are\n     * clear. If set, the field shall be automatically divided into as many\n     * equally spaced positions, or combs, as the value of MaxLen, and the text\n     * is laid out into those combs.\n     */\n    AcroTextFlags[AcroTextFlags[\"Comb\"] = flag(25 - 1)] = \"Comb\";\n    /**\n     * If set, the value of this field shall be a rich text string\n     * (see 12.7.3.4, \"Rich Text Strings\"). If the field has a value, the RV\n     * entry of the field dictionary (Table 222) shall specify the rich text\n     * string.\n     */\n    AcroTextFlags[AcroTextFlags[\"RichText\"] = flag(26 - 1)] = \"RichText\";\n})(AcroTextFlags || (AcroTextFlags = {}));\n/** From PDF spec table 230 */\nexport var AcroChoiceFlags;\n(function (AcroChoiceFlags) {\n    /**\n     * If set, the field is a combo box; if clear, the field is a list box.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"Combo\"] = flag(18 - 1)] = \"Combo\";\n    /**\n     * If set, the combo box shall include an editable text box as well as a\n     * drop-down list; if clear, it shall include only a drop-down list. This\n     * flag shall be used only if the Combo flag is set.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"Edit\"] = flag(19 - 1)] = \"Edit\";\n    /**\n     * If set, the field's option items shall be sorted alphabetically. This flag\n     * is intended for use by writers, not by readers. Conforming readers shall\n     * display the options in the order in which they occur in the Opt array\n     * (see Table 231).\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"Sort\"] = flag(20 - 1)] = \"Sort\";\n    /**\n     * If set, more than one of the field's option items may be selected\n     * simultaneously; if clear, at most one item shall be selected.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"MultiSelect\"] = flag(22 - 1)] = \"MultiSelect\";\n    /**\n     * If set, text entered in the field shall not be spell-checked. This flag\n     * shall not be used unless the Combo and Edit flags are both set.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"DoNotSpellCheck\"] = flag(23 - 1)] = \"DoNotSpellCheck\";\n    /**\n     * If set, the new value shall be committed as soon as a selection is made\n     * (commonly with the pointing device). In this case, supplying a value for\n     * a field involves three actions: selecting the field for fill-in,\n     * selecting a choice for the fill-in value, and leaving that field, which\n     * finalizes or \"commits\" the data choice and triggers any actions associated\n     * with the entry or changing of this data. If this flag is on, then\n     * processing does not wait for leaving the field action to occur, but\n     * immediately proceeds to the third step.\n     *\n     * This option enables applications to perform an action once a selection is\n     * made, without requiring the user to exit the field. If clear, the new\n     * value is not committed until the user exits the field.\n     */\n    AcroChoiceFlags[AcroChoiceFlags[\"CommitOnSelChange\"] = flag(27 - 1)] = \"CommitOnSelChange\";\n})(AcroChoiceFlags || (AcroChoiceFlags = {}));\n//# sourceMappingURL=flags.js.map","import { __extends } from \"tslib\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFName from \"../objects/PDFName\";\nimport { AcroChoiceFlags } from \"./flags\";\nimport { InvalidAcroFieldValueError, MultiSelectValueError, } from \"../errors\";\nvar PDFAcroChoice = /** @class */ (function (_super) {\n    __extends(PDFAcroChoice, _super);\n    function PDFAcroChoice() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroChoice.prototype.setValues = function (values) {\n        if (this.hasFlag(AcroChoiceFlags.Combo) &&\n            !this.hasFlag(AcroChoiceFlags.Edit) &&\n            !this.valuesAreValid(values)) {\n            throw new InvalidAcroFieldValueError();\n        }\n        if (values.length === 0) {\n            this.dict.delete(PDFName.of('V'));\n        }\n        if (values.length === 1) {\n            this.dict.set(PDFName.of('V'), values[0]);\n        }\n        if (values.length > 1) {\n            if (!this.hasFlag(AcroChoiceFlags.MultiSelect)) {\n                throw new MultiSelectValueError();\n            }\n            this.dict.set(PDFName.of('V'), this.dict.context.obj(values));\n        }\n        this.updateSelectedIndices(values);\n    };\n    PDFAcroChoice.prototype.valuesAreValid = function (values) {\n        var options = this.getOptions();\n        var _loop_1 = function (idx, len) {\n            var val = values[idx].decodeText();\n            if (!options.find(function (o) { return val === (o.display || o.value).decodeText(); })) {\n                return { value: false };\n            }\n        };\n        for (var idx = 0, len = values.length; idx < len; idx++) {\n            var state_1 = _loop_1(idx, len);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        return true;\n    };\n    PDFAcroChoice.prototype.updateSelectedIndices = function (values) {\n        if (values.length > 1) {\n            var indices = new Array(values.length);\n            var options = this.getOptions();\n            var _loop_2 = function (idx, len) {\n                var val = values[idx].decodeText();\n                indices[idx] = options.findIndex(function (o) { return val === (o.display || o.value).decodeText(); });\n            };\n            for (var idx = 0, len = values.length; idx < len; idx++) {\n                _loop_2(idx, len);\n            }\n            this.dict.set(PDFName.of('I'), this.dict.context.obj(indices.sort()));\n        }\n        else {\n            this.dict.delete(PDFName.of('I'));\n        }\n    };\n    PDFAcroChoice.prototype.getValues = function () {\n        var v = this.V();\n        if (v instanceof PDFString || v instanceof PDFHexString)\n            return [v];\n        if (v instanceof PDFArray) {\n            var values = [];\n            for (var idx = 0, len = v.size(); idx < len; idx++) {\n                var value = v.lookup(idx);\n                if (value instanceof PDFString || value instanceof PDFHexString) {\n                    values.push(value);\n                }\n            }\n            return values;\n        }\n        return [];\n    };\n    PDFAcroChoice.prototype.Opt = function () {\n        return this.dict.lookupMaybe(PDFName.of('Opt'), PDFString, PDFHexString, PDFArray);\n    };\n    PDFAcroChoice.prototype.setOptions = function (options) {\n        var newOpt = new Array(options.length);\n        for (var idx = 0, len = options.length; idx < len; idx++) {\n            var _a = options[idx], value = _a.value, display = _a.display;\n            newOpt[idx] = this.dict.context.obj([value, display || value]);\n        }\n        this.dict.set(PDFName.of('Opt'), this.dict.context.obj(newOpt));\n    };\n    PDFAcroChoice.prototype.getOptions = function () {\n        var Opt = this.Opt();\n        // Not supposed to happen - Opt _should_ always be `PDFArray | undefined`\n        if (Opt instanceof PDFString || Opt instanceof PDFHexString) {\n            return [{ value: Opt, display: Opt }];\n        }\n        if (Opt instanceof PDFArray) {\n            var res = [];\n            for (var idx = 0, len = Opt.size(); idx < len; idx++) {\n                var item = Opt.lookup(idx);\n                // If `item` is a string, use that as both the export and text value\n                if (item instanceof PDFString || item instanceof PDFHexString) {\n                    res.push({ value: item, display: item });\n                }\n                // If `item` is an array of one, treat it the same as just a string,\n                // if it's an array of two then `item[0]` is the export value and\n                // `item[1]` is the text value\n                if (item instanceof PDFArray) {\n                    if (item.size() > 0) {\n                        var first = item.lookup(0, PDFString, PDFHexString);\n                        var second = item.lookupMaybe(1, PDFString, PDFHexString);\n                        res.push({ value: first, display: second || first });\n                    }\n                }\n            }\n            return res;\n        }\n        return [];\n    };\n    return PDFAcroChoice;\n}(PDFAcroTerminal));\nexport default PDFAcroChoice;\n//# sourceMappingURL=PDFAcroChoice.js.map","import { __extends } from \"tslib\";\nimport PDFAcroChoice from \"./PDFAcroChoice\";\nimport { AcroChoiceFlags } from \"./flags\";\nvar PDFAcroComboBox = /** @class */ (function (_super) {\n    __extends(PDFAcroComboBox, _super);\n    function PDFAcroComboBox() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroComboBox.fromDict = function (dict, ref) {\n        return new PDFAcroComboBox(dict, ref);\n    };\n    PDFAcroComboBox.create = function (context) {\n        var dict = context.obj({\n            FT: 'Ch',\n            Ff: AcroChoiceFlags.Combo,\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroComboBox(dict, ref);\n    };\n    return PDFAcroComboBox;\n}(PDFAcroChoice));\nexport default PDFAcroComboBox;\n//# sourceMappingURL=PDFAcroComboBox.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroField from \"./PDFAcroField\";\nvar PDFAcroNonTerminal = /** @class */ (function (_super) {\n    __extends(PDFAcroNonTerminal, _super);\n    function PDFAcroNonTerminal() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroNonTerminal.prototype.addField = function (field) {\n        var Kids = this.normalizedEntries().Kids;\n        Kids === null || Kids === void 0 ? void 0 : Kids.push(field);\n    };\n    PDFAcroNonTerminal.prototype.normalizedEntries = function () {\n        var Kids = this.Kids();\n        if (!Kids) {\n            Kids = this.dict.context.obj([]);\n            this.dict.set(PDFName.of('Kids'), Kids);\n        }\n        return { Kids: Kids };\n    };\n    PDFAcroNonTerminal.fromDict = function (dict, ref) {\n        return new PDFAcroNonTerminal(dict, ref);\n    };\n    PDFAcroNonTerminal.create = function (context) {\n        var dict = context.obj({});\n        var ref = context.register(dict);\n        return new PDFAcroNonTerminal(dict, ref);\n    };\n    return PDFAcroNonTerminal;\n}(PDFAcroField));\nexport default PDFAcroNonTerminal;\n//# sourceMappingURL=PDFAcroNonTerminal.js.map","import { __extends } from \"tslib\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nvar PDFAcroSignature = /** @class */ (function (_super) {\n    __extends(PDFAcroSignature, _super);\n    function PDFAcroSignature() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroSignature.fromDict = function (dict, ref) {\n        return new PDFAcroSignature(dict, ref);\n    };\n    return PDFAcroSignature;\n}(PDFAcroTerminal));\nexport default PDFAcroSignature;\n//# sourceMappingURL=PDFAcroSignature.js.map","import { __extends } from \"tslib\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFString from \"../objects/PDFString\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nvar PDFAcroText = /** @class */ (function (_super) {\n    __extends(PDFAcroText, _super);\n    function PDFAcroText() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroText.prototype.MaxLen = function () {\n        var maxLen = this.dict.lookup(PDFName.of('MaxLen'));\n        if (maxLen instanceof PDFNumber)\n            return maxLen;\n        return undefined;\n    };\n    PDFAcroText.prototype.Q = function () {\n        var q = this.dict.lookup(PDFName.of('Q'));\n        if (q instanceof PDFNumber)\n            return q;\n        return undefined;\n    };\n    PDFAcroText.prototype.setMaxLength = function (maxLength) {\n        this.dict.set(PDFName.of('MaxLen'), PDFNumber.of(maxLength));\n    };\n    PDFAcroText.prototype.removeMaxLength = function () {\n        this.dict.delete(PDFName.of('MaxLen'));\n    };\n    PDFAcroText.prototype.getMaxLength = function () {\n        var _a;\n        return (_a = this.MaxLen()) === null || _a === void 0 ? void 0 : _a.asNumber();\n    };\n    PDFAcroText.prototype.setQuadding = function (quadding) {\n        this.dict.set(PDFName.of('Q'), PDFNumber.of(quadding));\n    };\n    PDFAcroText.prototype.getQuadding = function () {\n        var _a;\n        return (_a = this.Q()) === null || _a === void 0 ? void 0 : _a.asNumber();\n    };\n    PDFAcroText.prototype.setValue = function (value) {\n        this.dict.set(PDFName.of('V'), value);\n        // const widgets = this.getWidgets();\n        // for (let idx = 0, len = widgets.length; idx < len; idx++) {\n        //   const widget = widgets[idx];\n        //   const state = widget.getOnValue() === value ? value : PDFName.of('Off');\n        //   widget.setAppearanceState(state);\n        // }\n    };\n    PDFAcroText.prototype.removeValue = function () {\n        this.dict.delete(PDFName.of('V'));\n    };\n    PDFAcroText.prototype.getValue = function () {\n        var v = this.V();\n        if (v instanceof PDFString || v instanceof PDFHexString)\n            return v;\n        return undefined;\n    };\n    PDFAcroText.fromDict = function (dict, ref) { return new PDFAcroText(dict, ref); };\n    PDFAcroText.create = function (context) {\n        var dict = context.obj({\n            FT: 'Tx',\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroText(dict, ref);\n    };\n    return PDFAcroText;\n}(PDFAcroTerminal));\nexport default PDFAcroText;\n//# sourceMappingURL=PDFAcroText.js.map","import { __extends } from \"tslib\";\nimport PDFAcroButton from \"./PDFAcroButton\";\nimport { AcroButtonFlags } from \"./flags\";\nvar PDFAcroPushButton = /** @class */ (function (_super) {\n    __extends(PDFAcroPushButton, _super);\n    function PDFAcroPushButton() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroPushButton.fromDict = function (dict, ref) {\n        return new PDFAcroPushButton(dict, ref);\n    };\n    PDFAcroPushButton.create = function (context) {\n        var dict = context.obj({\n            FT: 'Btn',\n            Ff: AcroButtonFlags.PushButton,\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroPushButton(dict, ref);\n    };\n    return PDFAcroPushButton;\n}(PDFAcroButton));\nexport default PDFAcroPushButton;\n//# sourceMappingURL=PDFAcroPushButton.js.map","import { __extends } from \"tslib\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroButton from \"./PDFAcroButton\";\nimport { AcroButtonFlags } from \"./flags\";\nimport { InvalidAcroFieldValueError } from \"../errors\";\nvar PDFAcroRadioButton = /** @class */ (function (_super) {\n    __extends(PDFAcroRadioButton, _super);\n    function PDFAcroRadioButton() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroRadioButton.prototype.setValue = function (value) {\n        var onValues = this.getOnValues();\n        if (!onValues.includes(value) && value !== PDFName.of('Off')) {\n            throw new InvalidAcroFieldValueError();\n        }\n        this.dict.set(PDFName.of('V'), value);\n        var widgets = this.getWidgets();\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var widget = widgets[idx];\n            var state = widget.getOnValue() === value ? value : PDFName.of('Off');\n            widget.setAppearanceState(state);\n        }\n    };\n    PDFAcroRadioButton.prototype.getValue = function () {\n        var v = this.V();\n        if (v instanceof PDFName)\n            return v;\n        return PDFName.of('Off');\n    };\n    PDFAcroRadioButton.prototype.getOnValues = function () {\n        var widgets = this.getWidgets();\n        var onValues = [];\n        for (var idx = 0, len = widgets.length; idx < len; idx++) {\n            var onValue = widgets[idx].getOnValue();\n            if (onValue)\n                onValues.push(onValue);\n        }\n        return onValues;\n    };\n    PDFAcroRadioButton.fromDict = function (dict, ref) {\n        return new PDFAcroRadioButton(dict, ref);\n    };\n    PDFAcroRadioButton.create = function (context) {\n        var dict = context.obj({\n            FT: 'Btn',\n            Ff: AcroButtonFlags.Radio,\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroRadioButton(dict, ref);\n    };\n    return PDFAcroRadioButton;\n}(PDFAcroButton));\nexport default PDFAcroRadioButton;\n//# sourceMappingURL=PDFAcroRadioButton.js.map","import { __extends } from \"tslib\";\nimport PDFAcroChoice from \"./PDFAcroChoice\";\nvar PDFAcroListBox = /** @class */ (function (_super) {\n    __extends(PDFAcroListBox, _super);\n    function PDFAcroListBox() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFAcroListBox.fromDict = function (dict, ref) {\n        return new PDFAcroListBox(dict, ref);\n    };\n    PDFAcroListBox.create = function (context) {\n        var dict = context.obj({\n            FT: 'Ch',\n            Kids: [],\n        });\n        var ref = context.register(dict);\n        return new PDFAcroListBox(dict, ref);\n    };\n    return PDFAcroListBox;\n}(PDFAcroChoice));\nexport default PDFAcroListBox;\n//# sourceMappingURL=PDFAcroListBox.js.map","import PDFNumber from \"../objects/PDFNumber\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFAcroTerminal from \"./PDFAcroTerminal\";\nimport PDFAcroNonTerminal from \"./PDFAcroNonTerminal\";\nimport PDFAcroSignature from \"./PDFAcroSignature\";\nimport PDFAcroText from \"./PDFAcroText\";\nimport PDFAcroPushButton from \"./PDFAcroPushButton\";\nimport PDFAcroRadioButton from \"./PDFAcroRadioButton\";\nimport PDFAcroCheckBox from \"./PDFAcroCheckBox\";\nimport PDFAcroComboBox from \"./PDFAcroComboBox\";\nimport PDFAcroListBox from \"./PDFAcroListBox\";\nimport { AcroButtonFlags, AcroChoiceFlags } from \"./flags\";\nexport var createPDFAcroFields = function (kidDicts) {\n    if (!kidDicts)\n        return [];\n    var kids = [];\n    for (var idx = 0, len = kidDicts.size(); idx < len; idx++) {\n        var ref = kidDicts.get(idx);\n        var dict = kidDicts.lookup(idx);\n        // if (dict instanceof PDFDict) kids.push(PDFAcroField.fromDict(dict));\n        if (ref instanceof PDFRef && dict instanceof PDFDict) {\n            kids.push([createPDFAcroField(dict, ref), ref]);\n        }\n    }\n    return kids;\n};\nexport var createPDFAcroField = function (dict, ref) {\n    var isNonTerminal = isNonTerminalAcroField(dict);\n    if (isNonTerminal)\n        return PDFAcroNonTerminal.fromDict(dict, ref);\n    return createPDFAcroTerminal(dict, ref);\n};\n// TODO: Maybe just check if the dict is *not* a widget? That might be better.\n// According to the PDF spec:\n//\n//   > A field's children in the hierarchy may also include widget annotations\n//   > that define its appearance on the page. A field that has children that\n//   > are fields is called a non-terminal field. A field that does not have\n//   > children that are fields is called a terminal field.\n//\n// The spec is not entirely clear about how to determine whether a given\n// dictionary represents an acrofield or a widget annotation. So we will assume\n// that a dictionary is an acrofield if it is a member of the `/Kids` array\n// and it contains a `/T` entry (widgets do not have `/T` entries). This isn't\n// a bullet proof solution, because the `/T` entry is technically defined as\n// optional for acrofields by the PDF spec. But in practice all acrofields seem\n// to have a `/T` entry defined.\nvar isNonTerminalAcroField = function (dict) {\n    var kids = dict.lookup(PDFName.of('Kids'));\n    if (kids instanceof PDFArray) {\n        for (var idx = 0, len = kids.size(); idx < len; idx++) {\n            var kid = kids.lookup(idx);\n            var kidIsField = kid instanceof PDFDict && kid.has(PDFName.of('T'));\n            if (kidIsField)\n                return true;\n        }\n    }\n    return false;\n};\nvar createPDFAcroTerminal = function (dict, ref) {\n    var ftNameOrRef = getInheritableAttribute(dict, PDFName.of('FT'));\n    var type = dict.context.lookup(ftNameOrRef, PDFName);\n    if (type === PDFName.of('Btn'))\n        return createPDFAcroButton(dict, ref);\n    if (type === PDFName.of('Ch'))\n        return createPDFAcroChoice(dict, ref);\n    if (type === PDFName.of('Tx'))\n        return PDFAcroText.fromDict(dict, ref);\n    if (type === PDFName.of('Sig'))\n        return PDFAcroSignature.fromDict(dict, ref);\n    // We should never reach this line. But there are a lot of weird PDFs out\n    // there. So, just to be safe, we'll try to handle things gracefully instead\n    // of throwing an error.\n    return PDFAcroTerminal.fromDict(dict, ref);\n};\nvar createPDFAcroButton = function (dict, ref) {\n    var _a;\n    var ffNumberOrRef = getInheritableAttribute(dict, PDFName.of('Ff'));\n    var ffNumber = dict.context.lookupMaybe(ffNumberOrRef, PDFNumber);\n    var flags = (_a = ffNumber === null || ffNumber === void 0 ? void 0 : ffNumber.asNumber()) !== null && _a !== void 0 ? _a : 0;\n    if (flagIsSet(flags, AcroButtonFlags.PushButton)) {\n        return PDFAcroPushButton.fromDict(dict, ref);\n    }\n    else if (flagIsSet(flags, AcroButtonFlags.Radio)) {\n        return PDFAcroRadioButton.fromDict(dict, ref);\n    }\n    else {\n        return PDFAcroCheckBox.fromDict(dict, ref);\n    }\n};\nvar createPDFAcroChoice = function (dict, ref) {\n    var _a;\n    var ffNumberOrRef = getInheritableAttribute(dict, PDFName.of('Ff'));\n    var ffNumber = dict.context.lookupMaybe(ffNumberOrRef, PDFNumber);\n    var flags = (_a = ffNumber === null || ffNumber === void 0 ? void 0 : ffNumber.asNumber()) !== null && _a !== void 0 ? _a : 0;\n    if (flagIsSet(flags, AcroChoiceFlags.Combo)) {\n        return PDFAcroComboBox.fromDict(dict, ref);\n    }\n    else {\n        return PDFAcroListBox.fromDict(dict, ref);\n    }\n};\nvar flagIsSet = function (flags, flag) {\n    return (flags & flag) !== 0;\n};\nvar getInheritableAttribute = function (startNode, name) {\n    var attribute;\n    ascend(startNode, function (node) {\n        if (!attribute)\n            attribute = node.get(name);\n    });\n    return attribute;\n};\nvar ascend = function (startNode, visitor) {\n    visitor(startNode);\n    var Parent = startNode.lookupMaybe(PDFName.of('Parent'), PDFDict);\n    if (Parent)\n        ascend(Parent, visitor);\n};\n//# sourceMappingURL=utils.js.map","import PDFDict from \"../objects/PDFDict\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFAcroNonTerminal from \"./PDFAcroNonTerminal\";\nimport { createPDFAcroField, createPDFAcroFields, } from \"./utils\";\nvar PDFAcroForm = /** @class */ (function () {\n    function PDFAcroForm(dict) {\n        this.dict = dict;\n    }\n    PDFAcroForm.prototype.Fields = function () {\n        var fields = this.dict.lookup(PDFName.of('Fields'));\n        if (fields instanceof PDFArray)\n            return fields;\n        return undefined;\n    };\n    PDFAcroForm.prototype.getFields = function () {\n        var Fields = this.normalizedEntries().Fields;\n        var fields = new Array(Fields.size());\n        for (var idx = 0, len = Fields.size(); idx < len; idx++) {\n            var ref = Fields.get(idx);\n            var dict = Fields.lookup(idx, PDFDict);\n            fields[idx] = [createPDFAcroField(dict, ref), ref];\n        }\n        return fields;\n    };\n    PDFAcroForm.prototype.getAllFields = function () {\n        var allFields = [];\n        var pushFields = function (fields) {\n            if (!fields)\n                return;\n            for (var idx = 0, len = fields.length; idx < len; idx++) {\n                var field = fields[idx];\n                allFields.push(field);\n                var fieldModel = field[0];\n                if (fieldModel instanceof PDFAcroNonTerminal) {\n                    pushFields(createPDFAcroFields(fieldModel.Kids()));\n                }\n            }\n        };\n        pushFields(this.getFields());\n        return allFields;\n    };\n    PDFAcroForm.prototype.addField = function (field) {\n        var Fields = this.normalizedEntries().Fields;\n        Fields === null || Fields === void 0 ? void 0 : Fields.push(field);\n    };\n    PDFAcroForm.prototype.removeField = function (field) {\n        var parent = field.getParent();\n        var fields = parent === undefined ? this.normalizedEntries().Fields : parent.Kids();\n        var index = fields === null || fields === void 0 ? void 0 : fields.indexOf(field.ref);\n        if (fields === undefined || index === undefined) {\n            throw new Error(\"Tried to remove inexistent field \" + field.getFullyQualifiedName());\n        }\n        fields.remove(index);\n        if (parent !== undefined && fields.size() === 0) {\n            this.removeField(parent);\n        }\n    };\n    PDFAcroForm.prototype.normalizedEntries = function () {\n        var Fields = this.Fields();\n        if (!Fields) {\n            Fields = this.dict.context.obj([]);\n            this.dict.set(PDFName.of('Fields'), Fields);\n        }\n        return { Fields: Fields };\n    };\n    PDFAcroForm.fromDict = function (dict) { return new PDFAcroForm(dict); };\n    PDFAcroForm.create = function (context) {\n        var dict = context.obj({ Fields: [] });\n        return new PDFAcroForm(dict);\n    };\n    return PDFAcroForm;\n}());\nexport default PDFAcroForm;\n//# sourceMappingURL=PDFAcroForm.js.map","import { __extends } from \"tslib\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport { PDFAcroForm } from \"../acroform\";\nimport ViewerPreferences from '../interactive/ViewerPreferences';\nvar PDFCatalog = /** @class */ (function (_super) {\n    __extends(PDFCatalog, _super);\n    function PDFCatalog() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFCatalog.prototype.Pages = function () {\n        return this.lookup(PDFName.of('Pages'), PDFDict);\n    };\n    PDFCatalog.prototype.AcroForm = function () {\n        return this.lookupMaybe(PDFName.of('AcroForm'), PDFDict);\n    };\n    PDFCatalog.prototype.getAcroForm = function () {\n        var dict = this.AcroForm();\n        if (!dict)\n            return undefined;\n        return PDFAcroForm.fromDict(dict);\n    };\n    PDFCatalog.prototype.getOrCreateAcroForm = function () {\n        var acroForm = this.getAcroForm();\n        if (!acroForm) {\n            acroForm = PDFAcroForm.create(this.context);\n            var acroFormRef = this.context.register(acroForm.dict);\n            this.set(PDFName.of('AcroForm'), acroFormRef);\n        }\n        return acroForm;\n    };\n    PDFCatalog.prototype.ViewerPreferences = function () {\n        return this.lookupMaybe(PDFName.of('ViewerPreferences'), PDFDict);\n    };\n    PDFCatalog.prototype.getViewerPreferences = function () {\n        var dict = this.ViewerPreferences();\n        if (!dict)\n            return undefined;\n        return ViewerPreferences.fromDict(dict);\n    };\n    PDFCatalog.prototype.getOrCreateViewerPreferences = function () {\n        var viewerPrefs = this.getViewerPreferences();\n        if (!viewerPrefs) {\n            viewerPrefs = ViewerPreferences.create(this.context);\n            var viewerPrefsRef = this.context.register(viewerPrefs.dict);\n            this.set(PDFName.of('ViewerPreferences'), viewerPrefsRef);\n        }\n        return viewerPrefs;\n    };\n    /**\n     * Inserts the given ref as a leaf node of this catalog's page tree at the\n     * specified index (zero-based). Also increments the `Count` of each node in\n     * the page tree hierarchy to accomodate the new page.\n     *\n     * Returns the ref of the PDFPageTree node into which `leafRef` was inserted.\n     */\n    PDFCatalog.prototype.insertLeafNode = function (leafRef, index) {\n        var pagesRef = this.get(PDFName.of('Pages'));\n        var maybeParentRef = this.Pages().insertLeafNode(leafRef, index);\n        return maybeParentRef || pagesRef;\n    };\n    PDFCatalog.prototype.removeLeafNode = function (index) {\n        this.Pages().removeLeafNode(index);\n    };\n    PDFCatalog.withContextAndPages = function (context, pages) {\n        var dict = new Map();\n        dict.set(PDFName.of('Type'), PDFName.of('Catalog'));\n        dict.set(PDFName.of('Pages'), pages);\n        return new PDFCatalog(dict, context);\n    };\n    PDFCatalog.fromMapWithContext = function (map, context) {\n        return new PDFCatalog(map, context);\n    };\n    return PDFCatalog;\n}(PDFDict));\nexport default PDFCatalog;\n//# sourceMappingURL=PDFCatalog.js.map","import { __extends } from \"tslib\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFPageLeaf from \"./PDFPageLeaf\";\nimport { InvalidTargetIndexError, CorruptPageTreeError } from \"../errors\";\nvar PDFPageTree = /** @class */ (function (_super) {\n    __extends(PDFPageTree, _super);\n    function PDFPageTree() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PDFPageTree.prototype.Parent = function () {\n        return this.lookup(PDFName.of('Parent'));\n    };\n    PDFPageTree.prototype.Kids = function () {\n        return this.lookup(PDFName.of('Kids'), PDFArray);\n    };\n    PDFPageTree.prototype.Count = function () {\n        return this.lookup(PDFName.of('Count'), PDFNumber);\n    };\n    PDFPageTree.prototype.pushTreeNode = function (treeRef) {\n        var Kids = this.Kids();\n        Kids.push(treeRef);\n    };\n    PDFPageTree.prototype.pushLeafNode = function (leafRef) {\n        var Kids = this.Kids();\n        this.insertLeafKid(Kids.size(), leafRef);\n    };\n    /**\n     * Inserts the given ref as a leaf node of this page tree at the specified\n     * index (zero-based). Also increments the `Count` of each page tree in the\n     * hierarchy to accomodate the new page.\n     *\n     * Returns the ref of the PDFPageTree node into which `leafRef` was inserted,\n     * or `undefined` if it was inserted into the root node (the PDFPageTree upon\n     * which the method was first called).\n     */\n    PDFPageTree.prototype.insertLeafNode = function (leafRef, targetIndex) {\n        var Kids = this.Kids();\n        var Count = this.Count().asNumber();\n        if (targetIndex > Count) {\n            throw new InvalidTargetIndexError(targetIndex, Count);\n        }\n        var leafsRemainingUntilTarget = targetIndex;\n        for (var idx = 0, len = Kids.size(); idx < len; idx++) {\n            if (leafsRemainingUntilTarget === 0) {\n                // Insert page and return\n                this.insertLeafKid(idx, leafRef);\n                return undefined;\n            }\n            var kidRef = Kids.get(idx);\n            var kid = this.context.lookup(kidRef);\n            if (kid instanceof PDFPageTree) {\n                if (kid.Count().asNumber() > leafsRemainingUntilTarget) {\n                    // Dig in\n                    return (kid.insertLeafNode(leafRef, leafsRemainingUntilTarget) || kidRef);\n                }\n                else {\n                    // Move on\n                    leafsRemainingUntilTarget -= kid.Count().asNumber();\n                }\n            }\n            if (kid instanceof PDFPageLeaf) {\n                // Move on\n                leafsRemainingUntilTarget -= 1;\n            }\n        }\n        if (leafsRemainingUntilTarget === 0) {\n            // Insert page at the end and return\n            this.insertLeafKid(Kids.size(), leafRef);\n            return undefined;\n        }\n        // Should never get here if `targetIndex` is valid\n        throw new CorruptPageTreeError(targetIndex, 'insertLeafNode');\n    };\n    /**\n     * Removes the leaf node at the specified index (zero-based) from this page\n     * tree. Also decrements the `Count` of each page tree in the hierarchy to\n     * account for the removed page.\n     *\n     * If `prune` is true, then intermediate tree nodes will be removed from the\n     * tree if they contain 0 children after the leaf node is removed.\n     */\n    PDFPageTree.prototype.removeLeafNode = function (targetIndex, prune) {\n        if (prune === void 0) { prune = true; }\n        var Kids = this.Kids();\n        var Count = this.Count().asNumber();\n        if (targetIndex >= Count) {\n            throw new InvalidTargetIndexError(targetIndex, Count);\n        }\n        var leafsRemainingUntilTarget = targetIndex;\n        for (var idx = 0, len = Kids.size(); idx < len; idx++) {\n            var kidRef = Kids.get(idx);\n            var kid = this.context.lookup(kidRef);\n            if (kid instanceof PDFPageTree) {\n                if (kid.Count().asNumber() > leafsRemainingUntilTarget) {\n                    // Dig in\n                    kid.removeLeafNode(leafsRemainingUntilTarget, prune);\n                    if (prune && kid.Kids().size() === 0)\n                        Kids.remove(idx);\n                    return;\n                }\n                else {\n                    // Move on\n                    leafsRemainingUntilTarget -= kid.Count().asNumber();\n                }\n            }\n            if (kid instanceof PDFPageLeaf) {\n                if (leafsRemainingUntilTarget === 0) {\n                    // Remove page and return\n                    this.removeKid(idx);\n                    return;\n                }\n                else {\n                    // Move on\n                    leafsRemainingUntilTarget -= 1;\n                }\n            }\n        }\n        // Should never get here if `targetIndex` is valid\n        throw new CorruptPageTreeError(targetIndex, 'removeLeafNode');\n    };\n    PDFPageTree.prototype.ascend = function (visitor) {\n        visitor(this);\n        var Parent = this.Parent();\n        if (Parent)\n            Parent.ascend(visitor);\n    };\n    /** Performs a Post-Order traversal of this page tree */\n    PDFPageTree.prototype.traverse = function (visitor) {\n        var Kids = this.Kids();\n        for (var idx = 0, len = Kids.size(); idx < len; idx++) {\n            var kidRef = Kids.get(idx);\n            var kid = this.context.lookup(kidRef);\n            if (kid instanceof PDFPageTree)\n                kid.traverse(visitor);\n            visitor(kid, kidRef);\n        }\n    };\n    PDFPageTree.prototype.insertLeafKid = function (kidIdx, leafRef) {\n        var Kids = this.Kids();\n        this.ascend(function (node) {\n            var newCount = node.Count().asNumber() + 1;\n            node.set(PDFName.of('Count'), PDFNumber.of(newCount));\n        });\n        Kids.insert(kidIdx, leafRef);\n    };\n    PDFPageTree.prototype.removeKid = function (kidIdx) {\n        var Kids = this.Kids();\n        var kid = Kids.lookup(kidIdx);\n        if (kid instanceof PDFPageLeaf) {\n            this.ascend(function (node) {\n                var newCount = node.Count().asNumber() - 1;\n                node.set(PDFName.of('Count'), PDFNumber.of(newCount));\n            });\n        }\n        Kids.remove(kidIdx);\n    };\n    PDFPageTree.withContext = function (context, parent) {\n        var dict = new Map();\n        dict.set(PDFName.of('Type'), PDFName.of('Pages'));\n        dict.set(PDFName.of('Kids'), context.obj([]));\n        dict.set(PDFName.of('Count'), context.obj(0));\n        if (parent)\n            dict.set(PDFName.of('Parent'), parent);\n        return new PDFPageTree(dict, context);\n    };\n    PDFPageTree.fromMapWithContext = function (map, context) {\n        return new PDFPageTree(map, context);\n    };\n    return PDFPageTree;\n}(PDFDict));\nexport default PDFPageTree;\n//# sourceMappingURL=PDFPageTree.js.map","import CharCodes from \"./CharCodes\";\nexport var IsDigit = new Uint8Array(256);\nIsDigit[CharCodes.Zero] = 1;\nIsDigit[CharCodes.One] = 1;\nIsDigit[CharCodes.Two] = 1;\nIsDigit[CharCodes.Three] = 1;\nIsDigit[CharCodes.Four] = 1;\nIsDigit[CharCodes.Five] = 1;\nIsDigit[CharCodes.Six] = 1;\nIsDigit[CharCodes.Seven] = 1;\nIsDigit[CharCodes.Eight] = 1;\nIsDigit[CharCodes.Nine] = 1;\nexport var IsNumericPrefix = new Uint8Array(256);\nIsNumericPrefix[CharCodes.Period] = 1;\nIsNumericPrefix[CharCodes.Plus] = 1;\nIsNumericPrefix[CharCodes.Minus] = 1;\nexport var IsNumeric = new Uint8Array(256);\nfor (var idx = 0, len = 256; idx < len; idx++) {\n    IsNumeric[idx] = IsDigit[idx] || IsNumericPrefix[idx] ? 1 : 0;\n}\n//# sourceMappingURL=Numeric.js.map","import { NumberParsingError } from \"../errors\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { IsDigit, IsNumeric } from \"../syntax/Numeric\";\nimport { IsWhitespace } from \"../syntax/Whitespace\";\nimport { charFromCode } from \"../../utils\";\nvar Newline = CharCodes.Newline, CarriageReturn = CharCodes.CarriageReturn;\n// TODO: Throw error if eof is reached before finishing object parse...\nvar BaseParser = /** @class */ (function () {\n    function BaseParser(bytes, capNumbers) {\n        if (capNumbers === void 0) { capNumbers = false; }\n        this.bytes = bytes;\n        this.capNumbers = capNumbers;\n    }\n    BaseParser.prototype.parseRawInt = function () {\n        var value = '';\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (!IsDigit[byte])\n                break;\n            value += charFromCode(this.bytes.next());\n        }\n        var numberValue = Number(value);\n        if (!value || !isFinite(numberValue)) {\n            throw new NumberParsingError(this.bytes.position(), value);\n        }\n        return numberValue;\n    };\n    // TODO: Maybe handle exponential format?\n    // TODO: Compare performance of string concatenation to charFromCode(...bytes)\n    BaseParser.prototype.parseRawNumber = function () {\n        var value = '';\n        // Parse integer-part, the leading (+ | - | . | 0-9)\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (!IsNumeric[byte])\n                break;\n            value += charFromCode(this.bytes.next());\n            if (byte === CharCodes.Period)\n                break;\n        }\n        // Parse decimal-part, the trailing (0-9)\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (!IsDigit[byte])\n                break;\n            value += charFromCode(this.bytes.next());\n        }\n        var numberValue = Number(value);\n        if (!value || !isFinite(numberValue)) {\n            throw new NumberParsingError(this.bytes.position(), value);\n        }\n        if (numberValue > Number.MAX_SAFE_INTEGER) {\n            if (this.capNumbers) {\n                var msg = \"Parsed number that is too large for some PDF readers: \" + value + \", using Number.MAX_SAFE_INTEGER instead.\";\n                console.warn(msg);\n                return Number.MAX_SAFE_INTEGER;\n            }\n            else {\n                var msg = \"Parsed number that is too large for some PDF readers: \" + value + \", not capping.\";\n                console.warn(msg);\n            }\n        }\n        return numberValue;\n    };\n    BaseParser.prototype.skipWhitespace = function () {\n        while (!this.bytes.done() && IsWhitespace[this.bytes.peek()]) {\n            this.bytes.next();\n        }\n    };\n    BaseParser.prototype.skipLine = function () {\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (byte === Newline || byte === CarriageReturn)\n                return;\n            this.bytes.next();\n        }\n    };\n    BaseParser.prototype.skipComment = function () {\n        if (this.bytes.peek() !== CharCodes.Percent)\n            return false;\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (byte === Newline || byte === CarriageReturn)\n                return true;\n            this.bytes.next();\n        }\n        return true;\n    };\n    BaseParser.prototype.skipWhitespaceAndComments = function () {\n        this.skipWhitespace();\n        while (this.skipComment())\n            this.skipWhitespace();\n    };\n    BaseParser.prototype.matchKeyword = function (keyword) {\n        var initialOffset = this.bytes.offset();\n        for (var idx = 0, len = keyword.length; idx < len; idx++) {\n            if (this.bytes.done() || this.bytes.next() !== keyword[idx]) {\n                this.bytes.moveTo(initialOffset);\n                return false;\n            }\n        }\n        return true;\n    };\n    return BaseParser;\n}());\nexport default BaseParser;\n//# sourceMappingURL=BaseParser.js.map","import { NextByteAssertionError } from \"../errors\";\nimport { decodePDFRawStream } from \"../streams/decode\";\nimport CharCodes from \"../syntax/CharCodes\";\n// TODO: See how line/col tracking affects performance\nvar ByteStream = /** @class */ (function () {\n    function ByteStream(bytes) {\n        this.idx = 0;\n        this.line = 0;\n        this.column = 0;\n        this.bytes = bytes;\n        this.length = this.bytes.length;\n    }\n    ByteStream.prototype.moveTo = function (offset) {\n        this.idx = offset;\n    };\n    ByteStream.prototype.next = function () {\n        var byte = this.bytes[this.idx++];\n        if (byte === CharCodes.Newline) {\n            this.line += 1;\n            this.column = 0;\n        }\n        else {\n            this.column += 1;\n        }\n        return byte;\n    };\n    ByteStream.prototype.assertNext = function (expected) {\n        if (this.peek() !== expected) {\n            throw new NextByteAssertionError(this.position(), expected, this.peek());\n        }\n        return this.next();\n    };\n    ByteStream.prototype.peek = function () {\n        return this.bytes[this.idx];\n    };\n    ByteStream.prototype.peekAhead = function (steps) {\n        return this.bytes[this.idx + steps];\n    };\n    ByteStream.prototype.peekAt = function (offset) {\n        return this.bytes[offset];\n    };\n    ByteStream.prototype.done = function () {\n        return this.idx >= this.length;\n    };\n    ByteStream.prototype.offset = function () {\n        return this.idx;\n    };\n    ByteStream.prototype.slice = function (start, end) {\n        return this.bytes.slice(start, end);\n    };\n    ByteStream.prototype.position = function () {\n        return { line: this.line, column: this.column, offset: this.idx };\n    };\n    ByteStream.of = function (bytes) { return new ByteStream(bytes); };\n    ByteStream.fromPDFRawStream = function (rawStream) {\n        return ByteStream.of(decodePDFRawStream(rawStream).decode());\n    };\n    return ByteStream;\n}());\nexport default ByteStream;\n//# sourceMappingURL=ByteStream.js.map","import { __spreadArrays } from \"tslib\";\nimport CharCodes from \"./CharCodes\";\nvar Space = CharCodes.Space, CarriageReturn = CharCodes.CarriageReturn, Newline = CharCodes.Newline;\nvar stream = [\n    CharCodes.s,\n    CharCodes.t,\n    CharCodes.r,\n    CharCodes.e,\n    CharCodes.a,\n    CharCodes.m,\n];\nvar endstream = [\n    CharCodes.e,\n    CharCodes.n,\n    CharCodes.d,\n    CharCodes.s,\n    CharCodes.t,\n    CharCodes.r,\n    CharCodes.e,\n    CharCodes.a,\n    CharCodes.m,\n];\nexport var Keywords = {\n    header: [\n        CharCodes.Percent,\n        CharCodes.P,\n        CharCodes.D,\n        CharCodes.F,\n        CharCodes.Dash,\n    ],\n    eof: [\n        CharCodes.Percent,\n        CharCodes.Percent,\n        CharCodes.E,\n        CharCodes.O,\n        CharCodes.F,\n    ],\n    obj: [CharCodes.o, CharCodes.b, CharCodes.j],\n    endobj: [\n        CharCodes.e,\n        CharCodes.n,\n        CharCodes.d,\n        CharCodes.o,\n        CharCodes.b,\n        CharCodes.j,\n    ],\n    xref: [CharCodes.x, CharCodes.r, CharCodes.e, CharCodes.f],\n    trailer: [\n        CharCodes.t,\n        CharCodes.r,\n        CharCodes.a,\n        CharCodes.i,\n        CharCodes.l,\n        CharCodes.e,\n        CharCodes.r,\n    ],\n    startxref: [\n        CharCodes.s,\n        CharCodes.t,\n        CharCodes.a,\n        CharCodes.r,\n        CharCodes.t,\n        CharCodes.x,\n        CharCodes.r,\n        CharCodes.e,\n        CharCodes.f,\n    ],\n    true: [CharCodes.t, CharCodes.r, CharCodes.u, CharCodes.e],\n    false: [CharCodes.f, CharCodes.a, CharCodes.l, CharCodes.s, CharCodes.e],\n    null: [CharCodes.n, CharCodes.u, CharCodes.l, CharCodes.l],\n    stream: stream,\n    streamEOF1: __spreadArrays(stream, [Space, CarriageReturn, Newline]),\n    streamEOF2: __spreadArrays(stream, [CarriageReturn, Newline]),\n    streamEOF3: __spreadArrays(stream, [CarriageReturn]),\n    streamEOF4: __spreadArrays(stream, [Newline]),\n    endstream: endstream,\n    EOF1endstream: __spreadArrays([CarriageReturn, Newline], endstream),\n    EOF2endstream: __spreadArrays([CarriageReturn], endstream),\n    EOF3endstream: __spreadArrays([Newline], endstream),\n};\n//# sourceMappingURL=Keywords.js.map","import { __extends } from \"tslib\";\nimport { PDFObjectParsingError, PDFStreamParsingError, UnbalancedParenthesisError, } from \"../errors\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFBool from \"../objects/PDFBool\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFHexString from \"../objects/PDFHexString\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNull from \"../objects/PDFNull\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRawStream from \"../objects/PDFRawStream\";\nimport PDFRef from \"../objects/PDFRef\";\nimport PDFString from \"../objects/PDFString\";\nimport BaseParser from \"./BaseParser\";\nimport ByteStream from \"./ByteStream\";\nimport PDFCatalog from \"../structures/PDFCatalog\";\nimport PDFPageLeaf from \"../structures/PDFPageLeaf\";\nimport PDFPageTree from \"../structures/PDFPageTree\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { IsDelimiter } from \"../syntax/Delimiters\";\nimport { Keywords } from \"../syntax/Keywords\";\nimport { IsDigit, IsNumeric } from \"../syntax/Numeric\";\nimport { IsWhitespace } from \"../syntax/Whitespace\";\nimport { charFromCode } from \"../../utils\";\n// TODO: Throw error if eof is reached before finishing object parse...\nvar PDFObjectParser = /** @class */ (function (_super) {\n    __extends(PDFObjectParser, _super);\n    function PDFObjectParser(byteStream, context, capNumbers) {\n        if (capNumbers === void 0) { capNumbers = false; }\n        var _this = _super.call(this, byteStream, capNumbers) || this;\n        _this.context = context;\n        return _this;\n    }\n    // TODO: Is it possible to reduce duplicate parsing for ref lookaheads?\n    PDFObjectParser.prototype.parseObject = function () {\n        this.skipWhitespaceAndComments();\n        if (this.matchKeyword(Keywords.true))\n            return PDFBool.True;\n        if (this.matchKeyword(Keywords.false))\n            return PDFBool.False;\n        if (this.matchKeyword(Keywords.null))\n            return PDFNull;\n        var byte = this.bytes.peek();\n        if (byte === CharCodes.LessThan &&\n            this.bytes.peekAhead(1) === CharCodes.LessThan) {\n            return this.parseDictOrStream();\n        }\n        if (byte === CharCodes.LessThan)\n            return this.parseHexString();\n        if (byte === CharCodes.LeftParen)\n            return this.parseString();\n        if (byte === CharCodes.ForwardSlash)\n            return this.parseName();\n        if (byte === CharCodes.LeftSquareBracket)\n            return this.parseArray();\n        if (IsNumeric[byte])\n            return this.parseNumberOrRef();\n        throw new PDFObjectParsingError(this.bytes.position(), byte);\n    };\n    PDFObjectParser.prototype.parseNumberOrRef = function () {\n        var firstNum = this.parseRawNumber();\n        this.skipWhitespaceAndComments();\n        var lookaheadStart = this.bytes.offset();\n        if (IsDigit[this.bytes.peek()]) {\n            var secondNum = this.parseRawNumber();\n            this.skipWhitespaceAndComments();\n            if (this.bytes.peek() === CharCodes.R) {\n                this.bytes.assertNext(CharCodes.R);\n                return PDFRef.of(firstNum, secondNum);\n            }\n        }\n        this.bytes.moveTo(lookaheadStart);\n        return PDFNumber.of(firstNum);\n    };\n    // TODO: Maybe update PDFHexString.of() logic to remove whitespace and validate input?\n    PDFObjectParser.prototype.parseHexString = function () {\n        var value = '';\n        this.bytes.assertNext(CharCodes.LessThan);\n        while (!this.bytes.done() && this.bytes.peek() !== CharCodes.GreaterThan) {\n            value += charFromCode(this.bytes.next());\n        }\n        this.bytes.assertNext(CharCodes.GreaterThan);\n        return PDFHexString.of(value);\n    };\n    PDFObjectParser.prototype.parseString = function () {\n        var nestingLvl = 0;\n        var isEscaped = false;\n        var value = '';\n        while (!this.bytes.done()) {\n            var byte = this.bytes.next();\n            value += charFromCode(byte);\n            // Check for unescaped parenthesis\n            if (!isEscaped) {\n                if (byte === CharCodes.LeftParen)\n                    nestingLvl += 1;\n                if (byte === CharCodes.RightParen)\n                    nestingLvl -= 1;\n            }\n            // Track whether current character is being escaped or not\n            if (byte === CharCodes.BackSlash) {\n                isEscaped = !isEscaped;\n            }\n            else if (isEscaped) {\n                isEscaped = false;\n            }\n            // Once (if) the unescaped parenthesis balance out, return their contents\n            if (nestingLvl === 0) {\n                // Remove the outer parens so they aren't part of the contents\n                return PDFString.of(value.substring(1, value.length - 1));\n            }\n        }\n        throw new UnbalancedParenthesisError(this.bytes.position());\n    };\n    // TODO: Compare performance of string concatenation to charFromCode(...bytes)\n    // TODO: Maybe preallocate small Uint8Array if can use charFromCode?\n    PDFObjectParser.prototype.parseName = function () {\n        this.bytes.assertNext(CharCodes.ForwardSlash);\n        var name = '';\n        while (!this.bytes.done()) {\n            var byte = this.bytes.peek();\n            if (IsWhitespace[byte] || IsDelimiter[byte])\n                break;\n            name += charFromCode(byte);\n            this.bytes.next();\n        }\n        return PDFName.of(name);\n    };\n    PDFObjectParser.prototype.parseArray = function () {\n        this.bytes.assertNext(CharCodes.LeftSquareBracket);\n        this.skipWhitespaceAndComments();\n        var pdfArray = PDFArray.withContext(this.context);\n        while (this.bytes.peek() !== CharCodes.RightSquareBracket) {\n            var element = this.parseObject();\n            pdfArray.push(element);\n            this.skipWhitespaceAndComments();\n        }\n        this.bytes.assertNext(CharCodes.RightSquareBracket);\n        return pdfArray;\n    };\n    PDFObjectParser.prototype.parseDict = function () {\n        this.bytes.assertNext(CharCodes.LessThan);\n        this.bytes.assertNext(CharCodes.LessThan);\n        this.skipWhitespaceAndComments();\n        var dict = new Map();\n        while (!this.bytes.done() &&\n            this.bytes.peek() !== CharCodes.GreaterThan &&\n            this.bytes.peekAhead(1) !== CharCodes.GreaterThan) {\n            var key = this.parseName();\n            var value = this.parseObject();\n            dict.set(key, value);\n            this.skipWhitespaceAndComments();\n        }\n        this.skipWhitespaceAndComments();\n        this.bytes.assertNext(CharCodes.GreaterThan);\n        this.bytes.assertNext(CharCodes.GreaterThan);\n        var Type = dict.get(PDFName.of('Type'));\n        if (Type === PDFName.of('Catalog')) {\n            return PDFCatalog.fromMapWithContext(dict, this.context);\n        }\n        else if (Type === PDFName.of('Pages')) {\n            return PDFPageTree.fromMapWithContext(dict, this.context);\n        }\n        else if (Type === PDFName.of('Page')) {\n            return PDFPageLeaf.fromMapWithContext(dict, this.context);\n        }\n        else {\n            return PDFDict.fromMapWithContext(dict, this.context);\n        }\n    };\n    PDFObjectParser.prototype.parseDictOrStream = function () {\n        var startPos = this.bytes.position();\n        var dict = this.parseDict();\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.streamEOF1) &&\n            !this.matchKeyword(Keywords.streamEOF2) &&\n            !this.matchKeyword(Keywords.streamEOF3) &&\n            !this.matchKeyword(Keywords.streamEOF4) &&\n            !this.matchKeyword(Keywords.stream)) {\n            return dict;\n        }\n        var start = this.bytes.offset();\n        var end;\n        var Length = dict.get(PDFName.of('Length'));\n        if (Length instanceof PDFNumber) {\n            end = start + Length.asNumber();\n            this.bytes.moveTo(end);\n            this.skipWhitespaceAndComments();\n            if (!this.matchKeyword(Keywords.endstream)) {\n                this.bytes.moveTo(start);\n                end = this.findEndOfStreamFallback(startPos);\n            }\n        }\n        else {\n            end = this.findEndOfStreamFallback(startPos);\n        }\n        var contents = this.bytes.slice(start, end);\n        return PDFRawStream.of(dict, contents);\n    };\n    PDFObjectParser.prototype.findEndOfStreamFallback = function (startPos) {\n        // Move to end of stream, while handling nested streams\n        var nestingLvl = 1;\n        var end = this.bytes.offset();\n        while (!this.bytes.done()) {\n            end = this.bytes.offset();\n            if (this.matchKeyword(Keywords.stream)) {\n                nestingLvl += 1;\n            }\n            else if (this.matchKeyword(Keywords.EOF1endstream) ||\n                this.matchKeyword(Keywords.EOF2endstream) ||\n                this.matchKeyword(Keywords.EOF3endstream) ||\n                this.matchKeyword(Keywords.endstream)) {\n                nestingLvl -= 1;\n            }\n            else {\n                this.bytes.next();\n            }\n            if (nestingLvl === 0)\n                break;\n        }\n        if (nestingLvl !== 0)\n            throw new PDFStreamParsingError(startPos);\n        return end;\n    };\n    PDFObjectParser.forBytes = function (bytes, context, capNumbers) { return new PDFObjectParser(ByteStream.of(bytes), context, capNumbers); };\n    PDFObjectParser.forByteStream = function (byteStream, context, capNumbers) {\n        if (capNumbers === void 0) { capNumbers = false; }\n        return new PDFObjectParser(byteStream, context, capNumbers);\n    };\n    return PDFObjectParser;\n}(BaseParser));\nexport default PDFObjectParser;\n//# sourceMappingURL=PDFObjectParser.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport { ReparseError } from \"../errors\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRef from \"../objects/PDFRef\";\nimport ByteStream from \"./ByteStream\";\nimport PDFObjectParser from \"./PDFObjectParser\";\nimport { waitForTick } from \"../../utils\";\nvar PDFObjectStreamParser = /** @class */ (function (_super) {\n    __extends(PDFObjectStreamParser, _super);\n    function PDFObjectStreamParser(rawStream, shouldWaitForTick) {\n        var _this = _super.call(this, ByteStream.fromPDFRawStream(rawStream), rawStream.dict.context) || this;\n        var dict = rawStream.dict;\n        _this.alreadyParsed = false;\n        _this.shouldWaitForTick = shouldWaitForTick || (function () { return false; });\n        _this.firstOffset = dict.lookup(PDFName.of('First'), PDFNumber).asNumber();\n        _this.objectCount = dict.lookup(PDFName.of('N'), PDFNumber).asNumber();\n        return _this;\n    }\n    PDFObjectStreamParser.prototype.parseIntoContext = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var offsetsAndObjectNumbers, idx, len, _a, objectNumber, offset, object, ref;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (this.alreadyParsed) {\n                            throw new ReparseError('PDFObjectStreamParser', 'parseIntoContext');\n                        }\n                        this.alreadyParsed = true;\n                        offsetsAndObjectNumbers = this.parseOffsetsAndObjectNumbers();\n                        idx = 0, len = offsetsAndObjectNumbers.length;\n                        _b.label = 1;\n                    case 1:\n                        if (!(idx < len)) return [3 /*break*/, 4];\n                        _a = offsetsAndObjectNumbers[idx], objectNumber = _a.objectNumber, offset = _a.offset;\n                        this.bytes.moveTo(this.firstOffset + offset);\n                        object = this.parseObject();\n                        ref = PDFRef.of(objectNumber, 0);\n                        this.context.assign(ref, object);\n                        if (!this.shouldWaitForTick()) return [3 /*break*/, 3];\n                        return [4 /*yield*/, waitForTick()];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        idx++;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PDFObjectStreamParser.prototype.parseOffsetsAndObjectNumbers = function () {\n        var offsetsAndObjectNumbers = [];\n        for (var idx = 0, len = this.objectCount; idx < len; idx++) {\n            this.skipWhitespaceAndComments();\n            var objectNumber = this.parseRawInt();\n            this.skipWhitespaceAndComments();\n            var offset = this.parseRawInt();\n            offsetsAndObjectNumbers.push({ objectNumber: objectNumber, offset: offset });\n        }\n        return offsetsAndObjectNumbers;\n    };\n    PDFObjectStreamParser.forStream = function (rawStream, shouldWaitForTick) { return new PDFObjectStreamParser(rawStream, shouldWaitForTick); };\n    return PDFObjectStreamParser;\n}(PDFObjectParser));\nexport default PDFObjectStreamParser;\n//# sourceMappingURL=PDFObjectStreamParser.js.map","import { ReparseError } from \"../errors\";\nimport PDFArray from \"../objects/PDFArray\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFNumber from \"../objects/PDFNumber\";\nimport PDFRef from \"../objects/PDFRef\";\nimport ByteStream from \"./ByteStream\";\nvar PDFXRefStreamParser = /** @class */ (function () {\n    function PDFXRefStreamParser(rawStream) {\n        this.alreadyParsed = false;\n        this.dict = rawStream.dict;\n        this.bytes = ByteStream.fromPDFRawStream(rawStream);\n        this.context = this.dict.context;\n        var Size = this.dict.lookup(PDFName.of('Size'), PDFNumber);\n        var Index = this.dict.lookup(PDFName.of('Index'));\n        if (Index instanceof PDFArray) {\n            this.subsections = [];\n            for (var idx = 0, len = Index.size(); idx < len; idx += 2) {\n                var firstObjectNumber = Index.lookup(idx + 0, PDFNumber).asNumber();\n                var length_1 = Index.lookup(idx + 1, PDFNumber).asNumber();\n                this.subsections.push({ firstObjectNumber: firstObjectNumber, length: length_1 });\n            }\n        }\n        else {\n            this.subsections = [{ firstObjectNumber: 0, length: Size.asNumber() }];\n        }\n        var W = this.dict.lookup(PDFName.of('W'), PDFArray);\n        this.byteWidths = [-1, -1, -1];\n        for (var idx = 0, len = W.size(); idx < len; idx++) {\n            this.byteWidths[idx] = W.lookup(idx, PDFNumber).asNumber();\n        }\n    }\n    PDFXRefStreamParser.prototype.parseIntoContext = function () {\n        if (this.alreadyParsed) {\n            throw new ReparseError('PDFXRefStreamParser', 'parseIntoContext');\n        }\n        this.alreadyParsed = true;\n        this.context.trailerInfo = {\n            Root: this.dict.get(PDFName.of('Root')),\n            Encrypt: this.dict.get(PDFName.of('Encrypt')),\n            Info: this.dict.get(PDFName.of('Info')),\n            ID: this.dict.get(PDFName.of('ID')),\n        };\n        var entries = this.parseEntries();\n        // for (let idx = 0, len = entries.length; idx < len; idx++) {\n        // const entry = entries[idx];\n        // if (entry.deleted) this.context.delete(entry.ref);\n        // }\n        return entries;\n    };\n    PDFXRefStreamParser.prototype.parseEntries = function () {\n        var entries = [];\n        var _a = this.byteWidths, typeFieldWidth = _a[0], offsetFieldWidth = _a[1], genFieldWidth = _a[2];\n        for (var subsectionIdx = 0, subsectionLen = this.subsections.length; subsectionIdx < subsectionLen; subsectionIdx++) {\n            var _b = this.subsections[subsectionIdx], firstObjectNumber = _b.firstObjectNumber, length_2 = _b.length;\n            for (var objIdx = 0; objIdx < length_2; objIdx++) {\n                var type = 0;\n                for (var idx = 0, len = typeFieldWidth; idx < len; idx++) {\n                    type = (type << 8) | this.bytes.next();\n                }\n                var offset = 0;\n                for (var idx = 0, len = offsetFieldWidth; idx < len; idx++) {\n                    offset = (offset << 8) | this.bytes.next();\n                }\n                var generationNumber = 0;\n                for (var idx = 0, len = genFieldWidth; idx < len; idx++) {\n                    generationNumber = (generationNumber << 8) | this.bytes.next();\n                }\n                // When the `type` field is absent, it defaults to 1\n                if (typeFieldWidth === 0)\n                    type = 1;\n                var objectNumber = firstObjectNumber + objIdx;\n                var entry = {\n                    ref: PDFRef.of(objectNumber, generationNumber),\n                    offset: offset,\n                    deleted: type === 0,\n                    inObjectStream: type === 2,\n                };\n                entries.push(entry);\n            }\n        }\n        return entries;\n    };\n    PDFXRefStreamParser.forStream = function (rawStream) {\n        return new PDFXRefStreamParser(rawStream);\n    };\n    return PDFXRefStreamParser;\n}());\nexport default PDFXRefStreamParser;\n//# sourceMappingURL=PDFXRefStreamParser.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\nimport PDFCrossRefSection from \"../document/PDFCrossRefSection\";\nimport PDFHeader from \"../document/PDFHeader\";\nimport PDFTrailer from \"../document/PDFTrailer\";\nimport { MissingKeywordError, MissingPDFHeaderError, PDFInvalidObjectParsingError, ReparseError, StalledParserError, } from \"../errors\";\nimport PDFDict from \"../objects/PDFDict\";\nimport PDFInvalidObject from \"../objects/PDFInvalidObject\";\nimport PDFName from \"../objects/PDFName\";\nimport PDFRawStream from \"../objects/PDFRawStream\";\nimport PDFRef from \"../objects/PDFRef\";\nimport ByteStream from \"./ByteStream\";\nimport PDFObjectParser from \"./PDFObjectParser\";\nimport PDFObjectStreamParser from \"./PDFObjectStreamParser\";\nimport PDFXRefStreamParser from \"./PDFXRefStreamParser\";\nimport PDFContext from \"../PDFContext\";\nimport CharCodes from \"../syntax/CharCodes\";\nimport { Keywords } from \"../syntax/Keywords\";\nimport { IsDigit } from \"../syntax/Numeric\";\nimport { waitForTick } from \"../../utils\";\nvar PDFParser = /** @class */ (function (_super) {\n    __extends(PDFParser, _super);\n    function PDFParser(pdfBytes, objectsPerTick, throwOnInvalidObject, capNumbers) {\n        if (objectsPerTick === void 0) { objectsPerTick = Infinity; }\n        if (throwOnInvalidObject === void 0) { throwOnInvalidObject = false; }\n        if (capNumbers === void 0) { capNumbers = false; }\n        var _this = _super.call(this, ByteStream.of(pdfBytes), PDFContext.create(), capNumbers) || this;\n        _this.alreadyParsed = false;\n        _this.parsedObjects = 0;\n        _this.shouldWaitForTick = function () {\n            _this.parsedObjects += 1;\n            return _this.parsedObjects % _this.objectsPerTick === 0;\n        };\n        _this.objectsPerTick = objectsPerTick;\n        _this.throwOnInvalidObject = throwOnInvalidObject;\n        return _this;\n    }\n    PDFParser.prototype.parseDocument = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var prevOffset, offset;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.alreadyParsed) {\n                            throw new ReparseError('PDFParser', 'parseDocument');\n                        }\n                        this.alreadyParsed = true;\n                        this.context.header = this.parseHeader();\n                        _a.label = 1;\n                    case 1:\n                        if (!!this.bytes.done()) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.parseDocumentSection()];\n                    case 2:\n                        _a.sent();\n                        offset = this.bytes.offset();\n                        if (offset === prevOffset) {\n                            throw new StalledParserError(this.bytes.position());\n                        }\n                        prevOffset = offset;\n                        return [3 /*break*/, 1];\n                    case 3:\n                        this.maybeRecoverRoot();\n                        if (this.context.lookup(PDFRef.of(0))) {\n                            console.warn('Removing parsed object: 0 0 R');\n                            this.context.delete(PDFRef.of(0));\n                        }\n                        return [2 /*return*/, this.context];\n                }\n            });\n        });\n    };\n    PDFParser.prototype.maybeRecoverRoot = function () {\n        var isValidCatalog = function (obj) {\n            return obj instanceof PDFDict &&\n                obj.lookup(PDFName.of('Type')) === PDFName.of('Catalog');\n        };\n        var catalog = this.context.lookup(this.context.trailerInfo.Root);\n        if (!isValidCatalog(catalog)) {\n            var indirectObjects = this.context.enumerateIndirectObjects();\n            for (var idx = 0, len = indirectObjects.length; idx < len; idx++) {\n                var _a = indirectObjects[idx], ref = _a[0], object = _a[1];\n                if (isValidCatalog(object)) {\n                    this.context.trailerInfo.Root = ref;\n                }\n            }\n        }\n    };\n    PDFParser.prototype.parseHeader = function () {\n        while (!this.bytes.done()) {\n            if (this.matchKeyword(Keywords.header)) {\n                var major = this.parseRawInt();\n                this.bytes.assertNext(CharCodes.Period);\n                var minor = this.parseRawInt();\n                var header = PDFHeader.forVersion(major, minor);\n                this.skipBinaryHeaderComment();\n                return header;\n            }\n            this.bytes.next();\n        }\n        throw new MissingPDFHeaderError(this.bytes.position());\n    };\n    PDFParser.prototype.parseIndirectObjectHeader = function () {\n        this.skipWhitespaceAndComments();\n        var objectNumber = this.parseRawInt();\n        this.skipWhitespaceAndComments();\n        var generationNumber = this.parseRawInt();\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.obj)) {\n            throw new MissingKeywordError(this.bytes.position(), Keywords.obj);\n        }\n        return PDFRef.of(objectNumber, generationNumber);\n    };\n    PDFParser.prototype.matchIndirectObjectHeader = function () {\n        var initialOffset = this.bytes.offset();\n        try {\n            this.parseIndirectObjectHeader();\n            return true;\n        }\n        catch (e) {\n            this.bytes.moveTo(initialOffset);\n            return false;\n        }\n    };\n    PDFParser.prototype.parseIndirectObject = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var ref, object;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ref = this.parseIndirectObjectHeader();\n                        this.skipWhitespaceAndComments();\n                        object = this.parseObject();\n                        this.skipWhitespaceAndComments();\n                        // if (!this.matchKeyword(Keywords.endobj)) {\n                        // throw new MissingKeywordError(this.bytes.position(), Keywords.endobj);\n                        // }\n                        // TODO: Log a warning if this fails...\n                        this.matchKeyword(Keywords.endobj);\n                        if (!(object instanceof PDFRawStream &&\n                            object.dict.lookup(PDFName.of('Type')) === PDFName.of('ObjStm'))) return [3 /*break*/, 2];\n                        return [4 /*yield*/, PDFObjectStreamParser.forStream(object, this.shouldWaitForTick).parseIntoContext()];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        if (object instanceof PDFRawStream &&\n                            object.dict.lookup(PDFName.of('Type')) === PDFName.of('XRef')) {\n                            PDFXRefStreamParser.forStream(object).parseIntoContext();\n                        }\n                        else {\n                            this.context.assign(ref, object);\n                        }\n                        _a.label = 3;\n                    case 3: return [2 /*return*/, ref];\n                }\n            });\n        });\n    };\n    // TODO: Improve and clean this up\n    PDFParser.prototype.tryToParseInvalidIndirectObject = function () {\n        var startPos = this.bytes.position();\n        var msg = \"Trying to parse invalid object: \" + JSON.stringify(startPos) + \")\";\n        if (this.throwOnInvalidObject)\n            throw new Error(msg);\n        console.warn(msg);\n        var ref = this.parseIndirectObjectHeader();\n        console.warn(\"Invalid object ref: \" + ref);\n        this.skipWhitespaceAndComments();\n        var start = this.bytes.offset();\n        var failed = true;\n        while (!this.bytes.done()) {\n            if (this.matchKeyword(Keywords.endobj)) {\n                failed = false;\n            }\n            if (!failed)\n                break;\n            this.bytes.next();\n        }\n        if (failed)\n            throw new PDFInvalidObjectParsingError(startPos);\n        var end = this.bytes.offset() - Keywords.endobj.length;\n        var object = PDFInvalidObject.of(this.bytes.slice(start, end));\n        this.context.assign(ref, object);\n        return ref;\n    };\n    PDFParser.prototype.parseIndirectObjects = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var initialOffset, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.skipWhitespaceAndComments();\n                        _a.label = 1;\n                    case 1:\n                        if (!(!this.bytes.done() && IsDigit[this.bytes.peek()])) return [3 /*break*/, 8];\n                        initialOffset = this.bytes.offset();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.parseIndirectObject()];\n                    case 3:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        e_1 = _a.sent();\n                        // TODO: Add tracing/logging mechanism to track when this happens!\n                        this.bytes.moveTo(initialOffset);\n                        this.tryToParseInvalidIndirectObject();\n                        return [3 /*break*/, 5];\n                    case 5:\n                        this.skipWhitespaceAndComments();\n                        // TODO: Can this be done only when needed, to avoid harming performance?\n                        this.skipJibberish();\n                        if (!this.shouldWaitForTick()) return [3 /*break*/, 7];\n                        return [4 /*yield*/, waitForTick()];\n                    case 6:\n                        _a.sent();\n                        _a.label = 7;\n                    case 7: return [3 /*break*/, 1];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    PDFParser.prototype.maybeParseCrossRefSection = function () {\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.xref))\n            return;\n        this.skipWhitespaceAndComments();\n        var objectNumber = -1;\n        var xref = PDFCrossRefSection.createEmpty();\n        while (!this.bytes.done() && IsDigit[this.bytes.peek()]) {\n            var firstInt = this.parseRawInt();\n            this.skipWhitespaceAndComments();\n            var secondInt = this.parseRawInt();\n            this.skipWhitespaceAndComments();\n            var byte = this.bytes.peek();\n            if (byte === CharCodes.n || byte === CharCodes.f) {\n                var ref = PDFRef.of(objectNumber, secondInt);\n                if (this.bytes.next() === CharCodes.n) {\n                    xref.addEntry(ref, firstInt);\n                }\n                else {\n                    // this.context.delete(ref);\n                    xref.addDeletedEntry(ref, firstInt);\n                }\n                objectNumber += 1;\n            }\n            else {\n                objectNumber = firstInt;\n            }\n            this.skipWhitespaceAndComments();\n        }\n        return xref;\n    };\n    PDFParser.prototype.maybeParseTrailerDict = function () {\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.trailer))\n            return;\n        this.skipWhitespaceAndComments();\n        var dict = this.parseDict();\n        var context = this.context;\n        context.trailerInfo = {\n            Root: dict.get(PDFName.of('Root')) || context.trailerInfo.Root,\n            Encrypt: dict.get(PDFName.of('Encrypt')) || context.trailerInfo.Encrypt,\n            Info: dict.get(PDFName.of('Info')) || context.trailerInfo.Info,\n            ID: dict.get(PDFName.of('ID')) || context.trailerInfo.ID,\n        };\n    };\n    PDFParser.prototype.maybeParseTrailer = function () {\n        this.skipWhitespaceAndComments();\n        if (!this.matchKeyword(Keywords.startxref))\n            return;\n        this.skipWhitespaceAndComments();\n        var offset = this.parseRawInt();\n        this.skipWhitespace();\n        this.matchKeyword(Keywords.eof);\n        this.skipWhitespaceAndComments();\n        this.matchKeyword(Keywords.eof);\n        this.skipWhitespaceAndComments();\n        return PDFTrailer.forLastCrossRefSectionOffset(offset);\n    };\n    PDFParser.prototype.parseDocumentSection = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.parseIndirectObjects()];\n                    case 1:\n                        _a.sent();\n                        this.maybeParseCrossRefSection();\n                        this.maybeParseTrailerDict();\n                        this.maybeParseTrailer();\n                        // TODO: Can this be done only when needed, to avoid harming performance?\n                        this.skipJibberish();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * This operation is not necessary for valid PDF files. But some invalid PDFs\n     * contain jibberish in between indirect objects. This method is designed to\n     * skip past that jibberish, should it exist, until it reaches the next\n     * indirect object header, an xref table section, or the file trailer.\n     */\n    PDFParser.prototype.skipJibberish = function () {\n        this.skipWhitespaceAndComments();\n        while (!this.bytes.done()) {\n            var initialOffset = this.bytes.offset();\n            var byte = this.bytes.peek();\n            var isAlphaNumeric = byte >= CharCodes.Space && byte <= CharCodes.Tilde;\n            if (isAlphaNumeric) {\n                if (this.matchKeyword(Keywords.xref) ||\n                    this.matchKeyword(Keywords.trailer) ||\n                    this.matchKeyword(Keywords.startxref) ||\n                    this.matchIndirectObjectHeader()) {\n                    this.bytes.moveTo(initialOffset);\n                    break;\n                }\n            }\n            this.bytes.next();\n        }\n    };\n    /**\n     * Skips the binary comment following a PDF header. The specification\n     * defines this binary comment (section 7.5.2 File Header) as a sequence of 4\n     * or more bytes that are 128 or greater, and which are preceded by a \"%\".\n     *\n     * This would imply that to strip out this binary comment, we could check for\n     * a sequence of bytes starting with \"%\", and remove all subsequent bytes that\n     * are 128 or greater. This works for many documents that properly comply with\n     * the spec. But in the wild, there are PDFs that omit the leading \"%\", and\n     * include bytes that are less than 128 (e.g. 0 or 1). So in order to parse\n     * these headers correctly, we just throw out all bytes leading up to the\n     * first indirect object header.\n     */\n    PDFParser.prototype.skipBinaryHeaderComment = function () {\n        this.skipWhitespaceAndComments();\n        try {\n            var initialOffset = this.bytes.offset();\n            this.parseIndirectObjectHeader();\n            this.bytes.moveTo(initialOffset);\n        }\n        catch (e) {\n            this.bytes.next();\n            this.skipWhitespaceAndComments();\n        }\n    };\n    PDFParser.forBytesWithOptions = function (pdfBytes, objectsPerTick, throwOnInvalidObject, capNumbers) {\n        return new PDFParser(pdfBytes, objectsPerTick, throwOnInvalidObject, capNumbers);\n    };\n    return PDFParser;\n}(PDFObjectParser));\nexport default PDFParser;\n//# sourceMappingURL=PDFParser.js.map","var flag = function (bitIndex) { return 1 << bitIndex; };\n/** From PDF spec table 165 */\nexport var AnnotationFlags;\n(function (AnnotationFlags) {\n    /**\n     * If set, do not display the annotation if it does not belong to one of the\n     * standard annotation types and no annotation handler is available. If clear,\n     * display such an unknown annotation using an appearance stream specified by\n     * its appearance dictionary, if any.\n     */\n    AnnotationFlags[AnnotationFlags[\"Invisible\"] = flag(1 - 1)] = \"Invisible\";\n    /**\n     * If set, do not display or print the annotation or allow it to interact with\n     * the user, regardless of its annotation type or whether an annotation\n     * handler is available.\n     *\n     * In cases where screen space is limited, the ability to hide and show\n     * annotations selectively can be used in combination with appearance streams\n     * to display auxiliary pop-up information similar in function to online help\n     * systems.\n     */\n    AnnotationFlags[AnnotationFlags[\"Hidden\"] = flag(2 - 1)] = \"Hidden\";\n    /**\n     * If set, print the annotation when the page is printed. If clear, never\n     * print the annotation, regardless of whether it is displayed on the screen.\n     *\n     * This can be useful for annotations representing interactive pushbuttons,\n     * which would serve no meaningful purpose on the printed page.\n     */\n    AnnotationFlags[AnnotationFlags[\"Print\"] = flag(3 - 1)] = \"Print\";\n    /**\n     * If set, do not scale the annotation’s appearance to match the magnification\n     * of the page. The location of the annotation on the page (defined by the\n     * upper-left corner of its annotation rectangle) shall remain fixed,\n     * regardless of the page magnification.\n     */\n    AnnotationFlags[AnnotationFlags[\"NoZoom\"] = flag(4 - 1)] = \"NoZoom\";\n    /**\n     * If set, do not rotate the annotation’s appearance to match the rotation of\n     * the page. The upper-left corner of the annotation rectangle shall remain in\n     * a fixed location on the page, regardless of the page rotation.\n     */\n    AnnotationFlags[AnnotationFlags[\"NoRotate\"] = flag(5 - 1)] = \"NoRotate\";\n    /**\n     * If set, do not display the annotation on the screen or allow it to interact\n     * with the user. The annotation may be printed (depending on the setting of\n     * the Print flag) but should be considered hidden for purposes of on-screen\n     * display and user interaction.\n     */\n    AnnotationFlags[AnnotationFlags[\"NoView\"] = flag(6 - 1)] = \"NoView\";\n    /**\n     * If set, do not allow the annotation to interact with the user. The\n     * annotation may be displayed or printed (depending on the settings of the\n     * NoView and Print flags) but should not respond to mouse clicks or change\n     * its appearance in response to mouse motions.\n     *\n     * This flag shall be ignored for widget annotations; its function is\n     * subsumed by the ReadOnly flag of the associated form field.\n     */\n    AnnotationFlags[AnnotationFlags[\"ReadOnly\"] = flag(7 - 1)] = \"ReadOnly\";\n    /**\n     * If set, do not allow the annotation to be deleted or its properties\n     * (including position and size) to be modified by the user. However, this\n     * flag does not restrict changes to the annotation’s contents, such as the\n     * value of a form field.\n     */\n    AnnotationFlags[AnnotationFlags[\"Locked\"] = flag(8 - 1)] = \"Locked\";\n    /**\n     * If set, invert the interpretation of the NoView flag for certain events.\n     *\n     * A typical use is to have an annotation that appears only when a mouse\n     * cursor is held over it.\n     */\n    AnnotationFlags[AnnotationFlags[\"ToggleNoView\"] = flag(9 - 1)] = \"ToggleNoView\";\n    /**\n     * If set, do not allow the contents of the annotation to be modified by the\n     * user. This flag does not restrict deletion of the annotation or changes to\n     * other annotation properties, such as position and size.\n     */\n    AnnotationFlags[AnnotationFlags[\"LockedContents\"] = flag(10 - 1)] = \"LockedContents\";\n})(AnnotationFlags || (AnnotationFlags = {}));\n//# sourceMappingURL=flags.js.map","import { __awaiter, __generator } from \"tslib\";\nimport PDFHexString from \"../objects/PDFHexString\";\nvar JavaScriptEmbedder = /** @class */ (function () {\n    function JavaScriptEmbedder(script, scriptName) {\n        this.script = script;\n        this.scriptName = scriptName;\n    }\n    JavaScriptEmbedder.for = function (script, scriptName) {\n        return new JavaScriptEmbedder(script, scriptName);\n    };\n    JavaScriptEmbedder.prototype.embedIntoContext = function (context, ref) {\n        return __awaiter(this, void 0, void 0, function () {\n            var jsActionDict;\n            return __generator(this, function (_a) {\n                jsActionDict = context.obj({\n                    Type: 'Action',\n                    S: 'JavaScript',\n                    JS: PDFHexString.fromText(this.script),\n                });\n                if (ref) {\n                    context.assign(ref, jsActionDict);\n                    return [2 /*return*/, ref];\n                }\n                else {\n                    return [2 /*return*/, context.register(jsActionDict)];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    return JavaScriptEmbedder;\n}());\nexport default JavaScriptEmbedder;\n//# sourceMappingURL=JavaScriptEmbedder.js.map"],"names":["MethodNotImplementedError","_super","__extends","className","methodName","_this","msg","PrivateConstructorError","UnexpectedObjectTypeError","expected","actual","name","t","_a","_b","expectedTypes","UnsupportedEncodingError","encoding","ReparseError","MissingCatalogError","ref","MissingPageContentsEmbeddingError","UnrecognizedStreamTypeError","stream","_c","streamType","PageEmbeddingMismatchedContextError","PDFArrayIsNotRectangleError","size","InvalidPDFDateStringError","value","InvalidTargetIndexError","targetIndex","Count","CorruptPageTreeError","operation","IndexOutOfBoundsError","index","min","max","InvalidAcroFieldValueError","MultiSelectValueError","MissingDAEntryError","fieldName","MissingTfOperatorError","NumberParsingError","pos","PDFParsingError","details","NextByteAssertionError","expectedByte","actualByte","PDFObjectParsingError","byte","PDFInvalidObjectParsingError","PDFStreamParsingError","UnbalancedParenthesisError","StalledParserError","MissingPDFHeaderError","MissingKeywordError","keyword","arrayAsString","CharCodes","PDFHeader","major","minor","bc","charFromCode","buffer","offset","initialOffset","copyStringIntoBuffer","PDFObject","_context","_buffer","_offset","PDFNumber","numberToString","PDFArray","context","object","idx","types","_i","__spreadArrays","lowerLeftX","lowerLeftY","upperRightX","upperRightY","x","y","width","height","clone","len","arrayString","el","factor","ENFORCER","PDFBool","enforcer","IsDelimiter","IsWhitespace","IsIrregular","decodeName","_","hex","charFromHexCode","isRegularChar","charCode","pool","PDFName","encodedName","character","code","toCharCode","toHexString","bytes","escaped","pushByte","char","nextChar","decodedValue","instance","PDFNull","PDFNull$1","PDFDict","map","key","preservePDFNull","tag","existingKeys","entries","dictString","PDFStream","dict","contentsSize","streamString","contents","PDFRawStream","PDFRef","objectNumber","generationNumber","PDFOperator","args","arg","PDFOperatorNames","PDFFlateStream","encode","unencodedContents","pako","Cache","PDFContentStream","operators","byAscendingObjectNumber","a","b","PDFContext","SimpleRNG","result","type","pdfObject","literal","array","keys","typedArrayFor","__assign","op","Ops","prefix","suffixLength","PDFPageLeaf","autoNormalizeCTM","dictOrRef","arrayOrRef","numberOrRef","attribute","node","parentRef","contentStreamRef","Contents","startStream","endStream","annotRef","Annots","fontDictRef","Font","xObjectRef","XObject","extGStateRef","ExtGState","visitor","Parent","contentsRef","Resources","parent","PDFObjectCopier","src","dest","originalPage","clonedPage","InheritableEntries","originalDict","clonedDict","originalArray","clonedArray","originalStream","clonedStream","alreadyMapped","newRef","dereferencedValue","cloned","PDFCrossRefSection","firstEntry","nextFreeObjectNumber","section","rangeIdx","rangeLen","range","entryIdx","entryLen","entry","padStart","subsection","subsectionLength","subsections","length","firstObjectNumber","rangeLength","entryOffset","entryGen","currEntry","chunk","prevEntry","PDFTrailer","lastXRefOffset","PDFTrailerDict","PDFObjectStream","objects","last","offsetsString","offsets","PDFWriter","objectsPerTick","n","__awaiter","header","indirectObjects","xref","trailerDict","trailer","__generator","waitForTick","refSize","objectSize","indirectObject","xrefOffset","PDFInvalidObject","data","EntryType","PDFCrossRefStream","entryTuples","objectStreamRef","widths","first","second","third","firstSize","sizeInBytes","secondSize","thirdSize","byteWidths","entriesLen","firstBytes","reverseArray","bytesFor","secondBytes","thirdBytes","entryWidth","sum","PDFStreamWriter","encodeStreams","objectsPerStream","xrefStream","uncompressedObjects","compressedObjects","objectStreamRefs","shouldNotCompress","objectStream","xrefStreamRef","PDFHexString","hexLength","hexOffset","bytesOffset","hasUtf16BOM","utf16Decode","pdfDocEncodingDecode","text","date","parseDate","encoded","utf16Encode","toHexStringOfMinLength","StandardFontEmbedder","fontName","customName","FontNames","Encodings","glyphs","hexCodes","totalWidth","left","right","kernAmount","scale","options","descender","Ascender","Descender","FontBBox","yTop","yBottom","fontDict","glyphName","codePoints","codePoint","toCodePoint","createCmap","glyphId","bfChars","glyph","id","cmapHexFormat","cmapHexString","unicode","cmapCodePointFormat","fillCmapTemplate","values","isWithinBMP","hasSurrogates","hs","highSurrogate","ls","lowSurrogate","makeFontFlags","flags","flipBit","bit","deriveFontFlags","font","familyClass","PDFString","octal","year","month","day","hours","mins","secs","CustomFontEmbedder","fontData","fontFeatures","sortedUniq","byAscendingId","g","fontkit","ascent","descent","bbox","cidFontDictRef","unicodeCMapRef","fontDescriptorRef","cidFontDict","fontStreamRef","italicAngle","capHeight","xHeight","minX","minY","maxX","maxY","fontDescriptor","_d","fontStream","cmap","cmapStream","currSection","currGlyph","prevGlyph","currGlyphId","prevGlyphId","CustomFontSubsetEmbedder","customFontName","subsetGlyphId","resolve","reject","parts","mergeUint8Arrays","err","AFRelationship","FileEmbedder","fileData","fileName","mimeType","description","creationDate","modificationDate","afRelationship","embeddedFileStream","embeddedFileStreamRef","fileSpecDict","MARKERS","ColorSpace","ChannelToColorSpace","JpegEmbedder","imageData","bitsPerComponent","colorSpace","dataView","soi","marker","channelByte","channelName","xObject","PngEmbedder","png","PNG","SMask","Stream","start","b0","b1","b2","b3","forceClamped","strEnd","end","subarray","peekedByte","emptyBuffer","DecodeStream","maybeMinBufferLength","bufEnd","requested","buffer2","isSpace","ch","Ascii85Stream","maybeLength","TILDA_CHAR","Z_LOWER_CHAR","EOF","c","bufferLength","i","input","AsciiHexStream","UPSTREAM_BLOCK_SIZE","maxDecodeLength","firstDigit","ii","digit","codeLenCodeMap","lengthDecode","distDecode","fixedLitCodeTab","fixedDistCodeTab","FlateStream","cmf","flg","str","hdr","blockLen","check","litCodeTable","distCodeTable","numLitCodes","numDistCodes","numCodeLenCodes","codeLenCodeLengths","codeLenCodeTab","codes","codeLengths","bitsLength","bitsOffset","what","repeatLength","limit","code1","code2","dist","k","bits","codeSize","codeBuf","table","maxLen","codeLen","codeVal","lengths","skip","val","LZWStream","earlyChange","maxLzwDictionarySize","lzwState","blockSize","estimatedDecodedSize","decodedSizeDelta","j","q","nextCode","dictionaryValues","dictionaryLengths","dictionaryPrevCodes","codeLength","prevCode","currentSequence","currentSequenceLength","decodedLength","currentBufferLength","hasPrev","bitsCached","cachedData","RunLengthStream","repeatHeader","source","decodeStream","params","EarlyChange","decodePDFRawStream","Filter","DecodeParms","fullPageBoundingBox","page","mediaBox","boundingBoxAdjustedMatrix","bb","PDFPageEmbedder","boundingBox","transformationMatrix","decodedContents","bottom","top","newline","content","mergeIntoTypedArray","asEnum","rawValue","enumType","NonFullScreenPageMode","ReadingDirection","PrintScaling","Duplex","ViewerPreferences","returnObj","PrintPageRange","NumCopies","mode","direction","scaling","duplex","rng","pageRanges","hideToolbar","HideToolbar","hideMenubar","HideMenubar","hideWindowUI","HideWindowUI","fitWindow","FitWindow","centerWindow","CenterWindow","displayTitle","DisplayDocTitle","nonFullScreenPageMode","assertIsOneOf","readingDirection","printScaling","dup","pickTrayByPDFSize","PickTrayByPDFSize","printPageRange","flatRange","assertEachIs","numCopies","assertRange","assertInteger","tfRegex","PDFAcroField","valueOrRef","da","kids","parent_1","partialName","appearance","DA","fontSize","daMatch","findLastMatch","daStart","daEnd","modifiedDa","flag","enable","BorderStyle","W","PDFAnnotation","Rect","rect","AS","state","appearances","AP","N","R","D","AppearanceCharacteristics","BC","BG","CA","RC","AC","components","component","rotation","color","captions","PDFWidgetAnnotation","MK","BS","P","ac","bs","normal","PDFAcroTerminal","nameOrRef","kidDicts","widgets","Kids","PDFAcroButton","opt","exportValues","Opt","widget","exportVal","useExistingOptIdx","optText","existingIdx","optIdx","apStateValue","PDFAcroCheckBox","onValue","v","bitIndex","AcroFieldFlags","AcroButtonFlags","AcroTextFlags","AcroChoiceFlags","PDFAcroChoice","_loop_1","o","state_1","indices","_loop_2","newOpt","display","res","item","PDFAcroComboBox","PDFAcroNonTerminal","field","PDFAcroSignature","PDFAcroText","maxLength","quadding","PDFAcroPushButton","PDFAcroRadioButton","onValues","PDFAcroListBox","createPDFAcroFields","createPDFAcroField","isNonTerminal","isNonTerminalAcroField","createPDFAcroTerminal","kid","kidIsField","ftNameOrRef","getInheritableAttribute","createPDFAcroButton","createPDFAcroChoice","ffNumberOrRef","ffNumber","flagIsSet","startNode","ascend","PDFAcroForm","fields","Fields","allFields","pushFields","fieldModel","PDFCatalog","acroForm","acroFormRef","viewerPrefs","viewerPrefsRef","leafRef","pagesRef","maybeParentRef","pages","PDFPageTree","treeRef","leafsRemainingUntilTarget","kidRef","prune","kidIdx","newCount","IsDigit","IsNumericPrefix","IsNumeric","Newline","CarriageReturn","BaseParser","capNumbers","numberValue","ByteStream","steps","rawStream","Space","endstream","Keywords","PDFObjectParser","byteStream","firstNum","lookaheadStart","secondNum","nestingLvl","isEscaped","pdfArray","element","Type","startPos","Length","PDFObjectStreamParser","shouldWaitForTick","offsetsAndObjectNumbers","PDFXRefStreamParser","Size","Index","length_1","typeFieldWidth","offsetFieldWidth","genFieldWidth","subsectionIdx","subsectionLen","length_2","objIdx","PDFParser","pdfBytes","throwOnInvalidObject","prevOffset","isValidCatalog","obj","catalog","failed","firstInt","secondInt","isAlphaNumeric","AnnotationFlags","JavaScriptEmbedder","script","scriptName","jsActionDict"],"mappings":"qcAEG,IAACA,GAA2C,SAAUC,EAAQ,CAC7DC,EAAUF,EAA2BC,CAAM,EAC3C,SAASD,EAA0BG,EAAWC,EAAY,CACtD,IAAIC,EAAQ,KACRC,EAAM,UAAYH,EAAY,IAAMC,EAAa,qBACrD,OAAAC,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOL,CACX,GAAE,KAAK,EAEHO,IAAyC,SAAUN,EAAQ,CAC3DC,EAAUK,EAAyBN,CAAM,EACzC,SAASM,EAAwBJ,EAAW,CACxC,IAAIE,EAAQ,KACRC,EAAM,oBAAsBH,EAAY,kCAC5C,OAAAE,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOE,CACX,GAAE,KAAK,EAEHC,IAA2C,SAAUP,EAAQ,CAC7DC,EAAUM,EAA2BP,CAAM,EAC3C,SAASO,EAA0BC,EAAUC,EAAQ,CACjD,IAAIL,EAAQ,KACRM,EAAO,SAAUC,EAAG,CAAE,IAAIC,EAAIC,EAAI,OAAQD,EAAKD,GAAM,KAAuB,OAASA,EAAE,QAAU,MAAQC,IAAO,OAASA,GAAMC,EAAKF,GAAM,KAAuB,OAASA,EAAE,eAAiB,MAAQE,IAAO,OAAS,OAASA,EAAG,IAAM,EACvOC,EAAgB,MAAM,QAAQN,CAAQ,EACpCA,EAAS,IAAIE,CAAI,EACjB,CAACA,EAAKF,CAAQ,CAAC,EACjBH,EAAM,wBAA0BS,EAAc,KAAK,MAAM,EAAI,MAC5D,wBAA0BL,GAASC,EAAKD,CAAM,IACnD,OAAAL,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOG,CACX,GAAE,KAAK,EAEHQ,IAA0C,SAAUf,EAAQ,CAC5DC,EAAUc,EAA0Bf,CAAM,EAC1C,SAASe,EAAyBC,EAAU,CACxC,IAAIZ,EAAQ,KACRC,EAAMW,EAAW,iCACrB,OAAAZ,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOW,CACX,GAAE,KAAK,EAEHE,IAA8B,SAAUjB,EAAQ,CAChDC,EAAUgB,EAAcjB,CAAM,EAC9B,SAASiB,EAAaf,EAAWC,EAAY,CACzC,IAAIC,EAAQ,KACRC,EAAM,eAAiBH,EAAY,IAAMC,EAAa,oBAC1D,OAAAC,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOa,CACX,GAAE,KAAK,EAEHC,IAAqC,SAAUlB,EAAQ,CACvDC,EAAUiB,EAAqBlB,CAAM,EACrC,SAASkB,EAAoBC,EAAK,CAC9B,IAAIf,EAAQ,KACRC,EAAM,wBAA0Bc,EAAM,IAC1C,OAAAf,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOc,CACX,GAAE,KAAK,EAEHE,IAAmD,SAAUpB,EAAQ,CACrEC,EAAUmB,EAAmCpB,CAAM,EACnD,SAASoB,GAAoC,CACzC,IAAIhB,EAAQ,KACRC,EAAM,yCACV,OAAAD,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOgB,CACX,GAAE,KAAK,EAEHC,IAA6C,SAAUrB,EAAQ,CAC/DC,EAAUoB,EAA6BrB,CAAM,EAC7C,SAASqB,EAA4BC,EAAQ,CACzC,IAAIV,EAAIC,EAAIU,EACRnB,EAAQ,KACRoB,GAAcD,GAAMV,GAAMD,EAAKU,GAAW,KAA4B,OAASA,EAAO,cAAgB,MAAQV,IAAO,OAAS,OAASA,EAAG,QAAU,MAAQC,IAAO,OAASA,EAAKS,GAAW,KAA4B,OAASA,EAAO,QAAU,MAAQC,IAAO,OAASA,EAAKD,EAC/QjB,EAAM,6BAA+BmB,EACzC,OAAApB,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOiB,CACX,GAAE,KAAK,EAEHI,IAAqD,SAAUzB,EAAQ,CACvEC,EAAUwB,EAAqCzB,CAAM,EACrD,SAASyB,GAAsC,CAC3C,IAAIrB,EAAQ,KACRC,EAAM,+IACV,OAAAD,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOqB,CACX,GAAE,KAAK,EAEHC,IAA6C,SAAU1B,EAAQ,CAC/DC,EAAUyB,EAA6B1B,CAAM,EAC7C,SAAS0B,EAA4BC,EAAM,CACvC,IAAIvB,EAAQ,KACRC,EAAM,sCAAwCsB,EAAO,4DACzD,OAAAvB,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOsB,CACX,GAAE,KAAK,EAEHE,IAA2C,SAAU5B,EAAQ,CAC7DC,EAAU2B,EAA2B5B,CAAM,EAC3C,SAAS4B,EAA0BC,EAAO,CACtC,IAAIzB,EAAQ,KACRC,EAAM,yBAA4BwB,EAAQ,iEAC9C,OAAAzB,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOwB,CACX,GAAE,KAAK,EAEHE,IAAyC,SAAU9B,EAAQ,CAC3DC,EAAU6B,EAAyB9B,CAAM,EACzC,SAAS8B,EAAwBC,EAAaC,EAAO,CACjD,IAAI5B,EAAQ,KACRC,EAAM,8CAAgD0B,EAAc,4BAA8BC,EACtG,OAAA5B,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAO0B,CACX,GAAE,KAAK,EAEHG,IAAsC,SAAUjC,EAAQ,CACxDC,EAAUgC,EAAsBjC,CAAM,EACtC,SAASiC,EAAqBF,EAAaG,EAAW,CAClD,IAAI9B,EAAQ,KACRC,EAAM,aAAe6B,EAAY,mBAAqBH,EAAc,uFACxE,OAAA3B,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAO6B,CACX,GAAE,KAAK,EAEHE,IAAuC,SAAUnC,EAAQ,CACzDC,EAAUkC,EAAuBnC,CAAM,EACvC,SAASmC,EAAsBC,EAAOC,EAAKC,EAAK,CAC5C,IAAIlC,EAAQ,KACRC,EAAM,4BAA8BgC,EAAM,gBAAkBC,EAAM,sBAAwBF,EAC9F,OAAAhC,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAO+B,CACX,GAAE,KAAK,EAEHI,IAA4C,SAAUvC,EAAQ,CAC9DC,EAAUsC,EAA4BvC,CAAM,EAC5C,SAASuC,GAA6B,CAClC,IAAInC,EAAQ,KACRC,EAAM,uCACV,OAAAD,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOmC,CACX,GAAE,KAAK,EAEHC,IAAuC,SAAUxC,EAAQ,CACzDC,EAAUuC,EAAuBxC,CAAM,EACvC,SAASwC,GAAwB,CAC7B,IAAIpC,EAAQ,KACRC,EAAM,8DACV,OAAAD,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOoC,CACX,GAAE,KAAK,EAEHC,IAAqC,SAAUzC,EAAQ,CACvDC,EAAUwC,EAAqBzC,CAAM,EACrC,SAASyC,EAAoBC,EAAW,CACpC,IAAItC,EAAQ,KACRC,EAAM,sDAAwDqC,EAClE,OAAAtC,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOqC,CACX,GAAE,KAAK,EAEHE,IAAwC,SAAU3C,EAAQ,CAC1DC,EAAU0C,EAAwB3C,CAAM,EACxC,SAAS2C,EAAuBD,EAAW,CACvC,IAAItC,EAAQ,KACRC,EAAM,yCAA2CqC,EACrD,OAAAtC,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOuC,CACX,GAAE,KAAK,EAEHC,IAAoC,SAAU5C,EAAQ,CACtDC,EAAU2C,EAAoB5C,CAAM,EACpC,SAAS4C,EAAmBC,EAAKhB,EAAO,CACpC,IAAIzB,EAAQ,KACRC,EAAM,2BACL,SAAWwC,EAAI,KAAO,QAAUA,EAAI,OAAS,WAAaA,EAAI,OAAS,OAAUhB,EAAQ,KAC9F,OAAAzB,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAOwC,CACX,GAAE,KAAK,EAEHE,GAAiC,SAAU9C,EAAQ,CACnDC,EAAU6C,EAAiB9C,CAAM,EACjC,SAAS8C,EAAgBD,EAAKE,EAAS,CACnC,IAAI3C,EAAQ,KACRC,EAAM,iCACL,SAAWwC,EAAI,KAAO,QAAUA,EAAI,OAAS,WAAaA,EAAI,OAAS,MAAQE,GACpF,OAAA3C,EAAQJ,EAAO,KAAK,KAAMK,CAAG,GAAK,KAC3BD,CACX,CACA,OAAO0C,CACX,GAAE,KAAK,EAEHE,IAAwC,SAAUhD,EAAQ,CAC1DC,EAAU+C,EAAwBhD,CAAM,EACxC,SAASgD,EAAuBH,EAAKI,EAAcC,EAAY,CAC3D,IAAI9C,EAAQ,KACRC,EAAM,4BAA8B4C,EAAe,wBAA0BC,EACjF,OAAA9C,EAAQJ,EAAO,KAAK,KAAM6C,EAAKxC,CAAG,GAAK,KAChCD,CACX,CACA,OAAO4C,CACX,GAAEF,CAAe,EAEbK,IAAuC,SAAUnD,EAAQ,CACzDC,EAAUkD,EAAuBnD,CAAM,EACvC,SAASmD,EAAsBN,EAAKO,EAAM,CACtC,IAAIhD,EAAQ,KACRC,EAAM,gEAAkE+C,EAC5E,OAAAhD,EAAQJ,EAAO,KAAK,KAAM6C,EAAKxC,CAAG,GAAK,KAChCD,CACX,CACA,OAAO+C,CACX,GAAEL,CAAe,EAEbO,IAA8C,SAAUrD,EAAQ,CAChEC,EAAUoD,EAA8BrD,CAAM,EAC9C,SAASqD,EAA6BR,EAAK,CACvC,IAAIzC,EAAQ,KACRC,EAAM,qCACV,OAAAD,EAAQJ,EAAO,KAAK,KAAM6C,EAAKxC,CAAG,GAAK,KAChCD,CACX,CACA,OAAOiD,CACX,GAAEP,CAAe,EAEbQ,IAAuC,SAAUtD,EAAQ,CACzDC,EAAUqD,EAAuBtD,CAAM,EACvC,SAASsD,EAAsBT,EAAK,CAChC,IAAIzC,EAAQ,KACRC,EAAM,6BACV,OAAAD,EAAQJ,EAAO,KAAK,KAAM6C,EAAKxC,CAAG,GAAK,KAChCD,CACX,CACA,OAAOkD,CACX,GAAER,CAAe,EAEbS,IAA4C,SAAUvD,EAAQ,CAC9DC,EAAUsD,EAA4BvD,CAAM,EAC5C,SAASuD,EAA2BV,EAAK,CACrC,IAAIzC,EAAQ,KACRC,EAAM,mEACV,OAAAD,EAAQJ,EAAO,KAAK,KAAM6C,EAAKxC,CAAG,GAAK,KAChCD,CACX,CACA,OAAOmD,CACX,GAAET,CAAe,EAEbU,IAAoC,SAAUxD,EAAQ,CACtDC,EAAUuD,EAAoBxD,CAAM,EACpC,SAASwD,EAAmBX,EAAK,CAC7B,IAAIzC,EAAQ,KACRC,EAAM,iBACV,OAAAD,EAAQJ,EAAO,KAAK,KAAM6C,EAAKxC,CAAG,GAAK,KAChCD,CACX,CACA,OAAOoD,CACX,GAAEV,CAAe,EAEbW,IAAuC,SAAUzD,EAAQ,CACzDC,EAAUwD,EAAuBzD,CAAM,EACvC,SAASyD,EAAsBZ,EAAK,CAChC,IAAIzC,EAAQ,KACRC,EAAM,sBACV,OAAAD,EAAQJ,EAAO,KAAK,KAAM6C,EAAKxC,CAAG,GAAK,KAChCD,CACX,CACA,OAAOqD,CACX,GAAEX,CAAe,EAEbY,IAAqC,SAAU1D,EAAQ,CACvDC,EAAUyD,EAAqB1D,CAAM,EACrC,SAAS0D,EAAoBb,EAAKc,EAAS,CACvC,IAAIvD,EAAQ,KACRC,EAAM,kCAAoCuD,GAAcD,CAAO,EAAI,IACvE,OAAAvD,EAAQJ,EAAO,KAAK,KAAM6C,EAAKxC,CAAG,GAAK,KAChCD,CACX,CACA,OAAOsD,CACX,GAAEZ,CAAe,EC7Tbe,GACH,SAAUA,EAAW,CAClBA,EAAUA,EAAU,KAAU,CAAC,EAAI,OACnCA,EAAUA,EAAU,UAAe,CAAC,EAAI,YACxCA,EAAUA,EAAU,IAAS,CAAC,EAAI,MAClCA,EAAUA,EAAU,QAAa,EAAE,EAAI,UACvCA,EAAUA,EAAU,SAAc,EAAE,EAAI,WACxCA,EAAUA,EAAU,eAAoB,EAAE,EAAI,iBAC9CA,EAAUA,EAAU,MAAW,EAAE,EAAI,QACrCA,EAAUA,EAAU,iBAAsB,EAAE,EAAI,mBAChDA,EAAUA,EAAU,KAAU,EAAE,EAAI,OACpCA,EAAUA,EAAU,QAAa,EAAE,EAAI,UACvCA,EAAUA,EAAU,UAAe,EAAE,EAAI,YACzCA,EAAUA,EAAU,WAAgB,EAAE,EAAI,aAC1CA,EAAUA,EAAU,KAAU,EAAE,EAAI,OACpCA,EAAUA,EAAU,MAAW,EAAE,EAAI,QACrCA,EAAUA,EAAU,KAAU,EAAE,EAAI,OACpCA,EAAUA,EAAU,OAAY,EAAE,EAAI,SACtCA,EAAUA,EAAU,aAAkB,EAAE,EAAI,eAC5CA,EAAUA,EAAU,KAAU,EAAE,EAAI,OACpCA,EAAUA,EAAU,IAAS,EAAE,EAAI,MACnCA,EAAUA,EAAU,IAAS,EAAE,EAAI,MACnCA,EAAUA,EAAU,MAAW,EAAE,EAAI,QACrCA,EAAUA,EAAU,KAAU,EAAE,EAAI,OACpCA,EAAUA,EAAU,KAAU,EAAE,EAAI,OACpCA,EAAUA,EAAU,IAAS,EAAE,EAAI,MACnCA,EAAUA,EAAU,MAAW,EAAE,EAAI,QACrCA,EAAUA,EAAU,MAAW,EAAE,EAAI,QACrCA,EAAUA,EAAU,KAAU,EAAE,EAAI,OACpCA,EAAUA,EAAU,SAAc,EAAE,EAAI,WACxCA,EAAUA,EAAU,YAAiB,EAAE,EAAI,cAC3CA,EAAUA,EAAU,EAAO,EAAE,EAAI,IACjCA,EAAUA,EAAU,EAAO,EAAE,EAAI,IACjCA,EAAUA,EAAU,EAAO,EAAE,EAAI,IACjCA,EAAUA,EAAU,EAAO,EAAE,EAAI,IACjCA,EAAUA,EAAU,EAAO,EAAE,EAAI,IACjCA,EAAUA,EAAU,EAAO,EAAE,EAAI,IACjCA,EAAUA,EAAU,EAAO,EAAE,EAAI,IACjCA,EAAUA,EAAU,kBAAuB,EAAE,EAAI,oBACjDA,EAAUA,EAAU,UAAe,EAAE,EAAI,YACzCA,EAAUA,EAAU,mBAAwB,EAAE,EAAI,qBAClDA,EAAUA,EAAU,EAAO,EAAE,EAAI,IACjCA,EAAUA,EAAU,EAAO,EAAE,EAAI,IACjCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,EAAO,GAAG,EAAI,IAClCA,EAAUA,EAAU,UAAe,GAAG,EAAI,YAC1CA,EAAUA,EAAU,WAAgB,GAAG,EAAI,aAC3CA,EAAUA,EAAU,MAAW,GAAG,EAAI,OAC1C,GAAGA,IAAcA,EAAY,CAAA,EAAG,EC1D7B,IAACC,IAA2B,UAAY,CACvC,SAASA,EAAUC,EAAOC,EAAO,CAC7B,KAAK,MAAQ,OAAOD,CAAK,EACzB,KAAK,MAAQ,OAAOC,CAAK,CAC7B,CACA,OAAAF,EAAU,UAAU,SAAW,UAAY,CACvC,IAAIG,EAAKC,EAAa,GAAG,EACzB,MAAO,QAAU,KAAK,MAAQ,IAAM,KAAK,MAAQ;AAAA,GAAQD,EAAKA,EAAKA,EAAKA,CAC5E,EACAH,EAAU,UAAU,YAAc,UAAY,CAC1C,MAAO,IAAK,KAAK,MAAM,OAAS,KAAK,MAAM,MAC/C,EACAA,EAAU,UAAU,cAAgB,SAAUK,EAAQC,EAAQ,CAC1D,IAAIC,EAAgBD,EACpB,OAAAD,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,KAC7BO,GAAUE,EAAqB,KAAK,MAAOH,EAAQC,CAAM,EACzDD,EAAOC,GAAQ,EAAIP,EAAU,OAC7BO,GAAUE,EAAqB,KAAK,MAAOH,EAAQC,CAAM,EACzDD,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAI,IACnBD,EAAOC,GAAQ,EAAI,IACnBD,EAAOC,GAAQ,EAAI,IACnBD,EAAOC,GAAQ,EAAI,IACZA,EAASC,CACpB,EACAP,EAAU,WAAa,SAAUC,EAAOC,EAAO,CAC3C,OAAO,IAAIF,EAAUC,EAAOC,CAAK,CACrC,EACOF,CACX,GAAC,ECnCGS,GAA2B,UAAY,CACvC,SAASA,GAAY,CACrB,CACA,OAAAA,EAAU,UAAU,MAAQ,SAAUC,EAAU,CAC5C,MAAM,IAAIzE,EAA0B,KAAK,YAAY,KAAM,OAAO,CACtE,EACAwE,EAAU,UAAU,SAAW,UAAY,CACvC,MAAM,IAAIxE,EAA0B,KAAK,YAAY,KAAM,UAAU,CACzE,EACAwE,EAAU,UAAU,YAAc,UAAY,CAC1C,MAAM,IAAIxE,EAA0B,KAAK,YAAY,KAAM,aAAa,CAC5E,EACAwE,EAAU,UAAU,cAAgB,SAAUE,EAASC,EAAS,CAC5D,MAAM,IAAI3E,EAA0B,KAAK,YAAY,KAAM,eAAe,CAC9E,EACOwE,CACX,GAAC,ECdGI,GAA2B,SAAU3E,EAAQ,CAC7CC,EAAU0E,EAAW3E,CAAM,EAC3B,SAAS2E,EAAU9C,EAAO,CACtB,IAAIzB,EAAQJ,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAI,EAAM,YAAcyB,EACpBzB,EAAM,YAAcwE,GAAe/C,CAAK,EACjCzB,CACX,CACA,OAAAuE,EAAU,UAAU,SAAW,UAAY,CACvC,OAAO,KAAK,WAChB,EAEAA,EAAU,UAAU,MAAQ,UAAY,CACpC,OAAO,KAAK,WAChB,EACAA,EAAU,UAAU,MAAQ,UAAY,CACpC,OAAOA,EAAU,GAAG,KAAK,WAAW,CACxC,EACAA,EAAU,UAAU,SAAW,UAAY,CACvC,OAAO,KAAK,WAChB,EACAA,EAAU,UAAU,YAAc,UAAY,CAC1C,OAAO,KAAK,YAAY,MAC5B,EACAA,EAAU,UAAU,cAAgB,SAAUR,EAAQC,EAAQ,CAC1D,OAAAA,GAAUE,EAAqB,KAAK,YAAaH,EAAQC,CAAM,EACxD,KAAK,YAAY,MAC5B,EACAO,EAAU,GAAK,SAAU9C,EAAO,CAAE,OAAO,IAAI8C,EAAU9C,CAAK,CAAG,EACxD8C,CACX,GAAEJ,CAAS,EC5BPM,GAA0B,SAAU7E,EAAQ,CAC5CC,EAAU4E,EAAU7E,CAAM,EAC1B,SAAS6E,EAASC,EAAS,CACvB,IAAI1E,EAAQJ,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAI,EAAM,MAAQ,CAAA,EACdA,EAAM,QAAU0E,EACT1E,CACX,CACA,OAAAyE,EAAS,UAAU,KAAO,UAAY,CAClC,OAAO,KAAK,MAAM,MACtB,EACAA,EAAS,UAAU,KAAO,SAAUE,EAAQ,CACxC,KAAK,MAAM,KAAKA,CAAM,CAC1B,EACAF,EAAS,UAAU,OAAS,SAAUzC,EAAO2C,EAAQ,CACjD,KAAK,MAAM,OAAO3C,EAAO,EAAG2C,CAAM,CACtC,EACAF,EAAS,UAAU,QAAU,SAAUE,EAAQ,CAC3C,IAAI3C,EAAQ,KAAK,MAAM,QAAQ2C,CAAM,EACrC,OAAO3C,IAAU,GAAK,OAAYA,CACtC,EACAyC,EAAS,UAAU,OAAS,SAAUzC,EAAO,CACzC,KAAK,MAAM,OAAOA,EAAO,CAAC,CAC9B,EACAyC,EAAS,UAAU,IAAM,SAAUG,EAAKD,EAAQ,CAC5C,KAAK,MAAMC,CAAG,EAAID,CACtB,EACAF,EAAS,UAAU,IAAM,SAAUzC,EAAO,CACtC,OAAO,KAAK,MAAMA,CAAK,CAC3B,EACAyC,EAAS,UAAU,YAAc,SAAUzC,EAAO,CAG9C,QAFIxB,EACAqE,EAAQ,CAAA,EACHC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAMC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAEhC,OAAQtE,EAAK,KAAK,SAAS,YAAY,MAAMA,EAAIuE,EAAe,CAAC,KAAK,IAAI/C,CAAK,CAAC,EAAG6C,CAAK,CAAC,CAC7F,EACAJ,EAAS,UAAU,OAAS,SAAUzC,EAAO,CAGzC,QAFIxB,EACAqE,EAAQ,CAAA,EACHC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAMC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAEhC,OAAQtE,EAAK,KAAK,SAAS,OAAO,MAAMA,EAAIuE,EAAe,CAAC,KAAK,IAAI/C,CAAK,CAAC,EAAG6C,CAAK,CAAC,CACxF,EACAJ,EAAS,UAAU,YAAc,UAAY,CACzC,GAAI,KAAK,KAAI,IAAO,EAChB,MAAM,IAAInD,GAA4B,KAAK,MAAM,EACrD,IAAI0D,EAAa,KAAK,OAAO,EAAGT,CAAS,EAAE,SAAQ,EAC/CU,EAAa,KAAK,OAAO,EAAGV,CAAS,EAAE,SAAQ,EAC/CW,EAAc,KAAK,OAAO,EAAGX,CAAS,EAAE,SAAQ,EAChDY,EAAc,KAAK,OAAO,EAAGZ,CAAS,EAAE,SAAQ,EAChDa,EAAIJ,EACJK,EAAIJ,EACJK,EAAQJ,EAAcF,EACtBO,EAASJ,EAAcF,EAC3B,MAAO,CAAE,EAAGG,EAAG,EAAGC,EAAG,MAAOC,EAAO,OAAQC,CAAM,CACrD,EACAd,EAAS,UAAU,QAAU,UAAY,CACrC,OAAO,KAAK,MAAM,MAAK,CAC3B,EACAA,EAAS,UAAU,MAAQ,SAAUC,EAAS,CAE1C,QADIc,EAAQf,EAAS,YAAYC,GAAW,KAAK,OAAO,EAC/CE,EAAM,EAAGa,EAAM,KAAK,KAAI,EAAIb,EAAMa,EAAKb,IAC5CY,EAAM,KAAK,KAAK,MAAMZ,CAAG,CAAC,EAE9B,OAAOY,CACX,EACAf,EAAS,UAAU,SAAW,UAAY,CAEtC,QADIiB,EAAc,KACTd,EAAM,EAAGa,EAAM,KAAK,KAAI,EAAIb,EAAMa,EAAKb,IAC5Cc,GAAe,KAAK,IAAId,CAAG,EAAE,SAAQ,EACrCc,GAAe,IAEnB,OAAAA,GAAe,IACRA,CACX,EACAjB,EAAS,UAAU,YAAc,UAAY,CAEzC,QADIlD,EAAO,EACFqD,EAAM,EAAGa,EAAM,KAAK,KAAI,EAAIb,EAAMa,EAAKb,IAC5CrD,GAAQ,KAAK,IAAIqD,CAAG,EAAE,YAAW,EAAK,EAE1C,OAAOrD,CACX,EACAkD,EAAS,UAAU,cAAgB,SAAUV,EAAQC,EAAQ,CACzD,IAAIC,EAAgBD,EACpBD,EAAOC,GAAQ,EAAIP,EAAU,kBAC7BM,EAAOC,GAAQ,EAAIP,EAAU,MAC7B,QAASmB,EAAM,EAAGa,EAAM,KAAK,KAAI,EAAIb,EAAMa,EAAKb,IAC5CZ,GAAU,KAAK,IAAIY,CAAG,EAAE,cAAcb,EAAQC,CAAM,EACpDD,EAAOC,GAAQ,EAAIP,EAAU,MAEjC,OAAAM,EAAOC,GAAQ,EAAIP,EAAU,mBACtBO,EAASC,CACpB,EACAQ,EAAS,UAAU,gBAAkB,SAAUW,EAAGC,EAAG,CACjD,QAAST,EAAM,EAAGa,EAAM,KAAK,KAAI,EAAIb,EAAMa,EAAKb,IAAO,CACnD,IAAIe,EAAK,KAAK,OAAOf,CAAG,EACxB,GAAIe,aAAcpB,EAAW,CACzB,IAAIqB,EAAShB,EAAM,IAAM,EAAIQ,EAAIC,EACjC,KAAK,IAAIT,EAAKL,EAAU,GAAGoB,EAAG,WAAaC,CAAM,CAAC,CACtD,CACJ,CACJ,EACAnB,EAAS,YAAc,SAAUC,EAAS,CAAE,OAAO,IAAID,EAASC,CAAO,CAAG,EACnED,CACX,GAAEN,CAAS,EC5GP0B,GAAW,CAAA,EACXC,IAAyB,SAAUlG,EAAQ,CAC3CC,EAAUiG,EAASlG,CAAM,EACzB,SAASkG,EAAQC,EAAUtE,EAAO,CAC9B,IAAIzB,EAAQ,KACZ,GAAI+F,IAAaF,GACb,MAAM,IAAI3F,GAAwB,SAAS,EAC/C,OAAAF,EAAQJ,EAAO,KAAK,IAAI,GAAK,KAC7BI,EAAM,MAAQyB,EACPzB,CACX,CACA,OAAA8F,EAAQ,UAAU,UAAY,UAAY,CACtC,OAAO,KAAK,KAChB,EACAA,EAAQ,UAAU,MAAQ,UAAY,CAClC,OAAO,IACX,EACAA,EAAQ,UAAU,SAAW,UAAY,CACrC,OAAO,OAAO,KAAK,KAAK,CAC5B,EACAA,EAAQ,UAAU,YAAc,UAAY,CACxC,OAAO,KAAK,MAAQ,EAAI,CAC5B,EACAA,EAAQ,UAAU,cAAgB,SAAU/B,EAAQC,EAAQ,CACxD,OAAI,KAAK,OACLD,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EACtB,IAGPM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EACtB,EAEf,EACAqC,EAAQ,KAAO,IAAIA,EAAQD,GAAU,EAAI,EACzCC,EAAQ,MAAQ,IAAIA,EAAQD,GAAU,EAAK,EACpCC,CACX,GAAE3B,CAAS,EC9CA6B,EAAc,IAAI,WAAW,GAAG,EAC3CA,EAAYvC,EAAU,SAAS,EAAI,EACnCuC,EAAYvC,EAAU,UAAU,EAAI,EACpCuC,EAAYvC,EAAU,QAAQ,EAAI,EAClCuC,EAAYvC,EAAU,WAAW,EAAI,EACrCuC,EAAYvC,EAAU,iBAAiB,EAAI,EAC3CuC,EAAYvC,EAAU,kBAAkB,EAAI,EAC5CuC,EAAYvC,EAAU,SAAS,EAAI,EACnCuC,EAAYvC,EAAU,UAAU,EAAI,EACpCuC,EAAYvC,EAAU,YAAY,EAAI,EACtCuC,EAAYvC,EAAU,OAAO,EAAI,ECV1B,IAAIwC,EAAe,IAAI,WAAW,GAAG,EAC5CA,EAAaxC,EAAU,IAAI,EAAI,EAC/BwC,EAAaxC,EAAU,GAAG,EAAI,EAC9BwC,EAAaxC,EAAU,OAAO,EAAI,EAClCwC,EAAaxC,EAAU,QAAQ,EAAI,EACnCwC,EAAaxC,EAAU,cAAc,EAAI,EACzCwC,EAAaxC,EAAU,KAAK,EAAI,ECJzB,IAAIyC,GAAc,IAAI,WAAW,GAAG,EAC3C,QAAStB,GAAM,EAAGa,GAAM,IAAKb,GAAMa,GAAKb,KACpCsB,GAAYtB,EAAG,EAAIqB,EAAarB,EAAG,GAAKoB,EAAYpB,EAAG,EAAI,EAAI,EAEnEsB,GAAYzC,EAAU,IAAI,EAAI,ECD9B,IAAI0C,GAAa,SAAU7F,EAAM,CAC7B,OAAOA,EAAK,QAAQ,oBAAqB,SAAU8F,EAAGC,EAAK,CAAE,OAAOC,GAAgBD,CAAG,CAAG,CAAC,CAC/F,EACIE,GAAgB,SAAUC,EAAU,CACpC,OAAOA,GAAY/C,EAAU,kBACzB+C,GAAY/C,EAAU,OACtB,CAACyC,GAAYM,CAAQ,CAC7B,EACIX,GAAW,CAAA,EACXY,GAAO,IAAI,IACXC,GAAyB,SAAU9G,EAAQ,CAC3CC,EAAU6G,EAAS9G,CAAM,EACzB,SAAS8G,EAAQX,EAAUzF,EAAM,CAC7B,IAAIN,EAAQ,KACZ,GAAI+F,IAAaF,GACb,MAAM,IAAI3F,GAAwB,SAAS,EAC/CF,EAAQJ,EAAO,KAAK,IAAI,GAAK,KAE7B,QADI+G,EAAc,IACT/B,EAAM,EAAGa,EAAMnF,EAAK,OAAQsE,EAAMa,EAAKb,IAAO,CACnD,IAAIgC,EAAYtG,EAAKsE,CAAG,EACpBiC,EAAOC,GAAWF,CAAS,EAC/BD,GAAeJ,GAAcM,CAAI,EAAID,EAAY,IAAMG,GAAYF,CAAI,CAC3E,CACA,OAAA7G,EAAM,YAAc2G,EACb3G,CACX,CACA,OAAA0G,EAAQ,UAAU,QAAU,UAAY,CASpC,QARIM,EAAQ,CAAA,EACRX,EAAM,GACNY,EAAU,GACVC,EAAW,SAAUlE,EAAM,CACvBA,IAAS,QACTgE,EAAM,KAAKhE,CAAI,EACnBiE,EAAU,EACd,EACSrC,EAAM,EAAGa,EAAM,KAAK,YAAY,OAAQb,EAAMa,EAAKb,IAAO,CAC/D,IAAIuC,EAAO,KAAK,YAAYvC,CAAG,EAC3B5B,EAAO8D,GAAWK,CAAI,EACtBC,EAAW,KAAK,YAAYxC,EAAM,CAAC,EAClCqC,EAOIjE,GAAQS,EAAU,MAAQT,GAAQS,EAAU,MAC5CT,GAAQS,EAAU,GAAKT,GAAQS,EAAU,GACzCT,GAAQS,EAAU,GAAKT,GAAQS,EAAU,GAC1C4C,GAAOc,GACHd,EAAI,SAAW,GACf,EAAGe,GAAY,KAAOA,GAAY,KAC7BA,GAAY,KAAOA,GAAY,KAC/BA,GAAY,KAAOA,GAAY,QACpCF,EAAS,SAASb,EAAK,EAAE,CAAC,EAC1BA,EAAM,KAIVa,EAASlE,CAAI,EAnBbA,IAASS,EAAU,KACnBwD,EAAU,GAEVC,EAASlE,CAAI,CAmBzB,CACA,OAAO,IAAI,WAAWgE,CAAK,CAC/B,EAGAN,EAAQ,UAAU,WAAa,UAAY,CACvC,IAAIM,EAAQ,KAAK,QAAO,EACxB,OAAO,OAAO,aAAa,MAAM,OAAQ,MAAM,KAAKA,CAAK,CAAC,CAC9D,EACAN,EAAQ,UAAU,SAAW,UAAY,CACrC,OAAO,KAAK,WAChB,EAEAA,EAAQ,UAAU,MAAQ,UAAY,CAClC,OAAO,KAAK,WAChB,EACAA,EAAQ,UAAU,MAAQ,UAAY,CAClC,OAAO,IACX,EACAA,EAAQ,UAAU,SAAW,UAAY,CACrC,OAAO,KAAK,WAChB,EACAA,EAAQ,UAAU,YAAc,UAAY,CACxC,OAAO,KAAK,YAAY,MAC5B,EACAA,EAAQ,UAAU,cAAgB,SAAU3C,EAAQC,EAAQ,CACxD,OAAAA,GAAUE,EAAqB,KAAK,YAAaH,EAAQC,CAAM,EACxD,KAAK,YAAY,MAC5B,EACA0C,EAAQ,GAAK,SAAUpG,EAAM,CACzB,IAAI+G,EAAelB,GAAW7F,CAAI,EAC9BgH,EAAWb,GAAK,IAAIY,CAAY,EACpC,OAAKC,IACDA,EAAW,IAAIZ,EAAQb,GAAUwB,CAAY,EAC7CZ,GAAK,IAAIY,EAAcC,CAAQ,GAE5BA,CACX,EAEAZ,EAAQ,OAASA,EAAQ,GAAG,QAAQ,EACpCA,EAAQ,YAAcA,EAAQ,GAAG,aAAa,EAC9CA,EAAQ,UAAYA,EAAQ,GAAG,WAAW,EAC1CA,EAAQ,KAAOA,EAAQ,GAAG,MAAM,EAChCA,EAAQ,QAAUA,EAAQ,GAAG,SAAS,EACtCA,EAAQ,UAAYA,EAAQ,GAAG,WAAW,EAC1CA,EAAQ,SAAWA,EAAQ,GAAG,UAAU,EACxCA,EAAQ,KAAOA,EAAQ,GAAG,MAAM,EAChCA,EAAQ,OAASA,EAAQ,GAAG,QAAQ,EACpCA,EAAQ,SAAWA,EAAQ,GAAG,UAAU,EACxCA,EAAQ,KAAOA,EAAQ,GAAG,MAAM,EAChCA,EAAQ,OAASA,EAAQ,GAAG,QAAQ,EACpCA,EAAQ,QAAUA,EAAQ,GAAG,SAAS,EACtCA,EAAQ,OAASA,EAAQ,GAAG,QAAQ,EACpCA,EAAQ,SAAWA,EAAQ,GAAG,UAAU,EACxCA,EAAQ,QAAUA,EAAQ,GAAG,SAAS,EACtCA,EAAQ,OAASA,EAAQ,GAAG,QAAQ,EACpCA,EAAQ,MAAQA,EAAQ,GAAG,OAAO,EAClCA,EAAQ,OAASA,EAAQ,GAAG,QAAQ,EACpCA,EAAQ,QAAUA,EAAQ,GAAG,SAAS,EACtCA,EAAQ,QAAUA,EAAQ,GAAG,SAAS,EACtCA,EAAQ,SAAWA,EAAQ,GAAG,UAAU,EACxCA,EAAQ,SAAWA,EAAQ,GAAG,UAAU,EACxCA,EAAQ,aAAeA,EAAQ,GAAG,cAAc,EAChDA,EAAQ,QAAUA,EAAQ,GAAG,SAAS,EAC/BA,CACX,GAAEvC,CAAS,EClIPoD,IAAyB,SAAU3H,EAAQ,CAC3CC,EAAU0H,EAAS3H,CAAM,EACzB,SAAS2H,GAAU,CACf,OAAO3H,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CACA,OAAA2H,EAAQ,UAAU,OAAS,UAAY,CACnC,OAAO,IACX,EACAA,EAAQ,UAAU,MAAQ,UAAY,CAClC,OAAO,IACX,EACAA,EAAQ,UAAU,SAAW,UAAY,CACrC,MAAO,MACX,EACAA,EAAQ,UAAU,YAAc,UAAY,CACxC,MAAO,EACX,EACAA,EAAQ,UAAU,cAAgB,SAAUxD,EAAQC,EAAQ,CACxD,OAAAD,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EACtB,CACX,EACO8D,CACX,GAAEpD,CAAS,EACX,MAAAqD,EAAe,IAAID,GCxBhB,IAACE,GAAyB,SAAU7H,EAAQ,CAC3CC,EAAU4H,EAAS7H,CAAM,EACzB,SAAS6H,EAAQC,EAAKhD,EAAS,CAC3B,IAAI1E,EAAQJ,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAI,EAAM,KAAO0H,EACb1H,EAAM,QAAU0E,EACT1E,CACX,CACA,OAAAyH,EAAQ,UAAU,KAAO,UAAY,CACjC,OAAO,MAAM,KAAK,KAAK,KAAK,KAAI,CAAE,CACtC,EACAA,EAAQ,UAAU,OAAS,UAAY,CACnC,OAAO,MAAM,KAAK,KAAK,KAAK,OAAM,CAAE,CACxC,EACAA,EAAQ,UAAU,QAAU,UAAY,CACpC,OAAO,MAAM,KAAK,KAAK,KAAK,QAAO,CAAE,CACzC,EACAA,EAAQ,UAAU,IAAM,SAAUE,EAAKlG,EAAO,CAC1C,KAAK,KAAK,IAAIkG,EAAKlG,CAAK,CAC5B,EACAgG,EAAQ,UAAU,IAAM,SAAUE,EAGlCC,EAAiB,CACTA,IAAoB,SAAUA,EAAkB,IACpD,IAAInG,EAAQ,KAAK,KAAK,IAAIkG,CAAG,EAC7B,GAAI,EAAAlG,IAAU8F,GAAW,CAACK,GAE1B,OAAOnG,CACX,EACAgG,EAAQ,UAAU,IAAM,SAAUE,EAAK,CACnC,IAAIlG,EAAQ,KAAK,KAAK,IAAIkG,CAAG,EAC7B,OAAOlG,IAAU,QAAaA,IAAU8F,CAC5C,EACAE,EAAQ,UAAU,YAAc,SAAUE,EAAK,CAG3C,QAFInH,EACAqE,EAAQ,CAAA,EACHC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAMC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAIhC,IAAI8C,EAAkB/C,EAAM,SAAS0C,CAAO,EACxC9F,GAASjB,EAAK,KAAK,SAAS,YAAY,MAAMA,EAAIuE,EAAe,CAAC,KAAK,IAAI4C,EAAKC,CAAe,CAAC,EAAG/C,CAAK,CAAC,EAC7G,GAAI,EAAApD,IAAU8F,GAAW,CAACK,GAE1B,OAAOnG,CACX,EACAgG,EAAQ,UAAU,OAAS,SAAUE,EAAK,CAGtC,QAFInH,EACAqE,EAAQ,CAAA,EACHC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAMC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAIhC,IAAI8C,EAAkB/C,EAAM,SAAS0C,CAAO,EACxC9F,GAASjB,EAAK,KAAK,SAAS,OAAO,MAAMA,EAAIuE,EAAe,CAAC,KAAK,IAAI4C,EAAKC,CAAe,CAAC,EAAG/C,CAAK,CAAC,EACxG,GAAI,EAAApD,IAAU8F,GAAW,CAACK,GAE1B,OAAOnG,CACX,EACAgG,EAAQ,UAAU,OAAS,SAAUE,EAAK,CACtC,OAAO,KAAK,KAAK,OAAOA,CAAG,CAC/B,EACAF,EAAQ,UAAU,MAAQ,UAAY,CAClC,OAAO,IAAI,IAAI,KAAK,IAAI,CAC5B,EAEAA,EAAQ,UAAU,UAAY,SAAUI,EAAK,CACrCA,IAAQ,SAAUA,EAAM,IAG5B,QAFIC,EAAe,KAAK,KAAI,EACxBH,EAAMjB,EAAQ,GAAG,KAAK,QAAQ,gBAAgBmB,EAAK,EAAE,CAAC,EACnDC,EAAa,SAASH,CAAG,GAC5BA,EAAMjB,EAAQ,GAAG,KAAK,QAAQ,gBAAgBmB,EAAK,EAAE,CAAC,EAE1D,OAAOF,CACX,EACAF,EAAQ,UAAU,MAAQ,SAAU/C,EAAS,CAGzC,QAFIc,EAAQiC,EAAQ,YAAY/C,GAAW,KAAK,OAAO,EACnDqD,EAAU,KAAK,QAAO,EACjBnD,EAAM,EAAGa,EAAMsC,EAAQ,OAAQnD,EAAMa,EAAKb,IAAO,CACtD,IAAIpE,EAAKuH,EAAQnD,CAAG,EAAG+C,EAAMnH,EAAG,CAAC,EAAGiB,EAAQjB,EAAG,CAAC,EAChDgF,EAAM,IAAImC,EAAKlG,CAAK,CACxB,CACA,OAAO+D,CACX,EACAiC,EAAQ,UAAU,SAAW,UAAY,CAGrC,QAFIO,EAAa;AAAA,EACbD,EAAU,KAAK,QAAO,EACjBnD,EAAM,EAAGa,EAAMsC,EAAQ,OAAQnD,EAAMa,EAAKb,IAAO,CACtD,IAAIpE,EAAKuH,EAAQnD,CAAG,EAAG+C,EAAMnH,EAAG,CAAC,EAAGiB,EAAQjB,EAAG,CAAC,EAChDwH,GAAcL,EAAI,SAAQ,EAAK,IAAMlG,EAAM,SAAQ,EAAK;AAAA,CAC5D,CACA,OAAAuG,GAAc,KACPA,CACX,EACAP,EAAQ,UAAU,YAAc,UAAY,CAGxC,QAFIlG,EAAO,EACPwG,EAAU,KAAK,QAAO,EACjBnD,EAAM,EAAGa,EAAMsC,EAAQ,OAAQnD,EAAMa,EAAKb,IAAO,CACtD,IAAIpE,EAAKuH,EAAQnD,CAAG,EAAG+C,EAAMnH,EAAG,CAAC,EAAGiB,EAAQjB,EAAG,CAAC,EAChDe,GAAQoG,EAAI,YAAW,EAAKlG,EAAM,YAAW,EAAK,CACtD,CACA,OAAOF,CACX,EACAkG,EAAQ,UAAU,cAAgB,SAAU1D,EAAQC,EAAQ,CACxD,IAAIC,EAAgBD,EACpBD,EAAOC,GAAQ,EAAIP,EAAU,SAC7BM,EAAOC,GAAQ,EAAIP,EAAU,SAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAE7B,QADIsE,EAAU,KAAK,QAAO,EACjBnD,EAAM,EAAGa,EAAMsC,EAAQ,OAAQnD,EAAMa,EAAKb,IAAO,CACtD,IAAIpE,EAAKuH,EAAQnD,CAAG,EAAG+C,EAAMnH,EAAG,CAAC,EAAGiB,EAAQjB,EAAG,CAAC,EAChDwD,GAAU2D,EAAI,cAAc5D,EAAQC,CAAM,EAC1CD,EAAOC,GAAQ,EAAIP,EAAU,MAC7BO,GAAUvC,EAAM,cAAcsC,EAAQC,CAAM,EAC5CD,EAAOC,GAAQ,EAAIP,EAAU,OACjC,CACA,OAAAM,EAAOC,GAAQ,EAAIP,EAAU,YAC7BM,EAAOC,GAAQ,EAAIP,EAAU,YACtBO,EAASC,CACpB,EACAwD,EAAQ,YAAc,SAAU/C,EAAS,CAAE,OAAO,IAAI+C,EAAQ,IAAI,IAAO/C,CAAO,CAAG,EACnF+C,EAAQ,mBAAqB,SAAUC,EAAKhD,EAAS,CACjD,OAAO,IAAI+C,EAAQC,EAAKhD,CAAO,CACnC,EACO+C,CACX,GAAEtD,CAAS,EC/HP8D,GAA2B,SAAUrI,EAAQ,CAC7CC,EAAUoI,EAAWrI,CAAM,EAC3B,SAASqI,EAAUC,EAAM,CACrB,IAAIlI,EAAQJ,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAI,EAAM,KAAOkI,EACNlI,CACX,CACA,OAAAiI,EAAU,UAAU,MAAQ,SAAU7D,EAAU,CAC5C,MAAM,IAAIzE,EAA0B,KAAK,YAAY,KAAM,OAAO,CACtE,EACAsI,EAAU,UAAU,kBAAoB,UAAY,CAChD,MAAM,IAAItI,EAA0B,KAAK,YAAY,KAAM,mBAAmB,CAClF,EACAsI,EAAU,UAAU,YAAc,UAAY,CAC1C,MAAM,IAAItI,EAA0B,KAAK,YAAY,KAAM,aAAa,CAC5E,EACAsI,EAAU,UAAU,gBAAkB,UAAY,CAC9C,MAAM,IAAItI,EAA0B,KAAK,YAAY,KAAM,iBAAiB,CAChF,EACAsI,EAAU,UAAU,WAAa,UAAY,CACzC,IAAIE,EAAe,KAAK,gBAAe,EACvC,KAAK,KAAK,IAAIzB,EAAQ,OAAQnC,EAAU,GAAG4D,CAAY,CAAC,CAC5D,EACAF,EAAU,UAAU,YAAc,UAAY,CAC1C,YAAK,WAAU,EACR,KAAK,KAAK,YAAW,EAAK,KAAK,gBAAe,EAAK,EAC9D,EACAA,EAAU,UAAU,SAAW,UAAY,CACvC,KAAK,WAAU,EACf,IAAIG,EAAe,KAAK,KAAK,SAAQ,EACrC,OAAAA,GAAgB;AAAA;AAAA,EAChBA,GAAgB,KAAK,kBAAiB,EACtCA,GAAgB;AAAA,WACTA,CACX,EACAH,EAAU,UAAU,cAAgB,SAAUlE,EAAQC,EAAQ,CAC1D,KAAK,WAAU,EACf,IAAIC,EAAgBD,EACpBA,GAAU,KAAK,KAAK,cAAcD,EAAQC,CAAM,EAChDD,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAE7B,QADI4E,EAAW,KAAK,YAAW,EACtBzD,EAAM,EAAGa,EAAM4C,EAAS,OAAQzD,EAAMa,EAAKb,IAChDb,EAAOC,GAAQ,EAAIqE,EAASzD,CAAG,EAEnC,OAAAb,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EACtBO,EAASC,CACpB,EACOgE,CACX,GAAE9D,CAAS,ECnEPmE,IAA8B,SAAU1I,EAAQ,CAChDC,EAAUyI,EAAc1I,CAAM,EAC9B,SAAS0I,EAAaJ,EAAMG,EAAU,CAClC,IAAIrI,EAAQJ,EAAO,KAAK,KAAMsI,CAAI,GAAK,KACvC,OAAAlI,EAAM,SAAWqI,EACVrI,CACX,CACA,OAAAsI,EAAa,UAAU,aAAe,UAAY,CAC9C,OAAO,KAAK,SAAS,MAAK,CAC9B,EACAA,EAAa,UAAU,MAAQ,SAAU5D,EAAS,CAC9C,OAAO4D,EAAa,GAAG,KAAK,KAAK,MAAM5D,CAAO,EAAG,KAAK,SAAS,OAAO,CAC1E,EACA4D,EAAa,UAAU,kBAAoB,UAAY,CACnD,OAAO9E,GAAc,KAAK,QAAQ,CACtC,EACA8E,EAAa,UAAU,YAAc,UAAY,CAC7C,OAAO,KAAK,QAChB,EACAA,EAAa,UAAU,gBAAkB,UAAY,CACjD,OAAO,KAAK,SAAS,MACzB,EACAA,EAAa,GAAK,SAAUJ,EAAMG,EAAU,CACxC,OAAO,IAAIC,EAAaJ,EAAMG,CAAQ,CAC1C,EACOC,CACX,GAAEL,CAAS,ECzBPpC,GAAW,CAAA,EACXY,GAAO,IAAI,IACX8B,GAAwB,SAAU3I,EAAQ,CAC1CC,EAAU0I,EAAQ3I,CAAM,EACxB,SAAS2I,EAAOxC,EAAUyC,EAAcC,EAAkB,CACtD,IAAIzI,EAAQ,KACZ,GAAI+F,IAAaF,GACb,MAAM,IAAI3F,GAAwB,QAAQ,EAC9C,OAAAF,EAAQJ,EAAO,KAAK,IAAI,GAAK,KAC7BI,EAAM,aAAewI,EACrBxI,EAAM,iBAAmByI,EACzBzI,EAAM,IAAMwI,EAAe,IAAMC,EAAmB,KAC7CzI,CACX,CACA,OAAAuI,EAAO,UAAU,MAAQ,UAAY,CACjC,OAAO,IACX,EACAA,EAAO,UAAU,SAAW,UAAY,CACpC,OAAO,KAAK,GAChB,EACAA,EAAO,UAAU,YAAc,UAAY,CACvC,OAAO,KAAK,IAAI,MACpB,EACAA,EAAO,UAAU,cAAgB,SAAUxE,EAAQC,EAAQ,CACvD,OAAAA,GAAUE,EAAqB,KAAK,IAAKH,EAAQC,CAAM,EAChD,KAAK,IAAI,MACpB,EACAuE,EAAO,GAAK,SAAUC,EAAcC,EAAkB,CAC9CA,IAAqB,SAAUA,EAAmB,GACtD,IAAIZ,EAAMW,EAAe,IAAMC,EAAmB,KAC9CnB,EAAWb,GAAK,IAAIoB,CAAG,EAC3B,OAAKP,IACDA,EAAW,IAAIiB,EAAO1C,GAAU2C,EAAcC,CAAgB,EAC9DhC,GAAK,IAAIoB,EAAKP,CAAQ,GAEnBA,CACX,EACOiB,CACX,GAAEpE,CAAS,ECvCPuE,IAA6B,UAAY,CACzC,SAASA,EAAYpI,EAAMqI,EAAM,CAC7B,KAAK,KAAOrI,EACZ,KAAK,KAAOqI,GAAQ,CAAA,CACxB,CACA,OAAAD,EAAY,UAAU,MAAQ,SAAUhE,EAAS,CAE7C,QADIiE,EAAO,IAAI,MAAM,KAAK,KAAK,MAAM,EAC5B/D,EAAM,EAAGa,EAAMkD,EAAK,OAAQ/D,EAAMa,EAAKb,IAAO,CACnD,IAAIgE,EAAM,KAAK,KAAKhE,CAAG,EACvB+D,EAAK/D,CAAG,EAAIgE,aAAezE,EAAYyE,EAAI,MAAMlE,CAAO,EAAIkE,CAChE,CACA,OAAOF,EAAY,GAAG,KAAK,KAAMC,CAAI,CACzC,EACAD,EAAY,UAAU,SAAW,UAAY,CAEzC,QADIjH,EAAQ,GACHmD,EAAM,EAAGa,EAAM,KAAK,KAAK,OAAQb,EAAMa,EAAKb,IACjDnD,GAAS,OAAO,KAAK,KAAKmD,CAAG,CAAC,EAAI,IAEtC,OAAAnD,GAAS,KAAK,KACPA,CACX,EACAiH,EAAY,UAAU,YAAc,UAAY,CAE5C,QADInH,EAAO,EACFqD,EAAM,EAAGa,EAAM,KAAK,KAAK,OAAQb,EAAMa,EAAKb,IAAO,CACxD,IAAIgE,EAAM,KAAK,KAAKhE,CAAG,EACvBrD,IAASqH,aAAezE,EAAYyE,EAAI,cAAgBA,EAAI,QAAU,CAC1E,CACA,OAAArH,GAAQ,KAAK,KAAK,OACXA,CACX,EACAmH,EAAY,UAAU,cAAgB,SAAU3E,EAAQC,EAAQ,CAE5D,QADIC,EAAgBD,EACXY,EAAM,EAAGa,EAAM,KAAK,KAAK,OAAQb,EAAMa,EAAKb,IAAO,CACxD,IAAIgE,EAAM,KAAK,KAAKhE,CAAG,EACnBgE,aAAezE,EACfH,GAAU4E,EAAI,cAAc7E,EAAQC,CAAM,EAG1CA,GAAUE,EAAqB0E,EAAK7E,EAAQC,CAAM,EAEtDD,EAAOC,GAAQ,EAAIP,EAAU,KACjC,CACA,OAAAO,GAAUE,EAAqB,KAAK,KAAMH,EAAQC,CAAM,EACjDA,EAASC,CACpB,EACAyE,EAAY,GAAK,SAAUpI,EAAMqI,EAAM,CACnC,OAAO,IAAID,EAAYpI,EAAMqI,CAAI,CACrC,EACOD,CACX,GAAC,ECpDGG,IACH,SAAUA,EAAkB,CAEzBA,EAAiB,iBAAsB,KACvCA,EAAiB,kBAAuB,MACxCA,EAAiB,oBAAyB,KAC1CA,EAAiB,qBAA0B,IAC3CA,EAAiB,qBAA0B,IAC3CA,EAAiB,sBAA2B,KAE5CA,EAAiB,cAAmB,KACpCA,EAAiB,eAAoB,MACrCA,EAAiB,iBAAsB,KACvCA,EAAiB,kBAAuB,IACxCA,EAAiB,kBAAuB,IACxCA,EAAiB,mBAAwB,KAEzCA,EAAiB,2BAAgC,MACjDA,EAAiB,mBAAwB,MACzCA,EAAiB,iBAAsB,MACvCA,EAAiB,4BAAiC,KAClDA,EAAiB,mBAAwB,KACzCA,EAAiB,WAAgB,KAEjCA,EAAiB,2BAAgC,KACjDA,EAAiB,iBAAsB,IACvCA,EAAiB,kBAAuB,IACxCA,EAAiB,YAAiB,IAClCA,EAAiB,uBAA4B,KAC7CA,EAAiB,gBAAqB,IACtCA,EAAiB,mBAAwB,IACzCA,EAAiB,iBAAsB,IACvCA,EAAiB,kBAAuB,IACxCA,EAAiB,aAAkB,IACnCA,EAAiB,cAAmB,KACpCA,EAAiB,mBAAwB,KAEzCA,EAAiB,gBAAqB,KACtCA,EAAiB,iBAAsB,KACvCA,EAAiB,qBAA0B,KAC3CA,EAAiB,eAAoB,KACrCA,EAAiB,YAAiB,KAClCA,EAAiB,YAAiB,IAClCA,EAAiB,eAAoB,IACrCA,EAAiB,0BAA+B,KAChDA,EAAiB,0BAA+B,IAChDA,EAAiB,UAAe,IAChCA,EAAiB,kBAAuB,IACxCA,EAAiB,2BAAgC,IACjDA,EAAiB,6BAAkC,IACnDA,EAAiB,QAAa,IAC9BA,EAAiB,qBAA0B,KAC3CA,EAAiB,YAAiB,KAClCA,EAAiB,qBAA0B,IAC3CA,EAAiB,YAAiB,IAClCA,EAAiB,kBAAuB,IACxCA,EAAiB,OAAY,IAC7BA,EAAiB,OAAY,IAC7BA,EAAiB,YAAiB,KAClCA,EAAiB,WAAgB,IAEjCA,EAAiB,UAAe,KAChCA,EAAiB,QAAa,KAC9BA,EAAiB,SAAc,KAC/BA,EAAiB,mBAAwB,KACzCA,EAAiB,SAAc,KAC/BA,EAAiB,oBAAyB,KAC1CA,EAAiB,eAAoB,KACrCA,EAAiB,yBAA8B,KAC/CA,EAAiB,kBAAuB,KACxCA,EAAiB,qBAA0B,KAC3CA,EAAiB,YAAiB,KAClCA,EAAiB,eAAoB,KACrCA,EAAiB,SAAc,KAC/BA,EAAiB,iBAAsB,KACvCA,EAAiB,aAAkB,IACnCA,EAAiB,qBAA0B,IAE3CA,EAAiB,QAAa,KAC9BA,EAAiB,QAAa,KAE9BA,EAAiB,0BAA+B,KAChDA,EAAiB,wBAA6B,IAClD,GAAGA,KAAqBA,GAAmB,CAAA,EAAG,EC7E3C,IAACC,IAAgC,SAAUlJ,EAAQ,CAClDC,EAAUiJ,EAAgBlJ,CAAM,EAChC,SAASkJ,EAAeZ,EAAMa,EAAQ,CAClC,IAAI/I,EAAQJ,EAAO,KAAK,KAAMsI,CAAI,GAAK,KACvC,OAAAlI,EAAM,gBAAkB,UAAY,CAChC,IAAIgJ,EAAoBhJ,EAAM,qBAAoB,EAClD,OAAOA,EAAM,OAASiJ,GAAK,QAAQD,CAAiB,EAAIA,CAC5D,EACAhJ,EAAM,OAAS+I,EACXA,GACAb,EAAK,IAAIxB,EAAQ,GAAG,QAAQ,EAAGA,EAAQ,GAAG,aAAa,CAAC,EAC5D1G,EAAM,cAAgBkJ,GAAM,YAAYlJ,EAAM,eAAe,EACtDA,CACX,CACA,OAAA8I,EAAe,UAAU,YAAc,UAAY,CAC/C,OAAO,KAAK,cAAc,OAAM,CACpC,EACAA,EAAe,UAAU,gBAAkB,UAAY,CACnD,OAAO,KAAK,cAAc,OAAM,EAAG,MACvC,EACAA,EAAe,UAAU,qBAAuB,UAAY,CACxD,MAAM,IAAInJ,EAA0B,KAAK,YAAY,KAAM,sBAAsB,CACrF,EACOmJ,CACX,GAAEb,CAAS,EC3BPkB,IAAkC,SAAUvJ,EAAQ,CACpDC,EAAUsJ,EAAkBvJ,CAAM,EAClC,SAASuJ,EAAiBjB,EAAMkB,EAAWL,EAAQ,CAC3CA,IAAW,SAAUA,EAAS,IAClC,IAAI/I,EAAQJ,EAAO,KAAK,KAAMsI,EAAMa,CAAM,GAAK,KAC/C,OAAA/I,EAAM,UAAYoJ,EACXpJ,CACX,CACA,OAAAmJ,EAAiB,UAAU,KAAO,UAAY,CAG1C,QAFI3I,EACA4I,EAAY,CAAA,EACPtE,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCsE,EAAUtE,CAAE,EAAI,UAAUA,CAAE,GAE/BtE,EAAK,KAAK,WAAW,KAAK,MAAMA,EAAI4I,CAAS,CAClD,EACAD,EAAiB,UAAU,MAAQ,SAAUzE,EAAS,CAElD,QADI0E,EAAY,IAAI,MAAM,KAAK,UAAU,MAAM,EACtCxE,EAAM,EAAGa,EAAM,KAAK,UAAU,OAAQb,EAAMa,EAAKb,IACtDwE,EAAUxE,CAAG,EAAI,KAAK,UAAUA,CAAG,EAAE,MAAMF,CAAO,EAEtD,IAAIlE,EAAK,KAAM0H,EAAO1H,EAAG,KAAMuI,EAASvI,EAAG,OAC3C,OAAO2I,EAAiB,GAAGjB,EAAK,MAAMxD,CAAO,EAAG0E,EAAWL,CAAM,CACrE,EACAI,EAAiB,UAAU,kBAAoB,UAAY,CAEvD,QADI1H,EAAQ,GACHmD,EAAM,EAAGa,EAAM,KAAK,UAAU,OAAQb,EAAMa,EAAKb,IACtDnD,GAAS,KAAK,UAAUmD,CAAG,EAAI;AAAA,EAEnC,OAAOnD,CACX,EACA0H,EAAiB,UAAU,qBAAuB,UAAY,CAG1D,QAFIpF,EAAS,IAAI,WAAW,KAAK,yBAAwB,CAAE,EACvDC,EAAS,EACJY,EAAM,EAAGa,EAAM,KAAK,UAAU,OAAQb,EAAMa,EAAKb,IACtDZ,GAAU,KAAK,UAAUY,CAAG,EAAE,cAAcb,EAAQC,CAAM,EAC1DD,EAAOC,GAAQ,EAAIP,EAAU,QAEjC,OAAOM,CACX,EACAoF,EAAiB,UAAU,yBAA2B,UAAY,CAE9D,QADI5H,EAAO,EACFqD,EAAM,EAAGa,EAAM,KAAK,UAAU,OAAQb,EAAMa,EAAKb,IACtDrD,GAAQ,KAAK,UAAUqD,CAAG,EAAE,YAAW,EAAK,EAEhD,OAAOrD,CACX,EACA4H,EAAiB,GAAK,SAAUjB,EAAMkB,EAAWL,EAAQ,CACrD,OAAIA,IAAW,SAAUA,EAAS,IAC3B,IAAII,EAAiBjB,EAAMkB,EAAWL,CAAM,CACvD,EACOI,CACX,GAAEL,EAAc,ECrCZO,GAA0B,SAAU7I,EAAIC,EAAI,CAC5C,IAAI6I,EAAI9I,EAAG,CAAC,EACR+I,EAAI9I,EAAG,CAAC,EACZ,OAAO6I,EAAE,aAAeC,EAAE,YAC9B,EACIC,IAA4B,UAAY,CACxC,SAASA,GAAa,CAClB,KAAK,oBAAsB,EAC3B,KAAK,OAAS9F,GAAU,WAAW,EAAG,CAAC,EACvC,KAAK,YAAc,CAAA,EACnB,KAAK,gBAAkB,IAAI,IAC3B,KAAK,IAAM+F,GAAU,SAAS,CAAC,CACnC,CACA,OAAAD,EAAW,UAAU,OAAS,SAAUzI,EAAK4D,EAAQ,CACjD,KAAK,gBAAgB,IAAI5D,EAAK4D,CAAM,EAChC5D,EAAI,aAAe,KAAK,sBACxB,KAAK,oBAAsBA,EAAI,aAEvC,EACAyI,EAAW,UAAU,QAAU,UAAY,CACvC,YAAK,qBAAuB,EACrBjB,EAAO,GAAG,KAAK,mBAAmB,CAC7C,EACAiB,EAAW,UAAU,SAAW,SAAU7E,EAAQ,CAC9C,IAAI5D,EAAM,KAAK,QAAO,EACtB,YAAK,OAAOA,EAAK4D,CAAM,EAChB5D,CACX,EACAyI,EAAW,UAAU,OAAS,SAAUzI,EAAK,CACzC,OAAO,KAAK,gBAAgB,OAAOA,CAAG,CAC1C,EACAyI,EAAW,UAAU,YAAc,SAAUzI,EAAK,CAE9C,QADI8D,EAAQ,CAAA,EACHC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAMC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAIhC,IAAI8C,EAAkB/C,EAAM,SAAS0C,CAAO,EACxCmC,EAAS3I,aAAewH,EAAS,KAAK,gBAAgB,IAAIxH,CAAG,EAAIA,EACrE,GAAI,GAAC2I,GAAWA,IAAWnC,GAAW,CAACK,GAEvC,SAAShD,EAAM,EAAGa,EAAMZ,EAAM,OAAQD,EAAMa,EAAKb,IAAO,CACpD,IAAI+E,EAAO9E,EAAMD,CAAG,EACpB,GAAI+E,IAASpC,GACT,GAAImC,IAAWnC,EACX,OAAOmC,UAGPA,aAAkBC,EAClB,OAAOD,CAEnB,CACA,MAAM,IAAIvJ,GAA0B0E,EAAO6E,CAAM,EACrD,EACAF,EAAW,UAAU,OAAS,SAAUzI,EAAK,CAEzC,QADI8D,EAAQ,CAAA,EACHC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAMC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAEhC,IAAI4E,EAAS3I,aAAewH,EAAS,KAAK,gBAAgB,IAAIxH,CAAG,EAAIA,EACrE,GAAI8D,EAAM,SAAW,EACjB,OAAO6E,EACX,QAAS9E,EAAM,EAAGa,EAAMZ,EAAM,OAAQD,EAAMa,EAAKb,IAAO,CACpD,IAAI+E,EAAO9E,EAAMD,CAAG,EACpB,GAAI+E,IAASpC,GACT,GAAImC,IAAWnC,EACX,OAAOmC,UAGPA,aAAkBC,EAClB,OAAOD,CAEnB,CACA,MAAM,IAAIvJ,GAA0B0E,EAAO6E,CAAM,CACrD,EACAF,EAAW,UAAU,aAAe,SAAUI,EAAW,CAErD,QADI7B,EAAU,MAAM,KAAK,KAAK,gBAAgB,SAAS,EAC9CnD,EAAM,EAAGa,EAAMsC,EAAQ,OAAQnD,EAAMa,EAAKb,IAAO,CACtD,IAAIpE,EAAKuH,EAAQnD,CAAG,EAAG7D,EAAMP,EAAG,CAAC,EAAGmE,EAASnE,EAAG,CAAC,EACjD,GAAImE,IAAWiF,EACX,OAAO7I,CAEf,CAEJ,EACAyI,EAAW,UAAU,yBAA2B,UAAY,CACxD,OAAO,MAAM,KAAK,KAAK,gBAAgB,SAAS,EAAE,KAAKH,EAAuB,CAClF,EACAG,EAAW,UAAU,IAAM,SAAUK,EAAS,CAC1C,GAAIA,aAAmB1F,EACnB,OAAO0F,EAEN,GAAIA,GAAY,KACjB,OAAOtC,EAEN,GAAI,OAAOsC,GAAY,SACxB,OAAOnD,EAAQ,GAAGmD,CAAO,EAExB,GAAI,OAAOA,GAAY,SACxB,OAAOtF,EAAU,GAAGsF,CAAO,EAE1B,GAAI,OAAOA,GAAY,UACxB,OAAOA,EAAU/D,GAAQ,KAAOA,GAAQ,MAEvC,GAAI,MAAM,QAAQ+D,CAAO,EAAG,CAE7B,QADIC,EAAQrF,EAAS,YAAY,IAAI,EAC5BG,EAAM,EAAGa,EAAMoE,EAAQ,OAAQjF,EAAMa,EAAKb,IAC/CkF,EAAM,KAAK,KAAK,IAAID,EAAQjF,CAAG,CAAC,CAAC,EAErC,OAAOkF,CACX,KACK,CAGD,QAFI5B,EAAOT,EAAQ,YAAY,IAAI,EAC/BsC,EAAO,OAAO,KAAKF,CAAO,EACrBjF,EAAM,EAAGa,EAAMsE,EAAK,OAAQnF,EAAMa,EAAKb,IAAO,CACnD,IAAI+C,EAAMoC,EAAKnF,CAAG,EACdnD,EAAQoI,EAAQlC,CAAG,EACnBlG,IAAU,QACVyG,EAAK,IAAIxB,EAAQ,GAAGiB,CAAG,EAAG,KAAK,IAAIlG,CAAK,CAAC,CACjD,CACA,OAAOyG,CACX,CACJ,EACAsB,EAAW,UAAU,OAAS,SAAUnB,EAAUH,EAAM,CACpD,OAAIA,IAAS,SAAUA,EAAO,CAAA,GACvBI,GAAa,GAAG,KAAK,IAAIJ,CAAI,EAAG8B,GAAc3B,CAAQ,CAAC,CAClE,EACAmB,EAAW,UAAU,YAAc,SAAUnB,EAAUH,EAAM,CACzD,OAAIA,IAAS,SAAUA,EAAO,CAAA,GACvB,KAAK,OAAOe,GAAK,QAAQe,GAAc3B,CAAQ,CAAC,EAAG4B,GAASA,GAAS,CAAA,EAAI/B,CAAI,EAAG,CAAE,OAAQ,aAAa,CAAE,CAAC,CACrH,EACAsB,EAAW,UAAU,cAAgB,SAAUJ,EAAWlB,EAAM,CAC5D,OAAIA,IAAS,SAAUA,EAAO,CAAA,GACvBiB,GAAiB,GAAG,KAAK,IAAIjB,CAAI,EAAGkB,CAAS,CACxD,EACAI,EAAW,UAAU,YAAc,SAAUJ,EAAWlB,EAAM,CAC1D,OAAIA,IAAS,SAAUA,EAAO,CAAA,GACvB,KAAK,cAAckB,EAAWa,GAASA,GAAS,CAAE,KAAM,KAAK,IAAI,CAAC,EAAG,EAAG,EAAG,CAAC,CAAC,EAAG,OAAQ,KAAK,IAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,CAAC,CAAC,EAAI/B,CAAI,EAAG,CAAE,KAAM,UAAW,QAAS,MAAM,CAAE,CAAC,CAC/K,EAOAsB,EAAW,UAAU,kCAAoC,UAAY,CACjE,GAAI,KAAK,kCACL,OAAO,KAAK,kCAEhB,IAAItB,EAAO,KAAK,IAAI,EAAE,EAClBgC,EAAKxB,GAAY,GAAGyB,GAAI,iBAAiB,EACzCjJ,EAASiI,GAAiB,GAAGjB,EAAM,CAACgC,CAAE,CAAC,EAC3C,YAAK,kCAAoC,KAAK,SAAShJ,CAAM,EACtD,KAAK,iCAChB,EAOAsI,EAAW,UAAU,iCAAmC,UAAY,CAChE,GAAI,KAAK,iCACL,OAAO,KAAK,iCAEhB,IAAItB,EAAO,KAAK,IAAI,EAAE,EAClBgC,EAAKxB,GAAY,GAAGyB,GAAI,gBAAgB,EACxCjJ,EAASiI,GAAiB,GAAGjB,EAAM,CAACgC,CAAE,CAAC,EAC3C,YAAK,iCAAmC,KAAK,SAAShJ,CAAM,EACrD,KAAK,gCAChB,EACAsI,EAAW,UAAU,gBAAkB,SAAUY,EAAQC,EAAc,CACnE,OAAIA,IAAiB,SAAUA,EAAe,GACvCD,EAAS,IAAM,KAAK,MAAM,KAAK,IAAI,QAAO,EAAK,KAAK,IAAI,GAAIC,CAAY,CAAC,CACpF,EACAb,EAAW,OAAS,UAAY,CAAE,OAAO,IAAIA,CAAc,EACpDA,CACX,GAAC,EC9LGc,IAA6B,SAAU1K,EAAQ,CAC/CC,EAAUyK,EAAa1K,CAAM,EAC7B,SAAS0K,EAAY5C,EAAKhD,EAAS6F,EAAkB,CAC7CA,IAAqB,SAAUA,EAAmB,IACtD,IAAIvK,EAAQJ,EAAO,KAAK,KAAM8H,EAAKhD,CAAO,GAAK,KAC/C,OAAA1E,EAAM,WAAa,GACnBA,EAAM,iBAAmBuK,EAClBvK,CACX,CACA,OAAAsK,EAAY,UAAU,MAAQ,SAAU5F,EAAS,CAG7C,QAFIc,EAAQ8E,EAAY,mBAAmB,IAAI,IAAO5F,GAAW,KAAK,QAAS,KAAK,gBAAgB,EAChGqD,EAAU,KAAK,QAAO,EACjBnD,EAAM,EAAGa,EAAMsC,EAAQ,OAAQnD,EAAMa,EAAKb,IAAO,CACtD,IAAIpE,EAAKuH,EAAQnD,CAAG,EAAG+C,EAAMnH,EAAG,CAAC,EAAGiB,EAAQjB,EAAG,CAAC,EAChDgF,EAAM,IAAImC,EAAKlG,CAAK,CACxB,CACA,OAAO+D,CACX,EACA8E,EAAY,UAAU,OAAS,UAAY,CACvC,OAAO,KAAK,YAAY5D,EAAQ,OAAQe,CAAO,CACnD,EACA6C,EAAY,UAAU,SAAW,UAAY,CACzC,OAAO,KAAK,OAAO5D,EAAQ,GAAG,UAAU,CAAC,CAC7C,EACA4D,EAAY,UAAU,OAAS,UAAY,CACvC,OAAO,KAAK,YAAY5D,EAAQ,OAAQjC,CAAQ,CACpD,EACA6F,EAAY,UAAU,SAAW,UAAY,CACzC,OAAO,KAAK,YAAY5D,EAAQ,SAAUjC,CAAQ,CACtD,EACA6F,EAAY,UAAU,QAAU,UAAY,CACxC,OAAO,KAAK,YAAY5D,EAAQ,QAASjC,CAAQ,CACrD,EACA6F,EAAY,UAAU,OAAS,UAAY,CACvC,OAAO,KAAK,YAAY5D,EAAQ,OAAQjC,CAAQ,CACpD,EACA6F,EAAY,UAAU,UAAY,UAAY,CAC1C,IAAIE,EAAY,KAAK,wBAAwB9D,EAAQ,SAAS,EAC9D,OAAO,KAAK,QAAQ,YAAY8D,EAAW/C,CAAO,CACtD,EACA6C,EAAY,UAAU,SAAW,UAAY,CACzC,IAAIG,EAAa,KAAK,wBAAwB/D,EAAQ,QAAQ,EAC9D,OAAO,KAAK,QAAQ,OAAO+D,EAAYhG,CAAQ,CACnD,EACA6F,EAAY,UAAU,QAAU,UAAY,CACxC,IAAIG,EAAa,KAAK,wBAAwB/D,EAAQ,OAAO,EAC7D,OAAO,KAAK,QAAQ,YAAY+D,EAAYhG,CAAQ,CACxD,EACA6F,EAAY,UAAU,OAAS,UAAY,CACvC,IAAII,EAAc,KAAK,wBAAwBhE,EAAQ,MAAM,EAC7D,OAAO,KAAK,QAAQ,YAAYgE,EAAanG,CAAS,CAC1D,EACA+F,EAAY,UAAU,wBAA0B,SAAUhK,EAAM,CAC5D,IAAIqK,EACJ,YAAK,OAAO,SAAUC,EAAM,CACnBD,IACDA,EAAYC,EAAK,IAAItK,CAAI,EACjC,CAAC,EACMqK,CACX,EACAL,EAAY,UAAU,UAAY,SAAUO,EAAW,CACnD,KAAK,IAAInE,EAAQ,OAAQmE,CAAS,CACtC,EACAP,EAAY,UAAU,iBAAmB,SAAUQ,EAAkB,CACjE,IAAIC,EAAW,KAAK,kBAAiB,EAAG,UAAY,KAAK,QAAQ,IAAI,EAAE,EACvE,KAAK,IAAIrE,EAAQ,SAAUqE,CAAQ,EACnCA,EAAS,KAAKD,CAAgB,CAClC,EACAR,EAAY,UAAU,mBAAqB,SAAUU,EAAaC,EAAW,CACzE,IAAIF,EAAW,KAAK,SAAQ,EAC5B,OAAIA,aAAoBtG,GACpBsG,EAAS,OAAO,EAAGC,CAAW,EAC9BD,EAAS,KAAKE,CAAS,EAChB,IAEJ,EACX,EACAX,EAAY,UAAU,SAAW,SAAUY,EAAU,CACjD,IAAIC,EAAS,KAAK,kBAAiB,EAAG,OACtCA,EAAO,KAAKD,CAAQ,CACxB,EACAZ,EAAY,UAAU,YAAc,SAAUY,EAAU,CACpD,IAAIC,EAAS,KAAK,kBAAiB,EAAG,OAClCnJ,EAAQmJ,EAAO,QAAQD,CAAQ,EAC/BlJ,IAAU,QACVmJ,EAAO,OAAOnJ,CAAK,CAE3B,EACAsI,EAAY,UAAU,kBAAoB,SAAUhK,EAAM8K,EAAa,CACnE,IAAIC,EAAO,KAAK,kBAAiB,EAAG,KACpCA,EAAK,IAAI/K,EAAM8K,CAAW,CAC9B,EACAd,EAAY,UAAU,qBAAuB,SAAUzC,EAAK,CACxD,IAAIwD,EAAO,KAAK,kBAAiB,EAAG,KACpC,OAAOA,EAAK,UAAUxD,CAAG,CAC7B,EACAyC,EAAY,UAAU,kBAAoB,SAAUzC,EAAKuD,EAAa,CAClE,IAAIzD,EAAM,KAAK,qBAAqBE,CAAG,EACvC,YAAK,kBAAkBF,EAAKyD,CAAW,EAChCzD,CACX,EACA2C,EAAY,UAAU,WAAa,SAAUhK,EAAMgL,EAAY,CAC3D,IAAIC,EAAU,KAAK,kBAAiB,EAAG,QACvCA,EAAQ,IAAIjL,EAAMgL,CAAU,CAChC,EACAhB,EAAY,UAAU,cAAgB,SAAUzC,EAAK,CACjD,IAAI0D,EAAU,KAAK,kBAAiB,EAAG,QACvC,OAAOA,EAAQ,UAAU1D,CAAG,CAChC,EACAyC,EAAY,UAAU,WAAa,SAAUzC,EAAKyD,EAAY,CAC1D,IAAI3D,EAAM,KAAK,cAAcE,CAAG,EAChC,YAAK,WAAWF,EAAK2D,CAAU,EACxB3D,CACX,EACA2C,EAAY,UAAU,aAAe,SAAUhK,EAAMkL,EAAc,CAC/D,IAAIC,EAAY,KAAK,kBAAiB,EAAG,UACzCA,EAAU,IAAInL,EAAMkL,CAAY,CACpC,EACAlB,EAAY,UAAU,gBAAkB,SAAUzC,EAAK,CACnD,IAAI4D,EAAY,KAAK,kBAAiB,EAAG,UACzC,OAAOA,EAAU,UAAU5D,CAAG,CAClC,EACAyC,EAAY,UAAU,aAAe,SAAUzC,EAAK2D,EAAc,CAC9D,IAAI7D,EAAM,KAAK,gBAAgBE,CAAG,EAClC,YAAK,aAAaF,EAAK6D,CAAY,EAC5B7D,CACX,EACA2C,EAAY,UAAU,OAAS,SAAUoB,EAAS,CAC9CA,EAAQ,IAAI,EACZ,IAAIC,EAAS,KAAK,OAAM,EACpBA,GACAA,EAAO,OAAOD,CAAO,CAC7B,EACApB,EAAY,UAAU,UAAY,UAAY,CAC1C,GAAI,MAAK,WAET,KAAI5F,EAAU,KAAK,QACfkH,EAAc,KAAK,IAAIlF,EAAQ,QAAQ,EACvC2B,EAAW,KAAK,QAAQ,OAAOuD,CAAW,EAC1CvD,aAAoBJ,GACpB,KAAK,IAAIvB,EAAQ,SAAUhC,EAAQ,IAAI,CAACkH,CAAW,CAAC,CAAC,EAErD,KAAK,kBACL,KAAK,mBAAmB,KAAK,QAAQ,kCAAiC,EAAI,KAAK,QAAQ,kCAAkC,EAG7H,IAAIpB,EAAY,KAAK,wBAAwB9D,EAAQ,SAAS,EAC1DmF,EAAYnH,EAAQ,YAAY8F,EAAW/C,CAAO,GAAK/C,EAAQ,IAAI,EAAE,EACzE,KAAK,IAAIgC,EAAQ,UAAWmF,CAAS,EAErC,IAAIR,EAAOQ,EAAU,YAAYnF,EAAQ,KAAMe,CAAO,GAAK/C,EAAQ,IAAI,EAAE,EACzEmH,EAAU,IAAInF,EAAQ,KAAM2E,CAAI,EAEhC,IAAIE,EAAUM,EAAU,YAAYnF,EAAQ,QAASe,CAAO,GAAK/C,EAAQ,IAAI,EAAE,EAC/EmH,EAAU,IAAInF,EAAQ,QAAS6E,CAAO,EAEtC,IAAIE,EAAYI,EAAU,YAAYnF,EAAQ,UAAWe,CAAO,GAAK/C,EAAQ,IAAI,EAAE,EACnFmH,EAAU,IAAInF,EAAQ,UAAW+E,CAAS,EAC1C,IAAIN,EAAS,KAAK,OAAM,GAAMzG,EAAQ,IAAI,EAAE,EAC5C,KAAK,IAAIgC,EAAQ,OAAQyE,CAAM,EAC/B,KAAK,WAAa,GACtB,EACAb,EAAY,UAAU,kBAAoB,UAAY,CAClD,KAAK,UAAS,EACd,IAAIa,EAAS,KAAK,OAAM,EACpBU,EAAY,KAAK,UAAS,EAC1Bd,EAAW,KAAK,SAAQ,EAC5B,MAAO,CACH,OAAQI,EACR,UAAWU,EACX,SAAUd,EACV,KAAMc,EAAU,OAAOnF,EAAQ,KAAMe,CAAO,EAC5C,QAASoE,EAAU,OAAOnF,EAAQ,QAASe,CAAO,EAClD,UAAWoE,EAAU,OAAOnF,EAAQ,UAAWe,CAAO,CAClE,CACI,EACA6C,EAAY,mBAAqB,CAC7B,YACA,WACA,UACA,QACR,EACIA,EAAY,qBAAuB,SAAU5F,EAASoH,EAAQ,CAC1D,IAAI5D,EAAO,IAAI,IACf,OAAAA,EAAK,IAAIxB,EAAQ,KAAMA,EAAQ,IAAI,EACnCwB,EAAK,IAAIxB,EAAQ,OAAQoF,CAAM,EAC/B5D,EAAK,IAAIxB,EAAQ,UAAWhC,EAAQ,IAAI,CAAA,CAAE,CAAC,EAC3CwD,EAAK,IAAIxB,EAAQ,SAAUhC,EAAQ,IAAI,CAAC,EAAG,EAAG,IAAK,GAAG,CAAC,CAAC,EACjD,IAAI4F,EAAYpC,EAAMxD,EAAS,EAAK,CAC/C,EACA4F,EAAY,mBAAqB,SAAU5C,EAAKhD,EAAS6F,EAAkB,CACvE,OAAIA,IAAqB,SAAUA,EAAmB,IAC/C,IAAID,EAAY5C,EAAKhD,EAAS6F,CAAgB,CACzD,EACOD,CACX,GAAE7C,CAAO,EC9KLsE,IAAiC,UAAY,CAC7C,SAASA,EAAgBC,EAAKC,EAAM,CAChC,IAAIjM,EAAQ,KACZ,KAAK,iBAAmB,IAAI,IAE5B,KAAK,KAAO,SAAU2E,EAAQ,CAAE,OAAQA,aAAkB2F,GAActK,EAAM,YAAY2E,CAAM,EAC1FA,aAAkB8C,EAAUzH,EAAM,YAAY2E,CAAM,EAChDA,aAAkBF,EAAWzE,EAAM,aAAa2E,CAAM,EAClDA,aAAkBsD,EAAYjI,EAAM,cAAc2E,CAAM,EACpDA,aAAkB4D,EAASvI,EAAM,sBAAsB2E,CAAM,EACzDA,EAAO,MAAK,CAAK,EACvC,KAAK,YAAc,SAAUuH,EAAc,CAMvC,QALIC,EAAaD,EAAa,MAAK,EAI/BE,EAAqB9B,GAAY,mBAC5B1F,EAAM,EAAGa,EAAM2G,EAAmB,OAAQxH,EAAMa,EAAKb,IAAO,CACjE,IAAI+C,EAAMjB,EAAQ,GAAG0F,EAAmBxH,CAAG,CAAC,EACxCnD,EAAQ0K,EAAW,wBAAwBxE,CAAG,EAC9C,CAACwE,EAAW,IAAIxE,CAAG,GAAKlG,GACxB0K,EAAW,IAAIxE,EAAKlG,CAAK,CACjC,CAGA,OAAA0K,EAAW,OAAOzF,EAAQ,GAAG,QAAQ,CAAC,EAC/B1G,EAAM,YAAYmM,CAAU,CACvC,EACA,KAAK,YAAc,SAAUE,EAAc,CACvC,GAAIrM,EAAM,iBAAiB,IAAIqM,CAAY,EACvC,OAAOrM,EAAM,iBAAiB,IAAIqM,CAAY,EAElD,IAAIC,EAAaD,EAAa,MAAMrM,EAAM,IAAI,EAC9CA,EAAM,iBAAiB,IAAIqM,EAAcC,CAAU,EAEnD,QADIvE,EAAUsE,EAAa,QAAO,EACzBzH,EAAM,EAAGa,EAAMsC,EAAQ,OAAQnD,EAAMa,EAAKb,IAAO,CACtD,IAAIpE,EAAKuH,EAAQnD,CAAG,EAAG+C,EAAMnH,EAAG,CAAC,EAAGiB,EAAQjB,EAAG,CAAC,EAChD8L,EAAW,IAAI3E,EAAK3H,EAAM,KAAKyB,CAAK,CAAC,CACzC,CACA,OAAO6K,CACX,EACA,KAAK,aAAe,SAAUC,EAAe,CACzC,GAAIvM,EAAM,iBAAiB,IAAIuM,CAAa,EACxC,OAAOvM,EAAM,iBAAiB,IAAIuM,CAAa,EAEnD,IAAIC,EAAcD,EAAc,MAAMvM,EAAM,IAAI,EAChDA,EAAM,iBAAiB,IAAIuM,EAAeC,CAAW,EACrD,QAAS5H,EAAM,EAAGa,EAAM8G,EAAc,KAAI,EAAI3H,EAAMa,EAAKb,IAAO,CAC5D,IAAInD,EAAQ8K,EAAc,IAAI3H,CAAG,EACjC4H,EAAY,IAAI5H,EAAK5E,EAAM,KAAKyB,CAAK,CAAC,CAC1C,CACA,OAAO+K,CACX,EACA,KAAK,cAAgB,SAAUC,EAAgB,CAC3C,GAAIzM,EAAM,iBAAiB,IAAIyM,CAAc,EACzC,OAAOzM,EAAM,iBAAiB,IAAIyM,CAAc,EAEpD,IAAIC,EAAeD,EAAe,MAAMzM,EAAM,IAAI,EAClDA,EAAM,iBAAiB,IAAIyM,EAAgBC,CAAY,EAEvD,QADI3E,EAAU0E,EAAe,KAAK,QAAO,EAChC7H,EAAM,EAAGa,EAAMsC,EAAQ,OAAQnD,EAAMa,EAAKb,IAAO,CACtD,IAAIpE,EAAKuH,EAAQnD,CAAG,EAAG+C,EAAMnH,EAAG,CAAC,EAAGiB,EAAQjB,EAAG,CAAC,EAChDkM,EAAa,KAAK,IAAI/E,EAAK3H,EAAM,KAAKyB,CAAK,CAAC,CAChD,CACA,OAAOiL,CACX,EACA,KAAK,sBAAwB,SAAU3L,EAAK,CACxC,IAAI4L,EAAgB3M,EAAM,iBAAiB,IAAIe,CAAG,EAClD,GAAI,CAAC4L,EAAe,CAChB,IAAIC,EAAS5M,EAAM,KAAK,QAAO,EAC/BA,EAAM,iBAAiB,IAAIe,EAAK6L,CAAM,EACtC,IAAIC,EAAoB7M,EAAM,IAAI,OAAOe,CAAG,EAC5C,GAAI8L,EAAmB,CACnB,IAAIC,EAAS9M,EAAM,KAAK6M,CAAiB,EACzC7M,EAAM,KAAK,OAAO4M,EAAQE,CAAM,CACpC,CACJ,CACA,OAAO9M,EAAM,iBAAiB,IAAIe,CAAG,CACzC,EACA,KAAK,IAAMiL,EACX,KAAK,KAAOC,CAChB,CACA,OAAAF,EAAgB,IAAM,SAAUC,EAAKC,EAAM,CACvC,OAAO,IAAIF,EAAgBC,EAAKC,CAAI,CACxC,EACOF,CACX,GAAC,EC1GGgB,IAAoC,UAAY,CAChD,SAASA,EAAmBC,EAAY,CACpC,KAAK,YAAcA,EAAa,CAAC,CAACA,CAAU,CAAC,EAAI,CAAA,EACjD,KAAK,SAAW,EAChB,KAAK,YAAcA,EAAa,EAAI,CACxC,CACA,OAAAD,EAAmB,UAAU,SAAW,SAAUhM,EAAKiD,EAAQ,CAC3D,KAAK,OAAO,CAAE,IAAKjD,EAAK,OAAQiD,EAAQ,QAAS,GAAO,CAC5D,EACA+I,EAAmB,UAAU,gBAAkB,SAAUhM,EAAKkM,EAAsB,CAChF,KAAK,OAAO,CAAE,IAAKlM,EAAK,OAAQkM,EAAsB,QAAS,GAAM,CACzE,EACAF,EAAmB,UAAU,SAAW,UAAY,CAEhD,QADIG,EAAU;AAAA,EACLC,EAAW,EAAGC,EAAW,KAAK,YAAY,OAAQD,EAAWC,EAAUD,IAAY,CACxF,IAAIE,EAAQ,KAAK,YAAYF,CAAQ,EACrCD,GAAWG,EAAM,CAAC,EAAE,IAAI,aAAe,IAAMA,EAAM,OAAS;AAAA,EAC5D,QAASC,EAAW,EAAGC,EAAWF,EAAM,OAAQC,EAAWC,EAAUD,IAAY,CAC7E,IAAIE,EAAQH,EAAMC,CAAQ,EAC1BJ,GAAWO,EAAS,OAAOD,EAAM,MAAM,EAAG,GAAI,GAAG,EACjDN,GAAW,IACXA,GAAWO,EAAS,OAAOD,EAAM,IAAI,gBAAgB,EAAG,EAAG,GAAG,EAC9DN,GAAW,IACXA,GAAWM,EAAM,QAAU,IAAM,IACjCN,GAAW;AAAA,CACf,CACJ,CACA,OAAOA,CACX,EACAH,EAAmB,UAAU,YAAc,UAAY,CAEnD,QADIxL,EAAO,EACFqD,EAAM,EAAGa,EAAM,KAAK,YAAY,OAAQb,EAAMa,EAAKb,IAAO,CAC/D,IAAI8I,EAAa,KAAK,YAAY9I,CAAG,EACjC+I,EAAmBD,EAAW,OAC9BV,EAAaU,EAAW,CAAC,EAC7BnM,GAAQ,EACRA,GAAQ,OAAOyL,EAAW,IAAI,YAAY,EAAE,OAC5CzL,GAAQ,OAAOoM,CAAgB,EAAE,OACjCpM,GAAQ,GAAKoM,CACjB,CACA,OAAOpM,CACX,EACAwL,EAAmB,UAAU,cAAgB,SAAUhJ,EAAQC,EAAQ,CACnE,IAAIC,EAAgBD,EACpB,OAAAD,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BO,GAAU,KAAK,0BAA0B,KAAK,YAAaD,EAAQC,CAAM,EAClEA,EAASC,CACpB,EACA8I,EAAmB,UAAU,0BAA4B,SAAUa,EAAa7J,EAAQC,EAAQ,CAG5F,QAFIC,EAAgBD,EAChB6J,EAASD,EAAY,OAChBhJ,EAAM,EAAGA,EAAMiJ,EAAQjJ,IAAO,CACnC,IAAI8I,EAAa,KAAK,YAAY9I,CAAG,EACjCkJ,EAAoB,OAAOJ,EAAW,CAAC,EAAE,IAAI,YAAY,EAC7D1J,GAAUE,EAAqB4J,EAAmB/J,EAAQC,CAAM,EAChED,EAAOC,GAAQ,EAAIP,EAAU,MAC7B,IAAIsK,EAAc,OAAOL,EAAW,MAAM,EAC1C1J,GAAUE,EAAqB6J,EAAahK,EAAQC,CAAM,EAC1DD,EAAOC,GAAQ,EAAIP,EAAU,QAC7BO,GAAU,KAAK,sBAAsB0J,EAAY3J,EAAQC,CAAM,CACnE,CACA,OAAOA,EAASC,CACpB,EACA8I,EAAmB,UAAU,sBAAwB,SAAUhF,EAAShE,EAAQC,EAAQ,CAEpF,QADI6J,EAAS9F,EAAQ,OACZnD,EAAM,EAAGA,EAAMiJ,EAAQjJ,IAAO,CACnC,IAAI4I,EAAQzF,EAAQnD,CAAG,EACnBoJ,EAAcP,EAAS,OAAOD,EAAM,MAAM,EAAG,GAAI,GAAG,EACxDxJ,GAAUE,EAAqB8J,EAAajK,EAAQC,CAAM,EAC1DD,EAAOC,GAAQ,EAAIP,EAAU,MAC7B,IAAIwK,EAAWR,EAAS,OAAOD,EAAM,IAAI,gBAAgB,EAAG,EAAG,GAAG,EAClExJ,GAAUE,EAAqB+J,EAAUlK,EAAQC,CAAM,EACvDD,EAAOC,GAAQ,EAAIP,EAAU,MAC7BM,EAAOC,GAAQ,EAAIwJ,EAAM,QAAU/J,EAAU,EAAIA,EAAU,EAC3DM,EAAOC,GAAQ,EAAIP,EAAU,MAC7BM,EAAOC,GAAQ,EAAIP,EAAU,OACjC,CACA,MAAO,IAAKoK,CAChB,EACAd,EAAmB,UAAU,OAAS,SAAUmB,EAAW,CACvD,GAAI,KAAK,cAAgB,EAAG,CACxB,KAAK,YAAY,KAAK,CAACA,CAAS,CAAC,EACjC,KAAK,SAAW,EAChB,KAAK,YAAc,EACnB,MACJ,CACA,IAAIC,EAAQ,KAAK,YAAY,KAAK,QAAQ,EACtCC,EAAYD,EAAM,KAAK,YAAc,CAAC,EACtCD,EAAU,IAAI,aAAeE,EAAU,IAAI,aAAe,GAC1D,KAAK,YAAY,KAAK,CAACF,CAAS,CAAC,EACjC,KAAK,UAAY,EACjB,KAAK,YAAc,IAGnBC,EAAM,KAAKD,CAAS,EACpB,KAAK,aAAe,EAE5B,EACAnB,EAAmB,OAAS,UAAY,CACpC,OAAO,IAAIA,EAAmB,CAC1B,IAAKxE,EAAO,GAAG,EAAG,KAAK,EACvB,OAAQ,EACR,QAAS,EACrB,CAAS,CACL,EACAwE,EAAmB,YAAc,UAAY,CAAE,OAAO,IAAIA,CAAsB,EACzEA,CACX,GAAC,ECpHGsB,IAA4B,UAAY,CACxC,SAASA,EAAWC,EAAgB,CAChC,KAAK,eAAiB,OAAOA,CAAc,CAC/C,CACA,OAAAD,EAAW,UAAU,SAAW,UAAY,CACxC,MAAO;AAAA,EAAgB,KAAK,eAAiB;AAAA,MACjD,EACAA,EAAW,UAAU,YAAc,UAAY,CAC3C,MAAO,IAAK,KAAK,eAAe,MACpC,EACAA,EAAW,UAAU,cAAgB,SAAUtK,EAAQC,EAAQ,CAC3D,IAAIC,EAAgBD,EACpB,OAAAD,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BO,GAAUE,EAAqB,KAAK,eAAgBH,EAAQC,CAAM,EAClED,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EACtBO,EAASC,CACpB,EACAoK,EAAW,6BAA+B,SAAUrK,EAAQ,CACxD,OAAO,IAAIqK,EAAWrK,CAAM,CAChC,EACOqK,CACX,GAAC,ECpCGE,IAAgC,UAAY,CAC5C,SAASA,EAAerG,EAAM,CAC1B,KAAK,KAAOA,CAChB,CACA,OAAAqG,EAAe,UAAU,SAAW,UAAY,CAC5C,MAAO;AAAA,EAAc,KAAK,KAAK,SAAQ,CAC3C,EACAA,EAAe,UAAU,YAAc,UAAY,CAC/C,MAAO,GAAI,KAAK,KAAK,YAAW,CACpC,EACAA,EAAe,UAAU,cAAgB,SAAUxK,EAAQC,EAAQ,CAC/D,IAAIC,EAAgBD,EACpB,OAAAD,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BO,GAAU,KAAK,KAAK,cAAcD,EAAQC,CAAM,EACzCA,EAASC,CACpB,EACAsK,EAAe,GAAK,SAAUrG,EAAM,CAAE,OAAO,IAAIqG,EAAerG,CAAI,CAAG,EAChEqG,CACX,GAAC,ECpBGC,IAAiC,SAAU5O,EAAQ,CACnDC,EAAU2O,EAAiB5O,CAAM,EACjC,SAAS4O,EAAgB9J,EAAS+J,EAAS1F,EAAQ,CAC3CA,IAAW,SAAUA,EAAS,IAClC,IAAI/I,EAAQJ,EAAO,KAAK,KAAM8E,EAAQ,IAAI,CAAA,CAAE,EAAGqE,CAAM,GAAK,KAC1D,OAAA/I,EAAM,QAAUyO,EAChBzO,EAAM,QAAUA,EAAM,qBAAoB,EAC1CA,EAAM,cAAgBA,EAAM,qBAAoB,EAChDA,EAAM,KAAK,IAAI0G,EAAQ,GAAG,MAAM,EAAGA,EAAQ,GAAG,QAAQ,CAAC,EACvD1G,EAAM,KAAK,IAAI0G,EAAQ,GAAG,GAAG,EAAGnC,EAAU,GAAGvE,EAAM,QAAQ,MAAM,CAAC,EAClEA,EAAM,KAAK,IAAI0G,EAAQ,GAAG,OAAO,EAAGnC,EAAU,GAAGvE,EAAM,cAAc,MAAM,CAAC,EACrEA,CACX,CACA,OAAAwO,EAAgB,UAAU,gBAAkB,UAAY,CACpD,OAAO,KAAK,QAAQ,MACxB,EACAA,EAAgB,UAAU,MAAQ,SAAU9J,EAAS,CACjD,OAAO8J,EAAgB,sBAAsB9J,GAAW,KAAK,KAAK,QAAS,KAAK,QAAQ,QAAS,KAAK,MAAM,CAChH,EACA8J,EAAgB,UAAU,kBAAoB,UAAY,CAEtD,QADI/M,EAAQ,KAAK,cACRmD,EAAM,EAAGa,EAAM,KAAK,QAAQ,OAAQb,EAAMa,EAAKb,IAAO,CAC3D,IAAIpE,EAAK,KAAK,QAAQoE,CAAG,EAAGD,EAASnE,EAAG,CAAC,EACzCiB,GAASkD,EAAS;AAAA,CACtB,CACA,OAAOlD,CACX,EACA+M,EAAgB,UAAU,qBAAuB,UAAY,CAGzD,QAFIzK,EAAS,IAAI,WAAW,KAAK,yBAAwB,CAAE,EACvDC,EAASE,EAAqB,KAAK,cAAeH,EAAQ,CAAC,EACtDa,EAAM,EAAGa,EAAM,KAAK,QAAQ,OAAQb,EAAMa,EAAKb,IAAO,CAC3D,IAAIpE,EAAK,KAAK,QAAQoE,CAAG,EAAGD,EAASnE,EAAG,CAAC,EACzCwD,GAAUW,EAAO,cAAcZ,EAAQC,CAAM,EAC7CD,EAAOC,GAAQ,EAAIP,EAAU,OACjC,CACA,OAAOM,CACX,EACAyK,EAAgB,UAAU,yBAA2B,UAAY,CAC7D,OAAQ,KAAK,cAAc,OACvBE,GAAK,KAAK,OAAO,EAAE,CAAC,EACpBA,GAAK,KAAK,OAAO,EAAE,CAAC,EAAE,YAAW,EACjC,CACR,EACAF,EAAgB,UAAU,qBAAuB,UAAY,CAEzD,QADIG,EAAgB,GACX/J,EAAM,EAAGa,EAAM,KAAK,QAAQ,OAAQb,EAAMa,EAAKb,IAAO,CAC3D,IAAIpE,EAAK,KAAK,QAAQoE,CAAG,EAAG4D,EAAehI,EAAG,CAAC,EAAGwD,EAASxD,EAAG,CAAC,EAC/DmO,GAAiBnG,EAAe,IAAMxE,EAAS,GACnD,CACA,OAAO2K,CACX,EACAH,EAAgB,UAAU,qBAAuB,UAAY,CAGzD,QAFIxK,EAAS,EACT4K,EAAU,IAAI,MAAM,KAAK,QAAQ,MAAM,EAClChK,EAAM,EAAGa,EAAM,KAAK,QAAQ,OAAQb,EAAMa,EAAKb,IAAO,CAC3D,IAAIpE,EAAK,KAAK,QAAQoE,CAAG,EAAG7D,EAAMP,EAAG,CAAC,EAAGmE,EAASnE,EAAG,CAAC,EACtDoO,EAAQhK,CAAG,EAAI,CAAC7D,EAAI,aAAciD,CAAM,EACxCA,GAAUW,EAAO,YAAW,EAAK,CACrC,CACA,OAAOiK,CACX,EACAJ,EAAgB,sBAAwB,SAAU9J,EAAS+J,EAAS1F,EAAQ,CACxE,OAAIA,IAAW,SAAUA,EAAS,IAC3B,IAAIyF,EAAgB9J,EAAS+J,EAAS1F,CAAM,CACvD,EACOyF,CACX,GAAE1F,EAAc,EChEZ+F,IAA2B,UAAY,CACvC,SAASA,EAAUnK,EAASoK,EAAgB,CACxC,IAAI9O,EAAQ,KACZ,KAAK,cAAgB,EACrB,KAAK,kBAAoB,SAAU+O,EAAG,CAClC,OAAA/O,EAAM,eAAiB+O,EAChB/O,EAAM,cAAgBA,EAAM,iBAAmB,CAC1D,EACA,KAAK,QAAU0E,EACf,KAAK,eAAiBoK,CAC1B,CACA,OAAAD,EAAU,UAAU,kBAAoB,UAAY,CAChD,OAAOG,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIxO,EAAIe,EAAM0N,EAAQC,EAAiBC,EAAMC,EAAaC,EAASrL,EAAQD,EAAQa,EAAKa,EAAKhF,EAAIM,EAAK4D,EAAQ6D,EAAcC,EAAkBsG,EAC9I,OAAOO,EAAY,KAAM,SAAUnO,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GAAG,MAAO,CAAC,EAAa,KAAK,kBAAiB,CAAE,EACrD,IAAK,GACDX,EAAKW,EAAG,KAAI,EAAII,EAAOf,EAAG,KAAMyO,EAASzO,EAAG,OAAQ0O,EAAkB1O,EAAG,gBAAiB2O,EAAO3O,EAAG,KAAM4O,EAAc5O,EAAG,YAAa6O,EAAU7O,EAAG,QACrJwD,EAAS,EACTD,EAAS,IAAI,WAAWxC,CAAI,EAC5ByC,GAAUiL,EAAO,cAAclL,EAAQC,CAAM,EAC7CD,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BmB,EAAM,EAAGa,EAAMyJ,EAAgB,OAC/B/N,EAAG,MAAQ,EACf,IAAK,GACD,OAAMyD,EAAMa,GACZhF,EAAKyO,EAAgBtK,CAAG,EAAG7D,EAAMN,EAAG,CAAC,EAAGkE,EAASlE,EAAG,CAAC,EACrD+H,EAAe,OAAOzH,EAAI,YAAY,EACtCiD,GAAUE,EAAqBsE,EAAczE,EAAQC,CAAM,EAC3DD,EAAOC,GAAQ,EAAIP,EAAU,MAC7BgF,EAAmB,OAAO1H,EAAI,gBAAgB,EAC9CiD,GAAUE,EAAqBuE,EAAkB1E,EAAQC,CAAM,EAC/DD,EAAOC,GAAQ,EAAIP,EAAU,MAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BO,GAAUW,EAAO,cAAcZ,EAAQC,CAAM,EAC7CD,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,EAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,QAC7BsL,EAAIpK,aAAkB6J,GAAkB7J,EAAO,gBAAe,EAAK,EAC9D,KAAK,kBAAkBoK,CAAC,EACtB,CAAC,EAAaQ,IAAa,EADK,CAAC,EAAa,CAAC,GAvB7B,CAAC,EAAa,CAAC,EAyB5C,IAAK,GACDpO,EAAG,KAAI,EACPA,EAAG,MAAQ,EACf,IAAK,GACD,OAAAyD,IACO,CAAC,EAAa,CAAC,EAC1B,IAAK,GACD,OAAIuK,IACAnL,GAAUmL,EAAK,cAAcpL,EAAQC,CAAM,EAC3CD,EAAOC,GAAQ,EAAIP,EAAU,SAE7B2L,IACApL,GAAUoL,EAAY,cAAcrL,EAAQC,CAAM,EAClDD,EAAOC,GAAQ,EAAIP,EAAU,QAC7BM,EAAOC,GAAQ,EAAIP,EAAU,SAEjCO,GAAUqL,EAAQ,cAActL,EAAQC,CAAM,EACvC,CAAC,EAAcD,CAAM,CACpD,CACY,CAAC,CACL,CAAC,CACL,EACA8K,EAAU,UAAU,0BAA4B,SAAUrO,EAAI,CAC1D,IAAIO,EAAMP,EAAG,CAAC,EAAGmE,EAASnE,EAAG,CAAC,EAC1BgP,EAAUzO,EAAI,YAAW,EAAK,EAC9B0O,EAAa9K,EAAO,YAAW,EAAK,EACxC,OAAO6K,EAAUC,CACrB,EACAZ,EAAU,UAAU,kBAAoB,UAAY,CAChD,OAAO,KAAK,QAAQ,IAAI,CACpB,KAAM,KAAK,QAAQ,oBAAsB,EACzC,KAAM,KAAK,QAAQ,YAAY,KAC/B,QAAS,KAAK,QAAQ,YAAY,QAClC,KAAM,KAAK,QAAQ,YAAY,KAC/B,GAAI,KAAK,QAAQ,YAAY,EACzC,CAAS,CACL,EACAA,EAAU,UAAU,kBAAoB,UAAY,CAChD,OAAOG,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIC,EAAQ1N,EAAM4N,EAAMD,EAAiBtK,EAAKa,EAAKiK,EAAgB3O,EAAK4O,EAAYP,EAAaC,EACjG,OAAOC,EAAY,KAAM,SAAU9O,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GACDyO,EAASvL,GAAU,WAAW,EAAG,CAAC,EAClCnC,EAAO0N,EAAO,YAAW,EAAK,EAC9BE,EAAOpC,GAAmB,OAAM,EAChCmC,EAAkB,KAAK,QAAQ,yBAAwB,EACvDtK,EAAM,EAAGa,EAAMyJ,EAAgB,OAC/B1O,EAAG,MAAQ,EACf,IAAK,GACD,OAAMoE,EAAMa,GACZiK,EAAiBR,EAAgBtK,CAAG,EACpC7D,EAAM2O,EAAe,CAAC,EACtBP,EAAK,SAASpO,EAAKQ,CAAI,EACvBA,GAAQ,KAAK,0BAA0BmO,CAAc,EAChD,KAAK,kBAAkB,CAAC,EACtB,CAAC,EAAaH,IAAa,EADK,CAAC,EAAa,CAAC,GAL7B,CAAC,EAAa,CAAC,EAO5C,IAAK,GACD/O,EAAG,KAAI,EACPA,EAAG,MAAQ,EACf,IAAK,GACD,OAAAoE,IACO,CAAC,EAAa,CAAC,EAC1B,IAAK,GACD,OAAA+K,EAAapO,EACbA,GAAQ4N,EAAK,YAAW,EAAK,EAC7BC,EAAcb,GAAe,GAAG,KAAK,kBAAiB,CAAE,EACxDhN,GAAQ6N,EAAY,YAAW,EAAK,EACpCC,EAAUhB,GAAW,6BAA6BsB,CAAU,EAC5DpO,GAAQ8N,EAAQ,YAAW,EACpB,CAAC,EAAc,CAAE,KAAM9N,EAAM,OAAQ0N,EAAQ,gBAAiBC,EAAiB,KAAMC,EAAM,YAAaC,EAAa,QAASC,EAAS,CACtK,CACY,CAAC,CACL,CAAC,CACL,EACAR,EAAU,WAAa,SAAUnK,EAASoK,EAAgB,CACtD,OAAO,IAAID,EAAUnK,EAASoK,CAAc,CAChD,EACOD,CACX,GAAC,ECzIGe,IAAkC,SAAUhQ,EAAQ,CACpDC,EAAU+P,EAAkBhQ,CAAM,EAClC,SAASgQ,EAAiBC,EAAM,CAC5B,IAAI7P,EAAQJ,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAI,EAAM,KAAO6P,EACN7P,CACX,CACA,OAAA4P,EAAiB,UAAU,MAAQ,UAAY,CAC3C,OAAOA,EAAiB,GAAG,KAAK,KAAK,MAAK,CAAE,CAChD,EACAA,EAAiB,UAAU,SAAW,UAAY,CAC9C,MAAO,oBAAsB,KAAK,KAAK,OAAS,SACpD,EACAA,EAAiB,UAAU,YAAc,UAAY,CACjD,OAAO,KAAK,KAAK,MACrB,EACAA,EAAiB,UAAU,cAAgB,SAAU7L,EAAQC,EAAQ,CAEjE,QADI6J,EAAS,KAAK,KAAK,OACdjJ,EAAM,EAAGA,EAAMiJ,EAAQjJ,IAC5Bb,EAAOC,GAAQ,EAAI,KAAK,KAAKY,CAAG,EAEpC,OAAOiJ,CACX,EACA+B,EAAiB,GAAK,SAAUC,EAAM,CAAE,OAAO,IAAID,EAAiBC,CAAI,CAAG,EACpED,CACX,GAAEzL,CAAS,ECtBA2L,GACV,SAAUA,EAAW,CAClBA,EAAUA,EAAU,QAAa,CAAC,EAAI,UACtCA,EAAUA,EAAU,aAAkB,CAAC,EAAI,eAC3CA,EAAUA,EAAU,WAAgB,CAAC,EAAI,YAC7C,GAAGA,IAAcA,EAAY,CAAA,EAAG,EAM7B,IAACC,IAAmC,SAAUnQ,EAAQ,CACrDC,EAAUkQ,EAAmBnQ,CAAM,EACnC,SAASmQ,EAAkB7H,EAAMH,EAASgB,EAAQ,CAC1CA,IAAW,SAAUA,EAAS,IAClC,IAAI/I,EAAQJ,EAAO,KAAK,KAAMsI,EAAMa,CAAM,GAAK,KAI/C,OAAA/I,EAAM,aAAe,UAAY,CAG7B,QAFI4N,EAAc,CAAA,EACdD,EAAmB,EACd/I,EAAM,EAAGa,EAAMzF,EAAM,QAAQ,OAAQ4E,EAAMa,EAAKb,IAAO,CAC5D,IAAIsJ,EAAYlO,EAAM,QAAQ4E,CAAG,EAC7BwJ,EAAYpO,EAAM,QAAQ4E,EAAM,CAAC,EACjCA,IAAQ,EACRgJ,EAAY,KAAKM,EAAU,IAAI,YAAY,EAEtCA,EAAU,IAAI,aAAeE,EAAU,IAAI,aAAe,IAC/DR,EAAY,KAAKD,CAAgB,EACjCC,EAAY,KAAKM,EAAU,IAAI,YAAY,EAC3CP,EAAmB,GAEvBA,GAAoB,CACxB,CACA,OAAAC,EAAY,KAAKD,CAAgB,EAC1BC,CACX,EACA5N,EAAM,mBAAqB,UAAY,CAEnC,QADIgQ,EAAc,IAAI,MAAMhQ,EAAM,QAAQ,MAAM,EACvC4E,EAAM,EAAGa,EAAMzF,EAAM,QAAQ,OAAQ4E,EAAMa,EAAKb,IAAO,CAC5D,IAAI4I,EAAQxN,EAAM,QAAQ4E,CAAG,EAC7B,GAAI4I,EAAM,OAASsC,EAAU,QAAS,CAClC,IAAInG,EAAO6D,EAAM,KAAMP,EAAuBO,EAAM,qBAAsBzM,EAAMyM,EAAM,IACtFwC,EAAYpL,CAAG,EAAI,CAAC+E,EAAMsD,EAAsBlM,EAAI,gBAAgB,CACxE,CACA,GAAIyM,EAAM,OAASsC,EAAU,aAAc,CACvC,IAAInG,EAAO6D,EAAM,KAAMxJ,EAASwJ,EAAM,OAAQzM,EAAMyM,EAAM,IAC1DwC,EAAYpL,CAAG,EAAI,CAAC+E,EAAM3F,EAAQjD,EAAI,gBAAgB,CAC1D,CACA,GAAIyM,EAAM,OAASsC,EAAU,WAAY,CACrC,IAAInG,EAAO6D,EAAM,KAAMyC,EAAkBzC,EAAM,gBAAiBxL,EAAQwL,EAAM,MAC9EwC,EAAYpL,CAAG,EAAI,CAAC+E,EAAMsG,EAAgB,aAAcjO,CAAK,CACjE,CACJ,CACA,OAAOgO,CACX,EACAhQ,EAAM,0BAA4B,UAAY,CAG1C,QAFIgQ,EAAchQ,EAAM,iBAAiB,OAAM,EAC3CkQ,EAAS,CAAC,EAAG,EAAG,CAAC,EACZtL,EAAM,EAAGa,EAAMuK,EAAY,OAAQpL,EAAMa,EAAKb,IAAO,CAC1D,IAAIpE,EAAKwP,EAAYpL,CAAG,EAAGuL,EAAQ3P,EAAG,CAAC,EAAG4P,EAAS5P,EAAG,CAAC,EAAG6P,EAAQ7P,EAAG,CAAC,EAClE8P,EAAYC,GAAYJ,CAAK,EAC7BK,EAAaD,GAAYH,CAAM,EAC/BK,EAAYF,GAAYF,CAAK,EAC7BC,EAAYJ,EAAO,CAAC,IACpBA,EAAO,CAAC,EAAII,GACZE,EAAaN,EAAO,CAAC,IACrBA,EAAO,CAAC,EAAIM,GACZC,EAAYP,EAAO,CAAC,IACpBA,EAAO,CAAC,EAAIO,EACpB,CACA,OAAOP,CACX,EACAlQ,EAAM,QAAU+H,GAAW,CAAA,EAC3B/H,EAAM,iBAAmBkJ,GAAM,YAAYlJ,EAAM,kBAAkB,EACnEA,EAAM,mBAAqBkJ,GAAM,YAAYlJ,EAAM,yBAAyB,EAC5EA,EAAM,WAAakJ,GAAM,YAAYlJ,EAAM,YAAY,EACvDkI,EAAK,IAAIxB,EAAQ,GAAG,MAAM,EAAGA,EAAQ,GAAG,MAAM,CAAC,EACxC1G,CACX,CACA,OAAA+P,EAAkB,UAAU,gBAAkB,SAAUhP,EAAKkM,EAAsB,CAC/E,IAAItD,EAAOmG,EAAU,QACrB,KAAK,QAAQ,KAAK,CAAE,KAAMnG,EAAM,IAAK5I,EAAK,qBAAsBkM,EAAsB,EACtF,KAAK,iBAAiB,WAAU,EAChC,KAAK,mBAAmB,WAAU,EAClC,KAAK,WAAW,WAAU,EAC1B,KAAK,cAAc,WAAU,CACjC,EACA8C,EAAkB,UAAU,qBAAuB,SAAUhP,EAAKiD,EAAQ,CACtE,IAAI2F,EAAOmG,EAAU,aACrB,KAAK,QAAQ,KAAK,CAAE,KAAMnG,EAAM,IAAK5I,EAAK,OAAQiD,EAAQ,EAC1D,KAAK,iBAAiB,WAAU,EAChC,KAAK,mBAAmB,WAAU,EAClC,KAAK,WAAW,WAAU,EAC1B,KAAK,cAAc,WAAU,CACjC,EACA+L,EAAkB,UAAU,mBAAqB,SAAUhP,EAAKkP,EAAiBjO,EAAO,CACpF,IAAI2H,EAAOmG,EAAU,WACrB,KAAK,QAAQ,KAAK,CAAE,KAAMnG,EAAM,IAAK5I,EAAK,gBAAiBkP,EAAiB,MAAOjO,CAAK,CAAE,EAC1F,KAAK,iBAAiB,WAAU,EAChC,KAAK,mBAAmB,WAAU,EAClC,KAAK,WAAW,WAAU,EAC1B,KAAK,cAAc,WAAU,CACjC,EACA+N,EAAkB,UAAU,MAAQ,SAAUrL,EAAS,CACnD,IAAIlE,EAAK,KAAM0H,EAAO1H,EAAG,KAAMuH,EAAUvH,EAAG,QAASuI,EAASvI,EAAG,OACjE,OAAOuP,EAAkB,GAAG7H,EAAK,MAAMxD,CAAO,EAAGqD,EAAQ,MAAK,EAAIgB,CAAM,CAC5E,EACAgH,EAAkB,UAAU,kBAAoB,UAAY,CAIxD,QAHIC,EAAc,KAAK,iBAAiB,OAAM,EAC1CU,EAAa,KAAK,mBAAmB,OAAM,EAC3CjP,EAAQ,GACH6L,EAAW,EAAGqD,EAAaX,EAAY,OAAQ1C,EAAWqD,EAAYrD,IAAY,CAKvF,QAJI9M,EAAKwP,EAAY1C,CAAQ,EAAG6C,EAAQ3P,EAAG,CAAC,EAAG4P,EAAS5P,EAAG,CAAC,EAAG6P,EAAQ7P,EAAG,CAAC,EACvEoQ,EAAaC,GAAaC,GAASX,CAAK,CAAC,EACzCY,EAAcF,GAAaC,GAASV,CAAM,CAAC,EAC3CY,EAAaH,GAAaC,GAAST,CAAK,CAAC,EACpCzL,EAAM8L,EAAW,CAAC,EAAI,EAAG9L,GAAO,EAAGA,IACxCnD,IAAUmP,EAAWhM,CAAG,GAAK,GAAG,SAAS,CAAC,EAE9C,QAASA,EAAM8L,EAAW,CAAC,EAAI,EAAG9L,GAAO,EAAGA,IACxCnD,IAAUsP,EAAYnM,CAAG,GAAK,GAAG,SAAS,CAAC,EAE/C,QAASA,EAAM8L,EAAW,CAAC,EAAI,EAAG9L,GAAO,EAAGA,IACxCnD,IAAUuP,EAAWpM,CAAG,GAAK,GAAG,SAAS,CAAC,CAElD,CACA,OAAOnD,CACX,EACAsO,EAAkB,UAAU,qBAAuB,UAAY,CAK3D,QAJIC,EAAc,KAAK,iBAAiB,OAAM,EAC1CU,EAAa,KAAK,mBAAmB,OAAM,EAC3C3M,EAAS,IAAI,WAAW,KAAK,yBAAwB,CAAE,EACvDC,EAAS,EACJsJ,EAAW,EAAGqD,EAAaX,EAAY,OAAQ1C,EAAWqD,EAAYrD,IAAY,CAKvF,QAJI9M,EAAKwP,EAAY1C,CAAQ,EAAG6C,EAAQ3P,EAAG,CAAC,EAAG4P,EAAS5P,EAAG,CAAC,EAAG6P,EAAQ7P,EAAG,CAAC,EACvEoQ,EAAaC,GAAaC,GAASX,CAAK,CAAC,EACzCY,EAAcF,GAAaC,GAASV,CAAM,CAAC,EAC3CY,EAAaH,GAAaC,GAAST,CAAK,CAAC,EACpCzL,EAAM8L,EAAW,CAAC,EAAI,EAAG9L,GAAO,EAAGA,IACxCb,EAAOC,GAAQ,EAAI4M,EAAWhM,CAAG,GAAK,EAE1C,QAASA,EAAM8L,EAAW,CAAC,EAAI,EAAG9L,GAAO,EAAGA,IACxCb,EAAOC,GAAQ,EAAI+M,EAAYnM,CAAG,GAAK,EAE3C,QAASA,EAAM8L,EAAW,CAAC,EAAI,EAAG9L,GAAO,EAAGA,IACxCb,EAAOC,GAAQ,EAAIgN,EAAWpM,CAAG,GAAK,CAE9C,CACA,OAAOb,CACX,EACAgM,EAAkB,UAAU,yBAA2B,UAAY,CAC/D,IAAIW,EAAa,KAAK,mBAAmB,OAAM,EAC3CO,EAAaC,GAAIR,CAAU,EAC/B,OAAOO,EAAa,KAAK,QAAQ,MACrC,EACAlB,EAAkB,UAAU,WAAa,UAAY,CACjDnQ,EAAO,UAAU,WAAW,KAAK,IAAI,EACrC,IAAI8Q,EAAa,KAAK,mBAAmB,OAAM,EAC3C1O,EAAQ,KAAK,WAAW,OAAM,EAC9B0C,EAAU,KAAK,KAAK,QACxB,KAAK,KAAK,IAAIgC,EAAQ,GAAG,GAAG,EAAGhC,EAAQ,IAAIgM,CAAU,CAAC,EACtD,KAAK,KAAK,IAAIhK,EAAQ,GAAG,OAAO,EAAGhC,EAAQ,IAAI1C,CAAK,CAAC,CACzD,EACA+N,EAAkB,OAAS,SAAU7H,EAAMa,EAAQ,CAC3CA,IAAW,SAAUA,EAAS,IAClC,IAAI7H,EAAS,IAAI6O,EAAkB7H,EAAM,CAAA,EAAIa,CAAM,EACnD,OAAA7H,EAAO,gBAAgBqH,EAAO,GAAG,EAAG,KAAK,EAAG,CAAC,EACtCrH,CACX,EACA6O,EAAkB,GAAK,SAAU7H,EAAMH,EAASgB,EAAQ,CACpD,OAAIA,IAAW,SAAUA,EAAS,IAC3B,IAAIgH,EAAkB7H,EAAMH,EAASgB,CAAM,CACtD,EACOgH,CACX,GAAEjH,EAAc,ECzKZqI,IAAiC,SAAUvR,EAAQ,CACnDC,EAAUsR,EAAiBvR,CAAM,EACjC,SAASuR,EAAgBzM,EAASoK,EAAgBsC,EAAeC,EAAkB,CAC/E,IAAIrR,EAAQJ,EAAO,KAAK,KAAM8E,EAASoK,CAAc,GAAK,KAC1D,OAAA9O,EAAM,cAAgBoR,EACtBpR,EAAM,iBAAmBqR,EAClBrR,CACX,CACA,OAAAmR,EAAgB,UAAU,kBAAoB,UAAY,CACtD,OAAOnC,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIxG,EAAcyG,EAAQ1N,EAAM+P,EAAYC,EAAqBC,EAAmBC,EAAkBvC,EAAiBtK,EAAKa,EAAKiK,EAAgB3O,EAAK4D,EAAQ+M,EAAmBvD,EAAO8B,EAAiBrL,EAAKa,EAAK0I,EAAOpN,EAAK4Q,EAAcC,EAAejC,EAAYN,EACxQ,OAAOC,EAAY,KAAM,SAAU9O,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GACDgI,EAAe,KAAK,QAAQ,oBAAsB,EAClDyG,EAASvL,GAAU,WAAW,EAAG,CAAC,EAClCnC,EAAO0N,EAAO,YAAW,EAAK,EAC9BqC,EAAavB,GAAkB,OAAO,KAAK,kBAAiB,EAAI,KAAK,aAAa,EAClFwB,EAAsB,CAAA,EACtBC,EAAoB,CAAA,EACpBC,EAAmB,CAAA,EACnBvC,EAAkB,KAAK,QAAQ,yBAAwB,EACvDtK,EAAM,EAAGa,EAAMyJ,EAAgB,OAC/B1O,EAAG,MAAQ,EACf,IAAK,GACD,OAAMoE,EAAMa,GACZiK,EAAiBR,EAAgBtK,CAAG,EACpC7D,EAAM2O,EAAe,CAAC,EAAG/K,EAAS+K,EAAe,CAAC,EAClDgC,EAAoB3Q,IAAQ,KAAK,QAAQ,YAAY,SACjD4D,aAAkBsD,GAClBtD,aAAkBiL,IAClB7O,EAAI,mBAAqB,EACxB2Q,GACLH,EAAoB,KAAK7B,CAAc,EACvC4B,EAAW,qBAAqBvQ,EAAKQ,CAAI,EACzCA,GAAQ,KAAK,0BAA0BmO,CAAc,EAChD,KAAK,kBAAkB,CAAC,EACtB,CAAC,EAAaH,IAAa,EADK,CAAC,EAAa,CAAC,GAJvB,CAAC,EAAa,CAAC,GAPrB,CAAC,EAAa,CAAC,EAa5C,IAAK,GACD/O,EAAG,KAAI,EACPA,EAAG,MAAQ,EACf,IAAK,GAAG,MAAO,CAAC,EAAa,CAAC,EAC9B,IAAK,GACD2N,EAAQO,GAAK8C,CAAiB,EAC9BvB,EAAkBvB,GAAK+C,CAAgB,GACnC,CAACtD,GAASA,EAAM,OAAS,KAAK,mBAAqB,KACnDA,EAAQ,CAAA,EACRqD,EAAkB,KAAKrD,CAAK,EAC5B8B,EAAkB1H,EAAO,GAAGC,GAAc,EAC1CiJ,EAAiB,KAAKxB,CAAe,GAEzCqB,EAAW,mBAAmBvQ,EAAKkP,EAAiB9B,EAAM,MAAM,EAChEA,EAAM,KAAKuB,CAAc,EACzBlP,EAAG,MAAQ,EACf,IAAK,GACD,OAAAoE,IACO,CAAC,EAAa,CAAC,EAC1B,IAAK,GACDA,EAAM,EAAGa,EAAM+L,EAAkB,OACjChR,EAAG,MAAQ,EACf,IAAK,GACD,OAAMoE,EAAMa,GACZ0I,EAAQqD,EAAkB5M,CAAG,EAC7B7D,EAAM0Q,EAAiB7M,CAAG,EAC1B+M,EAAenD,GAAgB,sBAAsB,KAAK,QAASL,EAAO,KAAK,aAAa,EAC5FmD,EAAW,qBAAqBvQ,EAAKQ,CAAI,EACzCA,GAAQ,KAAK,0BAA0B,CAACR,EAAK4Q,CAAY,CAAC,EAC1DJ,EAAoB,KAAK,CAACxQ,EAAK4Q,CAAY,CAAC,EACvC,KAAK,kBAAkBxD,EAAM,MAAM,EACjC,CAAC,EAAaoB,IAAa,EADgB,CAAC,EAAa,CAAC,GAPxC,CAAC,EAAa,EAAE,EAS7C,IAAK,GACD/O,EAAG,KAAI,EACPA,EAAG,MAAQ,EACf,IAAK,GACD,OAAAoE,IACO,CAAC,EAAa,CAAC,EAC1B,IAAK,IACD,OAAAgN,EAAgBrJ,EAAO,GAAGC,GAAc,EACxC8I,EAAW,KAAK,IAAI5K,EAAQ,GAAG,MAAM,EAAGnC,EAAU,GAAGiE,CAAY,CAAC,EAClE8I,EAAW,qBAAqBM,EAAerQ,CAAI,EACnDoO,EAAapO,EACbA,GAAQ,KAAK,0BAA0B,CAACqQ,EAAeN,CAAU,CAAC,EAClEC,EAAoB,KAAK,CAACK,EAAeN,CAAU,CAAC,EACpDjC,EAAUhB,GAAW,6BAA6BsB,CAAU,EAC5DpO,GAAQ8N,EAAQ,YAAW,EACpB,CAAC,EAAc,CAAE,KAAM9N,EAAM,OAAQ0N,EAAQ,gBAAiBsC,EAAqB,QAASlC,CAAO,CAAE,CACpI,CACY,CAAC,CACL,CAAC,CACL,EACA8B,EAAgB,WAAa,SAAUzM,EAASoK,EAAgBsC,EAAeC,EAAkB,CAC7F,OAAID,IAAkB,SAAUA,EAAgB,IAC5CC,IAAqB,SAAUA,EAAmB,IAC/C,IAAIF,EAAgBzM,EAASoK,EAAgBsC,EAAeC,CAAgB,CACvF,EACOF,CACX,GAAEtC,EAAS,ECvGPgD,GAA8B,SAAUjS,EAAQ,CAChDC,EAAUgS,EAAcjS,CAAM,EAC9B,SAASiS,EAAapQ,EAAO,CACzB,IAAIzB,EAAQJ,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAI,EAAM,MAAQyB,EACPzB,CACX,CACA,OAAA6R,EAAa,UAAU,QAAU,UAAY,CAQzC,QANIxL,EAAM,KAAK,OAAS,KAAK,MAAM,OAAS,IAAM,EAAI,IAAM,IACxDyL,EAAYzL,EAAI,OAChBW,EAAQ,IAAI,WAAWX,EAAI,OAAS,CAAC,EACrC0L,EAAY,EACZC,EAAc,EAEXD,EAAYD,GAAW,CAC1B,IAAI9O,EAAO,SAASqD,EAAI,UAAU0L,EAAWA,EAAY,CAAC,EAAG,EAAE,EAC/D/K,EAAMgL,CAAW,EAAIhP,EACrB+O,GAAa,EACbC,GAAe,CACnB,CACA,OAAOhL,CACX,EACA6K,EAAa,UAAU,WAAa,UAAY,CAC5C,IAAI7K,EAAQ,KAAK,QAAO,EACxB,OAAIiL,GAAYjL,CAAK,EACVkL,GAAYlL,CAAK,EACrBmL,GAAqBnL,CAAK,CACrC,EACA6K,EAAa,UAAU,WAAa,UAAY,CAC5C,IAAIO,EAAO,KAAK,WAAU,EACtBC,EAAOC,GAAUF,CAAI,EACzB,GAAI,CAACC,EACD,MAAM,IAAI7Q,GAA0B4Q,CAAI,EAC5C,OAAOC,CACX,EACAR,EAAa,UAAU,SAAW,UAAY,CAC1C,OAAO,KAAK,KAChB,EACAA,EAAa,UAAU,MAAQ,UAAY,CACvC,OAAOA,EAAa,GAAG,KAAK,KAAK,CACrC,EACAA,EAAa,UAAU,SAAW,UAAY,CAC1C,MAAO,IAAM,KAAK,MAAQ,GAC9B,EACAA,EAAa,UAAU,YAAc,UAAY,CAC7C,OAAO,KAAK,MAAM,OAAS,CAC/B,EACAA,EAAa,UAAU,cAAgB,SAAU9N,EAAQC,EAAQ,CAC7D,OAAAD,EAAOC,GAAQ,EAAIP,EAAU,SAC7BO,GAAUE,EAAqB,KAAK,MAAOH,EAAQC,CAAM,EACzDD,EAAOC,GAAQ,EAAIP,EAAU,YACtB,KAAK,MAAM,OAAS,CAC/B,EACAoO,EAAa,GAAK,SAAUpQ,EAAO,CAAE,OAAO,IAAIoQ,EAAapQ,CAAK,CAAG,EACrEoQ,EAAa,SAAW,SAAUpQ,EAAO,CAGrC,QAFI8Q,EAAUC,GAAY/Q,CAAK,EAC3B4E,EAAM,GACDzB,EAAM,EAAGa,EAAM8M,EAAQ,OAAQ3N,EAAMa,EAAKb,IAC/CyB,GAAOoM,GAAuBF,EAAQ3N,CAAG,EAAG,CAAC,EAEjD,OAAO,IAAIiN,EAAaxL,CAAG,CAC/B,EACOwL,CACX,GAAE1N,CAAS,EC7DPuO,IAAsC,UAAY,CAClD,SAASA,EAAqBC,EAAUC,EAAY,CAEhD,KAAK,SAAYD,IAAaE,GAAU,aAAeC,GAAU,aAC3DH,IAAaE,GAAU,OAASC,GAAU,OACtCA,GAAU,QACpB,KAAK,KAAOzH,GAAK,KAAKsH,CAAQ,EAC9B,KAAK,SAAW,KAAK,KAAK,SAC1B,KAAK,WAAaC,CACtB,CAMA,OAAAF,EAAqB,UAAU,WAAa,SAAUN,EAAM,CAGxD,QAFIW,EAAS,KAAK,mBAAmBX,CAAI,EACrCY,EAAW,IAAI,MAAMD,EAAO,MAAM,EAC7BnO,EAAM,EAAGa,EAAMsN,EAAO,OAAQnO,EAAMa,EAAKb,IAC9CoO,EAASpO,CAAG,EAAImC,GAAYgM,EAAOnO,CAAG,EAAE,IAAI,EAEhD,OAAOiN,EAAa,GAAGmB,EAAS,KAAK,EAAE,CAAC,CAC5C,EACAN,EAAqB,UAAU,kBAAoB,SAAUN,EAAM7Q,EAAM,CAGrE,QAFIwR,EAAS,KAAK,mBAAmBX,CAAI,EACrCa,EAAa,EACRrO,EAAM,EAAGa,EAAMsN,EAAO,OAAQnO,EAAMa,EAAKb,IAAO,CACrD,IAAIsO,EAAOH,EAAOnO,CAAG,EAAE,KACnBuO,GAASJ,EAAOnO,EAAM,CAAC,GAAK,CAAA,GAAI,KAChCwO,EAAa,KAAK,KAAK,uBAAuBF,EAAMC,CAAK,GAAK,EAClEF,GAAc,KAAK,aAAaC,CAAI,EAAIE,CAC5C,CACA,IAAIC,EAAQ9R,EAAO,IACnB,OAAO0R,EAAaI,CACxB,EACAX,EAAqB,UAAU,mBAAqB,SAAUnR,EAAM+R,EAAS,CACrEA,IAAY,SAAUA,EAAU,CAAA,GACpC,IAAI9S,EAAK8S,EAAQ,UAAWC,EAAY/S,IAAO,OAAS,GAAOA,EAC3DC,EAAK,KAAK,KAAM+S,EAAW/S,EAAG,SAAUgT,EAAYhT,EAAG,UAAWiT,EAAWjT,EAAG,SAChFkT,EAAOH,GAAYE,EAAS,CAAC,EAC7BE,EAAUH,GAAaC,EAAS,CAAC,EACjCnO,EAASoO,EAAOC,EACpB,OAAKL,IACDhO,GAAUkO,GAAa,GACnBlO,EAAS,IAAQhE,CAC7B,EACAmR,EAAqB,UAAU,mBAAqB,SAAUnN,EAAQ,CAClE,IAAI/E,EAAK,KAAK,KAAMgT,EAAWhT,EAAG,SAAUiT,EAAYjT,EAAG,UAAWkT,EAAWlT,EAAG,SAChFmT,EAAOH,GAAYE,EAAS,CAAC,EAC7BE,EAAUH,GAAaC,EAAS,CAAC,EACrC,MAAQ,KAAOnO,GAAWoO,EAAOC,EACrC,EACAlB,EAAqB,UAAU,iBAAmB,SAAUhO,EAAS3D,EAAK,CACtE,IAAI8S,EAAWnP,EAAQ,IAAI,CACvB,KAAM,OACN,QAAS,QACT,SAAU,KAAK,YAAc,KAAK,SAClC,SAAU,KAAK,WAAaoO,GAAU,QAAU,kBAAoB,MAChF,CAAS,EACD,OAAI/R,GACA2D,EAAQ,OAAO3D,EAAK8S,CAAQ,EACrB9S,GAGA2D,EAAQ,SAASmP,CAAQ,CAExC,EACAnB,EAAqB,UAAU,aAAe,SAAUoB,EAAW,CAE/D,OAAO,KAAK,KAAK,gBAAgBA,CAAS,GAAK,GACnD,EACApB,EAAqB,UAAU,mBAAqB,SAAUN,EAAM,CAGhE,QAFI2B,EAAa,MAAM,KAAK3B,CAAI,EAC5BW,EAAS,IAAI,MAAMgB,EAAW,MAAM,EAC/BnP,EAAM,EAAGa,EAAMsO,EAAW,OAAQnP,EAAMa,EAAKb,IAAO,CACzD,IAAIoP,EAAYC,GAAYF,EAAWnP,CAAG,CAAC,EAC3CmO,EAAOnO,CAAG,EAAI,KAAK,SAAS,uBAAuBoP,CAAS,CAChE,CACA,OAAOjB,CACX,EACAL,EAAqB,IAAM,SAAUC,EAAUC,EAAY,CACvD,OAAO,IAAIF,EAAqBC,EAAUC,CAAU,CACxD,EACOF,CACX,GAAC,ECzFUwB,GAAa,SAAUnB,EAAQoB,EAAS,CAE/C,QADIC,EAAU,IAAI,MAAMrB,EAAO,MAAM,EAC5BnO,EAAM,EAAGa,EAAMsN,EAAO,OAAQnO,EAAMa,EAAKb,IAAO,CACrD,IAAIyP,EAAQtB,EAAOnO,CAAG,EAClB0P,EAAKC,GAAcC,GAAcL,EAAQE,CAAK,CAAC,CAAC,EAChDI,EAAUF,GAAc,MAAM,OAAQF,EAAM,WAAW,IAAIK,EAAmB,CAAC,EACnFN,EAAQxP,CAAG,EAAI,CAAC0P,EAAIG,CAAO,CAC/B,CACA,OAAOE,GAAiBP,CAAO,CACnC,EAEIO,GAAmB,SAAUP,EAAS,CAAE,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAqQA,EAAQ,OAAS;AAAA,EAAmBA,EAAQ,IAAI,SAAU5T,EAAI,CAClX,IAAI2T,EAAU3T,EAAG,CAAC,EAAGwT,EAAYxT,EAAG,CAAC,EACrC,OAAO2T,EAAU,IAAMH,CAC3B,CAAC,EAAE,KAAK;AAAA,CAAI,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA,IAAiF,EAE7FO,GAAgB,UAAY,CAE5B,QADIK,EAAS,CAAA,EACJ9P,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpC8P,EAAO9P,CAAE,EAAI,UAAUA,CAAE,EAE7B,MAAO,IAAM8P,EAAO,KAAK,EAAE,EAAI,GACnC,EACIJ,GAAgB,SAAU/S,EAAO,CAAE,OAAOgR,GAAuBhR,EAAO,CAAC,CAAG,EAC5EiT,GAAsB,SAAUV,EAAW,CAC3C,GAAIa,GAAYb,CAAS,EACrB,OAAOQ,GAAcR,CAAS,EAClC,GAAIc,GAAcd,CAAS,EAAG,CAC1B,IAAIe,EAAKC,GAAchB,CAAS,EAC5BiB,EAAKC,GAAalB,CAAS,EAC/B,MAAO,GAAKQ,GAAcO,CAAE,EAAIP,GAAcS,CAAE,CACpD,CACA,IAAI5O,EAAMU,GAAYiN,CAAS,EAC3B/T,EAAM,KAAOoG,EAAM,6CACvB,MAAM,IAAI,MAAMpG,CAAG,CACvB,ECrCIkV,GAAgB,SAAU7B,EAAS,CACnC,IAAI8B,EAAQ,EACRC,EAAU,SAAUC,EAAK,CAAEF,GAAU,GAAME,EAAM,CAAK,EAC1D,OAAIhC,EAAQ,YACR+B,EAAQ,CAAC,EACT/B,EAAQ,OACR+B,EAAQ,CAAC,EAETA,EAAQ,CAAC,EACT/B,EAAQ,QACR+B,EAAQ,CAAC,EACT/B,EAAQ,aACR+B,EAAQ,CAAC,EACT/B,EAAQ,QACR+B,EAAQ,CAAC,EACT/B,EAAQ,QACR+B,EAAQ,EAAE,EACV/B,EAAQ,UACR+B,EAAQ,EAAE,EACV/B,EAAQ,WACR+B,EAAQ,EAAE,EACPD,CACX,EAEWG,GAAkB,SAAUC,EAAM,CACzC,IAAIC,EAAcD,EAAK,MAAM,EAAIA,EAAK,MAAM,EAAE,aAAe,EACzDJ,EAAQD,GAAc,CACtB,WAAYK,EAAK,KAAK,aACtB,MAAO,GAAKC,GAAeA,GAAe,EAE1C,OAAQA,IAAgB,GACxB,OAAQD,EAAK,KAAK,SAAS,MACnC,CAAK,EACD,OAAOJ,CACX,EC9BIM,GAA2B,SAAU9V,EAAQ,CAC7CC,EAAU6V,EAAW9V,CAAM,EAC3B,SAAS8V,EAAUjU,EAAO,CACtB,IAAIzB,EAAQJ,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAI,EAAM,MAAQyB,EACPzB,CACX,CACA,OAAA0V,EAAU,UAAU,QAAU,UAAY,CAStC,QARI1O,EAAQ,CAAA,EACR2O,EAAQ,GACR1O,EAAU,GACVC,EAAW,SAAUlE,EAAM,CACvBA,IAAS,QACTgE,EAAM,KAAKhE,CAAI,EACnBiE,EAAU,EACd,EACSrC,EAAM,EAAGa,EAAM,KAAK,MAAM,OAAQb,EAAMa,EAAKb,IAAO,CACzD,IAAIuC,EAAO,KAAK,MAAMvC,CAAG,EACrB5B,EAAO8D,GAAWK,CAAI,EACtBC,EAAW,KAAK,MAAMxC,EAAM,CAAC,EAC5BqC,EAOGjE,IAASS,EAAU,SAEdT,IAASS,EAAU,eADxByD,EAAQ,EAGHlE,IAASS,EAAU,EACxByD,EAASzD,EAAU,OAAO,EACrBT,IAASS,EAAU,EACxByD,EAASzD,EAAU,cAAc,EAC5BT,IAASS,EAAU,EACxByD,EAASzD,EAAU,GAAG,EACjBT,IAASS,EAAU,EACxByD,EAASzD,EAAU,SAAS,EACvBT,IAASS,EAAU,EACxByD,EAASzD,EAAU,QAAQ,EACtBT,IAASS,EAAU,UACxByD,EAASzD,EAAU,SAAS,EACvBT,IAASS,EAAU,WACxByD,EAASzD,EAAU,UAAU,EACxBT,IAASS,EAAU,UACxByD,EAASzD,EAAU,SAAS,EACvBT,GAAQS,EAAU,MAAQT,GAAQS,EAAU,OACjDkS,GAASxO,GACLwO,EAAM,SAAW,GAAK,EAAEvO,GAAY,KAAOA,GAAY,QACvDF,EAAS,SAASyO,EAAO,CAAC,CAAC,EAC3BA,EAAQ,KAIZzO,EAASlE,CAAI,EAlCbA,IAASS,EAAU,UACnBwD,EAAU,GAEVC,EAASlE,CAAI,CAkCzB,CACA,OAAO,IAAI,WAAWgE,CAAK,CAC/B,EACA0O,EAAU,UAAU,WAAa,UAAY,CACzC,IAAI1O,EAAQ,KAAK,QAAO,EACxB,OAAIiL,GAAYjL,CAAK,EACVkL,GAAYlL,CAAK,EACrBmL,GAAqBnL,CAAK,CACrC,EACA0O,EAAU,UAAU,WAAa,UAAY,CACzC,IAAItD,EAAO,KAAK,WAAU,EACtBC,EAAOC,GAAUF,CAAI,EACzB,GAAI,CAACC,EACD,MAAM,IAAI7Q,GAA0B4Q,CAAI,EAC5C,OAAOC,CACX,EACAqD,EAAU,UAAU,SAAW,UAAY,CACvC,OAAO,KAAK,KAChB,EACAA,EAAU,UAAU,MAAQ,UAAY,CACpC,OAAOA,EAAU,GAAG,KAAK,KAAK,CAClC,EACAA,EAAU,UAAU,SAAW,UAAY,CACvC,MAAO,IAAM,KAAK,MAAQ,GAC9B,EACAA,EAAU,UAAU,YAAc,UAAY,CAC1C,OAAO,KAAK,MAAM,OAAS,CAC/B,EACAA,EAAU,UAAU,cAAgB,SAAU3R,EAAQC,EAAQ,CAC1D,OAAAD,EAAOC,GAAQ,EAAIP,EAAU,UAC7BO,GAAUE,EAAqB,KAAK,MAAOH,EAAQC,CAAM,EACzDD,EAAOC,GAAQ,EAAIP,EAAU,WACtB,KAAK,MAAM,OAAS,CAC/B,EAIAiS,EAAU,GAAK,SAAUjU,EAAO,CAAE,OAAO,IAAIiU,EAAUjU,CAAK,CAAG,EAC/DiU,EAAU,SAAW,SAAUrD,EAAM,CACjC,IAAIuD,EAAOnI,EAAS,OAAO4E,EAAK,gBAAgB,EAAG,EAAG,GAAG,EACrDwD,EAAQpI,EAAS,OAAO4E,EAAK,YAAW,EAAK,CAAC,EAAG,EAAG,GAAG,EACvDyD,EAAMrI,EAAS,OAAO4E,EAAK,YAAY,EAAG,EAAG,GAAG,EAChD0D,EAAQtI,EAAS,OAAO4E,EAAK,aAAa,EAAG,EAAG,GAAG,EACnD2D,EAAOvI,EAAS,OAAO4E,EAAK,eAAe,EAAG,EAAG,GAAG,EACpD4D,EAAOxI,EAAS,OAAO4E,EAAK,eAAe,EAAG,EAAG,GAAG,EACxD,OAAO,IAAIqD,EAAU,KAAOE,EAAOC,EAAQC,EAAMC,EAAQC,EAAOC,EAAO,GAAG,CAC9E,EACOP,CACX,GAAEvR,CAAS,ECpGP+R,IAAoC,UAAY,CAChD,SAASA,EAAmBV,EAAMW,EAAUvD,EAAYwD,EAAc,CAClE,IAAIpW,EAAQ,KACZ,KAAK,0BAA4B,UAAY,CAEzC,QADI+S,EAAS,IAAI,MAAM/S,EAAM,KAAK,aAAa,MAAM,EAC5C4E,EAAM,EAAGa,EAAMsN,EAAO,OAAQnO,EAAMa,EAAKb,IAAO,CACrD,IAAIoP,EAAYhU,EAAM,KAAK,aAAa4E,CAAG,EAC3CmO,EAAOnO,CAAG,EAAI5E,EAAM,KAAK,kBAAkBgU,CAAS,CACxD,CACA,OAAOqC,GAAWtD,EAAO,KAAKuD,EAAa,EAAG,SAAUC,EAAG,CAAE,OAAOA,EAAE,EAAI,CAAC,CAC/E,EACA,KAAK,KAAOf,EACZ,KAAK,MAAQ,IAAO,KAAK,KAAK,WAC9B,KAAK,SAAWW,EAChB,KAAK,SAAW,KAAK,KAAK,gBAAkB,OAC5C,KAAK,WAAavD,EAClB,KAAK,aAAewD,EACpB,KAAK,aAAe,GACpB,KAAK,WAAalN,GAAM,YAAY,KAAK,yBAAyB,CACtE,CACA,OAAAgN,EAAmB,IAAM,SAAUM,EAASL,EAAUvD,EAAYwD,EAAc,CAC5E,OAAOpH,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIwG,EACJ,OAAOlG,EAAY,KAAM,SAAU9O,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GAAG,MAAO,CAAC,EAAagW,EAAQ,OAAOL,CAAQ,CAAC,EACrD,IAAK,GACD,OAAAX,EAAOhV,EAAG,KAAI,EACP,CAAC,EAAc,IAAI0V,EAAmBV,EAAMW,EAAUvD,EAAYwD,CAAY,CAAC,CAC9G,CACY,CAAC,CACL,CAAC,CACL,EAKAF,EAAmB,UAAU,WAAa,SAAU9D,EAAM,CAGtD,QAFIW,EAAS,KAAK,KAAK,OAAOX,EAAM,KAAK,YAAY,EAAE,OACnDY,EAAW,IAAI,MAAMD,EAAO,MAAM,EAC7BnO,EAAM,EAAGa,EAAMsN,EAAO,OAAQnO,EAAMa,EAAKb,IAC9CoO,EAASpO,CAAG,EAAI6N,GAAuBM,EAAOnO,CAAG,EAAE,GAAI,CAAC,EAE5D,OAAOiN,EAAa,GAAGmB,EAAS,KAAK,EAAE,CAAC,CAC5C,EAGAkD,EAAmB,UAAU,kBAAoB,SAAU9D,EAAM7Q,EAAM,CAGnE,QAFIwR,EAAS,KAAK,KAAK,OAAOX,EAAM,KAAK,YAAY,EAAE,OACnDa,EAAa,EACRrO,EAAM,EAAGa,EAAMsN,EAAO,OAAQnO,EAAMa,EAAKb,IAC9CqO,GAAcF,EAAOnO,CAAG,EAAE,aAAe,KAAK,MAElD,IAAIyO,EAAQ9R,EAAO,IACnB,OAAO0R,EAAaI,CACxB,EACA6C,EAAmB,UAAU,mBAAqB,SAAU3U,EAAM+R,EAAS,CACnEA,IAAY,SAAUA,EAAU,CAAA,GACpC,IAAI9S,EAAK8S,EAAQ,UAAWC,EAAY/S,IAAO,OAAS,GAAOA,EAC3DC,EAAK,KAAK,KAAMgW,EAAShW,EAAG,OAAQiW,EAAUjW,EAAG,QAASkW,EAAOlW,EAAG,KACpEkT,GAAQ8C,GAAUE,EAAK,MAAQ,KAAK,MACpC/C,GAAW8C,GAAWC,EAAK,MAAQ,KAAK,MACxCpR,EAASoO,EAAOC,EACpB,OAAKL,IACDhO,GAAU,KAAK,IAAImR,CAAO,GAAK,GAC3BnR,EAAS,IAAQhE,CAC7B,EACA2U,EAAmB,UAAU,mBAAqB,SAAU3Q,EAAQ,CAChE,IAAI/E,EAAK,KAAK,KAAMiW,EAASjW,EAAG,OAAQkW,EAAUlW,EAAG,QAASmW,EAAOnW,EAAG,KACpEmT,GAAQ8C,GAAUE,EAAK,MAAQ,KAAK,MACpC/C,GAAW8C,GAAWC,EAAK,MAAQ,KAAK,MAC5C,MAAQ,KAAOpR,GAAWoO,EAAOC,EACrC,EACAsC,EAAmB,UAAU,iBAAmB,SAAUxR,EAAS3D,EAAK,CACpE,YAAK,aACD,KAAK,YAAc2D,EAAQ,gBAAgB,KAAK,QAAQ,EACrD,KAAK,cAAcA,EAAS3D,CAAG,CAC1C,EACAmV,EAAmB,UAAU,cAAgB,SAAUxR,EAAS3D,EAAK,CACjE,OAAOiO,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAI4H,EAAgBC,EAAgBhD,EACpC,OAAOvE,EAAY,KAAM,SAAU9O,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GAAG,MAAO,CAAC,EAAa,KAAK,iBAAiBkE,CAAO,CAAC,EAC3D,IAAK,GAWD,OAVAkS,EAAiBpW,EAAG,KAAI,EACxBqW,EAAiB,KAAK,iBAAiBnS,CAAO,EAC9CmP,EAAWnP,EAAQ,IAAI,CACnB,KAAM,OACN,QAAS,QACT,SAAU,KAAK,aACf,SAAU,aACV,gBAAiB,CAACkS,CAAc,EAChC,UAAWC,CACvC,CAAyB,EACG9V,GACA2D,EAAQ,OAAO3D,EAAK8S,CAAQ,EACrB,CAAC,EAAc9S,CAAG,GAGlB,CAAC,EAAc2D,EAAQ,SAASmP,CAAQ,CAAC,CAG5E,CACY,CAAC,CACL,CAAC,CACL,EACAqC,EAAmB,UAAU,MAAQ,UAAY,CAC7C,OAAO,KAAK,KAAK,GACrB,EACAA,EAAmB,UAAU,iBAAmB,SAAUxR,EAAS,CAC/D,OAAOsK,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAI8H,EAAmBC,EACvB,OAAOzH,EAAY,KAAM,SAAU9O,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GAAG,MAAO,CAAC,EAAa,KAAK,oBAAoBkE,CAAO,CAAC,EAC9D,IAAK,GACD,OAAAoS,EAAoBtW,EAAG,KAAI,EAC3BuW,EAAcrS,EAAQ,IAAI,CACtB,KAAM,OACN,QAAS,KAAK,MAAK,EAAK,eAAiB,eACzC,YAAa,WACb,SAAU,KAAK,aACf,cAAe,CACX,SAAUgR,EAAU,GAAG,OAAO,EAC9B,SAAUA,EAAU,GAAG,UAAU,EACjC,WAAY,CAC5C,EAC4B,eAAgBoB,EAChB,EAAG,KAAK,cAAa,CACjD,CAAyB,EACM,CAAC,EAAcpS,EAAQ,SAASqS,CAAW,CAAC,CAC3E,CACY,CAAC,CACL,CAAC,CACL,EACAb,EAAmB,UAAU,oBAAsB,SAAUxR,EAAS,CAClE,OAAOsK,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIgI,EAAe3D,EAAO7S,EAAIyW,EAAaR,EAAQC,EAASQ,EAAWC,EAAS1W,EAAI2W,EAAMC,EAAMC,EAAMC,EAAMC,EACxGrW,EACJ,OAAOmO,EAAY,KAAM,SAAUmI,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GAAG,MAAO,CAAC,EAAa,KAAK,gBAAgB/S,CAAO,CAAC,EAC1D,IAAK,GACD,OAAAsS,EAAgBS,EAAG,KAAI,EACvBpE,EAAQ,KAAK,MACb7S,EAAK,KAAK,KAAMyW,EAAczW,EAAG,YAAaiW,EAASjW,EAAG,OAAQkW,EAAUlW,EAAG,QAAS0W,EAAY1W,EAAG,UAAW2W,EAAU3W,EAAG,QAC/HC,EAAK,KAAK,KAAK,KAAM2W,EAAO3W,EAAG,KAAM4W,EAAO5W,EAAG,KAAM6W,EAAO7W,EAAG,KAAM8W,EAAO9W,EAAG,KAC/E+W,EAAiB9S,EAAQ,KAAKvD,EAAK,CAC3B,KAAM,iBACN,SAAU,KAAK,aACf,MAAOoU,GAAgB,KAAK,IAAI,EAChC,SAAU,CAAC6B,EAAO/D,EAAOgE,EAAOhE,EAAOiE,EAAOjE,EAAOkE,EAAOlE,CAAK,EACjE,YAAa4D,EACb,OAAQR,EAASpD,EACjB,QAASqD,EAAUrD,EACnB,WAAY6D,GAAaT,GAAUpD,EACnC,SAAU8D,GAAW,GAAK9D,EAG1B,MAAO,CACvC,EAC4BlS,EAAG,KAAK,MAAK,EAAK,YAAc,WAAW,EAAI6V,EAC/C7V,EAAE,EACC,CAAC,EAAcuD,EAAQ,SAAS8S,CAAc,CAAC,CAC9E,CACY,CAAC,CACL,CAAC,CACL,EACAtB,EAAmB,UAAU,cAAgB,UAAY,CACrD,OAAOlH,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,OAAOM,EAAY,KAAM,SAAU9O,EAAI,CACnC,MAAO,CAAC,EAAc,KAAK,QAAQ,CACvC,CAAC,CACL,CAAC,CACL,EACA0V,EAAmB,UAAU,gBAAkB,SAAUxR,EAAS,CAC9D,OAAOsK,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAI0I,EAAYlX,EAAIC,EACpB,OAAO6O,EAAY,KAAM,SAAUnO,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GACD,OAAAV,GAAMD,EAAKkE,GAAS,YACb,CAAC,EAAa,KAAK,eAAe,EAC7C,IAAK,GACD,OAAAgT,EAAajX,EAAG,MAAMD,EAAI,CAACW,EAAG,OAAQ,CAC9B,QAAS,KAAK,MAAK,EAAK,gBAAkB,MAC1E,CAA6B,CAAC,EACC,CAAC,EAAcuD,EAAQ,SAASgT,CAAU,CAAC,CAC1E,CACY,CAAC,CACL,CAAC,CACL,EACAxB,EAAmB,UAAU,iBAAmB,SAAUxR,EAAS,CAC/D,IAAIiT,EAAOzD,GAAW,KAAK,WAAW,SAAU,KAAK,QAAQ,KAAK,IAAI,CAAC,EACnE0D,EAAalT,EAAQ,YAAYiT,CAAI,EACzC,OAAOjT,EAAQ,SAASkT,CAAU,CACtC,EACA1B,EAAmB,UAAU,QAAU,SAAU7B,EAAO,CACpD,OAAOA,EAAQA,EAAM,GAAK,EAC9B,EACA6B,EAAmB,UAAU,cAAgB,UAAY,CAIrD,QAHInD,EAAS,KAAK,WAAW,OAAM,EAC/B7C,EAAS,CAAA,EACT2H,EAAc,CAAA,EACTjT,EAAM,EAAGa,EAAMsN,EAAO,OAAQnO,EAAMa,EAAKb,IAAO,CACrD,IAAIkT,EAAY/E,EAAOnO,CAAG,EACtBmT,EAAYhF,EAAOnO,EAAM,CAAC,EAC1BoT,EAAc,KAAK,QAAQF,CAAS,EACpCG,EAAc,KAAK,QAAQF,CAAS,EACpCnT,IAAQ,EACRsL,EAAO,KAAK8H,CAAW,EAElBA,EAAcC,IAAgB,IACnC/H,EAAO,KAAK2H,CAAW,EACvB3H,EAAO,KAAK8H,CAAW,EACvBH,EAAc,CAAA,GAElBA,EAAY,KAAKC,EAAU,aAAe,KAAK,KAAK,CACxD,CACA,OAAA5H,EAAO,KAAK2H,CAAW,EAChB3H,CACX,EACOgG,CACX,GAAC,EClOGgC,IAA0C,SAAUtY,EAAQ,CAC5DC,EAAUqY,EAA0BtY,CAAM,EAC1C,SAASsY,EAAyB1C,EAAMW,EAAUgC,EAAgB/B,EAAc,CAC5E,IAAIpW,EAAQJ,EAAO,KAAK,KAAM4V,EAAMW,EAAUgC,EAAgB/B,CAAY,GAAK,KAC/E,OAAApW,EAAM,OAASA,EAAM,KAAK,aAAY,EACtCA,EAAM,OAAS,CAAA,EACfA,EAAM,WAAakJ,GAAM,YAAY,UAAY,CAAE,OAAOlJ,EAAM,MAAQ,CAAC,EACzEA,EAAM,WAAa,IAAI,IAChBA,CACX,CACA,OAAAkY,EAAyB,IAAM,SAAU1B,EAASL,EAAUgC,EAAgB/B,EAAc,CACtF,OAAOpH,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIwG,EACJ,OAAOlG,EAAY,KAAM,SAAU9O,EAAI,CACnC,OAAQA,EAAG,MAAK,CACZ,IAAK,GAAG,MAAO,CAAC,EAAagW,EAAQ,OAAOL,CAAQ,CAAC,EACrD,IAAK,GACD,OAAAX,EAAOhV,EAAG,KAAI,EACP,CAAC,EAAc,IAAI0X,EAAyB1C,EAAMW,EAAUgC,EAAgB/B,CAAY,CAAC,CACxH,CACY,CAAC,CACL,CAAC,CACL,EACA8B,EAAyB,UAAU,WAAa,SAAU9F,EAAM,CAG5D,QAFIW,EAAS,KAAK,KAAK,OAAOX,EAAM,KAAK,YAAY,EAAE,OACnDY,EAAW,IAAI,MAAMD,EAAO,MAAM,EAC7BnO,EAAM,EAAGa,EAAMsN,EAAO,OAAQnO,EAAMa,EAAKb,IAAO,CACrD,IAAIyP,EAAQtB,EAAOnO,CAAG,EAClBwT,EAAgB,KAAK,OAAO,aAAa/D,CAAK,EAClD,KAAK,OAAO+D,EAAgB,CAAC,EAAI/D,EACjC,KAAK,WAAW,IAAIA,EAAM,GAAI+D,CAAa,EAC3CpF,EAASpO,CAAG,EAAI6N,GAAuB2F,EAAe,CAAC,CAC3D,CACA,YAAK,WAAW,WAAU,EACnBvG,EAAa,GAAGmB,EAAS,KAAK,EAAE,CAAC,CAC5C,EACAkF,EAAyB,UAAU,MAAQ,UAAY,CACnD,OAAO,KAAK,OAAO,GACvB,EACAA,EAAyB,UAAU,QAAU,SAAU7D,EAAO,CAC1D,OAAOA,EAAQ,KAAK,WAAW,IAAIA,EAAM,EAAE,EAAI,EACnD,EACA6D,EAAyB,UAAU,cAAgB,UAAY,CAC3D,IAAIlY,EAAQ,KACZ,OAAO,IAAI,QAAQ,SAAUqY,EAASC,EAAQ,CAC1C,IAAIC,EAAQ,CAAA,EACZvY,EAAM,OACD,aAAY,EACZ,GAAG,OAAQ,SAAUgH,EAAO,CAAE,OAAOuR,EAAM,KAAKvR,CAAK,CAAG,CAAC,EACzD,GAAG,MAAO,UAAY,CAAE,OAAOqR,EAAQG,GAAiBD,CAAK,CAAC,CAAG,CAAC,EAClE,GAAG,QAAS,SAAUE,EAAK,CAAE,OAAOH,EAAOG,CAAG,CAAG,CAAC,CAC3D,CAAC,CACL,EACOP,CACX,GAAEhC,EAAkB,ECvDTwC,IACV,SAAUA,EAAgB,CACvBA,EAAe,OAAY,SAC3BA,EAAe,KAAU,OACzBA,EAAe,YAAiB,cAChCA,EAAe,WAAgB,aAC/BA,EAAe,iBAAsB,mBACrCA,EAAe,SAAc,mBAC7BA,EAAe,OAAY,SAC3BA,EAAe,YAAiB,aACpC,GAAGA,KAAmBA,GAAiB,CAAA,EAAG,EACvC,IAACC,IAA8B,UAAY,CAC1C,SAASA,EAAaC,EAAUC,EAAUvF,EAAS,CAC3CA,IAAY,SAAUA,EAAU,CAAA,GACpC,KAAK,SAAWsF,EAChB,KAAK,SAAWC,EAChB,KAAK,QAAUvF,CACnB,CACA,OAAAqF,EAAa,IAAM,SAAU3R,EAAO6R,EAAUvF,EAAS,CACnD,OAAIA,IAAY,SAAUA,EAAU,CAAA,GAC7B,IAAIqF,EAAa3R,EAAO6R,EAAUvF,CAAO,CACpD,EACAqF,EAAa,UAAU,iBAAmB,SAAUjU,EAAS3D,EAAK,CAC9D,OAAOiO,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIxO,EAAIsY,EAAUC,EAAaC,EAAcC,EAAkBC,EAAgBC,EAAoBC,EAAuBC,EAC1H,OAAO/J,EAAY,KAAM,SAAU7O,EAAI,CAwBnC,OAvBAD,EAAK,KAAK,QAASsY,EAAWtY,EAAG,SAAUuY,EAAcvY,EAAG,YAAawY,EAAexY,EAAG,aAAcyY,EAAmBzY,EAAG,iBAAkB0Y,EAAiB1Y,EAAG,eACrK2Y,EAAqBzU,EAAQ,YAAY,KAAK,SAAU,CACpD,KAAM,eACN,QAASoU,GAAa,KAA8BA,EAAW,OAC/D,OAAQ,CACJ,KAAM,KAAK,SAAS,OACpB,aAAcE,EACRtD,EAAU,SAASsD,CAAY,EAC/B,OACN,QAASC,EACHvD,EAAU,SAASuD,CAAgB,EACnC,MAC9B,CACA,CAAiB,EACDG,EAAwB1U,EAAQ,SAASyU,CAAkB,EAC3DE,EAAe3U,EAAQ,IAAI,CACvB,KAAM,WACN,EAAGgR,EAAU,GAAG,KAAK,QAAQ,EAC7B,GAAI7D,EAAa,SAAS,KAAK,QAAQ,EACvC,GAAI,CAAE,EAAGuH,CAAqB,EAC9B,KAAML,EAAclH,EAAa,SAASkH,CAAW,EAAI,OACzD,eAAgBG,GAAmB,KAAoCA,EAAiB,MAC5G,CAAiB,EACGnY,GACA2D,EAAQ,OAAO3D,EAAKsY,CAAY,EACzB,CAAC,EAActY,CAAG,GAGlB,CAAC,EAAc2D,EAAQ,SAAS2U,CAAY,CAAC,CAG5D,CAAC,CACL,CAAC,CACL,EACOV,CACX,GAAC,ECnEGW,GAAU,CACV,MAAQ,MAAQ,MAChB,MAAQ,MAAQ,MAChB,MAAQ,MAAQ,MAChB,MAAQ,MAAQ,MAChB,MAAQ,MAAQ,KACpB,EACIC,IACH,SAAUA,EAAY,CACnBA,EAAW,WAAgB,aAC3BA,EAAW,UAAe,YAC1BA,EAAW,WAAgB,YAC/B,GAAGA,KAAeA,GAAa,CAAA,EAAG,EAClC,IAAIC,GAAsB,CACtB,EAAGD,GAAW,WACd,EAAGA,GAAW,UACd,EAAGA,GAAW,UAClB,EAMIE,IAA8B,UAAY,CAC1C,SAASA,EAAaC,EAAWC,EAAkBrU,EAAOC,EAAQqU,EAAY,CAC1E,KAAK,UAAYF,EACjB,KAAK,iBAAmBC,EACxB,KAAK,MAAQrU,EACb,KAAK,OAASC,EACd,KAAK,WAAaqU,CACtB,CACA,OAAAH,EAAa,IAAM,SAAUC,EAAW,CACpC,OAAO1K,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAI6K,EAAUC,EAAKrX,EAAKsX,EAAQJ,EAAkBpU,EAAQD,EAAO0U,EAAaC,EAAaL,EAC3F,OAAOtK,EAAY,KAAM,SAAU9O,EAAI,CAGnC,GAFAqZ,EAAW,IAAI,SAASH,EAAU,MAAM,EACxCI,EAAMD,EAAS,UAAU,CAAC,EACtBC,IAAQ,MACR,MAAM,IAAI,MAAM,uBAAuB,EAE3C,IADArX,EAAM,EACCA,EAAMoX,EAAS,aAClBE,EAASF,EAAS,UAAUpX,CAAG,EAC/BA,GAAO,EACH,CAAA6W,GAAQ,SAASS,CAAM,IAE3BtX,GAAOoX,EAAS,UAAUpX,CAAG,EAEjC,GAAI,CAAC6W,GAAQ,SAASS,CAAM,EACxB,MAAM,IAAI,MAAM,cAAc,EASlC,GARAtX,GAAO,EACPkX,EAAmBE,EAAS,SAASpX,GAAK,EAC1C8C,EAASsU,EAAS,UAAUpX,CAAG,EAC/BA,GAAO,EACP6C,EAAQuU,EAAS,UAAUpX,CAAG,EAC9BA,GAAO,EACPuX,EAAcH,EAAS,SAASpX,GAAK,EACrCwX,EAAcT,GAAoBQ,CAAW,EACzC,CAACC,EACD,MAAM,IAAI,MAAM,uBAAuB,EAC3C,OAAAL,EAAaK,EACN,CAAC,EAAc,IAAIR,EAAaC,EAAWC,EAAkBrU,EAAOC,EAAQqU,CAAU,CAAC,CAClG,CAAC,CACL,CAAC,CACL,EACAH,EAAa,UAAU,iBAAmB,SAAU/U,EAAS3D,EAAK,CAC9D,OAAOiO,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIkL,EACJ,OAAO5K,EAAY,KAAM,SAAU9O,EAAI,CAqBnC,OApBA0Z,EAAUxV,EAAQ,OAAO,KAAK,UAAW,CACrC,KAAM,UACN,QAAS,QACT,iBAAkB,KAAK,iBACvB,MAAO,KAAK,MACZ,OAAQ,KAAK,OACb,WAAY,KAAK,WACjB,OAAQ,YASR,OAAQ,KAAK,aAAe6U,GAAW,WACjC,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EACvB,MAC1B,CAAiB,EACGxY,GACA2D,EAAQ,OAAO3D,EAAKmZ,CAAO,EACpB,CAAC,EAAcnZ,CAAG,GAGlB,CAAC,EAAc2D,EAAQ,SAASwV,CAAO,CAAC,CAGvD,CAAC,CACL,CAAC,CACL,EACOT,CACX,GAAC,EC/FGU,IAA6B,UAAY,CACzC,SAASA,EAAYC,EAAK,CACtB,KAAK,MAAQA,EACb,KAAK,iBAAmBA,EAAI,iBAC5B,KAAK,MAAQA,EAAI,MACjB,KAAK,OAASA,EAAI,OAClB,KAAK,WAAa,WACtB,CACA,OAAAD,EAAY,IAAM,SAAUT,EAAW,CACnC,OAAO1K,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIoL,EACJ,OAAO9K,EAAY,KAAM,SAAU9O,EAAI,CACnC,OAAA4Z,EAAMC,GAAI,KAAKX,CAAS,EACjB,CAAC,EAAc,IAAIS,EAAYC,CAAG,CAAC,CAC9C,CAAC,CACL,CAAC,CACL,EACAD,EAAY,UAAU,iBAAmB,SAAUzV,EAAS3D,EAAK,CAC7D,OAAOiO,EAAU,KAAM,OAAQ,OAAQ,UAAY,CAC/C,IAAIsL,EAAOJ,EACX,OAAO5K,EAAY,KAAM,SAAU9O,EAAI,CAWnC,OAVA8Z,EAAQ,KAAK,kBAAkB5V,CAAO,EACtCwV,EAAUxV,EAAQ,YAAY,KAAK,MAAM,WAAY,CACjD,KAAM,UACN,QAAS,QACT,iBAAkB,KAAK,MAAM,iBAC7B,MAAO,KAAK,MAAM,MAClB,OAAQ,KAAK,MAAM,OACnB,WAAY,KAAK,WACjB,MAAO4V,CAC3B,CAAiB,EACGvZ,GACA2D,EAAQ,OAAO3D,EAAKmZ,CAAO,EACpB,CAAC,EAAcnZ,CAAG,GAGlB,CAAC,EAAc2D,EAAQ,SAASwV,CAAO,CAAC,CAGvD,CAAC,CACL,CAAC,CACL,EACAC,EAAY,UAAU,kBAAoB,SAAUzV,EAAS,CACzD,GAAK,KAAK,MAAM,aAEhB,KAAIwV,EAAUxV,EAAQ,YAAY,KAAK,MAAM,aAAc,CACvD,KAAM,UACN,QAAS,QACT,OAAQ,KAAK,MAAM,OACnB,MAAO,KAAK,MAAM,MAClB,iBAAkB,KAAK,MAAM,iBAC7B,WAAY,aACZ,OAAQ,CAAC,EAAG,CAAC,CACzB,CAAS,EACD,OAAOA,EAAQ,SAASwV,CAAO,EACnC,EACOC,CACX,GAAC,ECzDGI,IAAwB,UAAY,CACpC,SAASA,EAAOxW,EAAQyW,EAAO3M,EAAQ,CACnC,KAAK,MAAQ9J,EACb,KAAK,MAAQyW,GAAS,EACtB,KAAK,IAAM,KAAK,MAChB,KAAK,IAAQA,GAAW3M,EAAS2M,EAAQ3M,EAAS,KAAK,MAAM,MACjE,CACA,cAAO,eAAe0M,EAAO,UAAW,SAAU,CAC9C,IAAK,UAAY,CACb,OAAO,KAAK,IAAM,KAAK,KAC3B,EACA,WAAY,GACZ,aAAc,EACtB,CAAK,EACD,OAAO,eAAeA,EAAO,UAAW,UAAW,CAC/C,IAAK,UAAY,CACb,OAAO,KAAK,SAAW,CAC3B,EACA,WAAY,GACZ,aAAc,EACtB,CAAK,EACDA,EAAO,UAAU,QAAU,UAAY,CACnC,OAAI,KAAK,KAAO,KAAK,IACV,GAEJ,KAAK,MAAM,KAAK,KAAK,CAChC,EACAA,EAAO,UAAU,UAAY,UAAY,CACrC,IAAIE,EAAK,KAAK,QAAO,EACjBC,EAAK,KAAK,QAAO,EACrB,OAAID,IAAO,IAAMC,IAAO,GACb,IAEHD,GAAM,GAAKC,CACvB,EACAH,EAAO,UAAU,SAAW,UAAY,CACpC,IAAIE,EAAK,KAAK,QAAO,EACjBC,EAAK,KAAK,QAAO,EACjBC,EAAK,KAAK,QAAO,EACjBC,EAAK,KAAK,QAAO,EACrB,OAAQH,GAAM,KAAOC,GAAM,KAAOC,GAAM,GAAKC,CACjD,EAEAL,EAAO,UAAU,SAAW,SAAU1M,EAAQgN,EAAc,CACpDA,IAAiB,SAAUA,EAAe,IAC9C,IAAI7T,EAAQ,KAAK,MACbvE,EAAM,KAAK,IACXqY,EAAS,KAAK,IAClB,GAAKjN,EAKA,CACD,IAAIkN,EAAMtY,EAAMoL,EACZkN,EAAMD,IACNC,EAAMD,GAEV,KAAK,IAAMC,EACX,IAAIC,EAAWhU,EAAM,SAASvE,EAAKsY,CAAG,EAEtC,OAAOF,EAAe,IAAI,kBAAkBG,CAAQ,EAAIA,CAC5D,KAda,CACT,IAAIA,EAAWhU,EAAM,SAASvE,EAAKqY,CAAM,EAEzC,OAAOD,EAAe,IAAI,kBAAkBG,CAAQ,EAAIA,CAC5D,CAWJ,EACAT,EAAO,UAAU,SAAW,UAAY,CACpC,IAAIU,EAAa,KAAK,QAAO,EAC7B,YAAK,MACEA,CACX,EACAV,EAAO,UAAU,UAAY,SAAU1M,EAAQgN,EAAc,CACrDA,IAAiB,SAAUA,EAAe,IAC9C,IAAI7T,EAAQ,KAAK,SAAS6G,EAAQgN,CAAY,EAC9C,YAAK,KAAO7T,EAAM,OACXA,CACX,EACAuT,EAAO,UAAU,KAAO,SAAUxL,EAAG,CAC5BA,IACDA,EAAI,GAER,KAAK,KAAOA,CAChB,EACAwL,EAAO,UAAU,MAAQ,UAAY,CACjC,KAAK,IAAM,KAAK,KACpB,EACAA,EAAO,UAAU,UAAY,UAAY,CACrC,KAAK,MAAQ,KAAK,GACtB,EACAA,EAAO,UAAU,cAAgB,SAAUC,EAAO3M,EAAQ,CACtD,OAAO,IAAI0M,EAAO,KAAK,MAAOC,EAAO3M,CAAM,CAC/C,EACA0M,EAAO,UAAU,OAAS,UAAY,CAClC,OAAO,KAAK,KAChB,EACOA,CACX,KCxFIW,GAAc,IAAI,WAAW,CAAC,EAI9BC,IAA8B,UAAY,CAC1C,SAASA,EAAaC,EAAsB,CAMxC,GALA,KAAK,IAAM,EACX,KAAK,aAAe,EACpB,KAAK,IAAM,GACX,KAAK,OAASF,GACd,KAAK,gBAAkB,IACnBE,EAEA,KAAO,KAAK,gBAAkBA,GAC1B,KAAK,iBAAmB,CAGpC,CACA,cAAO,eAAeD,EAAa,UAAW,UAAW,CACrD,IAAK,UAAY,CACb,KAAO,CAAC,KAAK,KAAO,KAAK,eAAiB,GACtC,KAAK,UAAS,EAElB,OAAO,KAAK,eAAiB,CACjC,EACA,WAAY,GACZ,aAAc,EACtB,CAAK,EACDA,EAAa,UAAU,QAAU,UAAY,CAEzC,QADI1Y,EAAM,KAAK,IACR,KAAK,cAAgBA,GAAK,CAC7B,GAAI,KAAK,IACL,MAAO,GAEX,KAAK,UAAS,CAClB,CACA,OAAO,KAAK,OAAO,KAAK,KAAK,CACjC,EACA0Y,EAAa,UAAU,UAAY,UAAY,CAC3C,IAAIV,EAAK,KAAK,QAAO,EACjBC,EAAK,KAAK,QAAO,EACrB,OAAID,IAAO,IAAMC,IAAO,GACb,IAEHD,GAAM,GAAKC,CACvB,EACAS,EAAa,UAAU,SAAW,UAAY,CAC1C,IAAIV,EAAK,KAAK,QAAO,EACjBC,EAAK,KAAK,QAAO,EACjBC,EAAK,KAAK,QAAO,EACjBC,EAAK,KAAK,QAAO,EACrB,OAAQH,GAAM,KAAOC,GAAM,KAAOC,GAAM,GAAKC,CACjD,EACAO,EAAa,UAAU,SAAW,SAAUtN,EAAQgN,EAAc,CAC1DA,IAAiB,SAAUA,EAAe,IAC9C,IAAIE,EACAtY,EAAM,KAAK,IACf,GAAIoL,EAAQ,CAGR,IAFA,KAAK,aAAapL,EAAMoL,CAAM,EAC9BkN,EAAMtY,EAAMoL,EACL,CAAC,KAAK,KAAO,KAAK,aAAekN,GACpC,KAAK,UAAS,EAElB,IAAIM,EAAS,KAAK,aACdN,EAAMM,IACNN,EAAMM,EAEd,KACK,CACD,KAAO,CAAC,KAAK,KACT,KAAK,UAAS,EAElBN,EAAM,KAAK,YACf,CACA,KAAK,IAAMA,EACX,IAAIC,EAAW,KAAK,OAAO,SAASvY,EAAKsY,CAAG,EAE5C,OAAOF,GAAgB,EAAEG,aAAoB,mBACvC,IAAI,kBAAkBA,CAAQ,EAC9BA,CACV,EACAG,EAAa,UAAU,SAAW,UAAY,CAC1C,IAAIF,EAAa,KAAK,QAAO,EAC7B,YAAK,MACEA,CACX,EACAE,EAAa,UAAU,UAAY,SAAUtN,EAAQgN,EAAc,CAC3DA,IAAiB,SAAUA,EAAe,IAC9C,IAAI7T,EAAQ,KAAK,SAAS6G,EAAQgN,CAAY,EAC9C,YAAK,KAAO7T,EAAM,OACXA,CACX,EACAmU,EAAa,UAAU,KAAO,SAAUpM,EAAG,CAClCA,IACDA,EAAI,GAER,KAAK,KAAOA,CAChB,EACAoM,EAAa,UAAU,MAAQ,UAAY,CACvC,KAAK,IAAM,CACf,EACAA,EAAa,UAAU,cAAgB,SAAUX,EAAO3M,EAAmB,CAEvE,QADIkN,EAAMP,EAAQ3M,EACX,KAAK,cAAgBkN,GAAO,CAAC,KAAK,KACrC,KAAK,UAAS,EAElB,OAAO,IAAIR,GAAO,KAAK,OAAQC,EAAO3M,CAAM,CAChD,EACAsN,EAAa,UAAU,OAAS,UAAY,CACxC,KAAO,CAAC,KAAK,KACT,KAAK,UAAS,EAClB,OAAO,KAAK,OAAO,SAAS,EAAG,KAAK,YAAY,CACpD,EACAA,EAAa,UAAU,UAAY,UAAY,CAC3C,MAAM,IAAIxb,EAA0B,KAAK,YAAY,KAAM,WAAW,CAC1E,EACAwb,EAAa,UAAU,aAAe,SAAUG,EAAW,CACvD,IAAIvX,EAAS,KAAK,OAClB,GAAIuX,GAAavX,EAAO,WACpB,OAAOA,EAGX,QADIxC,EAAO,KAAK,gBACTA,EAAO+Z,GACV/Z,GAAQ,EAEZ,IAAIga,EAAU,IAAI,WAAWha,CAAI,EACjC,OAAAga,EAAQ,IAAIxX,CAAM,EACV,KAAK,OAASwX,CAC1B,EACOJ,CACX,KCtIIK,GAAU,SAAUC,EAAI,CACxB,OAAOA,IAAO,IAAQA,IAAO,GAAQA,IAAO,IAAQA,IAAO,EAC/D,EACIC,IAA+B,SAAU9b,EAAQ,CACjDC,EAAU6b,EAAe9b,CAAM,EAC/B,SAAS8b,EAAcxa,EAAQya,EAAa,CACxC,IAAI3b,EAAQJ,EAAO,KAAK,KAAM+b,CAAW,GAAK,KAC9C,OAAA3b,EAAM,OAASkB,EACflB,EAAM,MAAQ,IAAI,WAAW,CAAC,EAG1B2b,IACAA,EAAc,GAAMA,GAEjB3b,CACX,CACA,OAAA0b,EAAc,UAAU,UAAY,UAAY,CAM5C,QALIE,EAAa,IACbC,EAAe,IACfC,EAAM,GACN5a,EAAS,KAAK,OACd6a,EAAI7a,EAAO,QAAO,EACfsa,GAAQO,CAAC,GACZA,EAAI7a,EAAO,QAAO,EAEtB,GAAI6a,IAAMD,GAAOC,IAAMH,EAAY,CAC/B,KAAK,IAAM,GACX,MACJ,CACA,IAAII,EAAe,KAAK,aACpBjY,EACAkY,EAEJ,GAAIF,IAAMF,EAAc,CAEpB,IADA9X,EAAS,KAAK,aAAaiY,EAAe,CAAC,EACtCC,EAAI,EAAGA,EAAI,EAAG,EAAEA,EACjBlY,EAAOiY,EAAeC,CAAC,EAAI,EAE/B,KAAK,cAAgB,CACzB,KACK,CACD,IAAIC,EAAQ,KAAK,MAEjB,IADAA,EAAM,CAAC,EAAIH,EACNE,EAAI,EAAGA,EAAI,EAAG,EAAEA,EAAG,CAEpB,IADAF,EAAI7a,EAAO,QAAO,EACXsa,GAAQO,CAAC,GACZA,EAAI7a,EAAO,QAAO,EAGtB,GADAgb,EAAMD,CAAC,EAAIF,EACPA,IAAMD,GAAOC,IAAMH,EACnB,KAER,CAIA,GAHA7X,EAAS,KAAK,aAAaiY,EAAeC,EAAI,CAAC,EAC/C,KAAK,cAAgBA,EAAI,EAErBA,EAAI,EAAG,CACP,KAAOA,EAAI,EAAG,EAAEA,EACZC,EAAMD,CAAC,EAAI,IAEf,KAAK,IAAM,EACf,CACA,IAAI1b,EAAI,EACR,IAAK0b,EAAI,EAAGA,EAAI,EAAG,EAAEA,EACjB1b,EAAIA,EAAI,IAAM2b,EAAMD,CAAC,EAAI,IAE7B,IAAKA,EAAI,EAAGA,GAAK,EAAG,EAAEA,EAClBlY,EAAOiY,EAAeC,CAAC,EAAI1b,EAAI,IAC/BA,IAAM,CAEd,CACJ,EACOmb,CACX,GAAEP,EAAY,ECzEVgB,IAAgC,SAAUvc,EAAQ,CAClDC,EAAUsc,EAAgBvc,CAAM,EAChC,SAASuc,EAAejb,EAAQya,EAAa,CACzC,IAAI3b,EAAQJ,EAAO,KAAK,KAAM+b,CAAW,GAAK,KAC9C,OAAA3b,EAAM,OAASkB,EACflB,EAAM,WAAa,GAGf2b,IACAA,EAAc,GAAMA,GAEjB3b,CACX,CACA,OAAAmc,EAAe,UAAU,UAAY,UAAY,CAC7C,IAAIC,EAAsB,IACtBpV,EAAQ,KAAK,OAAO,SAASoV,CAAmB,EACpD,GAAI,CAACpV,EAAM,OAAQ,CACf,KAAK,IAAM,GACX,MACJ,CAKA,QAJIqV,EAAmBrV,EAAM,OAAS,GAAM,EACxCjD,EAAS,KAAK,aAAa,KAAK,aAAesY,CAAe,EAC9DL,EAAe,KAAK,aACpBM,EAAa,KAAK,WACbL,EAAI,EAAGM,EAAKvV,EAAM,OAAQiV,EAAIM,EAAIN,IAAK,CAC5C,IAAIR,EAAKzU,EAAMiV,CAAC,EACZO,EAAQ,OACZ,GAAIf,GAAM,IAAQA,GAAM,GAEpBe,EAAQf,EAAK,WAEPA,GAAM,IAAQA,GAAM,IAAUA,GAAM,IAAQA,GAAM,IAExDe,GAASf,EAAK,IAAQ,UAEjBA,IAAO,GAAM,CAElB,KAAK,IAAM,GACX,KACJ,KAGI,UAEAa,EAAa,EACbA,EAAaE,GAGbzY,EAAOiY,GAAc,EAAKM,GAAc,EAAKE,EAC7CF,EAAa,GAErB,CACIA,GAAc,GAAK,KAAK,MAExBvY,EAAOiY,GAAc,EAAIM,GAAc,EACvCA,EAAa,IAEjB,KAAK,WAAaA,EAClB,KAAK,aAAeN,CACxB,EACOG,CACX,GAAEhB,EAAY,ECpDVsB,GAAiB,IAAI,WAAW,CAChC,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAClE,CAAC,EAEGC,GAAe,IAAI,WAAW,CAC9B,EAAS,EAAS,EAAS,EAAS,EAAS,EAAS,EAAS,GAC/D,MAAS,MAAS,MAAS,MAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,IAAS,IAAS,GAC1D,CAAC,EAEGC,GAAa,IAAI,WAAW,CAC5B,EAAS,EAAS,EAAS,EAAS,MAAS,MAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,MACjD,CAAC,EAEGC,GAAkB,CAAC,IAAI,WAAW,CAC9B,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,KAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAC/D,OAAS,OAAS,OAAS,OA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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81]}